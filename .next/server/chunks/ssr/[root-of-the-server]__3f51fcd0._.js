module.exports=[25691,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(10819).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/Developer/freelance/exim/exim/app/global-hs-code-list/Search.js <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Developer/freelance/exim/exim/app/global-hs-code-list/Search.js <module evaluation>","default")},15775,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(10819).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/Developer/freelance/exim/exim/app/global-hs-code-list/Search.js from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/Developer/freelance/exim/exim/app/global-hs-code-list/Search.js","default")},22900,a=>{"use strict";a.i(25691);var b=a.i(15775);a.n(b)},87769,(a,b,c)=>{b.exports=a.x("node:events",()=>require("node:events"))},10535,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),(e=d||(d={}))[e.key=0]="key",e[e.value=1]="value";let f=Object.freeze({key:{terminator:"=",quotes:{}},value:{terminator:";",quotes:{'"':'"',"'":"'","{":"}"}}});c.default=function(a,b=f){let c={},e=d.key,g=!1,h=!1,i=!1,j="",k="",l="",m=0;function n(){return e===d.key?b.key:b.value}function o(a){return n().terminator===a}function p(){switch(!i&&(k=k.trim()),e){case d.key:l=k.toLowerCase(),e=d.value;break;case d.value:e=d.key,c[l]=k,l=""}g=!1,h=!1,i=!1,j="",k=""}for(;m<a.length;){let b=a.charAt(m);if(h){if(o(b))p();else if(b.trim())throw Error("Malformed connection string")}else if(g)i&&i&&b===n().quotes[j]?b===a.charAt(m+1)?(k+=b,m++):h=!0:!i&&o(b)?b===a.charAt(m+1)?(k+=b,m++):p():k+=b;else b.trim()&&((g=!0,function(a){return Object.keys(n().quotes).some(b=>a===b)}(b))?(i=!0,j=b):k+=b);m++}if(i&&!h)throw Error("Connection string terminated unexpectedly");return p(),c}},46319,(a,b,c)=>{"use strict";var d,e,f=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.SCHEMA=c.SchemaTypes=void 0;let g=f(a.r(10535));function h(a,b,c){if(c){let b=c(a);if(null!==b)return b}switch(b){case e.BOOL:if(["true","yes","1"].includes(a.toLowerCase()))return!0;if(["false","no","0"].includes(a.toLowerCase()))return!1;break;case e.NUMBER:return parseInt(a,10)}return a}(d=e=c.SchemaTypes||(c.SchemaTypes={}))[d.BOOL=0]="BOOL",d[d.STRING=1]="STRING",d[d.NUMBER=2]="NUMBER",c.SCHEMA={"Application Name":{type:e.STRING,aliases:["App"],validator:a=>"string"==typeof a&&a.length<=128},ApplicationIntent:{type:e.STRING,allowedValues:["ReadOnly","ReadWrite"],default:"ReadWrite"},"Asynchronous Processing":{type:e.BOOL,default:!1,aliases:["Async"]},AttachDBFilename:{type:e.STRING,aliases:["Extended Properties","Initial File Name"]},Authentication:{type:e.STRING,allowedValues:["Active Directory Default","Active Directory Device Code Flow","Active Directory Integrated","Active Directory Interactive","Active Directory Managed Identity","Active Directory Password","Active Directory Service Principal","SQL Password"]},"Column Encryption Setting":{type:e.STRING},"Connection Timeout":{type:e.NUMBER,aliases:["Connect Timeout","Timeout"],default:15},"Connection Lifetime":{type:e.NUMBER,aliases:["Load Balance Timeout"],default:0},ConnectRetryCount:{type:e.NUMBER,default:1,validator:a=>a>0&&a<=255},ConnectRetryInterval:{type:e.NUMBER,default:10},"Context Connection":{type:e.BOOL,default:!1},"Current Language":{aliases:["Language"],type:e.STRING,validator:a=>"string"==typeof a&&a.length<=128},"Data Source":{aliases:["Addr","Address","Server","Network Address"],type:e.STRING},Encrypt:{type:e.BOOL,default:!1},Enlist:{type:e.BOOL,default:!0},"Failover Partner":{type:e.STRING},"Initial Catalog":{type:e.STRING,aliases:["Database"],validator:a=>"string"==typeof a&&a.length<=128},"Integrated Security":{type:e.BOOL,aliases:["Trusted_Connection"],coerce:a=>"sspi"===a||null},"Max Pool Size":{type:e.NUMBER,default:100,validator:a=>a>=1},"Min Pool Size":{type:e.NUMBER,default:0,validator:a=>a>=0},MultipleActiveResultSets:{type:e.BOOL,default:!1},MultiSubnetFailover:{type:e.BOOL,default:!1},"Network Library":{type:e.STRING,aliases:["Network","Net"],allowedValues:["dbnmpntw","dbmsrpcn","dbmsadsn","dbmsgnet","dbmslpcn","dbmsspxn","dbmssocn","Dbmsvinn"]},"Packet Size":{type:e.NUMBER,default:8e3,validator:a=>a>=512&&a<=32768},Password:{type:e.STRING,aliases:["PWD"],validator:a=>"string"==typeof a&&a.length<=128},"Persist Security Info":{type:e.BOOL,aliases:["PersistSecurityInfo"],default:!1},PoolBlockingPeriod:{type:e.NUMBER,default:0,coerce(a){if("string"!=typeof a)return null;switch(a.toLowerCase()){case"alwaysblock":return 1;case"auto":return 0;case"neverblock":return 2}return null}},Pooling:{type:e.BOOL,default:!0},Replication:{type:e.BOOL,default:!1},"Transaction Binding":{type:e.STRING,allowedValues:["Implicit Unbind","Explicit Unbind"],default:"Implicit Unbind"},TransparentNetworkIPResolution:{type:e.BOOL,default:!0},TrustServerCertificate:{type:e.BOOL,default:!1},"Type System Version":{type:e.STRING,allowedValues:["SQL Server 2012","SQL Server 2008","SQL Server 2005","Latest"]},"User ID":{type:e.STRING,aliases:["UID"],validator:a=>"string"==typeof a&&a.length<=128},"User Instance":{type:e.BOOL,default:!1},"Workstation ID":{type:e.STRING,aliases:["WSID"],validator:a=>"string"==typeof a&&a.length<=128}},c.default=function(a,b=!1,d=!1,f=!1,i=c.SCHEMA){let j=Object.entries(i).reduce((a,[b,c])=>{var d;return Object.assign(a,{[b.toLowerCase()]:c}),(null==(d=c.aliases)?void 0:d.reduce((a,d)=>Object.assign(a,{[d.toLowerCase()]:{...c,canonical:b.toLowerCase()}}),a))||a},{});return Object.entries((0,g.default)(a)).reduce((a,[c,d])=>{var g,i,k;let l;if(!Object.prototype.hasOwnProperty.call(j,c))return Object.assign(a,{[c]:h(d,function(a){if(""===a.trim())return e.STRING;let b=parseInt(a,10);return Number.isNaN(b)||b.toString()!==a?["true","false","yes","no"].includes(a.toLowerCase())?e.BOOL:e.STRING:e.NUMBER}(d))});let m=h(d,j[c].type,j[c].coerce);return f&&(g=m,i=j[c].allowedValues,k=j[c].validator,l=!0,k&&(l=k(g)),l&&(l=(null==i?void 0:i.includes(g))||!1),!l)&&(m=j[c].default),Object.assign(a,{[b&&j[c].canonical||c]:m})},{})}},99767,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.buildConnectionString=void 0,c.buildConnectionString=function(a){return Object.entries(a).map(([a,b])=>(function(a,b){if(null==b)return[a,""];if("boolean"==typeof b)return[a,b?"Yes":"No"];{var c;let d=b.toString();return!function(a){if("{"!==a[0])return!1;for(let b=1;b<a.length;b++)if("}"===a[b])if(b+1===a.length)return!0;else{if("}"!==a[b+1])return!1;b++}return!1}(d)&&(null==(c=d.match(/\[|]|{|}|\|\(|\)|,|;|\?|\*|=|!|@/))?void 0:c.length)?[a,`{${d.replace(/}/g,"}}")}}`]:[a,d]}})(a.trim(),b).join("=")).join(";")}},7180,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)},f=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.parseSqlConnectionString=c.parseConnectionString=void 0,c.parseConnectionString=f(a.r(10535)).default,c.parseSqlConnectionString=f(a.r(46319)).default,e(a.r(99767),c)},65753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TimeoutError=class extends Error{}},28042,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PromiseInspection=class{constructor(a){this._value=a.value,this._error=a.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}},37187,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(28042);function e(a){return"number"==typeof a&&a===Math.round(a)&&a>0}c.defer=function(){let a=null,b=null;return{promise:new Promise((c,d)=>{a=c,b=d}),resolve:a,reject:b}},c.now=function(){return Date.now()},c.duration=function(a,b){return Math.abs(b-a)},c.checkOptionalTime=function(a){return void 0===a||e(a)},c.checkRequiredTime=e,c.delay=function(a){return new Promise(b=>setTimeout(b,a))},c.reflect=function(a){return a.then(a=>new d.PromiseInspection({value:a})).catch(a=>new d.PromiseInspection({error:a}))},c.tryPromise=function(a){try{let b=a();return Promise.resolve(b)}catch(a){return Promise.reject(a)}}},37077,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(65753),e=a.r(37187);c.PendingOperation=class{constructor(a){var b,c;this.timeoutMillis=a,this.deferred=e.defer(),this.possibleTimeoutCause=null,this.isRejected=!1,this.promise=(b=this.deferred.promise,c=a,new Promise((a,e)=>{let f=setTimeout(()=>e(new d.TimeoutError),c);b.then(b=>{clearTimeout(f),a(b)}).catch(a=>{clearTimeout(f),e(a)})})).catch(a=>(a instanceof d.TimeoutError&&(a=new d.TimeoutError(this.possibleTimeoutCause?this.possibleTimeoutCause.message:"operation timed out for an unknown reason")),this.isRejected=!0,Promise.reject(a)))}abort(){this.reject(Error("aborted"))}reject(a){this.deferred.reject(a)}resolve(a){this.deferred.resolve(a)}}},17149,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(37187);class e{constructor(a){this.resource=a,this.resource=a,this.timestamp=d.now(),this.deferred=d.defer()}get promise(){return this.deferred.promise}resolve(){return this.deferred.resolve(void 0),new e(this.resource)}}c.Resource=e},37464,(a,b,c)=>{b.exports=a.x("timers",()=>require("timers"))},11471,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(37077),e=a.r(17149),f=a.r(37187),g=a.r(27699),h=a.r(37464);function i(a,b){let c=a.indexOf(b);return -1!==c&&(a.splice(c,1),!0)}c.Pool=class{constructor(a){if(this.destroyed=!1,this.emitter=new g.EventEmitter,!(a=a||{}).create)throw Error("Tarn: opt.create function most be provided");if(!a.destroy)throw Error("Tarn: opt.destroy function most be provided");if("number"!=typeof a.min||a.min<0||a.min!==Math.round(a.min))throw Error("Tarn: opt.min must be an integer >= 0");if("number"!=typeof a.max||a.max<=0||a.max!==Math.round(a.max))throw Error("Tarn: opt.max must be an integer > 0");if(a.min>a.max)throw Error("Tarn: opt.max is smaller than opt.min");if(!f.checkOptionalTime(a.acquireTimeoutMillis))throw Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(a.acquireTimeoutMillis));if(!f.checkOptionalTime(a.createTimeoutMillis))throw Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(a.createTimeoutMillis));if(!f.checkOptionalTime(a.destroyTimeoutMillis))throw Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(a.destroyTimeoutMillis));if(!f.checkOptionalTime(a.idleTimeoutMillis))throw Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(a.idleTimeoutMillis));if(!f.checkOptionalTime(a.reapIntervalMillis))throw Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(a.reapIntervalMillis));if(!f.checkOptionalTime(a.createRetryIntervalMillis))throw Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(a.createRetryIntervalMillis));const b={create:!0,validate:!0,destroy:!0,log:!0,min:!0,max:!0,acquireTimeoutMillis:!0,createTimeoutMillis:!0,destroyTimeoutMillis:!0,idleTimeoutMillis:!0,reapIntervalMillis:!0,createRetryIntervalMillis:!0,propagateCreateError:!0};for(const c of Object.keys(a))if(!b[c])throw Error(`Tarn: unsupported option opt.${c}`);this.creator=a.create,this.destroyer=a.destroy,this.validate="function"==typeof a.validate?a.validate:()=>!0,this.log=a.log||(()=>{}),this.acquireTimeoutMillis=a.acquireTimeoutMillis||3e4,this.createTimeoutMillis=a.createTimeoutMillis||3e4,this.destroyTimeoutMillis=a.destroyTimeoutMillis||5e3,this.idleTimeoutMillis=a.idleTimeoutMillis||3e4,this.reapIntervalMillis=a.reapIntervalMillis||1e3,this.createRetryIntervalMillis=a.createRetryIntervalMillis||200,this.propagateCreateError=!!a.propagateCreateError,this.min=a.min,this.max=a.max,this.used=[],this.free=[],this.pendingCreates=[],this.pendingAcquires=[],this.pendingDestroys=[],this.pendingValidations=[],this.destroyed=!1,this.interval=null,this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){let a=this.eventId++;this._executeEventHandlers("acquireRequest",a);let b=new d.PendingOperation(this.acquireTimeoutMillis);return this.pendingAcquires.push(b),b.promise=b.promise.then(b=>(this._executeEventHandlers("acquireSuccess",a,b),b)).catch(c=>(this._executeEventHandlers("acquireFail",a,c),i(this.pendingAcquires,b),Promise.reject(c))),this._tryAcquireOrCreate(),b}release(a){this._executeEventHandlers("release",a);for(let b=0,c=this.used.length;b<c;++b){let c=this.used[b];if(c.resource===a)return this.used.splice(b,1),this.free.push(c.resolve()),this._tryAcquireOrCreate(),!0}return!1}isEmpty(){return 0===[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce((a,b)=>a+b)}check(){let a=f.now(),b=[],c=this.min-this.used.length,d=this.free.length-c,e=0;this.free.forEach(c=>{f.duration(a,c.timestamp)>=this.idleTimeoutMillis&&e<d?(e++,this._destroy(c.resource)):b.push(c)}),this.free=b,this.isEmpty()&&this._stopReaping()}destroy(){let a=this.eventId++;return this._executeEventHandlers("poolDestroyRequest",a),this._stopReaping(),this.destroyed=!0,f.reflect(Promise.all(this.pendingCreates.map(a=>f.reflect(a.promise))).then(()=>new Promise((a,b)=>{if(0===this.numPendingValidations())return void a();let c=setInterval(()=>{0===this.numPendingValidations()&&(h.clearInterval(c),a())},100)})).then(()=>Promise.all(this.used.map(a=>f.reflect(a.promise)))).then(()=>Promise.all(this.pendingAcquires.map(a=>(a.abort(),f.reflect(a.promise))))).then(()=>Promise.all(this.free.map(a=>f.reflect(this._destroy(a.resource))))).then(()=>Promise.all(this.pendingDestroys.map(a=>a.promise))).then(()=>{this.free=[],this.pendingAcquires=[]})).then(b=>(this._executeEventHandlers("poolDestroySuccess",a),this.emitter.removeAllListeners(),b))}on(a,b){this.emitter.on(a,b)}removeListener(a,b){this.emitter.removeListener(a,b)}removeAllListeners(a){this.emitter.removeAllListeners(a)}_tryAcquireOrCreate(){!this.destroyed&&(this._hasFreeResources()?this._doAcquire():this._shouldCreateMoreResources()&&this._doCreate())}_hasFreeResources(){return this.free.length>0}_doAcquire(){for(;this._canAcquire();){let a=this.pendingAcquires.shift(),b=this.free.pop();if(void 0===b||void 0===a){let a="this.free was empty while trying to acquire resource";throw this.log(`Tarn: ${a}`,"warn"),Error(`Internal error, should never happen. ${a}`)}this.pendingValidations.push(a),this.used.push(b);let c=new d.PendingOperation(this.acquireTimeoutMillis);a.promise.catch(a=>{c.abort()}),c.promise.catch(a=>(this.log("Tarn: resource validator threw an exception "+a.stack,"warn"),!1)).then(c=>{try{c&&!a.isRejected?(this._startReaping(),a.resolve(b.resource)):(i(this.used,b),c?this.free.push(b):(this._destroy(b.resource),setTimeout(()=>{this._tryAcquireOrCreate()},0)),a.isRejected||this.pendingAcquires.unshift(a))}finally{i(this.pendingValidations,a)}}),this._validateResource(b.resource).then(a=>{c.resolve(a)}).catch(a=>{c.reject(a)})}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource(a){try{return Promise.resolve(this.validate(a))}catch(a){return Promise.reject(a)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){let a=this.pendingAcquires.slice();this._create().promise.then(()=>(this._tryAcquireOrCreate(),null)).catch(b=>{this.propagateCreateError&&0!==this.pendingAcquires.length&&this.pendingAcquires[0].reject(b),a.forEach(a=>{a.possibleTimeoutCause=b}),f.delay(this.createRetryIntervalMillis).then(()=>this._tryAcquireOrCreate())})}_create(){var a;let b=this.eventId++;this._executeEventHandlers("createRequest",b);let c=new d.PendingOperation(this.createTimeoutMillis);return c.promise=c.promise.catch(a=>{throw i(this.pendingCreates,c)&&this._executeEventHandlers("createFail",b,a),a}),this.pendingCreates.push(c),(a=this.creator,new Promise((b,c)=>{let d=(a,d)=>{a?c(a):b(d)};f.tryPromise(()=>a(d)).then(a=>{a&&b(a)}).catch(a=>{c(a)})})).then(a=>(c.isRejected?this.destroyer(a):(i(this.pendingCreates,c),this.free.push(new e.Resource(a)),c.resolve(a),this._executeEventHandlers("createSuccess",b,a)),null)).catch(a=>(c.isRejected||(i(this.pendingCreates,c)&&this._executeEventHandlers("createFail",b,a),c.reject(a)),null)),c}_destroy(a){let b=this.eventId++;this._executeEventHandlers("destroyRequest",b,a);let c=new d.PendingOperation(this.destroyTimeoutMillis);return Promise.resolve().then(()=>this.destroyer(a)).then(()=>{c.resolve(a)}).catch(a=>{c.reject(a)}),this.pendingDestroys.push(c),c.promise.then(c=>(this._executeEventHandlers("destroySuccess",b,a),c)).catch(c=>this._logDestroyerError(b,a,c)).then(a=>{let b=this.pendingDestroys.findIndex(a=>a===c);return this.pendingDestroys.splice(b,1),a})}_logDestroyerError(a,b,c){this._executeEventHandlers("destroyFail",a,b,c),this.log("Tarn: resource destroyer threw an exception "+c.stack,"warn")}_startReaping(){this.interval||(this._executeEventHandlers("startReaping"),this.interval=setInterval(()=>this.check(),this.reapIntervalMillis))}_stopReaping(){null!==this.interval&&(this._executeEventHandlers("stopReaping"),h.clearInterval(this.interval)),this.interval=null}_executeEventHandlers(a,...b){this.emitter.listeners(a).forEach(c=>{try{c(...b)}catch(b){this.log(`Tarn: event handler "${a}" threw an exception ${b.stack}`,"warn")}})}}},79799,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(11471);c.Pool=d.Pool;let e=a.r(65753);c.TimeoutError=e.TimeoutError,b.exports={Pool:d.Pool,TimeoutError:e.TimeoutError}},85319,(a,b,c)=>{"use strict";let d=new WeakMap,e={Connection:1,ConnectionPool:1,Request:1,Transaction:1,PreparedStatement:1};b.exports={objectHasProperty:(a,b)=>Object.prototype.hasOwnProperty.call(a,b),INCREMENT:e,IDS:{get:d.get.bind(d),add:(a,b,c)=>{if(c)return d.set(a,c);d.set(a,e[b]++)}}}},32582,(a,b,c)=>{"use strict";b.exports=class extends Error{constructor(a,b){a instanceof Error?(super(a.message),this.code=a.code||b,Error.captureStackTrace(this,this.constructor),Object.defineProperty(this,"originalError",{enumerable:!0,value:a})):(super(a),this.code=b),this.name="MSSQLError"}}},95664,(a,b,c)=>{"use strict";let d=a.r(32582);b.exports=class extends d{constructor(a,b){super(a,b),this.name="ConnectionError";let c=a?.details;c instanceof Array&&(c=c.at(-1))&&(this.message=c.message,this.originalError=c)}}},61949,(a,b,c)=>{"use strict";let d=a.r(85319).objectHasProperty,e=Symbol.for("nodejs.util.inspect.custom"),f={VarChar:a=>({type:f.VarChar,length:a}),NVarChar:a=>({type:f.NVarChar,length:a}),Text:()=>({type:f.Text}),Int:()=>({type:f.Int}),BigInt:()=>({type:f.BigInt}),TinyInt:()=>({type:f.TinyInt}),SmallInt:()=>({type:f.SmallInt}),Bit:()=>({type:f.Bit}),Float:()=>({type:f.Float}),Numeric:(a,b)=>({type:f.Numeric,precision:a,scale:b}),Decimal:(a,b)=>({type:f.Decimal,precision:a,scale:b}),Real:()=>({type:f.Real}),Date:()=>({type:f.Date}),DateTime:()=>({type:f.DateTime}),DateTime2:a=>({type:f.DateTime2,scale:a}),DateTimeOffset:a=>({type:f.DateTimeOffset,scale:a}),SmallDateTime:()=>({type:f.SmallDateTime}),Time:a=>({type:f.Time,scale:a}),UniqueIdentifier:()=>({type:f.UniqueIdentifier}),SmallMoney:()=>({type:f.SmallMoney}),Money:()=>({type:f.Money}),Binary:a=>({type:f.Binary,length:a}),VarBinary:a=>({type:f.VarBinary,length:a}),Image:()=>({type:f.Image}),Xml:()=>({type:f.Xml}),Char:a=>({type:f.Char,length:a}),NChar:a=>({type:f.NChar,length:a}),NText:()=>({type:f.NText}),TVP:a=>({type:f.TVP,tvpType:a}),UDT:()=>({type:f.UDT}),Geography:()=>({type:f.Geography}),Geometry:()=>({type:f.Geometry}),Variant:()=>({type:f.Variant})};b.exports.TYPES=f,b.exports.DECLARATIONS={};let g=function(a,b){if(null==b&&(b=2),(a=String(a)).length<b)for(let c=1;c<=b-a.length;c++)a=`0${a}`;return a};for(let a in f)if(d(f,a)){let c=f[a];c.declaration=a.toLowerCase(),b.exports.DECLARATIONS[c.declaration]=c,((a,b)=>{b[e]=()=>`[sql.${a}]`})(a,c)}b.exports.declare=(a,b)=>{switch(a){case f.VarChar:case f.VarBinary:return`${a.declaration} (${b.length>8e3||null==b.length?"MAX":b.length})`;case f.NVarChar:return`${a.declaration} (${b.length>4e3||null==b.length?"MAX":b.length})`;case f.Char:case f.NChar:case f.Binary:return`${a.declaration} (${null==b.length?1:b.length})`;case f.Decimal:case f.Numeric:return`${a.declaration} (${null==b.precision?18:b.precision}, ${null==b.scale?0:b.scale})`;case f.Time:case f.DateTime2:case f.DateTimeOffset:return`${a.declaration} (${null==b.scale?7:b.scale})`;case f.TVP:return`${b.tvpType} readonly`;default:return a.declaration}},b.exports.cast=(a,b,c)=>{if(null==a)return null;switch(typeof a){case"string":return`N'${a.replace(/'/g,"''")}'`;case"number":case"bigint":return a;case"boolean":return+!!a;case"object":if(a instanceof Date){let b=a.getUTCMilliseconds()/1e3;null!=a.nanosecondDelta&&(b+=a.nanosecondDelta);let d=null==c.scale?7:c.scale;return b=d>0?String(b).substr(1,d+1):"",`N'${a.getUTCFullYear()}-${g(a.getUTCMonth()+1)}-${g(a.getUTCDate())} ${g(a.getUTCHours())}:${g(a.getUTCMinutes())}:${g(a.getUTCSeconds())}${b}'`}if(Buffer.isBuffer(a))return`0x${a.toString("hex")}`;return null;default:return null}}},31984,(a,b,c)=>{"use strict";let d=a.r(61949).TYPES,e=a.r(61949).declare,f=a.r(85319).objectHasProperty;function g(a){if(a){let b=g.parseName(a);this.name=b.name,this.schema=b.schema,this.database=b.database,this.path=(this.database?`[${this.database}].`:"")+(this.schema?`[${this.schema}].`:"")+`[${this.name}]`,this.temporary="#"===this.name.charAt(0)}this.columns=[],this.rows=[],Object.defineProperty(this.columns,"add",{value(a,b,c){if(null==b)throw Error("Column data type is not defined.");return b instanceof Function&&(b=b()),c=c||{},b.name=a,["nullable","primary","identity","readOnly","length"].forEach(a=>{f(c,a)&&(b[a]=c[a])}),this.push(b)}}),Object.defineProperty(this.rows,"add",{value(){return this.push(Array.prototype.slice.call(arguments))}}),Object.defineProperty(this.rows,"clear",{value(){return this.splice(0,this.length)}})}g.prototype._makeBulk=function(){for(let a=0;a<this.columns.length;a++){let b=this.columns[a];switch(b.type){case d.Date:case d.DateTime:case d.DateTime2:for(let b=0;b<this.rows.length;b++){let c=this.rows[b][a];if("string"==typeof c||"number"==typeof c){let d=new Date(c);if(isNaN(d.getDate()))throw TypeError("Invalid date value passed to bulk rows");this.rows[b][a]=d}}break;case d.Xml:b.type=d.NVarChar(65535).type;break;case d.UDT:case d.Geography:case d.Geometry:b.type=d.VarBinary(65535).type}}return this},g.prototype.declare=function(){let a=this.columns.filter(a=>!0===a.primary).map(a=>`[${a.name}]`),b=this.columns.map(b=>{let c=[`[${b.name}] ${e(b.type,b)}`];return!0===b.nullable?c.push("null"):!1===b.nullable&&c.push("not null"),!0===b.primary&&1===a.length&&c.push("primary key"),c.join(" ")}),c=a.length>1?`, constraint [PK_${this.temporary?this.name.substr(1):this.name}] primary key (${a.join(", ")})`:"";return`create table ${this.path} (${b.join(", ")}${c})`},g.fromRecordset=function(a,b){let c=new this(b);for(let b in a.columns)if(f(a.columns,b)){let d=a.columns[b];c.columns.add(b,{type:d.type,length:d.length,scale:d.scale,precision:d.precision},{nullable:d.nullable,identity:d.identity,readOnly:d.readOnly})}if(1===c.columns.length&&"JSON_F52E2B61-18A1-11d1-B105-00805F49916B"===c.columns[0].name)for(let b=0;b<a.length;b++)c.rows.add(JSON.stringify(a[b]));else for(let b=0;b<a.length;b++)c.rows.add.apply(c.rows,c.columns.map(c=>a[b][c.name]));return c},g.parseName=function(a){let b=a.length,c=-1,d="",e=!1,f=[];for(;++c<b;){let b=a.charAt(c);if("["===b)e?d+=b:e=!0;else if("]"===b)if(e)e=!1;else throw Error("Invalid table name.");else"."===b?e?d+=b:(f.push(d),d=""):d+=b}switch(d&&f.push(d),f.length){case 1:return{name:f[0],schema:null,database:null};case 2:return{name:f[1],schema:f[0],database:null};case 3:return{name:f[2],schema:f[1],database:f[0]};default:throw Error("Invalid table name.")}},b.exports=g},82755,(a,b,c)=>{"use strict";let{TYPES:d}=a.r(61949),e=a.r(31984),f=Promise,g=[];g.register=function(a,b){for(let b=0;b<this.length;b++)if(this[b].js===a){this.splice(b,1);break}return this.push({js:a,sql:b}),null},g.register(String,d.NVarChar),g.register(Number,d.Int),g.register(Boolean,d.Bit),g.register(Date,d.DateTime),g.register(Buffer,d.VarBinary),g.register(e,d.TVP),b.exports={driver:{},getTypeByValue:function(a){if(null==a)return d.NVarChar;switch(typeof a){case"string":for(let a of Array.from(g))if(a.js===String)return a.sql;return d.NVarChar;case"number":if(a%1!=0)return d.Float;if(a<-0x80000000||a>0x7fffffff)return d.BigInt;return d.Int;case"bigint":if(a<-2147483648n||a>2147483647n)return d.BigInt;return d.Int;case"boolean":for(let a of Array.from(g))if(a.js===Boolean)return a.sql;return d.Bit;case"object":for(let b of Array.from(g))if(a instanceof b.js)return b.sql;return d.NVarChar;default:return d.NVarChar}},map:g},Object.defineProperty(b.exports,"Promise",{get:()=>f,set:a=>{f=a}}),Object.defineProperty(b.exports,"valueHandler",{enumerable:!0,value:new Map,writable:!1,configurable:!1})},14994,(a,b,c)=>{"use strict";let d=a.r(32582);b.exports=class extends d{constructor(a,b){super(a,b),this.name="PreparedStatementError"}}},81555,(a,b,c)=>{"use strict";let d=a.r(32582);b.exports=class extends d{constructor(a,b){super(a,b),a instanceof Error&&(a.info?(this.number=a.info.number||a.code,this.lineNumber=a.info.lineNumber,this.state=a.info.state||a.sqlstate,this.class=a.info.class,this.serverName=a.info.serverName,this.procName=a.info.procName):(this.number=a.code,this.lineNumber=a.lineNumber,this.state=a.sqlstate,this.class=a.severity,this.serverName=a.serverName,this.procName=a.procName)),this.name="RequestError";const c=/^\[Microsoft\]\[SQL Server Native Client 11\.0\](?:\[SQL Server\])?([\s\S]*)$/.exec(this.message);c&&(this.message=c[1])}}},87716,(a,b,c)=>{"use strict";let d=a.r(32582);b.exports=class extends d{constructor(a,b){super(a,b),this.name="TransactionError"}}},42327,(a,b,c)=>{"use strict";let d=a.r(95664),e=a.r(32582),f=a.r(14994);b.exports={ConnectionError:d,MSSQLError:e,PreparedStatementError:f,RequestError:a.r(81555),TransactionError:a.r(87716)}},50494,(a,b,c)=>{"use strict";let{EventEmitter:d}=a.r(87769),e=a.r(61430)("mssql:base"),{parseSqlConnectionString:f}=a.r(7180),g=a.r(79799),{IDS:h}=a.r(85319),i=a.r(95664),j=a.r(82755),{MSSQLError:k}=a.r(42327);b.exports=class extends d{constructor(a,b){if(super(),h.add(this,"ConnectionPool"),e("pool(%d): created",h.get(this)),this._connectStack=[],this._closeStack=[],this._connected=!1,this._connecting=!1,this._healthy=!1,"string"==typeof a)try{this.config=this.constructor.parseConnectionString(a)}catch(a){if("function"==typeof b)return setImmediate(b,a);throw a}else this.config=a;this.config.port=this.config.port||1433,this.config.options=this.config.options||{},this.config.stream=this.config.stream||!1,this.config.parseJSON=this.config.parseJSON||!1,this.config.arrayRowMode=this.config.arrayRowMode||!1,this.config.validateConnection=!("validateConnection"in this.config)||this.config.validateConnection;const c=/^(.*)\\(.*)$/.exec(this.config.server);if(c&&(this.config.server=c[1],this.config.options.instanceName=c[2]),void 0!==this.config.options.useColumnNames&&!0!==this.config.options.useColumnNames){const a=new k("Invalid options `useColumnNames`, use `arrayRowMode` instead");if("function"==typeof b)return setImmediate(b,a);throw a}"function"==typeof b&&this.connect(b)}get connected(){return this._connected}get connecting(){return this._connecting}get healthy(){return this._healthy}static parseConnectionString(a){return this._parseConnectionString(a)}static _parseAuthenticationType(a,b){switch(a.toLowerCase()){case"active directory integrated":if(b.includes("token"))return"azure-active-directory-access-token";if(["client id","client secret","tenant id"].every(a=>b.includes(a)))return"azure-active-directory-service-principal-secret";if(["client id","msi endpoint","msi secret"].every(a=>b.includes(a)))return"azure-active-directory-msi-app-service";else if(["client id","msi endpoint"].every(a=>b.includes(a)))return"azure-active-directory-msi-vm";return"azure-active-directory-default";case"active directory password":return"azure-active-directory-password";case"ntlm":return"ntlm";default:return"default"}}static _parseConnectionString(a){let b=f(a,!0,!0);return Object.entries(b).reduce((a,[c,d])=>{switch(c){case"application name":case"asynchronous processing":case"attachdbfilename":case"column encryption setting":case"connection lifetime":case"connectretrycount":case"context connection":case"enlist":case"failover partner":case"integrated security":case"multipleactiveresultsets":case"network library":case"persist security info":case"poolblockingperiod":case"pooling":case"replication":case"transparentnetworkipresolution":case"type system version":case"user instance":break;case"applicationintent":Object.assign(a.options,{readOnlyIntent:"readonly"===d});break;case"authentication":Object.assign(a,{authentication_type:this._parseAuthenticationType(d,Object.keys(b))});break;case"connection timeout":Object.assign(a,{connectionTimeout:1e3*d});break;case"connectretryinterval":Object.assign(a.options,{connectionRetryInterval:1e3*d});break;case"client id":Object.assign(a,{clientId:d});break;case"client secret":Object.assign(a,{clientSecret:d});break;case"current language":Object.assign(a.options,{language:d});break;case"data source":{let b,c=d,e=1433;if(/^np:/i.test(c))throw Error("Connection via Named Pipes is not supported.");/^tcp:/i.test(c)&&(c=c.substr(4));let f=/^(.*)\\(.*)$/.exec(c);f&&(c=f[1].trim(),b=f[2].trim());let g=/^(.*),(.*)$/.exec(c);if(g)c=g[1].trim(),e=parseInt(g[2].trim(),10);else{let a=/^(.*),(.*)$/.exec(b);a&&(b=a[1].trim(),e=parseInt(a[2].trim(),10))}("."===c||"(.)"===c||"(localdb)"===c.toLowerCase()||"(local)"===c.toLowerCase())&&(c="localhost"),Object.assign(a,{port:e,server:c}),b&&Object.assign(a.options,{instanceName:b});break}case"encrypt":Object.assign(a.options,{encrypt:!!d});break;case"initial catalog":Object.assign(a,{database:d});break;case"max pool size":Object.assign(a.pool,{max:d});break;case"min pool size":Object.assign(a.pool,{min:d});break;case"msi endpoint":Object.assign(a,{msiEndpoint:d});break;case"msi secret":Object.assign(a,{msiSecret:d});break;case"multisubnetfailover":Object.assign(a.options,{multiSubnetFailover:d});break;case"packet size":Object.assign(a.options,{packetSize:d});break;case"password":Object.assign(a,{password:d});break;case"tenant id":Object.assign(a,{tenantId:d});break;case"token":Object.assign(a,{token:d});break;case"transaction binding":Object.assign(a.options,{enableImplicitTransactions:"implicit unbind"===d.toLowerCase()});break;case"trustservercertificate":Object.assign(a.options,{trustServerCertificate:d});break;case"user id":{let b,c=d,e=/^(.*)\\(.*)$/.exec(c);e&&(b=e[1],c=e[2]),b&&Object.assign(a,{domain:b}),c&&Object.assign(a,{user:c});break}case"workstation id":Object.assign(a.options,{workstationId:d});break;case"request timeout":Object.assign(a,{requestTimeout:parseInt(d,10)});break;case"stream":Object.assign(a,{stream:!!d});break;case"useutc":Object.assign(a.options,{useUTC:!!d});break;case"parsejson":Object.assign(a,{parseJSON:!!d})}return a},{options:{},pool:{}})}acquire(a,b){let c=j.Promise.resolve(this._acquire()).catch(a=>{throw this.emit("error",a),a});return"function"==typeof b?(c.then(a=>b(null,a,this.config)).catch(b),this):c}_acquire(){return this.pool?this.pool.destroyed?j.Promise.reject(new i("Connection is closing","ENOTOPEN")):this.pool.acquire().promise:j.Promise.reject(new i("Connection not yet open.","ENOTOPEN"))}release(a){return e("connection(%d): released",h.get(a)),this.pool&&this.pool.release(a),this}connect(a){return"function"==typeof a?(this._connect(a),this):new j.Promise((a,b)=>this._connect(c=>{if(c)return b(c);a(this)}))}_connect(a){if(this._connected)return e("pool(%d): already connected, executing connect callback immediately",h.get(this)),setImmediate(a,null,this);this._connectStack.push(a),this._connecting||(this._connecting=!0,e("pool(%d): connecting",h.get(this)),this._poolCreate().then(a=>(e("pool(%d): connected",h.get(this)),this._healthy=!0,this._poolDestroy(a).then(()=>{this.pool=new g.Pool(Object.assign({create:()=>this._poolCreate().then(a=>(this._healthy=!0,a)).catch(a=>{throw this.pool.numUsed()+this.pool.numFree()<=0&&(this._healthy=!1),a}),validate:this._poolValidate.bind(this),destroy:this._poolDestroy.bind(this),max:10,min:0,idleTimeoutMillis:3e4,propagateCreateError:!0},this.config.pool)),this._connecting=!1,this._connected=!0}))).then(()=>{this._connectStack.forEach(a=>{setImmediate(a,null,this)})}).catch(a=>{this._connecting=!1,this._connectStack.forEach(b=>{setImmediate(b,a)})}).then(()=>{this._connectStack=[]}))}get size(){return this.pool.numFree()+this.pool.numUsed()+this.pool.numPendingCreates()}get available(){return this.pool.numFree()}get pending(){return this.pool.numPendingAcquires()}get borrowed(){return this.pool.numUsed()}close(a){return"function"==typeof a?(this._close(a),this):new j.Promise((a,b)=>{this._close(c=>{if(c)return b(c);a(this)})})}_close(a){if(this._connecting&&(e("pool(%d): close called while connecting",h.get(this)),setImmediate(a,new i("Cannot close a pool while it is connecting"))),!this.pool)return e("pool(%d): already closed, executing close callback immediately",h.get(this)),setImmediate(a,null);this._closeStack.push(a),this.pool.destroyed||(this._connecting=this._connected=this._healthy=!1,this.pool.destroy().then(()=>{e("pool(%d): pool closed, removing pool reference and executing close callbacks",h.get(this)),this.pool=null,this._closeStack.forEach(a=>{setImmediate(a,null)})}).catch(a=>{this.pool=null,this._closeStack.forEach(b=>{setImmediate(b,a)})}).then(()=>{this._closeStack=[]}))}request(){return new j.driver.Request(this)}transaction(){return new j.driver.Transaction(this)}query(){if("string"==typeof arguments[0])return new j.driver.Request(this).query(arguments[0],arguments[1]);let a=Array.prototype.slice.call(arguments),b=a.shift();return new j.driver.Request(this)._template(b,a,"query")}batch(){if("string"==typeof arguments[0])return new j.driver.Request(this).batch(arguments[0],arguments[1]);let a=Array.prototype.slice.call(arguments),b=a.shift();return new j.driver.Request(this)._template(b,a,"batch")}}},12387,(a,b,c)=>{"use strict";let d=a.r(82755),e=null,f={};function g(a,b){if(!f[a])return e;let c=f[a].indexOf(b);return -1===c||(f[a].splice(c,1),0===f[a].length&&(f[a]=void 0),e&&e.removeListener(a,b)),e}b.exports={batch:function(){if("string"==typeof arguments[0])return new d.driver.Request().batch(arguments[0],arguments[1]);let a=Array.prototype.slice.call(arguments),b=a.shift();return new d.driver.Request()._template(b,a,"batch")},close:function(a){if(e){let b=e;return e=null,b.close(a)}return"function"==typeof a?(setImmediate(a),null):new d.Promise(a=>{a(e)})},connect:function(a,b){if(!e){for(let b in e=new d.driver.ConnectionPool(a),f)for(let a=0,c=f[b].length;a<c;a++)e.on(b,f[b][a]);let b=e.close;e.close=(function(a){for(let a in f)for(let b=0,c=f[a].length;b<c;b++)this.removeListener(a,f[a][b]);return this.on("error",a=>{if(f.error)for(let b=0,c=f.error.length;b<c;b++)f.error[b].call(this,a)}),e=null,b.call(this,a)}).bind(e)}return"function"==typeof b?e.connect((a,c)=>{a&&(e=null),b(a,c)}):e.connect().catch(a=>(e=null,d.Promise.reject(a)))},off:g,on:function(a,b){return f[a]||(f[a]=[]),f[a].push(b),e&&e.on(a,b),e},query:function(){if("string"==typeof arguments[0])return new d.driver.Request().query(arguments[0],arguments[1]);let a=Array.prototype.slice.call(arguments),b=a.shift();return new d.driver.Request()._template(b,a,"query")},removeListener:g},Object.defineProperty(b.exports,"pool",{get:()=>e,set:()=>{}})},83129,(a,b,c)=>{"use strict";let d=a.r(61430)("mssql:base"),{EventEmitter:e}=a.r(87769),{IDS:f,objectHasProperty:g}=a.r(85319),h=a.r(12387),{TransactionError:i,PreparedStatementError:j}=a.r(42327),k=a.r(82755),{TYPES:l,declare:m}=a.r(61949);b.exports=class extends e{constructor(a){super(),f.add(this,"PreparedStatement"),d("ps(%d): created",f.get(this)),this.parent=a||h.pool,this._handle=0,this.prepared=!1,this.parameters={}}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire(a,b){return this._acquiredConnection?this._activeRequest?setImmediate(b,new i("Can't acquire connection for the request. There is another request in progress.","EREQINPROG")):(this._activeRequest=a,setImmediate(b,null,this._acquiredConnection,this._acquiredConfig)):setImmediate(b,new j("Statement is not prepared. Call prepare() first.","ENOTPREPARED")),this}release(a){return a===this._acquiredConnection&&(this._activeRequest=null),this}input(a,b){if(/--| |\/\*|\*\/|'/.test(a))throw new j(`SQL injection warning for param '${a}'`,"EINJECT");if(arguments.length<2)throw new j("Invalid number of arguments. 2 arguments expected.","EARGS");if(b instanceof Function&&(b=b()),g(this.parameters,a))throw new j(`The parameter name ${a} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[a]={name:a,type:b.type,io:1,length:b.length,scale:b.scale,precision:b.precision,tvpType:b.tvpType},this}replaceInput(a,b,c){return delete this.parameters[a],this.input(a,b,c)}output(a,b){if(/--| |\/\*|\*\/|'/.test(a))throw new j(`SQL injection warning for param '${a}'`,"EINJECT");if(arguments.length<2)throw new j("Invalid number of arguments. 2 arguments expected.","EARGS");if(b instanceof Function&&(b=b()),g(this.parameters,a))throw new j(`The parameter name ${a} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[a]={name:a,type:b.type,io:2,length:b.length,scale:b.scale,precision:b.precision},this}replaceOutput(a,b){return delete this.parameters[a],this.output(a,b)}prepare(a,b){return"function"==typeof b?(this._prepare(a,b),this):new k.Promise((b,c)=>{this._prepare(a,a=>{if(a)return c(a);b(this)})})}_prepare(a,b){if(d("ps(%d): prepare",f.get(this)),"function"==typeof a&&(b=a,a=void 0),this.prepared)return setImmediate(b,new j("Statement is already prepared.","EALREADYPREPARED"));this.statement=a||this.statement,this.parent.acquire(this,(a,c,e)=>{if(a)return b(a);this._acquiredConnection=c,this._acquiredConfig=e;let h=new k.driver.Request(this);h.stream=!1,h.output("handle",l.Int),h.input("params",l.NVarChar,(()=>{let a=[];for(let b in this.parameters){if(!g(this.parameters,b))continue;let c=this.parameters[b];a.push(`@${b} ${m(c.type,c)}${2===c.io?" output":""}`)}return a})().join(",")),h.input("stmt",l.NVarChar,this.statement),h.execute("sp_prepare",(a,c)=>{if(a)return this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,b(a);d("ps(%d): prepared",f.get(this)),this._handle=c.output.handle,this.prepared=!0,b(null)})})}execute(a,b){return this.stream||"function"==typeof b?this._execute(a,b):new k.Promise((b,c)=>{this._execute(a,(a,d)=>{if(a)return c(a);b(d)})})}_execute(a,b){let c=new k.driver.Request(this);for(let b in c.stream=this.stream,c.arrayRowMode=this.arrayRowMode,c.input("handle",l.Int,this._handle),this.parameters){if(!g(this.parameters,b))continue;let d=this.parameters[b];c.parameters[b]={name:b,type:d.type,io:d.io,value:a[b],length:d.length,scale:d.scale,precision:d.precision}}return c.execute("sp_execute",(a,c)=>{if(a)return b(a);b(null,c)}),c}unprepare(a){return"function"==typeof a?(this._unprepare(a),this):new k.Promise((a,b)=>{this._unprepare(c=>{if(c)return b(c);a()})})}_unprepare(a){if(d("ps(%d): unprepare",f.get(this)),!this.prepared)return setImmediate(a,new j("Statement is not prepared. Call prepare() first.","ENOTPREPARED"));if(this._activeRequest)return setImmediate(a,new i("Can't unprepare the statement. There is a request in progress.","EREQINPROG"));let b=new k.driver.Request(this);b.stream=!1,b.input("handle",l.Int,this._handle),b.execute("sp_unprepare",b=>b?a(b):(this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,this._handle=0,this.prepared=!1,d("ps(%d): unprepared",f.get(this)),a(null)))}}},81111,(a,b,c)=>{b.exports=a.x("node:stream",()=>require("node:stream"))},26966,(a,b,c)=>{"use strict";let d=a.r(61430)("mssql:base"),{EventEmitter:e}=a.r(87769),{Readable:f}=a.r(81111),{IDS:g,objectHasProperty:h}=a.r(85319),i=a.r(12387),{RequestError:j,ConnectionError:k}=a.r(42327),{TYPES:l}=a.r(61949),m=a.r(82755);b.exports=class extends e{constructor(a){super(),g.add(this,"Request"),d("request(%d): created",g.get(this)),this.canceled=!1,this._paused=!1,this.parent=a||i.pool,this.parameters={},this.stream=null,this.arrayRowMode=null}get paused(){return this._paused}template(){let a=Array.prototype.slice.call(arguments),b=a.shift();return this._template(b,a)}_template(a,b,c){let d=[a[0]];for(let c=0;c<b.length;c++){let e=b[c];if(Array.isArray(e)){for(let a=0;a<e.length;a++)this.input(`param${c+1}_${a}`,e[a]),d.push(`@param${c+1}_${a}`),a<e.length-1&&d.push(", ");d.push(a[c+1])}else this.input(`param${c+1}`,e),d.push(`@param${c+1}`,a[c+1])}return c?this[c](d.join("")):d.join("")}input(a,b,c){if(/--| |\/\*|\*\/|'/.test(a))throw new j(`SQL injection warning for param '${a}'`,"EINJECT");if(arguments.length<2)throw new j("Invalid number of arguments. At least 2 arguments expected.","EARGS");if(2==arguments.length&&(c=b,b=m.getTypeByValue(c)),!c||"function"!=typeof c.valueOf||c instanceof Date||(c=c.valueOf()),void 0===c&&(c=null),"number"==typeof c&&isNaN(c)&&(c=null),b instanceof Function&&(b=b()),h(this.parameters,a))throw new j(`The parameter name ${a} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[a]={name:a,type:b.type,io:1,value:c,length:b.length,scale:b.scale,precision:b.precision,tvpType:b.tvpType},this}replaceInput(a,b,c){return delete this.parameters[a],this.input(a,b,c)}output(a,b,c){if(b||(b=l.NVarChar),/--| |\/\*|\*\/|'/.test(a))throw new j(`SQL injection warning for param '${a}'`,"EINJECT");if(b===l.Text||b===l.NText||b===l.Image)throw new j("Deprecated types (Text, NText, Image) are not supported as OUTPUT parameters.","EDEPRECATED");if(!c||"function"!=typeof c.valueOf||c instanceof Date||(c=c.valueOf()),void 0===c&&(c=null),"number"==typeof c&&isNaN(c)&&(c=null),b instanceof Function&&(b=b()),h(this.parameters,a))throw new j(`The parameter name ${a} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[a]={name:a,type:b.type,io:2,value:c,length:b.length,scale:b.scale,precision:b.precision},this}replaceOutput(a,b,c){return delete this.parameters[a],this.output(a,b,c)}batch(a,b){if(null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.rowsAffected=0,"function"==typeof b)return this._batch(a,(a,c,d,e)=>{if(this.stream&&(a&&this.emit("error",a),a=null,this.emit("done",{output:d,rowsAffected:e})),a)return b(a);b(null,{recordsets:c,recordset:c&&c[0],output:d,rowsAffected:e})}),this;if("object"==typeof a){let b=Array.prototype.slice.call(arguments),c=b.shift();a=this._template(c,b)}return new m.Promise((b,c)=>{this._batch(a,(a,d,e,f)=>{if(this.stream&&(a&&this.emit("error",a),a=null,this.emit("done",{output:e,rowsAffected:f})),a)return c(a);b({recordsets:d,recordset:d&&d[0],output:e,rowsAffected:f})})})}_batch(a,b){return this.parent?this.parent.connected?void(this.canceled=!1,setImmediate(b)):setImmediate(b,new k("Connection is closed.","ECONNCLOSED")):setImmediate(b,new j("No connection is specified for that request.","ENOCONN"))}bulk(a,b,c){return("function"==typeof b?(c=b,b={}):void 0===b&&(b={}),null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.stream||"function"==typeof c)?(this._bulk(a,b,(a,b)=>this.stream?(a&&this.emit("error",a),this.emit("done",{rowsAffected:b})):a?c(a):void c(null,{rowsAffected:b})),this):new m.Promise((c,d)=>{this._bulk(a,b,(a,b)=>{if(a)return d(a);c({rowsAffected:b})})})}_bulk(a,b,c){return this.parent?this.parent.connected?void(this.canceled=!1,setImmediate(c)):setImmediate(c,new k("Connection is closed.","ECONNCLOSED")):setImmediate(c,new j("No connection is specified for that request.","ENOCONN"))}toReadableStream(a={}){this.stream=!0,this.pause();let b=new f({...a,objectMode:!0,read:()=>{this.resume()}});return this.on("row",a=>{b.push(a)||this.pause()}),this.on("error",a=>{b.emit("error",a)}),this.on("done",()=>{b.push(null)}),b}pipe(a){return this.toReadableStream().pipe(a)}query(a,b){if(null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.rowsAffected=0,"function"==typeof b)return this._query(a,(a,c,d,e,f)=>{if(this.stream&&(a&&this.emit("error",a),a=null,this.emit("done",{output:d,rowsAffected:e})),a)return b(a);let g={recordsets:c,recordset:c&&c[0],output:d,rowsAffected:e};this.arrayRowMode&&(g.columns=f),b(null,g)}),this;if("object"==typeof a){let b=Array.prototype.slice.call(arguments),c=b.shift();a=this._template(c,b)}return new m.Promise((b,c)=>{this._query(a,(a,d,e,f,g)=>{if(this.stream&&(a&&this.emit("error",a),a=null,this.emit("done",{output:e,rowsAffected:f})),a)return c(a);let h={recordsets:d,recordset:d&&d[0],output:e,rowsAffected:f};this.arrayRowMode&&(h.columns=g),b(h)})})}_query(a,b){return this.parent?this.parent.connected?void(this.canceled=!1,setImmediate(b)):setImmediate(b,new k("Connection is closed.","ECONNCLOSED")):setImmediate(b,new j("No connection is specified for that request.","ENOCONN"))}execute(a,b){return(null===this.stream&&this.parent&&(this.stream=this.parent.config.stream),null===this.arrayRowMode&&this.parent&&(this.arrayRowMode=this.parent.config.arrayRowMode),this.rowsAffected=0,"function"==typeof b)?(this._execute(a,(a,c,d,e,f,g)=>{if(this.stream&&(a&&this.emit("error",a),a=null,this.emit("done",{output:d,rowsAffected:f,returnValue:e})),a)return b(a);let h={recordsets:c,recordset:c&&c[0],output:d,rowsAffected:f,returnValue:e};this.arrayRowMode&&(h.columns=g),b(null,h)}),this):new m.Promise((b,c)=>{this._execute(a,(a,d,e,f,g,h)=>{if(this.stream&&(a&&this.emit("error",a),a=null,this.emit("done",{output:e,rowsAffected:g,returnValue:f})),a)return c(a);let i={recordsets:d,recordset:d&&d[0],output:e,rowsAffected:g,returnValue:f};this.arrayRowMode&&(i.columns=h),b(i)})})}_execute(a,b){return this.parent?this.parent.connected?void(this.canceled=!1,setImmediate(b)):setImmediate(b,new k("Connection is closed.","ECONNCLOSED")):setImmediate(b,new j("No connection is specified for that request.","ENOCONN"))}cancel(){return this._cancel(),!0}_cancel(){this.canceled=!0}pause(){return!!this.stream&&(this._pause(),!0)}_pause(){this._paused=!0}resume(){return!!this.stream&&(this._resume(),!0)}_resume(){this._paused=!1}_setCurrentRequest(a){return this._currentRequest=a,this._paused&&this.pause(),this}}},56713,(a,b,c)=>{"use strict";b.exports={READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5}},49476,(a,b,c)=>{"use strict";let d=a.r(61430)("mssql:base"),{EventEmitter:e}=a.r(87769),{IDS:f}=a.r(85319),g=a.r(12387),{TransactionError:h}=a.r(42327),i=a.r(82755),j=a.r(56713);class k extends e{constructor(a){super(),f.add(this,"Transaction"),d("transaction(%d): created",f.get(this)),this.parent=a||g.pool,this.isolationLevel=k.defaultIsolationLevel,this.name=""}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire(a,b){return this._acquiredConnection?this._activeRequest?setImmediate(b,new h("Can't acquire connection for the request. There is another request in progress.","EREQINPROG")):(this._activeRequest=a,setImmediate(b,null,this._acquiredConnection,this._acquiredConfig)):setImmediate(b,new h("Transaction has not begun. Call begin() first.","ENOTBEGUN")),this}release(a){return a===this._acquiredConnection&&(this._activeRequest=null),this}begin(a,b){return(a instanceof Function&&(b=a,a=void 0),"function"==typeof b)?(this._begin(a,a=>{a||this.emit("begin"),b(a)}),this):new i.Promise((b,c)=>{this._begin(a,a=>{if(a)return c(a);this.emit("begin"),b(this)})})}_begin(a,b){if(this._acquiredConnection)return setImmediate(b,new h("Transaction has already begun.","EALREADYBEGUN"));if(this._aborted=!1,this._rollbackRequested=!1,a)if(Object.keys(j).some(b=>j[b]===a))this.isolationLevel=a;else throw new h("Invalid isolation level.");setImmediate(b)}commit(a){return"function"==typeof a?(this._commit(b=>{b||this.emit("commit"),a(b)}),this):new i.Promise((a,b)=>{this._commit(c=>{if(c)return b(c);this.emit("commit"),a()})})}_commit(a){return this._aborted?setImmediate(a,new h("Transaction has been aborted.","EABORT")):this._acquiredConnection?this._activeRequest?setImmediate(a,new h("Can't commit transaction. There is a request in progress.","EREQINPROG")):void setImmediate(a):setImmediate(a,new h("Transaction has not begun. Call begin() first.","ENOTBEGUN"))}request(){return new i.driver.Request(this)}rollback(a){return"function"==typeof a?(this._rollback(b=>{b||this.emit("rollback",this._aborted),a(b)}),this):new i.Promise((a,b)=>this._rollback(c=>{if(c)return b(c);this.emit("rollback",this._aborted),a()}))}_rollback(a){return this._aborted?setImmediate(a,new h("Transaction has been aborted.","EABORT")):this._acquiredConnection?this._activeRequest?setImmediate(a,new h("Can't rollback transaction. There is a request in progress.","EREQINPROG")):void(this._rollbackRequested=!0,setImmediate(a)):setImmediate(a,new h("Transaction has not begun. Call begin() first.","ENOTBEGUN"))}}k.defaultIsolationLevel=j.READ_COMMITTED,b.exports=k},46574,(a,b,c)=>{"use strict";let d=a.r(50494),e=a.r(83129),f=a.r(26966),g=a.r(49476),{ConnectionError:h,TransactionError:i,RequestError:j,PreparedStatementError:k,MSSQLError:l}=a.r(42327),m=a.r(82755),n=a.r(31984),o=a.r(56713),{TYPES:p}=a.r(61949),{connect:q,close:r,on:s,off:t,removeListener:u,query:v,batch:w}=a.r(12387);for(let a in b.exports={ConnectionPool:d,Transaction:g,Request:f,PreparedStatement:e,ConnectionError:h,TransactionError:i,RequestError:j,PreparedStatementError:k,MSSQLError:l,driver:m.driver,exports:{ConnectionError:h,TransactionError:i,RequestError:j,PreparedStatementError:k,MSSQLError:l,Table:n,ISOLATION_LEVEL:o,TYPES:p,MAX:65535,map:m.map,getTypeByValue:m.getTypeByValue,connect:q,close:r,on:s,removeListener:u,off:t,query:v,batch:w}},Object.defineProperty(b.exports,"Promise",{enumerable:!0,get:()=>m.Promise,set:a=>{m.Promise=a}}),Object.defineProperty(b.exports,"valueHandler",{enumerable:!0,value:m.valueHandler,writable:!1,configurable:!1}),p){let c=p[a];b.exports.exports[a]=c,b.exports.exports[a.toUpperCase()]=c}},35952,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([254,255,255,255,255,255,255,255]),e=Buffer.alloc(0);class f{constructor(a,b,c){this.initialSize=a,this.encoding=b||"ucs2",this.doubleSizeGrowth=c||!1,this.buffer=Buffer.alloc(this.initialSize,0),this.compositeBuffer=e,this.position=0}get data(){return this.newBuffer(0),this.compositeBuffer}copyFrom(a){let b=a.length;this.makeRoomFor(b),a.copy(this.buffer,this.position),this.position+=b}makeRoomFor(a){if(this.buffer.length-this.position<a)if(this.doubleSizeGrowth){let b=Math.max(128,2*this.buffer.length);for(;b<a;)b*=2;this.newBuffer(b)}else this.newBuffer(a)}newBuffer(a){let b=this.buffer.slice(0,this.position);this.compositeBuffer=Buffer.concat([this.compositeBuffer,b]),this.buffer=0===a?e:Buffer.alloc(a,0),this.position=0}writeUInt8(a){this.makeRoomFor(1),this.buffer.writeUInt8(a,this.position),this.position+=1}writeUInt16LE(a){this.makeRoomFor(2),this.buffer.writeUInt16LE(a,this.position),this.position+=2}writeUShort(a){this.writeUInt16LE(a)}writeUInt16BE(a){this.makeRoomFor(2),this.buffer.writeUInt16BE(a,this.position),this.position+=2}writeUInt24LE(a){this.makeRoomFor(3),this.buffer[this.position+2]=a>>>16&255,this.buffer[this.position+1]=a>>>8&255,this.buffer[this.position]=255&a,this.position+=3}writeUInt32LE(a){this.makeRoomFor(4),this.buffer.writeUInt32LE(a,this.position),this.position+=4}writeBigInt64LE(a){this.makeRoomFor(8),this.buffer.writeBigInt64LE(a,this.position),this.position+=8}writeInt64LE(a){this.writeBigInt64LE(BigInt(a))}writeUInt64LE(a){this.writeBigUInt64LE(BigInt(a))}writeBigUInt64LE(a){this.makeRoomFor(8),this.buffer.writeBigUInt64LE(a,this.position),this.position+=8}writeUInt32BE(a){this.makeRoomFor(4),this.buffer.writeUInt32BE(a,this.position),this.position+=4}writeUInt40LE(a){this.writeInt32LE(-1&a),this.writeUInt8(Math.floor(23283064365386963e-26*a))}writeInt8(a){this.makeRoomFor(1),this.buffer.writeInt8(a,this.position),this.position+=1}writeInt16LE(a){this.makeRoomFor(2),this.buffer.writeInt16LE(a,this.position),this.position+=2}writeInt16BE(a){this.makeRoomFor(2),this.buffer.writeInt16BE(a,this.position),this.position+=2}writeInt32LE(a){this.makeRoomFor(4),this.buffer.writeInt32LE(a,this.position),this.position+=4}writeInt32BE(a){this.makeRoomFor(4),this.buffer.writeInt32BE(a,this.position),this.position+=4}writeFloatLE(a){this.makeRoomFor(4),this.buffer.writeFloatLE(a,this.position),this.position+=4}writeDoubleLE(a){this.makeRoomFor(8),this.buffer.writeDoubleLE(a,this.position),this.position+=8}writeString(a,b){null==b&&(b=this.encoding);let c=Buffer.byteLength(a,b);this.makeRoomFor(c),this.buffer.write(a,this.position,b),this.position+=c}writeBVarchar(a,b){this.writeUInt8(a.length),this.writeString(a,b)}writeUsVarchar(a,b){this.writeUInt16LE(a.length),this.writeString(a,b)}writeUsVarbyte(a,b){let c;null==b&&(b=this.encoding),a instanceof Buffer?c=a.length:(a=a.toString(),c=Buffer.byteLength(a,b)),this.writeUInt16LE(c),a instanceof Buffer?this.writeBuffer(a):(this.makeRoomFor(c),this.buffer.write(a,this.position,b),this.position+=c)}writePLPBody(a,b){let c;null==b&&(b=this.encoding),a instanceof Buffer?c=a.length:(a=a.toString(),c=Buffer.byteLength(a,b)),this.writeBuffer(d),c>0&&(this.writeUInt32LE(c),a instanceof Buffer?this.writeBuffer(a):(this.makeRoomFor(c),this.buffer.write(a,this.position,b),this.position+=c)),this.writeUInt32LE(0)}writeBuffer(a){let b=a.length;this.makeRoomFor(b),a.copy(this.buffer,this.position),this.position+=b}writeMoney(a){this.writeInt32LE(Math.floor(23283064365386963e-26*a)),this.writeInt32LE(-1&a)}}c.default=f,b.exports=f},92467,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Token=c.TYPE=c.SSPIToken=c.RowToken=c.RoutingEnvChangeToken=c.RollbackTransactionEnvChangeToken=c.ReturnValueToken=c.ReturnStatusToken=c.ResetConnectionEnvChangeToken=c.PacketSizeEnvChangeToken=c.OrderToken=c.NBCRowToken=c.LoginAckToken=c.LanguageEnvChangeToken=c.InfoMessageToken=c.FedAuthInfoToken=c.FeatureExtAckToken=c.ErrorMessageToken=c.DoneToken=c.DoneProcToken=c.DoneInProcToken=c.DatabaseMirroringPartnerEnvChangeToken=c.DatabaseEnvChangeToken=c.CommitTransactionEnvChangeToken=c.CollationChangeToken=c.ColMetadataToken=c.CharsetEnvChangeToken=c.BeginTransactionEnvChangeToken=void 0,c.TYPE={ALTMETADATA:136,ALTROW:211,COLMETADATA:129,COLINFO:165,DONE:253,DONEPROC:254,DONEINPROC:255,ENVCHANGE:227,ERROR:170,FEATUREEXTACK:174,FEDAUTHINFO:238,INFO:171,LOGINACK:173,NBCROW:210,OFFSET:120,ORDER:169,RETURNSTATUS:121,RETURNVALUE:172,ROW:209,SSPI:237,TABNAME:164};class d{constructor(a,b){this.name=a,this.handlerName=b}}c.Token=d,c.ColMetadataToken=class extends d{constructor(a){super("COLMETADATA","onColMetadata"),this.columns=a}},c.DoneToken=class extends d{constructor({more:a,sqlError:b,attention:c,serverError:d,rowCount:e,curCmd:f}){super("DONE","onDone"),this.more=a,this.sqlError=b,this.attention=c,this.serverError=d,this.rowCount=e,this.curCmd=f}},c.DoneInProcToken=class extends d{constructor({more:a,sqlError:b,attention:c,serverError:d,rowCount:e,curCmd:f}){super("DONEINPROC","onDoneInProc"),this.more=a,this.sqlError=b,this.attention=c,this.serverError=d,this.rowCount=e,this.curCmd=f}},c.DoneProcToken=class extends d{constructor({more:a,sqlError:b,attention:c,serverError:d,rowCount:e,curCmd:f}){super("DONEPROC","onDoneProc"),this.more=a,this.sqlError=b,this.attention=c,this.serverError=d,this.rowCount=e,this.curCmd=f}},c.DatabaseEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onDatabaseChange"),this.type="DATABASE",this.newValue=a,this.oldValue=b}},c.LanguageEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onLanguageChange"),this.type="LANGUAGE",this.newValue=a,this.oldValue=b}},c.CharsetEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onCharsetChange"),this.type="CHARSET",this.newValue=a,this.oldValue=b}},c.PacketSizeEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onPacketSizeChange"),this.type="PACKET_SIZE",this.newValue=a,this.oldValue=b}},c.BeginTransactionEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onBeginTransaction"),this.type="BEGIN_TXN",this.newValue=a,this.oldValue=b}},c.CommitTransactionEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onCommitTransaction"),this.type="COMMIT_TXN",this.newValue=a,this.oldValue=b}},c.RollbackTransactionEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onRollbackTransaction"),this.type="ROLLBACK_TXN",this.newValue=a,this.oldValue=b}},c.DatabaseMirroringPartnerEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onDatabaseMirroringPartner"),this.type="DATABASE_MIRRORING_PARTNER",this.newValue=a,this.oldValue=b}},c.ResetConnectionEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onResetConnection"),this.type="RESET_CONNECTION",this.newValue=a,this.oldValue=b}},c.CollationChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onSqlCollationChange"),this.type="SQL_COLLATION",this.newValue=a,this.oldValue=b}},c.RoutingEnvChangeToken=class extends d{constructor(a,b){super("ENVCHANGE","onRoutingChange"),this.type="ROUTING_CHANGE",this.newValue=a,this.oldValue=b}},c.FeatureExtAckToken=class extends d{constructor(a,b){super("FEATUREEXTACK","onFeatureExtAck"),this.fedAuth=a,this.utf8Support=b}},c.FedAuthInfoToken=class extends d{constructor(a,b){super("FEDAUTHINFO","onFedAuthInfo"),this.spn=a,this.stsurl=b}},c.InfoMessageToken=class extends d{constructor({number:a,state:b,class:c,message:d,serverName:e,procName:f,lineNumber:g}){super("INFO","onInfoMessage"),this.number=a,this.state=b,this.class=c,this.message=d,this.serverName=e,this.procName=f,this.lineNumber=g}},c.ErrorMessageToken=class extends d{constructor({number:a,state:b,class:c,message:d,serverName:e,procName:f,lineNumber:g}){super("ERROR","onErrorMessage"),this.number=a,this.state=b,this.class=c,this.message=d,this.serverName=e,this.procName=f,this.lineNumber=g}},c.LoginAckToken=class extends d{constructor({interface:a,tdsVersion:b,progName:c,progVersion:d}){super("LOGINACK","onLoginAck"),this.interface=a,this.tdsVersion=b,this.progName=c,this.progVersion=d}},c.NBCRowToken=class extends d{constructor(a){super("NBCROW","onRow"),this.columns=a}},c.OrderToken=class extends d{constructor(a){super("ORDER","onOrder"),this.orderColumns=a}},c.ReturnStatusToken=class extends d{constructor(a){super("RETURNSTATUS","onReturnStatus"),this.value=a}},c.ReturnValueToken=class extends d{constructor({paramOrdinal:a,paramName:b,metadata:c,value:d}){super("RETURNVALUE","onReturnValue"),this.paramOrdinal=a,this.paramName=b,this.metadata=c,this.value=d}},c.RowToken=class extends d{constructor(a){super("ROW","onRow"),this.columns=a}},c.SSPIToken=class extends d{constructor(a,b){super("SSPICHALLENGE","onSSPI"),this.ntlmpacket=a,this.ntlmpacketBuffer=b}}},45489,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=a.r(27699),f=(d=a.r(35952))&&d.__esModule?d:{default:d},g=a.r(88947),h=a.r(92467);let i=Buffer.from([h.TYPE.ROW]),j=Buffer.from([16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),k=Buffer.from([0]);class l extends g.Transform{constructor(a){super({writableObjectMode:!0}),this.bulkLoad=a,this.mainOptions=a.options,this.columns=a.columns,this.columnMetadataWritten=!1}_transform(a,b,c){this.columnMetadataWritten||(this.push(this.bulkLoad.getColMetaData()),this.columnMetadataWritten=!0),this.push(i);for(let b=0;b<this.columns.length;b++){let d=this.columns[b],e=Array.isArray(a)?a[b]:a[d.objName];if(!this.bulkLoad.firstRowWritten)try{e=d.type.validate(e,d.collation)}catch(a){return c(a)}let f={length:d.length,scale:d.scale,precision:d.precision,value:e};if("Text"===d.type.name||"Image"===d.type.name||"NText"===d.type.name){if(null==e){this.push(k);continue}this.push(j)}try{for(let a of(this.push(d.type.generateParameterLength(f,this.mainOptions)),d.type.generateParameterData(f,this.mainOptions)))this.push(a)}catch(a){return c(a)}}process.nextTick(c)}_flush(a){this.push(this.bulkLoad.createDoneToken()),process.nextTick(a)}}class m extends e.EventEmitter{constructor(a,b,c,{checkConstraints:d=!1,fireTriggers:e=!1,keepNulls:f=!1,lockTable:g=!1,order:h={}},i){if("boolean"!=typeof d)throw TypeError('The "options.checkConstraints" property must be of type boolean.');if("boolean"!=typeof e)throw TypeError('The "options.fireTriggers" property must be of type boolean.');if("boolean"!=typeof f)throw TypeError('The "options.keepNulls" property must be of type boolean.');if("boolean"!=typeof g)throw TypeError('The "options.lockTable" property must be of type boolean.');if("object"!=typeof h||null===h)throw TypeError('The "options.order" property must be of type object.');for(const[a,b]of Object.entries(h))if("ASC"!==b&&"DESC"!==b)throw TypeError('The value of the "'+a+'" key in the "options.order" object must be either "ASC" or "DESC".');super(),this.error=void 0,this.canceled=!1,this.executionStarted=!1,this.collation=b,this.table=a,this.options=c,this.callback=i,this.columns=[],this.columnsByName={},this.firstRowWritten=!1,this.streamingMode=!1,this.rowToPacketTransform=new l(this),this.bulkOptions={checkConstraints:d,fireTriggers:e,keepNulls:f,lockTable:g,order:h}}addColumn(a,b,{output:c=!1,length:d,precision:e,scale:f,objName:g=a,nullable:h=!0}){if(this.firstRowWritten)throw Error("Columns cannot be added to bulk insert after the first row has been written.");if(this.executionStarted)throw Error("Columns cannot be added to bulk insert after execution has started.");let i={type:b,name:a,value:null,output:c,length:d,precision:e,scale:f,objName:g,nullable:h,collation:this.collation};(48&b.id)==32&&null==i.length&&b.resolveLength&&(i.length=b.resolveLength(i)),b.resolvePrecision&&null==i.precision&&(i.precision=b.resolvePrecision(i)),b.resolveScale&&null==i.scale&&(i.scale=b.resolveScale(i)),this.columns.push(i),this.columnsByName[a]=i}getOptionsSql(){let a=[];if(this.bulkOptions.checkConstraints&&a.push("CHECK_CONSTRAINTS"),this.bulkOptions.fireTriggers&&a.push("FIRE_TRIGGERS"),this.bulkOptions.keepNulls&&a.push("KEEP_NULLS"),this.bulkOptions.lockTable&&a.push("TABLOCK"),this.bulkOptions.order){let b=[];for(let[a,c]of Object.entries(this.bulkOptions.order))b.push(`${a} ${c}`);b.length&&a.push(`ORDER (${b.join(", ")})`)}return a.length>0?` WITH (${a.join(",")})`:""}getBulkInsertSql(){let a="insert bulk "+this.table+"(";for(let b=0,c=this.columns.length;b<c;b++){let c=this.columns[b];0!==b&&(a+=", "),a+="["+c.name+"] "+c.type.declaration(c)}return a+=")",a+=this.getOptionsSql()}getTableCreationSql(){let a="CREATE TABLE "+this.table+"(\n";for(let b=0,c=this.columns.length;b<c;b++){let c=this.columns[b];0!==b&&(a+=",\n"),a+="["+c.name+"] "+c.type.declaration(c),void 0!==c.nullable&&(a+=" "+(c.nullable?"NULL":"NOT NULL"))}return a+"\n)"}getColMetaData(){let a=new f.default(100,null,!0);a.writeUInt8(h.TYPE.COLMETADATA),a.writeUInt16LE(this.columns.length);for(let b=0,c=this.columns.length;b<c;b++){let c=this.columns[b];this.options.tdsVersion<"7_2"?a.writeUInt16LE(0):a.writeUInt32LE(0);let d=4;c.nullable?d|=1:void 0===c.nullable&&this.options.tdsVersion>="7_2"&&(d|=32768),a.writeUInt16LE(d),a.writeBuffer(c.type.generateTypeInfo(c,this.options)),c.type.hasTableName&&a.writeUsVarchar(this.table,"ucs2"),a.writeBVarchar(c.name,"ucs2")}return a.data}setTimeout(a){this.timeout=a}createDoneToken(){let a=new f.default(this.options.tdsVersion<"7_2"?9:13);return a.writeUInt8(h.TYPE.DONE),a.writeUInt16LE(0),a.writeUInt16LE(0),a.writeUInt32LE(0),this.options.tdsVersion>="7_2"&&a.writeUInt32LE(0),a.data}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}}c.default=m,b.exports=m},12249,(a,b,c)=>{b.exports=a.x("constants",()=>require("constants"))},84710,a=>{"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)};function c(a,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}var d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function f(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}function g(a,b){return function(c,d){b(c,d,a)}}function h(a,b,c,d,e,f){function g(a){if(void 0!==a&&"function"!=typeof a)throw TypeError("Function expected");return a}for(var h,i=d.kind,j="getter"===i?"get":"setter"===i?"set":"value",k=!b&&a?d.static?a:a.prototype:null,l=b||(k?Object.getOwnPropertyDescriptor(k,d.name):{}),m=!1,n=c.length-1;n>=0;n--){var o={};for(var p in d)o[p]="access"===p?{}:d[p];for(var p in d.access)o.access[p]=d.access[p];o.addInitializer=function(a){if(m)throw TypeError("Cannot add initializers after decoration has completed");f.push(g(a||null))};var q=(0,c[n])("accessor"===i?{get:l.get,set:l.set}:l[j],o);if("accessor"===i){if(void 0===q)continue;if(null===q||"object"!=typeof q)throw TypeError("Object expected");(h=g(q.get))&&(l.get=h),(h=g(q.set))&&(l.set=h),(h=g(q.init))&&e.unshift(h)}else(h=g(q))&&("field"===i?e.unshift(h):l[j]=h)}k&&Object.defineProperty(k,d.name,l),m=!0}function i(a,b,c){for(var d=arguments.length>2,e=0;e<b.length;e++)c=d?b[e].call(a,c):b[e].call(a);return d?c:void 0}function j(a){return"symbol"==typeof a?a:"".concat(a)}function k(a,b,c){return"symbol"==typeof b&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:c?"".concat(c," ",b):b})}function l(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)}function m(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function n(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}var o=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]};function p(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||o(b,a,c)}function q(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function s(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(r(arguments[b]));return a}function t(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}function u(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function v(a){return this instanceof v?(this.v=a,this):new v(a)}function w(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof v?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function x(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,e){b[d]=a[d]?function(b){return(c=!c)?{value:v(a[d](b)),done:!1}:e?e(b):b}:e}}function y(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=q(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function z(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}var A=Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b},B=function(a){return(B=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)};function C(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=B(a),d=0;d<c.length;d++)"default"!==c[d]&&o(b,a,c[d]);return A(b,a),b}function D(a){return a&&a.__esModule?a:{default:a}}function E(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)}function F(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c}function G(a,b){if(null===b||"object"!=typeof b&&"function"!=typeof b)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof a?b===a:a.has(b)}function H(a,b,c){if(null!=b){var d,e;if("object"!=typeof b&&"function"!=typeof b)throw TypeError("Object expected.");if(c){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");d=b[Symbol.asyncDispose]}if(void 0===d){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");d=b[Symbol.dispose],c&&(e=d)}if("function"!=typeof d)throw TypeError("Object not disposable.");e&&(d=function(){try{e.call(this)}catch(a){return Promise.reject(a)}}),a.stack.push({value:b,dispose:d,async:c})}else c&&a.stack.push({async:!0});return b}var I="function"==typeof SuppressedError?SuppressedError:function(a,b,c){var d=Error(c);return d.name="SuppressedError",d.error=a,d.suppressed=b,d};function J(a){function b(b){a.error=a.hasError?new I(b,a.error,"An error was suppressed during disposal."):b,a.hasError=!0}var c,d=0;return function e(){for(;c=a.stack.pop();)try{if(!c.async&&1===d)return d=0,a.stack.push(c),Promise.resolve().then(e);if(c.dispose){var f=c.dispose.call(c.value);if(c.async)return d|=2,Promise.resolve(f).then(e,function(a){return b(a),e()})}else d|=1}catch(a){b(a)}if(1===d)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}()}function K(a,b){return"string"==typeof a&&/^\.\.?\//.test(a)?a.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,d,e,f){return c?b?".jsx":".js":!d||e&&f?d+e+"."+f.toLowerCase()+"js":a}):a}let L={__extends:c,__assign:d,__rest:e,__decorate:f,__param:g,__esDecorate:h,__runInitializers:i,__propKey:j,__setFunctionName:k,__metadata:l,__awaiter:m,__generator:n,__createBinding:o,__exportStar:p,__values:q,__read:r,__spread:s,__spreadArrays:t,__spreadArray:u,__await:v,__asyncGenerator:w,__asyncDelegator:x,__asyncValues:y,__makeTemplateObject:z,__importStar:C,__importDefault:D,__classPrivateFieldGet:E,__classPrivateFieldSet:F,__classPrivateFieldIn:G,__addDisposableResource:H,__disposeResources:J,__rewriteRelativeImportExtension:K};a.s(["__addDisposableResource",()=>H,"__assign",()=>d,"__asyncDelegator",()=>x,"__asyncGenerator",()=>w,"__asyncValues",()=>y,"__await",()=>v,"__awaiter",()=>m,"__classPrivateFieldGet",()=>E,"__classPrivateFieldIn",()=>G,"__classPrivateFieldSet",()=>F,"__createBinding",()=>o,"__decorate",()=>f,"__disposeResources",()=>J,"__esDecorate",()=>h,"__exportStar",()=>p,"__extends",()=>c,"__generator",()=>n,"__importDefault",()=>D,"__importStar",()=>C,"__makeTemplateObject",()=>z,"__metadata",()=>l,"__param",()=>g,"__propKey",()=>j,"__read",()=>r,"__rest",()=>e,"__rewriteRelativeImportExtension",()=>K,"__runInitializers",()=>i,"__setFunctionName",()=>k,"__spread",()=>s,"__spreadArray",()=>u,"__spreadArrays",()=>t,"__values",()=>q,"default",0,L])},17204,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AbortError=void 0,c.AbortError=class extends Error{constructor(a){super(a),this.name="AbortError"}}},30826,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.log=function(a,...b){g.default.stderr.write(`${f.default.format(a,...b)}${e.EOL}`)};let d=a.r(84710),e=a.r(60526),f=d.__importDefault(a.r(12057)),g=d.__importDefault(a.r(59639))},23340,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0});let e=a.r(30826),f="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0,g=[],h=[],i=[];f&&k(f);let j=Object.assign(a=>n(a),{enable:k,enabled:l,disable:function(){let a=d||"";return k(""),a},log:e.log});function k(a){for(let b of(d=a,g=[],h=[],a.split(",").map(a=>a.trim())))b.startsWith("-")?h.push(b.substring(1)):g.push(b);for(let a of i)a.enabled=l(a.namespace)}function l(a){if(a.endsWith("*"))return!0;for(let b of h)if(m(a,b))return!1;for(let b of g)if(m(a,b))return!0;return!1}function m(a,b){if(-1===b.indexOf("*"))return a===b;let c=b;if(-1!==b.indexOf("**")){let a=[],d="";for(let c of b)if("*"===c&&"*"===d)continue;else d=c,a.push(c);c=a.join("")}let d=0,e=0,f=c.length,g=a.length,h=-1,i=-1;for(;d<g&&e<f;)if("*"===c[e]){if(h=e,++e===f)return!0;for(;a[d]!==c[e];)if(++d===g)return!1;i=d,d++,e++;continue}else if(c[e]===a[d])e++,d++;else{if(!(h>=0)||(e=h+1,(d=i+1)===g))return!1;for(;a[d]!==c[e];)if(++d===g)return!1;i=d,d++,e++;continue}let j=d===a.length,k=e===c.length,l=e===c.length-1&&"*"===c[e];return j&&(k||l)}function n(a){let b=Object.assign(function(...c){b.enabled&&(c.length>0&&(c[0]=`${a} ${c[0]}`),b.log(...c))},{enabled:l(a),destroy:o,log:j.log,namespace:a,extend:p});return i.push(b),b}function o(){let a=i.indexOf(this);return a>=0&&(i.splice(a,1),!0)}function p(a){let b=n(`${this.namespace}:${a}`);return b.log=this.log,b}c.default=j},55223,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TypeSpecRuntimeLogger=void 0,c.createLoggerContext=i,c.setLogLevel=function(a){j.setLogLevel(a)},c.getLogLevel=function(){return j.getLogLevel()},c.createClientLogger=function(a){return j.createClientLogger(a)};let d=a.r(84710).__importDefault(a.r(23340)),e=["verbose","info","warning","error"],f={verbose:400,info:300,warning:200,error:100};function g(a,b){b.log=(...b)=>{a.log(...b)}}function h(a){return e.includes(a)}function i(a){let b,c=new Set,i="undefined"!=typeof process&&process.env&&process.env[a.logLevelEnvVarName]||void 0,j=(0,d.default)(a.namespace);function k(a){if(a&&!h(a))throw Error(`Unknown log level '${a}'. Acceptable values: ${e.join(",")}`);b=a;let f=[];for(let a of c)l(a)&&f.push(a.namespace);d.default.enable(f.join(","))}function l(a){return!!(b&&f[a.level]<=f[b])}function m(a,b){let e=Object.assign(a.extend(b),{level:b});if(g(a,e),l(e)){let a=d.default.disable();d.default.enable(a+","+e.namespace)}return c.add(e),e}return j.log=(...a)=>{d.default.log(...a)},i&&(h(i)?k(i):console.error(`${a.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${e.join(", ")}.`)),{setLogLevel:k,getLogLevel:function(){return b},createClientLogger:function(a){let b=j.extend(a);return g(j,b),{error:m(b,"error"),warning:m(b,"warning"),info:m(b,"info"),verbose:m(b,"verbose")}},logger:j}}let j=i({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});c.TypeSpecRuntimeLogger=j.logger},80646,(a,b,c)=>{"use strict";function d(a){return a.toLowerCase()}Object.defineProperty(c,"__esModule",{value:!0}),c.createHttpHeaders=function(a){return new e(a)};class e{_headersMap;constructor(a){if(this._headersMap=new Map,a)for(const b of Object.keys(a))this.set(b,a[b])}set(a,b){this._headersMap.set(d(a),{name:a,value:String(b).trim()})}get(a){return this._headersMap.get(d(a))?.value}has(a){return this._headersMap.has(d(a))}delete(a){this._headersMap.delete(d(a))}toJSON(a={}){let b={};if(a.preserveCase)for(let a of this._headersMap.values())b[a.name]=a.value;else for(let[a,c]of this._headersMap)b[a]=c.value;return b}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(a){for(let b of a.values())yield[b.name,b.value]}(this._headersMap)}}},88298,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},73023,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},48426,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.randomUUID=function(){return crypto.randomUUID()}},33251,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createPipelineRequest=function(a){return new f(a)};let d=a.r(80646),e=a.r(48426);class f{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(a){this.url=a.url,this.body=a.body,this.headers=a.headers??(0,d.createHttpHeaders)(),this.method=a.method??"GET",this.timeout=a.timeout??0,this.multipartBody=a.multipartBody,this.formData=a.formData,this.disableKeepAlive=a.disableKeepAlive??!1,this.proxySettings=a.proxySettings,this.streamResponseStatusCodes=a.streamResponseStatusCodes,this.withCredentials=a.withCredentials??!1,this.abortSignal=a.abortSignal,this.onUploadProgress=a.onUploadProgress,this.onDownloadProgress=a.onDownloadProgress,this.requestId=a.requestId||(0,e.randomUUID)(),this.allowInsecureConnection=a.allowInsecureConnection??!1,this.enableBrowserStreams=a.enableBrowserStreams??!1,this.requestOverrides=a.requestOverrides,this.authSchemes=a.authSchemes}}},8732,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createEmptyPipeline=function(){return e.create()};let d=new Set(["Deserialize","Serialize","Retry","Sign"]);class e{_policies=[];_orderedPolicies;constructor(a){this._policies=a?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(a,b={}){if(b.phase&&b.afterPhase)throw Error("Policies inside a phase cannot specify afterPhase.");if(b.phase&&!d.has(b.phase))throw Error(`Invalid phase name: ${b.phase}`);if(b.afterPhase&&!d.has(b.afterPhase))throw Error(`Invalid afterPhase name: ${b.afterPhase}`);this._policies.push({policy:a,options:b}),this._orderedPolicies=void 0}removePolicy(a){let b=[];return this._policies=this._policies.filter(c=>(!a.name||c.policy.name!==a.name)&&(!a.phase||c.options.phase!==a.phase)||(b.push(c.policy),!1)),this._orderedPolicies=void 0,b}sendRequest(a,b){return this.getOrderedPolicies().reduceRight((a,b)=>c=>b.sendRequest(c,a),b=>a.sendRequest(b))(b)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new e(this._policies)}static create(){return new e}orderPolicies(){let a=[],b=new Map;function c(a){return{name:a,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let d=c("Serialize"),e=c("None"),f=c("Deserialize"),g=c("Retry"),h=c("Sign"),i=[d,e,f,g,h];function j(a){return"Retry"===a?g:"Serialize"===a?d:"Deserialize"===a?f:"Sign"===a?h:e}for(let a of this._policies){let c=a.policy,d=a.options,e=c.name;if(b.has(e))throw Error("Duplicate policy names not allowed in pipeline");let f={policy:c,dependsOn:new Set,dependants:new Set};d.afterPhase&&(f.afterPhase=j(d.afterPhase),f.afterPhase.hasAfterPolicies=!0),b.set(e,f),j(d.phase).policies.add(f)}for(let a of this._policies){let{policy:c,options:d}=a,e=c.name,f=b.get(e);if(!f)throw Error(`Missing node for policy ${e}`);if(d.afterPolicies)for(let a of d.afterPolicies){let c=b.get(a);c&&(f.dependsOn.add(c),c.dependants.add(f))}if(d.beforePolicies)for(let a of d.beforePolicies){let c=b.get(a);c&&(c.dependsOn.add(f),f.dependants.add(c))}}function k(c){for(let d of(c.hasRun=!0,c.policies))if((!d.afterPhase||d.afterPhase.hasRun&&!d.afterPhase.policies.size)&&0===d.dependsOn.size){for(let b of(a.push(d.policy),d.dependants))b.dependsOn.delete(d);b.delete(d.policy.name),c.policies.delete(d)}}let l=0;for(;b.size>0;){l++;let b=a.length;if(!function(){for(let a of i){if(k(a),a.policies.size>0&&a!==e){e.hasRun||k(e);return}a.hasAfterPolicies&&k(e)}}(),a.length<=b&&l>1)throw Error("Cannot satisfy policy dependencies due to requirements cycle.")}return a}}},57492,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isObject=function(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)&&!(a instanceof RegExp)&&!(a instanceof Date)}},72984,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isError=function(a){if((0,d.isObject)(a)){let b="string"==typeof a.name,c="string"==typeof a.message;return b&&c}return!1};let d=a.r(57492)},34231,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.custom=void 0,c.custom=a.r(12057).inspect.custom},73282,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Sanitizer=void 0;let d=a.r(57492),e="REDACTED",f=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],g=["api-version"];c.Sanitizer=class{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:a=[],additionalAllowedQueryParameters:b=[]}={}){a=f.concat(a),b=g.concat(b),this.allowedHeaderNames=new Set(a.map(a=>a.toLowerCase())),this.allowedQueryParameters=new Set(b.map(a=>a.toLowerCase()))}sanitize(a){let b=new Set;return JSON.stringify(a,(a,c)=>{if(c instanceof Error)return{...c,name:c.name,message:c.message};if("headers"===a)return this.sanitizeHeaders(c);if("url"===a)return this.sanitizeUrl(c);if("query"===a)return this.sanitizeQuery(c);if("body"!==a){if("response"===a)return;else if("operationSpec"===a)return;else if(Array.isArray(c)||(0,d.isObject)(c)){if(b.has(c))return"[Circular]";b.add(c)}return c}},2)}sanitizeUrl(a){if("string"!=typeof a||null===a||""===a)return a;let b=new URL(a);if(!b.search)return a;for(let[a]of b.searchParams)this.allowedQueryParameters.has(a.toLowerCase())||b.searchParams.set(a,e);return b.toString()}sanitizeHeaders(a){let b={};for(let c of Object.keys(a))this.allowedHeaderNames.has(c.toLowerCase())?b[c]=a[c]:b[c]=e;return b}sanitizeQuery(a){if("object"!=typeof a||null===a)return a;let b={};for(let c of Object.keys(a))this.allowedQueryParameters.has(c.toLowerCase())?b[c]=a[c]:b[c]=e;return b}}},83166,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.RestError=void 0,c.isRestError=function(a){return a instanceof g||(0,d.isError)(a)&&"RestError"===a.name};let d=a.r(72984),e=a.r(34231),f=new(a.r(73282)).Sanitizer;class g extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(a,b={}){super(a),this.name="RestError",this.code=b.code,this.statusCode=b.statusCode,Object.defineProperty(this,"request",{value:b.request,enumerable:!1}),Object.defineProperty(this,"response",{value:b.response,enumerable:!1});const c=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,e.custom,{value:()=>`RestError: ${this.message} 
 ${f.sanitize({...this,request:{...this.request,agent:c},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,g.prototype)}}c.RestError=g},63860,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.uint8ArrayToString=function(a,b){return Buffer.from(a).toString(b)},c.stringToUint8Array=function(a,b){return Buffer.from(a,b)}},47299,(a,b,c)=>{b.exports=a.x("node:http",()=>require("node:http"))},43698,(a,b,c)=>{b.exports=a.x("node:https",()=>require("node:https"))},27028,(a,b,c)=>{b.exports=a.x("node:zlib",()=>require("node:zlib"))},51496,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.logger=void 0,c.logger=(0,a.r(55223).createClientLogger)("ts-http-runtime")},16677,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getBodyLength=t,c.createNodeHttpClient=function(){return new s};let d=a.r(84710),e=d.__importDefault(a.r(47299)),f=d.__importDefault(a.r(43698)),g=d.__importDefault(a.r(27028)),h=a.r(81111),i=a.r(17204),j=a.r(80646),k=a.r(83166),l=a.r(51496),m=a.r(73282),n={};function o(a){return a&&"function"==typeof a.pipe}function p(a){return!1===a.readable?Promise.resolve():new Promise(b=>{let c=()=>{b(),a.removeListener("close",c),a.removeListener("end",c),a.removeListener("error",c)};a.on("close",c),a.on("end",c),a.on("error",c)})}function q(a){return a&&"number"==typeof a.byteLength}class r extends h.Transform{loadedBytes=0;progressCallback;_transform(a,b,c){this.push(a),this.loadedBytes+=a.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),c()}catch(a){c(a)}}constructor(a){super(),this.progressCallback=a}}class s{cachedHttpAgent;cachedHttpsAgents=new WeakMap;async sendRequest(a){let b,c,d,e=new AbortController;if(a.abortSignal){if(a.abortSignal.aborted)throw new i.AbortError("The operation was aborted. Request has already been canceled.");b=a=>{"abort"===a.type&&e.abort()},a.abortSignal.addEventListener("abort",b)}a.timeout>0&&(c=setTimeout(()=>{let b=new m.Sanitizer;l.logger.info(`request to '${b.sanitizeUrl(a.url)}' timed out. canceling...`),e.abort()},a.timeout));let f=a.headers.get("Accept-Encoding"),h=f?.includes("gzip")||f?.includes("deflate"),n="function"==typeof a.body?a.body():a.body;if(n&&!a.headers.has("Content-Length")){let b=t(n);null!==b&&a.headers.set("Content-Length",b)}try{var q;if(n&&a.onUploadProgress){let b=a.onUploadProgress,c=new r(b);c.on("error",a=>{l.logger.error("Error in upload progress",a)}),o(n)?n.pipe(c):c.end(n),n=c}let b=await this.makeRequest(a,e,n);void 0!==c&&clearTimeout(c);let f=function(a){let b=(0,j.createHttpHeaders)();for(let c of Object.keys(a.headers)){let d=a.headers[c];Array.isArray(d)?d.length>0&&b.set(c,d[0]):d&&b.set(c,d)}return b}(b),i={status:b.statusCode??0,headers:f,request:a};if("HEAD"===a.method)return b.resume(),i;d=h?function(a,b){let c=b.get("Content-Encoding");if("gzip"===c){let b=g.default.createGunzip();return a.pipe(b),b}if("deflate"===c){let b=g.default.createInflate();return a.pipe(b),b}return a}(b,f):b;let m=a.onDownloadProgress;if(m){let a=new r(m);a.on("error",a=>{l.logger.error("Error in download progress",a)}),d.pipe(a),d=a}return a.streamResponseStatusCodes?.has(1/0)||a.streamResponseStatusCodes?.has(i.status)?i.readableStreamBody=d:i.bodyAsText=await (q=d,new Promise((a,b)=>{let c=[];q.on("data",a=>{Buffer.isBuffer(a)?c.push(a):c.push(Buffer.from(a))}),q.on("end",()=>{a(Buffer.concat(c).toString("utf8"))}),q.on("error",a=>{a&&a?.name==="AbortError"?b(a):b(new k.RestError(`Error reading response as text: ${a.message}`,{code:k.RestError.PARSE_ERROR}))})})),i}finally{if(a.abortSignal&&b){let c=Promise.resolve();o(n)&&(c=p(n));let e=Promise.resolve();o(d)&&(e=p(d)),Promise.all([c,e]).then(()=>{b&&a.abortSignal?.removeEventListener("abort",b)}).catch(a=>{l.logger.warning("Error when cleaning up abortListener on httpRequest",a)})}}}makeRequest(a,b,c){let d=new URL(a.url),g="https:"!==d.protocol;if(g&&!a.allowInsecureConnection)throw Error(`Cannot connect to ${a.url} while allowInsecureConnection is false.`);let h={agent:a.agent??this.getOrCreateAgent(a,g),hostname:d.hostname,path:`${d.pathname}${d.search}`,port:d.port,method:a.method,headers:a.headers.toJSON({preserveCase:!0}),...a.requestOverrides};return new Promise((d,j)=>{let m=g?e.default.request(h,d):f.default.request(h,d);m.once("error",b=>{j(new k.RestError(b.message,{code:b.code??k.RestError.REQUEST_SEND_ERROR,request:a}))}),b.signal.addEventListener("abort",()=>{let a=new i.AbortError("The operation was aborted. Rejecting from abort signal callback while making request.");m.destroy(a),j(a)}),c&&o(c)?c.pipe(m):c?"string"==typeof c||Buffer.isBuffer(c)?m.end(c):q(c)?m.end(ArrayBuffer.isView(c)?Buffer.from(c.buffer):Buffer.from(c)):(l.logger.error("Unrecognized body type",c),j(new k.RestError("Unrecognized body type"))):m.end()})}getOrCreateAgent(a,b){let c=a.disableKeepAlive;if(b)return c?e.default.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new e.default.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(c&&!a.tlsSettings)return f.default.globalAgent;let b=a.tlsSettings??n,d=this.cachedHttpsAgents.get(b);return d&&!c===d.options.keepAlive||(l.logger.info("No cached TLS Agent exist, creating a new Agent"),d=new f.default.Agent({keepAlive:!c,...b}),this.cachedHttpsAgents.set(b,d)),d}}}function t(a){if(!a)return 0;if(Buffer.isBuffer(a))return a.length;if(o(a))return null;if(q(a))return a.byteLength;if("string"==typeof a)return Buffer.from(a).length;else return null}},27886,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createDefaultHttpClient=function(){return(0,d.createNodeHttpClient)()};let d=a.r(16677)},65782,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.logPolicyName=void 0,c.logPolicy=function(a={}){let b=a.logger??d.logger.info,f=new e.Sanitizer({additionalAllowedHeaderNames:a.additionalAllowedHeaderNames,additionalAllowedQueryParameters:a.additionalAllowedQueryParameters});return{name:c.logPolicyName,async sendRequest(a,c){if(!b.enabled)return c(a);b(`Request: ${f.sanitize(a)}`);let d=await c(a);return b(`Response status code: ${d.status}`),b(`Headers: ${f.sanitize(d.headers)}`),d}}};let d=a.r(51496),e=a.r(73282);c.logPolicyName="logPolicy"},99003,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.redirectPolicyName=void 0,c.redirectPolicy=function(a={}){let{maxRetries:b=20}=a;return{name:c.redirectPolicyName,async sendRequest(a,c){let d=await c(a);return e(c,d,b)}}},c.redirectPolicyName="redirectPolicy";let d=["GET","HEAD"];async function e(a,b,c,f=0){let{request:g,status:h,headers:i}=b,j=i.get("location");if(j&&(300===h||301===h&&d.includes(g.method)||302===h&&d.includes(g.method)||303===h&&"POST"===g.method||307===h)&&f<c){let b=new URL(j,g.url);g.url=b.toString(),303===h&&(g.method="GET",g.headers.delete("Content-Length"),delete g.body),g.headers.delete("Authorization");let d=await a(g);return e(a,d,c,f+1)}return b}},2947,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getHeaderName=function(){return"User-Agent"},c.setPlatformSpecificData=g;let d=a.r(84710),e=d.__importDefault(a.r(60526)),f=d.__importDefault(a.r(59639));async function g(a){if(f.default&&f.default.versions){let b=`${e.default.type()} ${e.default.release()}; ${e.default.arch()}`,c=f.default.versions;c.bun?a.set("Bun",`${c.bun} (${b})`):c.deno?a.set("Deno",`${c.deno} (${b})`):c.node&&a.set("Node",`${c.node} (${b})`)}}},75772,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_RETRY_POLICY_COUNT=c.SDK_VERSION=void 0,c.SDK_VERSION="0.3.2",c.DEFAULT_RETRY_POLICY_COUNT=3},66755,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getUserAgentHeaderName=function(){return(0,d.getHeaderName)()},c.getUserAgentValue=f;let d=a.r(2947),e=a.r(75772);async function f(a){let b=new Map;b.set("ts-http-runtime",e.SDK_VERSION),await (0,d.setPlatformSpecificData)(b);let c=function(a){let b=[];for(let[c,d]of a){let a=d?`${c}/${d}`:c;b.push(a)}return b.join(" ")}(b);return a?`${a} ${c}`:c}},66603,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.userAgentPolicyName=void 0,c.userAgentPolicy=function(a={}){let b=(0,d.getUserAgentValue)(a.userAgentPrefix);return{name:c.userAgentPolicyName,sendRequest:async(a,c)=>(a.headers.has(e)||a.headers.set(e,await b),c(a))}};let d=a.r(66755),e=(0,d.getUserAgentHeaderName)();c.userAgentPolicyName="userAgentPolicy"},2805,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decompressResponsePolicyName=void 0,c.decompressResponsePolicy=function(){return{name:c.decompressResponsePolicyName,sendRequest:async(a,b)=>("HEAD"!==a.method&&a.headers.set("Accept-Encoding","gzip,deflate"),b(a))}},c.decompressResponsePolicyName="decompressResponsePolicy"},26115,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getRandomIntegerInclusive=function(a,b){return a=Math.ceil(a),Math.floor(Math.random()*((b=Math.floor(b))-a+1))+a}},70928,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.calculateRetryDelay=function(a,b){let c=b.retryDelayInMs*Math.pow(2,a),e=Math.min(b.maxRetryDelayInMs,c);return{retryAfterInMs:e/2+(0,d.getRandomIntegerInclusive)(0,e/2)}};let d=a.r(26115)},10599,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.delay=function(a,b,c){return new Promise((e,f)=>{let g,h,i=()=>f(new d.AbortError(c?.abortErrorMsg?c?.abortErrorMsg:"The operation was aborted.")),j=()=>{c?.abortSignal&&h&&c.abortSignal.removeEventListener("abort",h)};if(h=()=>(g&&clearTimeout(g),j(),i()),c?.abortSignal&&c.abortSignal.aborted)return i();g=setTimeout(()=>{j(),e(b)},a),c?.abortSignal&&c.abortSignal.addEventListener("abort",h)})},c.parseHeaderValueAsNumber=function(a,b){let c=a.headers.get(b);if(!c)return;let d=Number(c);if(!Number.isNaN(d))return d};let d=a.r(17204)},3107,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isThrottlingRetryResponse=function(a){return Number.isFinite(g(a))},c.throttlingRetryStrategy=function(){return{name:"throttlingRetryStrategy",retry({response:a}){let b=g(a);return Number.isFinite(b)?{retryAfterInMs:b}:{skipStrategy:!0}}}};let d=a.r(10599),e="Retry-After",f=["retry-after-ms","x-ms-retry-after-ms",e];function g(a){if(a&&[429,503].includes(a.status))try{for(let b of f){let c=(0,d.parseHeaderValueAsNumber)(a,b);if(0===c||c){let a=b===e?1e3:1;return c*a}}let b=a.headers.get(e);if(!b)return;let c=Date.parse(b)-Date.now();return Number.isFinite(c)?Math.max(0,c):void 0}catch{return}}},49484,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.exponentialRetryStrategy=function(a={}){let b=a.retryDelayInMs??1e3,c=a.maxRetryDelayInMs??64e3;return{name:"exponentialRetryStrategy",retry({retryCount:h,response:i,responseError:j}){let k=g(j),l=k&&a.ignoreSystemErrors,m=f(i),n=m&&a.ignoreHttpStatusCodes;return i&&((0,e.isThrottlingRetryResponse)(i)||!m)||n||l?{skipStrategy:!0}:!j||k||m?(0,d.calculateRetryDelay)(h,{retryDelayInMs:b,maxRetryDelayInMs:c}):{errorToThrow:j}}}},c.isExponentialRetryResponse=f,c.isSystemError=g;let d=a.r(70928),e=a.r(3107);function f(a){return!!(a&&void 0!==a.status&&(a.status>=500||408===a.status)&&501!==a.status&&505!==a.status)}function g(a){return!!a&&("ETIMEDOUT"===a.code||"ESOCKETTIMEDOUT"===a.code||"ECONNREFUSED"===a.code||"ECONNRESET"===a.code||"ENOENT"===a.code||"ENOTFOUND"===a.code)}},22428,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.retryPolicy=function(a,b={maxRetries:g.DEFAULT_RETRY_POLICY_COUNT}){let c=b.logger||h;return{name:"retryPolicy",async sendRequest(f,h){let i,j,k=-1;a:for(;;){k+=1,i=void 0,j=void 0;try{c.info(`Retry ${k}: Attempting to send request`,f.requestId),i=await h(f),c.info(`Retry ${k}: Received a response from request`,f.requestId)}catch(a){if(c.error(`Retry ${k}: Received an error from request`,f.requestId),j=a,!a||"RestError"!==j.name)throw a;i=j.response}if(f.abortSignal?.aborted)throw c.error(`Retry ${k}: Request aborted.`),new e.AbortError;if(k>=(b.maxRetries??g.DEFAULT_RETRY_POLICY_COUNT)){if(c.info(`Retry ${k}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),j)throw j;if(i)return i;throw Error("Maximum retries reached with no response or error to throw")}for(let b of(c.info(`Retry ${k}: Processing ${a.length} retry strategies.`),a)){let a=b.logger||c;a.info(`Retry ${k}: Processing retry strategy ${b.name}.`);let e=b.retry({retryCount:k,response:i,responseError:j});if(e.skipStrategy){a.info(`Retry ${k}: Skipped.`);continue}let{errorToThrow:g,retryAfterInMs:h,redirectTo:l}=e;if(g)throw a.error(`Retry ${k}: Retry strategy ${b.name} throws error:`,g),g;if(h||0===h){a.info(`Retry ${k}: Retry strategy ${b.name} retries after ${h}`),await (0,d.delay)(h,void 0,{abortSignal:f.abortSignal});continue a}if(l){a.info(`Retry ${k}: Retry strategy ${b.name} redirects to ${l}`),f.url=l;continue a}}if(j)throw c.info("None of the retry strategies could work with the received error. Throwing it."),j;if(i)return c.info("None of the retry strategies could work with the received response. Returning it."),i}}}};let d=a.r(10599),e=a.r(17204),f=a.r(55223),g=a.r(75772),h=(0,f.createClientLogger)("ts-http-runtime retryPolicy")},26799,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.defaultRetryPolicyName=void 0,c.defaultRetryPolicy=function(a={}){return{name:c.defaultRetryPolicyName,sendRequest:(0,f.retryPolicy)([(0,e.throttlingRetryStrategy)(),(0,d.exponentialRetryStrategy)(a)],{maxRetries:a.maxRetries??g.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};let d=a.r(49484),e=a.r(3107),f=a.r(22428),g=a.r(75772);c.defaultRetryPolicyName="defaultRetryPolicy"},18370,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isReactNative=c.isNodeRuntime=c.isNodeLike=c.isBun=c.isDeno=c.isWebWorker=c.isBrowser=void 0,c.isBrowser=!1,c.isWebWorker="object"==typeof self&&"function"==typeof self?.importScripts&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),c.isDeno="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno,c.isBun="undefined"!=typeof Bun&&void 0!==Bun.version,c.isNodeLike=void 0!==globalThis.process&&!!globalThis.process.version&&!!globalThis.process.versions?.node,c.isNodeRuntime=c.isNodeLike&&!c.isBun&&!c.isDeno,c.isReactNative="undefined"!=typeof navigator&&navigator?.product==="ReactNative"},52266,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.formDataPolicyName=void 0,c.formDataPolicy=function(){return{name:c.formDataPolicyName,async sendRequest(a,b){if(e.isNodeLike&&"undefined"!=typeof FormData&&a.body instanceof FormData&&(a.formData=function(a){let b={};for(let[c,d]of a.entries())b[c]??=[],b[c].push(d);return b}(a.body),a.body=void 0),a.formData){let b=a.headers.get("Content-Type");b&&-1!==b.indexOf("application/x-www-form-urlencoded")?a.body=function(a){let b=new URLSearchParams;for(let[c,d]of Object.entries(a))if(Array.isArray(d))for(let a of d)b.append(c,a.toString());else b.append(c,d.toString());return b.toString()}(a.formData):await g(a.formData,a),a.formData=void 0}return b(a)}}};let d=a.r(63860),e=a.r(18370),f=a.r(80646);async function g(a,b){let c=b.headers.get("Content-Type");if(c&&!c.startsWith("multipart/form-data"))return;b.headers.set("Content-Type",c??"multipart/form-data");let e=[];for(let[b,c]of Object.entries(a))for(let a of Array.isArray(c)?c:[c])if("string"==typeof a)e.push({headers:(0,f.createHttpHeaders)({"Content-Disposition":`form-data; name="${b}"`}),body:(0,d.stringToUint8Array)(a,"utf-8")});else if(null==a||"object"!=typeof a)throw Error(`Unexpected value for key ${b}: ${a}. Value should be serialized to string first.`);else{let c=a.name||"blob",d=(0,f.createHttpHeaders)();d.set("Content-Disposition",`form-data; name="${b}"; filename="${c}"`),d.set("Content-Type",a.type||"application/octet-stream"),e.push({headers:d,body:a})}b.multipartBody={parts:e}}c.formDataPolicyName="formDataPolicy"},20667,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b};Object.defineProperty(c,"__esModule",{value:!0}),c.req=c.json=c.toBuffer=void 0;let g=f(a.r(21517)),h=f(a.r(24836));async function i(a){let b=0,c=[];for await(let d of a)b+=d.length,c.push(d);return Buffer.concat(c,b)}c.toBuffer=i,c.json=async function(a){let b=(await i(a)).toString("utf8");try{return JSON.parse(b)}catch(a){throw a.message+=` (input: ${b})`,a}},c.req=function(a,b={}){let c=(("string"==typeof a?a:a.href).startsWith("https:")?h:g).request(a,b),d=new Promise((a,b)=>{c.once("response",a).once("error",b).end()});return c.then=d.then.bind(d),c}},45290,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.Agent=void 0;let h=f(a.r(4446)),i=f(a.r(21517)),j=a.r(24836);g(a.r(20667),c);let k=Symbol("AgentBaseInternalState");class l extends i.Agent{constructor(a){super(a),this[k]={}}isSecureEndpoint(a){if(a){if("boolean"==typeof a.secureEndpoint)return a.secureEndpoint;if("string"==typeof a.protocol)return"https:"===a.protocol}let{stack:b}=Error();return"string"==typeof b&&b.split("\n").some(a=>-1!==a.indexOf("(https.js:")||-1!==a.indexOf("node:https:"))}incrementSockets(a){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[a]||(this.sockets[a]=[]);let b=new h.Socket({writable:!1});return this.sockets[a].push(b),this.totalSocketCount++,b}decrementSockets(a,b){if(!this.sockets[a]||null===b)return;let c=this.sockets[a],d=c.indexOf(b);-1!==d&&(c.splice(d,1),this.totalSocketCount--,0===c.length&&delete this.sockets[a])}getName(a){return this.isSecureEndpoint(a)?j.Agent.prototype.getName.call(this,a):super.getName(a)}createSocket(a,b,c){let d={...b,secureEndpoint:this.isSecureEndpoint(b)},e=this.getName(d),f=this.incrementSockets(e);Promise.resolve().then(()=>this.connect(a,d)).then(g=>{if(this.decrementSockets(e,f),g instanceof i.Agent)try{return g.addRequest(a,d)}catch(a){return c(a)}this[k].currentSocket=g,super.createSocket(a,b,c)},a=>{this.decrementSockets(e,f),c(a)})}createConnection(){let a=this[k].currentSocket;if(this[k].currentSocket=void 0,!a)throw Error("No socket was returned in the `connect()` function");return a}get defaultPort(){return this[k].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(a){this[k]&&(this[k].defaultPort=a)}get protocol(){return this[k].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(a){this[k]&&(this[k].protocol=a)}}c.Agent=l},45762,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.parseProxyResponse=void 0;let e=(0,d(a.r(61430)).default)("https-proxy-agent:parse-proxy-response");c.parseProxyResponse=function(a){return new Promise((b,c)=>{let d=0,f=[];function g(){let i=a.read();i?function(i){f.push(i),d+=i.length;let j=Buffer.concat(f,d),k=j.indexOf("\r\n\r\n");if(-1===k){e("have not received end of HTTP headers yet..."),g();return}let l=j.slice(0,k).toString("ascii").split("\r\n"),m=l.shift();if(!m)return a.destroy(),c(Error("No header received from proxy CONNECT response"));let n=m.split(" "),o=+n[1],p=n.slice(2).join(" "),q={};for(let b of l){if(!b)continue;let d=b.indexOf(":");if(-1===d)return a.destroy(),c(Error(`Invalid header from proxy CONNECT response: "${b}"`));let e=b.slice(0,d).toLowerCase(),f=b.slice(d+1).trimStart(),g=q[e];"string"==typeof g?q[e]=[g,f]:Array.isArray(g)?g.push(f):q[e]=f}e("got proxy server response: %o %o",m,q),h(),b({connect:{statusCode:o,statusText:p,headers:q},buffered:j})}(i):a.once("readable",g)}function h(){a.removeListener("end",i),a.removeListener("error",j),a.removeListener("readable",g)}function i(){h(),e("onend"),c(Error("Proxy connection ended before receiving CONNECT response"))}function j(a){h(),e("onerror %o",a),c(a)}a.on("error",j),a.on("end",i),g()})}},71539,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.HttpsProxyAgent=void 0;let h=f(a.r(4446)),i=f(a.r(55004)),j=g(a.r(49719)),k=g(a.r(61430)),l=a.r(45290),m=a.r(92509),n=a.r(45762),o=(0,k.default)("https-proxy-agent"),p=a=>void 0===a.servername&&a.host&&!h.isIP(a.host)?{...a,servername:a.host}:a;class q extends l.Agent{constructor(a,b){super(b),this.options={path:void 0},this.proxy="string"==typeof a?new m.URL(a):a,this.proxyHeaders=b?.headers??{},o("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const c=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),d=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...b?s(b,"headers"):null,host:c,port:d}}async connect(a,b){let c,{proxy:d}=this;if(!b.host)throw TypeError('No "host" provided');"https:"===d.protocol?(o("Creating `tls.Socket`: %o",this.connectOpts),c=i.connect(p(this.connectOpts))):(o("Creating `net.Socket`: %o",this.connectOpts),c=h.connect(this.connectOpts));let e="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},f=h.isIPv6(b.host)?`[${b.host}]`:b.host,g=`CONNECT ${f}:${b.port} HTTP/1.1\r
`;if(d.username||d.password){let a=`${decodeURIComponent(d.username)}:${decodeURIComponent(d.password)}`;e["Proxy-Authorization"]=`Basic ${Buffer.from(a).toString("base64")}`}for(let a of(e.Host=`${f}:${b.port}`,e["Proxy-Connection"]||(e["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(e)))g+=`${a}: ${e[a]}\r
`;let k=(0,n.parseProxyResponse)(c);c.write(`${g}\r
`);let{connect:l,buffered:m}=await k;if(a.emit("proxyConnect",l),this.emit("proxyConnect",l,a),200===l.statusCode)return(a.once("socket",r),b.secureEndpoint)?(o("Upgrading socket connection to TLS"),i.connect({...s(p(b),"host","path","port"),socket:c})):c;c.destroy();let q=new h.Socket({writable:!1});return q.readable=!0,a.once("socket",a=>{o("Replaying proxy buffer for failed request"),(0,j.default)(a.listenerCount("data")>0),a.push(m),a.push(null)}),q}}function r(a){a.resume()}function s(a,...b){let c,d={};for(c in a)b.includes(c)||(d[c]=a[c]);return d}q.protocols=["http","https"],c.HttpsProxyAgent=q},5314,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.HttpProxyAgent=void 0;let h=f(a.r(4446)),i=f(a.r(55004)),j=g(a.r(61430)),k=a.r(27699),l=a.r(45290),m=a.r(92509),n=(0,j.default)("http-proxy-agent");class o extends l.Agent{constructor(a,b){super(b),this.proxy="string"==typeof a?new m.URL(a):a,this.proxyHeaders=b?.headers??{},n("Creating new HttpProxyAgent instance: %o",this.proxy.href);const c=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),d=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={...b?function(a,...b){let c,d={};for(c in a)b.includes(c)||(d[c]=a[c]);return d}(b,"headers"):null,host:c,port:d}}addRequest(a,b){a._header=null,this.setRequestProps(a,b),super.addRequest(a,b)}setRequestProps(a,b){let{proxy:c}=this,d=b.secureEndpoint?"https:":"http:",e=a.getHeader("host")||"localhost",f=`${d}//${e}`,g=new m.URL(a.path,f);80!==b.port&&(g.port=String(b.port)),a.path=String(g);let h="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders};if(c.username||c.password){let a=`${decodeURIComponent(c.username)}:${decodeURIComponent(c.password)}`;h["Proxy-Authorization"]=`Basic ${Buffer.from(a).toString("base64")}`}for(let b of(h["Proxy-Connection"]||(h["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(h))){let c=h[b];c&&a.setHeader(b,c)}}async connect(a,b){let c,d,e;return a._header=null,a.path.includes("://")||this.setRequestProps(a,b),n("Regenerating stored HTTP header string for request"),a._implicitHeader(),a.outputData&&a.outputData.length>0&&(n("Patching connection write() output buffer with updated header"),d=(c=a.outputData[0].data).indexOf("\r\n\r\n")+4,a.outputData[0].data=a._header+c.substring(d),n("Output buffer: %o",a.outputData[0].data)),"https:"===this.proxy.protocol?(n("Creating `tls.Socket`: %o",this.connectOpts),e=i.connect(this.connectOpts)):(n("Creating `net.Socket`: %o",this.connectOpts),e=h.connect(this.connectOpts)),await (0,k.once)(e,"connect"),e}}o.protocols=["http","https"],c.HttpProxyAgent=o},92498,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.globalNoProxyList=c.proxyPolicyName=void 0,c.loadNoProxy=k,c.getDefaultProxySettings=function(a){if(!a&&!(a=j()))return;let b=new URL(a);return{host:(b.protocol?b.protocol+"//":"")+b.hostname,port:Number.parseInt(b.port||"80"),username:b.username,password:b.password}},c.proxyPolicy=function(a,b){let d;g||c.globalNoProxyList.push(...k());let e=a?l(a):(d=j())?new URL(d):void 0,f={};return{name:c.proxyPolicyName,sendRequest:async(a,d)=>(!a.proxySettings&&e&&!function(a,b,c){if(0===b.length)return!1;let d=new URL(a).hostname;if(c?.has(d))return c.get(d);let e=!1;for(let a of b)"."===a[0]?d.endsWith(a)?e=!0:d.length===a.length-1&&d===a.slice(1)&&(e=!0):d===a&&(e=!0);return c?.set(d,e),e}(a.url,b?.customNoProxyList??c.globalNoProxyList,b?.customNoProxyList?void 0:h)?m(a,f,e):a.proxySettings&&m(a,f,l(a.proxySettings)),d(a))}};let d=a.r(71539),e=a.r(5314),f=a.r(51496);c.proxyPolicyName="proxyPolicy",c.globalNoProxyList=[];let g=!1,h=new Map;function i(a){return process.env[a]?process.env[a]:process.env[a.toLowerCase()]?process.env[a.toLowerCase()]:void 0}function j(){let a=i("HTTPS_PROXY"),b=i("ALL_PROXY"),c=i("HTTP_PROXY");return a||b||c}function k(){let a=i("NO_PROXY");return(g=!0,a)?a.split(",").map(a=>a.trim()).filter(a=>a.length):[]}function l(a){let b;try{b=new URL(a.host)}catch{throw Error(`Expecting a valid host string in proxy settings, but found "${a.host}".`)}return b.port=String(a.port),a.username&&(b.username=a.username),a.password&&(b.password=a.password),b}function m(a,b,c){if(a.agent)return;let g="https:"!==new URL(a.url).protocol;a.tlsSettings&&f.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let h=a.headers.toJSON();g?(b.httpProxyAgent||(b.httpProxyAgent=new e.HttpProxyAgent(c,{headers:h})),a.agent=b.httpProxyAgent):(b.httpsProxyAgent||(b.httpsProxyAgent=new d.HttpsProxyAgent(c,{headers:h})),a.agent=b.httpsProxyAgent)}},74204,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.agentPolicyName=void 0,c.agentPolicy=function(a){return{name:c.agentPolicyName,sendRequest:async(b,c)=>(b.agent||(b.agent=a),c(b))}},c.agentPolicyName="agentPolicy"},53573,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.tlsPolicyName=void 0,c.tlsPolicy=function(a){return{name:c.tlsPolicyName,sendRequest:async(b,c)=>(b.tlsSettings||(b.tlsSettings=a),c(b))}},c.tlsPolicyName="tlsPolicy"},61940,(a,b,c)=>{"use strict";function d(a){return!!(a&&"function"==typeof a.pipe)}function e(a){return!!(a&&"function"==typeof a.getReader&&"function"==typeof a.tee)}function f(a){return d(a)||e(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.isNodeReadableStream=d,c.isWebReadableStream=e,c.isBinaryBody=function(a){return void 0!==a&&(a instanceof Uint8Array||f(a)||"function"==typeof a||a instanceof Blob)},c.isReadableStream=f,c.isBlob=function(a){return"function"==typeof a.stream}},1180,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.concat=i;let d=a.r(88947),e=a.r(61940);async function*f(){let a=this.getReader();try{for(;;){let{done:b,value:c}=await a.read();if(b)return;yield c}}finally{a.releaseLock()}}function g(a){return a instanceof ReadableStream?(a[Symbol.asyncIterator]||(a[Symbol.asyncIterator]=f.bind(a)),a.values||(a.values=f.bind(a)),d.Readable.fromWeb(a)):a}function h(a){return a instanceof Uint8Array?d.Readable.from(Buffer.from(a)):(0,e.isBlob)(a)?g(a.stream()):g(a)}async function i(a){return function(){let b=a.map(a=>"function"==typeof a?a():a).map(h);return d.Readable.from(async function*(){for(let a of b)for await(let b of a)yield b}())}}},91886,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.multipartPolicyName=void 0,c.multipartPolicy=function(){return{name:c.multipartPolicyName,async sendRequest(a,b){if(!a.multipartBody)return b(a);if(a.body)throw Error("multipartBody and regular body cannot be set at the same time");let c=a.multipartBody.boundary,d=a.headers.get("Content-Type")??"multipart/mixed",e=d.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!e)throw Error(`Got multipart request body, but content-type header was not multipart: ${d}`);let[,g,j]=e;if(j&&c&&j!==c)throw Error(`Multipart boundary was specified as ${j} in the header, but got ${c} in the request body`);if(c??=j){var k=c;if(k.length>70)throw Error(`Multipart boundary "${k}" exceeds maximum length of 70 characters`);if(Array.from(k).some(a=>!i.has(a)))throw Error(`Multipart boundary "${k}" contains invalid characters`)}else c=`----AzSDKFormBoundary${(0,f.randomUUID)()}`;return a.headers.set("Content-Type",`${g}; boundary=${c}`),await h(a,a.multipartBody.parts,c),a.multipartBody=void 0,b(a)}}};let d=a.r(63860),e=a.r(61940),f=a.r(48426),g=a.r(1180);async function h(a,b,c){let f=[(0,d.stringToUint8Array)(`--${c}`,"utf-8"),...b.flatMap(a=>[(0,d.stringToUint8Array)("\r\n","utf-8"),(0,d.stringToUint8Array)(function(a){let b="";for(let[c,d]of a)b+=`${c}: ${d}\r
`;return b}(a.headers),"utf-8"),(0,d.stringToUint8Array)("\r\n","utf-8"),a.body,(0,d.stringToUint8Array)(`\r
--${c}`,"utf-8")]),(0,d.stringToUint8Array)("--\r\n\r\n","utf-8")],h=function(a){let b=0;for(let c of a){let a=c instanceof Uint8Array?c.byteLength:(0,e.isBlob)(c)?-1===c.size?void 0:c.size:void 0;if(void 0===a)return;b+=a}return b}(f);h&&a.headers.set("Content-Length",h),a.body=await (0,g.concat)(f)}c.multipartPolicyName="multipartPolicy";let i=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?")},83115,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createPipelineFromOptions=function(a){let b=(0,e.createEmptyPipeline)();return k.isNodeLike&&(a.agent&&b.addPolicy((0,m.agentPolicy)(a.agent)),a.tlsOptions&&b.addPolicy((0,n.tlsPolicy)(a.tlsOptions)),b.addPolicy((0,l.proxyPolicy)(a.proxyOptions)),b.addPolicy((0,h.decompressResponsePolicy)())),b.addPolicy((0,j.formDataPolicy)(),{beforePolicies:[o.multipartPolicyName]}),b.addPolicy((0,g.userAgentPolicy)(a.userAgentOptions)),b.addPolicy((0,o.multipartPolicy)(),{afterPhase:"Deserialize"}),b.addPolicy((0,i.defaultRetryPolicy)(a.retryOptions),{phase:"Retry"}),k.isNodeLike&&b.addPolicy((0,f.redirectPolicy)(a.redirectOptions),{afterPhase:"Retry"}),b.addPolicy((0,d.logPolicy)(a.loggingOptions),{afterPhase:"Sign"}),b};let d=a.r(65782),e=a.r(8732),f=a.r(99003),g=a.r(66603),h=a.r(2805),i=a.r(26799),j=a.r(52266),k=a.r(18370),l=a.r(92498),m=a.r(74204),n=a.r(53573),o=a.r(91886)},35103,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.apiVersionPolicyName=void 0,c.apiVersionPolicy=function(a){return{name:c.apiVersionPolicyName,sendRequest:(b,c)=>{let d=new URL(b.url);return!d.searchParams.get("api-version")&&a.apiVersion&&(b.url=`${b.url}${Array.from(d.searchParams.keys()).length>0?"&":"?"}api-version=${a.apiVersion}`),c(b)}}},c.apiVersionPolicyName="ApiVersionPolicy"},17147,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isOAuth2TokenCredential=function(a){return"getOAuth2Token"in a},c.isBearerTokenCredential=function(a){return"getBearerToken"in a},c.isBasicCredential=function(a){return"username"in a&&"password"in a},c.isApiKeyCredential=function(a){return"key"in a}},47232,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ensureSecureConnection=function(a,b){if(!a.url.toLowerCase().startsWith("https://"))if(function(a,b){if(b.allowInsecureConnection&&a.allowInsecureConnection){let b=new URL(a.url);if("localhost"===b.hostname||"127.0.0.1"===b.hostname)return!0}return!1}(a,b))d.logger.warning("Sending token over insecure transport. Assume any token issued is compromised."),"function"!=typeof process?.emitWarning||e||(e=!0,process.emitWarning("Sending token over insecure transport. Assume any token issued is compromised."));else throw Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")};let d=a.r(51496),e=!1},84288,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.apiKeyAuthenticationPolicyName=void 0,c.apiKeyAuthenticationPolicy=function(a){return{name:c.apiKeyAuthenticationPolicyName,async sendRequest(b,c){(0,d.ensureSecureConnection)(b,a);let e=(b.authSchemes??a.authSchemes)?.find(a=>"apiKey"===a.kind);if(!e)return c(b);if("header"!==e.apiKeyLocation)throw Error(`Unsupported API key location: ${e.apiKeyLocation}`);return b.headers.set(e.name,a.credential.key),c(b)}}};let d=a.r(47232);c.apiKeyAuthenticationPolicyName="apiKeyAuthenticationPolicy"},36486,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.basicAuthenticationPolicyName=void 0,c.basicAuthenticationPolicy=function(a){return{name:c.basicAuthenticationPolicyName,async sendRequest(b,c){if((0,e.ensureSecureConnection)(b,a),!(b.authSchemes??a.authSchemes)?.find(a=>"http"===a.kind&&"basic"===a.scheme))return c(b);let{username:f,password:g}=a.credential,h=(0,d.uint8ArrayToString)((0,d.stringToUint8Array)(`${f}:${g}`,"utf-8"),"base64");return b.headers.set("Authorization",`Basic ${h}`),c(b)}}};let d=a.r(63860),e=a.r(47232);c.basicAuthenticationPolicyName="bearerAuthenticationPolicy"},49725,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.bearerAuthenticationPolicyName=void 0,c.bearerAuthenticationPolicy=function(a){return{name:c.bearerAuthenticationPolicyName,async sendRequest(b,c){if((0,d.ensureSecureConnection)(b,a),!(b.authSchemes??a.authSchemes)?.find(a=>"http"===a.kind&&"bearer"===a.scheme))return c(b);let e=await a.credential.getBearerToken({abortSignal:b.abortSignal});return b.headers.set("Authorization",`Bearer ${e}`),c(b)}}};let d=a.r(47232);c.bearerAuthenticationPolicyName="bearerAuthenticationPolicy"},59114,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.oauth2AuthenticationPolicyName=void 0,c.oauth2AuthenticationPolicy=function(a){return{name:c.oauth2AuthenticationPolicyName,async sendRequest(b,c){(0,d.ensureSecureConnection)(b,a);let e=(b.authSchemes??a.authSchemes)?.find(a=>"oauth2"===a.kind);if(!e)return c(b);let f=await a.credential.getOAuth2Token(e.flows,{abortSignal:b.abortSignal});return b.headers.set("Authorization",`Bearer ${f}`),c(b)}}};let d=a.r(47232);c.oauth2AuthenticationPolicyName="oauth2AuthenticationPolicy"},71227,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),c.createDefaultPipeline=function(a={}){let b=(0,f.createPipelineFromOptions)(a);b.addPolicy((0,g.apiVersionPolicy)(a));let{credential:c,authSchemes:d,allowInsecureConnection:e}=a;return c&&((0,h.isApiKeyCredential)(c)?b.addPolicy((0,i.apiKeyAuthenticationPolicy)({authSchemes:d,credential:c,allowInsecureConnection:e})):(0,h.isBasicCredential)(c)?b.addPolicy((0,j.basicAuthenticationPolicy)({authSchemes:d,credential:c,allowInsecureConnection:e})):(0,h.isBearerTokenCredential)(c)?b.addPolicy((0,k.bearerAuthenticationPolicy)({authSchemes:d,credential:c,allowInsecureConnection:e})):(0,h.isOAuth2TokenCredential)(c)&&b.addPolicy((0,l.oauth2AuthenticationPolicy)({authSchemes:d,credential:c,allowInsecureConnection:e}))),b},c.getCachedDefaultHttpsClient=function(){return d||(d=(0,e.createDefaultHttpClient)()),d};let e=a.r(27886),f=a.r(83115),g=a.r(35103),h=a.r(17147),i=a.r(84288),j=a.r(36486),k=a.r(49725),l=a.r(59114)},74044,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.buildBodyPart=j,c.buildMultipartBody=function(a){return{parts:a.map(j)}};let d=a.r(83166),e=a.r(80646),f=a.r(63860),g=a.r(61940);function h(a,b){if(a.headers){let c=Object.keys(a.headers).find(a=>a.toLowerCase()===b.toLowerCase());if(c)return a.headers[c]}}function i(a){return JSON.stringify(a)}function j(a){let b=function(a){let b=h(a,"content-type");if(b)return b;if(null===a.contentType)return;if(a.contentType)return a.contentType;let{body:c}=a;if(null!=c)return"string"==typeof c||"number"==typeof c||"boolean"==typeof c?"text/plain; charset=UTF-8":c instanceof Blob?c.type||"application/octet-stream":(0,g.isBinaryBody)(c)?"application/octet-stream":"application/json"}(a),c=function(a){let b,c=h(a,"content-disposition");if(c)return c;if(void 0===a.dispositionType&&void 0===a.name&&void 0===a.filename)return;let d=a.dispositionType??"form-data";if(a.name&&(d+=`; name=${i(a.name)}`),a.filename)b=a.filename;else if("undefined"!=typeof File&&a.body instanceof File){let c=a.body.name;""!==c&&(b=c)}return b&&(d+=`; filename=${i(b)}`),d}(a),j=(0,e.createHttpHeaders)(a.headers??{});return b&&j.set("content-type",b),c&&j.set("content-disposition",c),{headers:j,body:function(a,b){if(void 0===a)return new Uint8Array([]);if((0,g.isBinaryBody)(a))return a;if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)return(0,f.stringToUint8Array)(String(a),"utf-8");if(b&&/application\/(.+\+)?json(;.+)?/i.test(String(b)))return(0,f.stringToUint8Array)(JSON.stringify(a),"utf-8");throw new d.RestError(`Unsupported body/content-type combination: ${a}, ${b}`)}(a.body,b)}}},70170,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.sendRequest=j;let d=a.r(83166),e=a.r(80646),f=a.r(33251),g=a.r(71227),h=a.r(61940),i=a.r(74044);async function j(a,b,c,k={},l){let m=l??(0,g.getCachedDefaultHttpsClient)(),n=function(a,b,c={}){let d=function(a={}){return a.contentType??a.headers?.["content-type"]??function(a){if(ArrayBuffer.isView(a))return"application/octet-stream";if("string"==typeof a)try{JSON.parse(a)}catch(a){return}return"application/json"}(a.body)}(c),{body:g,multipartBody:j}=function(a,b=""){if(void 0===a)return{body:void 0};if("undefined"!=typeof FormData&&a instanceof FormData||(0,h.isReadableStream)(a))return{body:a};if(ArrayBuffer.isView(a))return{body:a instanceof Uint8Array?a:JSON.stringify(a)};switch(b.split(";")[0]){case"application/json":return{body:JSON.stringify(a)};case"multipart/form-data":if(Array.isArray(a))return{multipartBody:(0,i.buildMultipartBody)(a)};return{body:JSON.stringify(a)};case"text/plain":return{body:String(a)};default:if("string"==typeof a)return{body:a};return{body:JSON.stringify(a)}}}(c.body,d),k=(0,e.createHttpHeaders)({...c.headers?c.headers:{},accept:c.accept??c.headers?.accept??"application/json",...(void 0!==g||void 0!==j)&&d&&{"content-type":d}});return(0,f.createPipelineRequest)({url:b,method:a,body:g,multipartBody:j,headers:k,allowInsecureConnection:c.allowInsecureConnection,abortSignal:c.abortSignal,onUploadProgress:c.onUploadProgress,onDownloadProgress:c.onDownloadProgress,timeout:c.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:c.responseAsStream?new Set([1/0]):void 0})}(a,b,k);try{let a=await c.sendRequest(m,n),b=a.headers.toJSON(),e=a.readableStreamBody??a.browserStreamBody,f=k.responseAsStream||void 0!==e?void 0:function(a){let b=(a.headers.get("content-type")??"").split(";")[0],c=a.bodyAsText??"";if("text/plain"===b)return String(c);try{return c?JSON.parse(c):void 0}catch(g){if("application/json"===b){var e,f;let b,c;throw e=a,f=g,b=`Error "${f}" occurred while parsing the response body - ${e.bodyAsText}.`,c=f.code??d.RestError.PARSE_ERROR,new d.RestError(b,{code:c,statusCode:e.status,request:e.request,response:e})}return String(c)}}(a),g=e??f;return k?.onResponse&&k.onResponse({...a,request:n,rawHeaders:b,parsedBody:f}),{request:n,headers:b,status:`${a.status}`,body:g}}catch(a){if((0,d.isRestError)(a)&&a.response&&k.onResponse){let{response:b}=a,c=b.headers.toJSON();k?.onResponse({...b,request:n,rawHeaders:c},a)}throw a}}},94258,(a,b,c)=>{"use strict";function d(a,b,c,d){let e=(Array.isArray(d)?d:"object"==typeof d&&d.toString===Object.prototype.toString?Object.entries(d).flat():[d]).map(c=>{if(null==c)return"";if(!c.toString||"function"!=typeof c.toString)throw Error(`Query parameters must be able to be represented as string, ${a} can't`);let d=void 0!==c.toISOString?c.toISOString():c.toString();return b?d:encodeURIComponent(d)}).join("pipeDelimited"===c?"|":"spaceDelimited"===c?"%20":",");return`${b?a:encodeURIComponent(a)}=${e}`}function e(a,b){if(!b.pathParameters)return a;for(let[c,d]of Object.entries(b.pathParameters)){if(null==d)throw Error(`Path parameters ${c} must not be undefined or null`);if(!d.toString||"function"!=typeof d.toString)throw Error(`Path parameters must be able to be represented as string, ${c} can't`);let e=void 0!==d.toISOString?d.toISOString():String(d);b.skipUrlEncoding||(e=encodeURIComponent(d)),a=f(a,`{${c}}`,e)??""}return a}function f(a,b,c){return a&&b?a.split(b).join(c||""):a}Object.defineProperty(c,"__esModule",{value:!0}),c.buildRequestUrl=function(a,b,c,f={}){return b.startsWith("https://")||b.startsWith("http://")?b:(a=e(a,f),b=function(a,b,c={}){for(let d of b){let b="object"==typeof d&&(d.allowReserved??!1),e="object"==typeof d?d.value:d;c.skipUrlEncoding||b||(e=encodeURIComponent(e)),a=a.replace(/\{[\w-]+\}/,String(e))}return a}(b,c,f),new URL(function(a,b={}){if(!b.queryParameters)return a;let c=new URL(a),e=b.queryParameters,f=[];for(let a of Object.keys(e)){let c=e[a];if(null==c)continue;let g=function(a){let b=a.value;return void 0!==b&&void 0!==b.toString&&"function"==typeof b.toString}(c),h=g?c.value:c,i=!!g&&(c.explode??!1),j=g&&c.style?c.style:"form";if(i)if(Array.isArray(h))for(let c of h)f.push(d(a,b.skipUrlEncoding??!1,j,c));else if("object"==typeof h)for(let[a,c]of Object.entries(h))f.push(d(a,b.skipUrlEncoding??!1,j,c));else throw Error("explode can only be set to true for objects and arrays");else f.push(d(a,b.skipUrlEncoding??!1,j,h))}return""!==c.search&&(c.search+="&"),c.search+=f.join("&"),c.toString()}(`${a}/${b}`,f)).toString().replace(/([^:]\/)\/+/g,"$1"))},c.buildBaseUrl=e,c.replaceAll=f},81434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getClient=function(a,b={}){let c=b.pipeline??(0,d.createDefaultPipeline)(b);if(b.additionalPolicies?.length)for(let{policy:a,position:d}of b.additionalPolicies){let b="perRetry"===d?"Sign":void 0;c.addPolicy(a,{afterPhase:b})}let{allowInsecureConnection:e,httpClient:g}=b,i=b.endpoint??a,j=(a,...b)=>{let d=c=>(0,f.buildRequestUrl)(i,a,b,{allowInsecureConnection:e,...c});return{get:(a={})=>h("GET",d(a),c,a,e,g),post:(a={})=>h("POST",d(a),c,a,e,g),put:(a={})=>h("PUT",d(a),c,a,e,g),patch:(a={})=>h("PATCH",d(a),c,a,e,g),delete:(a={})=>h("DELETE",d(a),c,a,e,g),head:(a={})=>h("HEAD",d(a),c,a,e,g),options:(a={})=>h("OPTIONS",d(a),c,a,e,g),trace:(a={})=>h("TRACE",d(a),c,a,e,g)}};return{path:j,pathUnchecked:j,pipeline:c}};let d=a.r(71227),e=a.r(70170),f=a.r(94258),g=a.r(18370);function h(a,b,c,d,f,h){return f=d.allowInsecureConnection??f,{then:function(g,i){return(0,e.sendRequest)(a,b,c,{...d,allowInsecureConnection:f},h).then(g,i)},async asBrowserStream(){if(!g.isNodeLike)return(0,e.sendRequest)(a,b,c,{...d,allowInsecureConnection:f,responseAsStream:!0},h);throw Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.")},async asNodeStream(){if(g.isNodeLike)return(0,e.sendRequest)(a,b,c,{...d,allowInsecureConnection:f,responseAsStream:!0},h);throw Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}},58651,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.operationOptionsToRequestParameters=function(a){return{allowInsecureConnection:a.requestOptions?.allowInsecureConnection,timeout:a.requestOptions?.timeout,skipUrlEncoding:a.requestOptions?.skipUrlEncoding,abortSignal:a.abortSignal,onUploadProgress:a.requestOptions?.onUploadProgress,onDownloadProgress:a.requestOptions?.onDownloadProgress,headers:{...a.requestOptions?.headers},onResponse:a.onResponse}}},22382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createRestError=function(a,b){var c;let g="string"==typeof a?b:a,h=g.body?.error??g.body,i="string"==typeof a?a:h?.message??`Unexpected status code: ${g.status}`;return new d.RestError(i,{statusCode:f(g.status),code:h?.code,request:g.request,response:(c=g,{headers:(0,e.createHttpHeaders)(c.headers),request:c.request,status:f(c.status)??-1})})};let d=a.r(83166),e=a.r(80646);function f(a){let b=Number.parseInt(a);return Number.isNaN(b)?void 0:b}},1640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createRestError=c.operationOptionsToRequestParameters=c.getClient=c.createDefaultHttpClient=c.uint8ArrayToString=c.stringToUint8Array=c.isRestError=c.RestError=c.createEmptyPipeline=c.createPipelineRequest=c.createHttpHeaders=c.TypeSpecRuntimeLogger=c.setLogLevel=c.getLogLevel=c.createClientLogger=c.AbortError=void 0;let d=a.r(84710);var e=a.r(17204);Object.defineProperty(c,"AbortError",{enumerable:!0,get:function(){return e.AbortError}});var f=a.r(55223);Object.defineProperty(c,"createClientLogger",{enumerable:!0,get:function(){return f.createClientLogger}}),Object.defineProperty(c,"getLogLevel",{enumerable:!0,get:function(){return f.getLogLevel}}),Object.defineProperty(c,"setLogLevel",{enumerable:!0,get:function(){return f.setLogLevel}}),Object.defineProperty(c,"TypeSpecRuntimeLogger",{enumerable:!0,get:function(){return f.TypeSpecRuntimeLogger}});var g=a.r(80646);Object.defineProperty(c,"createHttpHeaders",{enumerable:!0,get:function(){return g.createHttpHeaders}}),d.__exportStar(a.r(88298),c),d.__exportStar(a.r(73023),c);var h=a.r(33251);Object.defineProperty(c,"createPipelineRequest",{enumerable:!0,get:function(){return h.createPipelineRequest}});var i=a.r(8732);Object.defineProperty(c,"createEmptyPipeline",{enumerable:!0,get:function(){return i.createEmptyPipeline}});var j=a.r(83166);Object.defineProperty(c,"RestError",{enumerable:!0,get:function(){return j.RestError}}),Object.defineProperty(c,"isRestError",{enumerable:!0,get:function(){return j.isRestError}});var k=a.r(63860);Object.defineProperty(c,"stringToUint8Array",{enumerable:!0,get:function(){return k.stringToUint8Array}}),Object.defineProperty(c,"uint8ArrayToString",{enumerable:!0,get:function(){return k.uint8ArrayToString}});var l=a.r(27886);Object.defineProperty(c,"createDefaultHttpClient",{enumerable:!0,get:function(){return l.createDefaultHttpClient}});var m=a.r(81434);Object.defineProperty(c,"getClient",{enumerable:!0,get:function(){return m.getClient}});var n=a.r(58651);Object.defineProperty(c,"operationOptionsToRequestParameters",{enumerable:!0,get:function(){return n.operationOptionsToRequestParameters}});var o=a.r(22382);Object.defineProperty(c,"createRestError",{enumerable:!0,get:function(){return o.createRestError}})},55953,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createEmptyPipeline=function(){return(0,d.createEmptyPipeline)()};let d=a.r(1640)},71860,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createLoggerContext=void 0;var d=a.r(55223);Object.defineProperty(c,"createLoggerContext",{enumerable:!0,get:function(){return d.createLoggerContext}})},83131,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzureLogger=void 0,c.setLogLevel=function(a){d.setLogLevel(a)},c.getLogLevel=function(){return d.getLogLevel()},c.createClientLogger=function(a){return d.createClientLogger(a)};let d=(0,a.r(71860).createLoggerContext)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});c.AzureLogger=d.logger},80214,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.logger=void 0,c.logger=(0,a.r(83131).createClientLogger)("core-rest-pipeline")},26940,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.exponentialRetryPolicyName=void 0,c.exponentialRetryPolicy=function(a={}){return(0,e.retryPolicy)([(0,d.exponentialRetryStrategy)({...a,ignoreSystemErrors:!0})],{maxRetries:a.maxRetries??f.DEFAULT_RETRY_POLICY_COUNT})};let d=a.r(49484),e=a.r(22428),f=a.r(75772);c.exponentialRetryPolicyName="exponentialRetryPolicy"},87945,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.systemErrorRetryPolicyName=void 0,c.systemErrorRetryPolicy=function(a={}){return{name:c.systemErrorRetryPolicyName,sendRequest:(0,e.retryPolicy)([(0,d.exponentialRetryStrategy)({...a,ignoreHttpStatusCodes:!0})],{maxRetries:a.maxRetries??f.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};let d=a.r(49484),e=a.r(22428),f=a.r(75772);c.systemErrorRetryPolicyName="systemErrorRetryPolicy"},89692,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.throttlingRetryPolicyName=void 0,c.throttlingRetryPolicy=function(a={}){return{name:c.throttlingRetryPolicyName,sendRequest:(0,e.retryPolicy)([(0,d.throttlingRetryStrategy)()],{maxRetries:a.maxRetries??f.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};let d=a.r(3107),e=a.r(22428),f=a.r(75772);c.throttlingRetryPolicyName="throttlingRetryPolicy"},75941,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.userAgentPolicyName=c.userAgentPolicy=c.tlsPolicyName=c.tlsPolicy=c.redirectPolicyName=c.redirectPolicy=c.getDefaultProxySettings=c.proxyPolicyName=c.proxyPolicy=c.multipartPolicyName=c.multipartPolicy=c.logPolicyName=c.logPolicy=c.formDataPolicyName=c.formDataPolicy=c.throttlingRetryPolicyName=c.throttlingRetryPolicy=c.systemErrorRetryPolicyName=c.systemErrorRetryPolicy=c.retryPolicy=c.exponentialRetryPolicyName=c.exponentialRetryPolicy=c.defaultRetryPolicyName=c.defaultRetryPolicy=c.decompressResponsePolicyName=c.decompressResponsePolicy=c.agentPolicyName=c.agentPolicy=void 0;var d=a.r(74204);Object.defineProperty(c,"agentPolicy",{enumerable:!0,get:function(){return d.agentPolicy}}),Object.defineProperty(c,"agentPolicyName",{enumerable:!0,get:function(){return d.agentPolicyName}});var e=a.r(2805);Object.defineProperty(c,"decompressResponsePolicy",{enumerable:!0,get:function(){return e.decompressResponsePolicy}}),Object.defineProperty(c,"decompressResponsePolicyName",{enumerable:!0,get:function(){return e.decompressResponsePolicyName}});var f=a.r(26799);Object.defineProperty(c,"defaultRetryPolicy",{enumerable:!0,get:function(){return f.defaultRetryPolicy}}),Object.defineProperty(c,"defaultRetryPolicyName",{enumerable:!0,get:function(){return f.defaultRetryPolicyName}});var g=a.r(26940);Object.defineProperty(c,"exponentialRetryPolicy",{enumerable:!0,get:function(){return g.exponentialRetryPolicy}}),Object.defineProperty(c,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return g.exponentialRetryPolicyName}});var h=a.r(22428);Object.defineProperty(c,"retryPolicy",{enumerable:!0,get:function(){return h.retryPolicy}});var i=a.r(87945);Object.defineProperty(c,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return i.systemErrorRetryPolicy}}),Object.defineProperty(c,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return i.systemErrorRetryPolicyName}});var j=a.r(89692);Object.defineProperty(c,"throttlingRetryPolicy",{enumerable:!0,get:function(){return j.throttlingRetryPolicy}}),Object.defineProperty(c,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return j.throttlingRetryPolicyName}});var k=a.r(52266);Object.defineProperty(c,"formDataPolicy",{enumerable:!0,get:function(){return k.formDataPolicy}}),Object.defineProperty(c,"formDataPolicyName",{enumerable:!0,get:function(){return k.formDataPolicyName}});var l=a.r(65782);Object.defineProperty(c,"logPolicy",{enumerable:!0,get:function(){return l.logPolicy}}),Object.defineProperty(c,"logPolicyName",{enumerable:!0,get:function(){return l.logPolicyName}});var m=a.r(91886);Object.defineProperty(c,"multipartPolicy",{enumerable:!0,get:function(){return m.multipartPolicy}}),Object.defineProperty(c,"multipartPolicyName",{enumerable:!0,get:function(){return m.multipartPolicyName}});var n=a.r(92498);Object.defineProperty(c,"proxyPolicy",{enumerable:!0,get:function(){return n.proxyPolicy}}),Object.defineProperty(c,"proxyPolicyName",{enumerable:!0,get:function(){return n.proxyPolicyName}}),Object.defineProperty(c,"getDefaultProxySettings",{enumerable:!0,get:function(){return n.getDefaultProxySettings}});var o=a.r(99003);Object.defineProperty(c,"redirectPolicy",{enumerable:!0,get:function(){return o.redirectPolicy}}),Object.defineProperty(c,"redirectPolicyName",{enumerable:!0,get:function(){return o.redirectPolicyName}});var p=a.r(53573);Object.defineProperty(c,"tlsPolicy",{enumerable:!0,get:function(){return p.tlsPolicy}}),Object.defineProperty(c,"tlsPolicyName",{enumerable:!0,get:function(){return p.tlsPolicyName}});var q=a.r(66603);Object.defineProperty(c,"userAgentPolicy",{enumerable:!0,get:function(){return q.userAgentPolicy}}),Object.defineProperty(c,"userAgentPolicyName",{enumerable:!0,get:function(){return q.userAgentPolicyName}})},68354,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.logPolicyName=void 0,c.logPolicy=function(a={}){return(0,e.logPolicy)({logger:d.logger.info,...a})};let d=a.r(80214),e=a.r(75941);c.logPolicyName=e.logPolicyName},78478,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.redirectPolicyName=void 0,c.redirectPolicy=function(a={}){return(0,d.redirectPolicy)(a)};let d=a.r(75941);c.redirectPolicyName=d.redirectPolicyName},51370,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getHeaderName=function(){return"User-Agent"},c.setPlatformSpecificData=g;let d=a.r(84710),e=d.__importDefault(a.r(60526)),f=d.__importDefault(a.r(59639));async function g(a){if(f.default&&f.default.versions){let b=`${e.default.type()} ${e.default.release()}; ${e.default.arch()}`,c=f.default.versions;c.bun?a.set("Bun",`${c.bun} (${b})`):c.deno?a.set("Deno",`${c.deno} (${b})`):c.node&&a.set("Node",`${c.node} (${b})`)}}},51621,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_RETRY_POLICY_COUNT=c.SDK_VERSION=void 0,c.SDK_VERSION="1.22.2",c.DEFAULT_RETRY_POLICY_COUNT=3},93583,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getUserAgentHeaderName=function(){return(0,d.getHeaderName)()},c.getUserAgentValue=f;let d=a.r(51370),e=a.r(51621);async function f(a){let b=new Map;b.set("core-rest-pipeline",e.SDK_VERSION),await (0,d.setPlatformSpecificData)(b);let c=function(a){let b=[];for(let[c,d]of a){let a=d?`${c}/${d}`:c;b.push(a)}return b.join(" ")}(b);return a?`${a} ${c}`:c}},30113,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.userAgentPolicyName=void 0,c.userAgentPolicy=function(a={}){let b=(0,d.getUserAgentValue)(a.userAgentPrefix);return{name:c.userAgentPolicyName,sendRequest:async(a,c)=>(a.headers.has(e)||a.headers.set(e,await b),c(a))}};let d=a.r(93583),e=(0,d.getUserAgentHeaderName)();c.userAgentPolicyName="userAgentPolicy"},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},72220,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.computeSha256Hmac=e,c.computeSha256Hash=f;let d=a.r(66680);async function e(a,b,c){let e=Buffer.from(a,"base64");return(0,d.createHmac)("sha256",e).update(b).digest(c)}async function f(a,b){return(0,d.createHash)("sha256").update(a).digest(b)}},32263,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Sanitizer=c.uint8ArrayToString=c.stringToUint8Array=c.isWebWorker=c.isReactNative=c.isDeno=c.isNodeRuntime=c.isNodeLike=c.isBun=c.isBrowser=c.randomUUID=c.computeSha256Hmac=c.computeSha256Hash=c.isError=c.isObject=c.getRandomIntegerInclusive=c.calculateRetryDelay=void 0;var d=a.r(70928);Object.defineProperty(c,"calculateRetryDelay",{enumerable:!0,get:function(){return d.calculateRetryDelay}});var e=a.r(26115);Object.defineProperty(c,"getRandomIntegerInclusive",{enumerable:!0,get:function(){return e.getRandomIntegerInclusive}});var f=a.r(57492);Object.defineProperty(c,"isObject",{enumerable:!0,get:function(){return f.isObject}});var g=a.r(72984);Object.defineProperty(c,"isError",{enumerable:!0,get:function(){return g.isError}});var h=a.r(72220);Object.defineProperty(c,"computeSha256Hash",{enumerable:!0,get:function(){return h.computeSha256Hash}}),Object.defineProperty(c,"computeSha256Hmac",{enumerable:!0,get:function(){return h.computeSha256Hmac}});var i=a.r(48426);Object.defineProperty(c,"randomUUID",{enumerable:!0,get:function(){return i.randomUUID}});var j=a.r(18370);Object.defineProperty(c,"isBrowser",{enumerable:!0,get:function(){return j.isBrowser}}),Object.defineProperty(c,"isBun",{enumerable:!0,get:function(){return j.isBun}}),Object.defineProperty(c,"isNodeLike",{enumerable:!0,get:function(){return j.isNodeLike}}),Object.defineProperty(c,"isNodeRuntime",{enumerable:!0,get:function(){return j.isNodeRuntime}}),Object.defineProperty(c,"isDeno",{enumerable:!0,get:function(){return j.isDeno}}),Object.defineProperty(c,"isReactNative",{enumerable:!0,get:function(){return j.isReactNative}}),Object.defineProperty(c,"isWebWorker",{enumerable:!0,get:function(){return j.isWebWorker}});var k=a.r(63860);Object.defineProperty(c,"stringToUint8Array",{enumerable:!0,get:function(){return k.stringToUint8Array}}),Object.defineProperty(c,"uint8ArrayToString",{enumerable:!0,get:function(){return k.uint8ArrayToString}});var l=a.r(73282);Object.defineProperty(c,"Sanitizer",{enumerable:!0,get:function(){return l.Sanitizer}})},89412,(a,b,c)=>{"use strict";async function d(a,b){let c=new AbortController;function d(){c.abort()}b?.abortSignal?.addEventListener("abort",d);try{return await Promise.race(a.map(a=>a({abortSignal:c.signal})))}finally{c.abort(),b?.abortSignal?.removeEventListener("abort",d)}}Object.defineProperty(c,"__esModule",{value:!0}),c.cancelablePromiseRace=d},37674,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AbortError=void 0,c.AbortError=class extends Error{constructor(a){super(a),this.name="AbortError"}}},3298,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AbortError=void 0;var d=a.r(37674);Object.defineProperty(c,"AbortError",{enumerable:!0,get:function(){return d.AbortError}})},26343,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createAbortablePromise=function(a,b){let{cleanupBeforeAbort:c,abortSignal:e,abortErrorMsg:f}=b??{};return new Promise((b,g)=>{function h(){g(new d.AbortError(f??"The operation was aborted."))}function i(){e?.removeEventListener("abort",j)}function j(){c?.(),i(),h()}if(e?.aborted)return h();try{a(a=>{i(),b(a)},a=>{i(),g(a)})}catch(a){g(a)}e?.addEventListener("abort",j)})};let d=a.r(3298)},13799,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.delay=function(a,b){let c,{abortSignal:e,abortErrorMsg:f}=b??{};return(0,d.createAbortablePromise)(b=>{c=setTimeout(b,a)},{cleanupBeforeAbort:()=>clearTimeout(c),abortSignal:e,abortErrorMsg:f??"The delay was aborted."})},c.calculateRetryDelay=function(a,b){let c=b.retryDelayInMs*Math.pow(2,a),d=Math.min(b.maxRetryDelayInMs,c);return{retryAfterInMs:d/2+(0,e.getRandomIntegerInclusive)(0,d/2)}};let d=a.r(26343),e=a.r(32263)},10997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getErrorMessage=function(a){if((0,d.isError)(a))return a.message;{let b;try{b="object"==typeof a&&a?JSON.stringify(a):String(a)}catch(a){b="[unable to stringify input]"}return`Unknown error ${b}`}};let d=a.r(32263)},61909,(a,b,c)=>{"use strict";function d(a){return null!=a}function e(a,b){return d(a)&&"object"==typeof a&&b in a}Object.defineProperty(c,"__esModule",{value:!0}),c.isDefined=d,c.isObjectWithProperties=function(a,b){if(!d(a)||"object"!=typeof a)return!1;for(let c of b)if(!e(a,c))return!1;return!0},c.objectHasProperty=e},18903,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isWebWorker=c.isReactNative=c.isNodeRuntime=c.isNodeLike=c.isNode=c.isDeno=c.isBun=c.isBrowser=c.objectHasProperty=c.isObjectWithProperties=c.isDefined=c.getErrorMessage=c.delay=c.createAbortablePromise=c.cancelablePromiseRace=void 0,c.calculateRetryDelay=function(a,b){return d.calculateRetryDelay(a,b)},c.computeSha256Hash=function(a,b){return d.computeSha256Hash(a,b)},c.computeSha256Hmac=function(a,b,c){return d.computeSha256Hmac(a,b,c)},c.getRandomIntegerInclusive=function(a,b){return d.getRandomIntegerInclusive(a,b)},c.isError=function(a){return d.isError(a)},c.isObject=function(a){return d.isObject(a)},c.randomUUID=function(){return d.randomUUID()},c.uint8ArrayToString=function(a,b){return d.uint8ArrayToString(a,b)},c.stringToUint8Array=function(a,b){return d.stringToUint8Array(a,b)};let d=a.r(84710).__importStar(a.r(32263));var e=a.r(89412);Object.defineProperty(c,"cancelablePromiseRace",{enumerable:!0,get:function(){return e.cancelablePromiseRace}});var f=a.r(26343);Object.defineProperty(c,"createAbortablePromise",{enumerable:!0,get:function(){return f.createAbortablePromise}});var g=a.r(13799);Object.defineProperty(c,"delay",{enumerable:!0,get:function(){return g.delay}});var h=a.r(10997);Object.defineProperty(c,"getErrorMessage",{enumerable:!0,get:function(){return h.getErrorMessage}});var i=a.r(61909);Object.defineProperty(c,"isDefined",{enumerable:!0,get:function(){return i.isDefined}}),Object.defineProperty(c,"isObjectWithProperties",{enumerable:!0,get:function(){return i.isObjectWithProperties}}),Object.defineProperty(c,"objectHasProperty",{enumerable:!0,get:function(){return i.objectHasProperty}}),c.isBrowser=d.isBrowser,c.isBun=d.isBun,c.isDeno=d.isDeno,c.isNode=d.isNodeLike,c.isNodeLike=d.isNodeLike,c.isNodeRuntime=d.isNodeRuntime,c.isReactNative=d.isReactNative,c.isWebWorker=d.isWebWorker},84225,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.hasRawContent=g,c.getRawContent=function(a){return g(a)?a[f]():a},c.createFileFromStream=function(a,b,c={}){return{...e,type:c.type??"",lastModified:c.lastModified??new Date().getTime(),webkitRelativePath:c.webkitRelativePath??"",size:c.size??-1,name:b,stream:()=>{let b=a();if(b&&"function"==typeof b.pipe)throw Error("Not supported: a Node stream was provided as input to createFileFromStream.");return b},[f]:a}},c.createFile=function(a,b,c={}){return d.isNodeLike?{...e,type:c.type??"",lastModified:c.lastModified??new Date().getTime(),webkitRelativePath:c.webkitRelativePath??"",size:a.byteLength,name:b,arrayBuffer:async()=>a.buffer,stream:()=>new Blob([h(a)]).stream(),[f]:()=>a}:new File([h(a)],b,c)};let d=a.r(18903),e={arrayBuffer:()=>{throw Error("Not implemented")},bytes:()=>{throw Error("Not implemented")},slice:()=>{throw Error("Not implemented")},text:()=>{throw Error("Not implemented")}},f=Symbol("rawContent");function g(a){return"function"==typeof a[f]}function h(a){return"resize"in a.buffer?a:a.map(a=>a)}},28420,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.multipartPolicyName=void 0,c.multipartPolicy=function(){let a=(0,d.multipartPolicy)();return{name:c.multipartPolicyName,sendRequest:async(b,c)=>{if(b.multipartBody)for(let a of b.multipartBody.parts)(0,e.hasRawContent)(a.body)&&(a.body=(0,e.getRawContent)(a.body));return a.sendRequest(b,c)}}};let d=a.r(75941),e=a.r(84225);c.multipartPolicyName=d.multipartPolicyName},92663,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decompressResponsePolicyName=void 0,c.decompressResponsePolicy=function(){return(0,d.decompressResponsePolicy)()};let d=a.r(75941);c.decompressResponsePolicyName=d.decompressResponsePolicyName},78511,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.defaultRetryPolicyName=void 0,c.defaultRetryPolicy=function(a={}){return(0,d.defaultRetryPolicy)(a)};let d=a.r(75941);c.defaultRetryPolicyName=d.defaultRetryPolicyName},2236,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.formDataPolicyName=void 0,c.formDataPolicy=function(){return(0,d.formDataPolicy)()};let d=a.r(75941);c.formDataPolicyName=d.formDataPolicyName},45087,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.proxyPolicyName=void 0,c.getDefaultProxySettings=function(a){return(0,d.getDefaultProxySettings)(a)},c.proxyPolicy=function(a,b){return(0,d.proxyPolicy)(a,b)};let d=a.r(75941);c.proxyPolicyName=d.proxyPolicyName},99611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.setClientRequestIdPolicyName=void 0,c.setClientRequestIdPolicy=function(a="x-ms-client-request-id"){return{name:c.setClientRequestIdPolicyName,sendRequest:async(b,c)=>(b.headers.has(a)||b.headers.set(a,b.requestId),c(b))}},c.setClientRequestIdPolicyName="setClientRequestIdPolicy"},19278,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.agentPolicyName=void 0,c.agentPolicy=function(a){return(0,d.agentPolicy)(a)};let d=a.r(75941);c.agentPolicyName=d.agentPolicyName},11240,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.tlsPolicyName=void 0,c.tlsPolicy=function(a){return(0,d.tlsPolicy)(a)};let d=a.r(75941);c.tlsPolicyName=d.tlsPolicyName},39040,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TracingContextImpl=c.knownContextKeys=void 0,c.createTracingContext=function(a={}){let b=new d(a.parentContext);return a.span&&(b=b.setValue(c.knownContextKeys.span,a.span)),a.namespace&&(b=b.setValue(c.knownContextKeys.namespace,a.namespace)),b},c.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};class d{_contextMap;constructor(a){this._contextMap=a instanceof d?new Map(a._contextMap):new Map}setValue(a,b){let c=new d(this);return c._contextMap.set(a,b),c}getValue(a){return this._contextMap.get(a)}deleteValue(a){let b=new d(this);return b._contextMap.delete(a),b}}c.TracingContextImpl=d},56961,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.state=void 0,c.state={instrumenterImplementation:void 0}},13126,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createDefaultTracingSpan=f,c.createDefaultInstrumenter=g,c.useInstrumenter=function(a){e.state.instrumenterImplementation=a},c.getInstrumenter=function(){return e.state.instrumenterImplementation||(e.state.instrumenterImplementation=g()),e.state.instrumenterImplementation};let d=a.r(39040),e=a.r(56961);function f(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function g(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(a,b)=>({span:f(),tracingContext:(0,d.createTracingContext)({parentContext:b.tracingContext})}),withContext:(a,b,...c)=>b(...c)}}},6138,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createTracingClient=function(a){let{namespace:b,packageName:c,packageVersion:f}=a;function g(a,g,h){let i=(0,d.getInstrumenter)().startSpan(a,{...h,packageName:c,packageVersion:f,tracingContext:g?.tracingOptions?.tracingContext}),j=i.tracingContext,k=i.span;return j.getValue(e.knownContextKeys.namespace)||(j=j.setValue(e.knownContextKeys.namespace,b)),k.setAttribute("az.namespace",j.getValue(e.knownContextKeys.namespace)),{span:k,updatedOptions:Object.assign({},g,{tracingOptions:{...g?.tracingOptions,tracingContext:j}})}}async function h(a,b,c,d){let{span:e,updatedOptions:f}=g(a,b,d);try{let a=await i(f.tracingOptions.tracingContext,()=>Promise.resolve(c(f,e)));return e.setStatus({status:"success"}),a}catch(a){throw e.setStatus({status:"error",error:a}),a}finally{e.end()}}function i(a,b,...c){return(0,d.getInstrumenter)().withContext(a,b,...c)}return{startSpan:g,withSpan:h,withContext:i,parseTraceparentHeader:function(a){return(0,d.getInstrumenter)().parseTraceparentHeader(a)},createRequestHeaders:function(a){return(0,d.getInstrumenter)().createRequestHeaders(a)}}};let d=a.r(13126),e=a.r(39040)},10073,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createTracingClient=c.useInstrumenter=void 0;var d=a.r(13126);Object.defineProperty(c,"useInstrumenter",{enumerable:!0,get:function(){return d.useInstrumenter}});var e=a.r(6138);Object.defineProperty(c,"createTracingClient",{enumerable:!0,get:function(){return e.createTracingClient}})},34935,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.RestError=void 0,c.isRestError=function(a){return(0,d.isRestError)(a)};let d=a.r(1640);c.RestError=d.RestError},26367,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.tracingPolicyName=void 0,c.tracingPolicy=function(a={}){let b=(0,f.getUserAgentValue)(a.userAgentPrefix),k=new j.Sanitizer({additionalAllowedQueryParameters:a.additionalAllowedQueryParameters}),l=function(){try{return(0,d.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:e.SDK_VERSION})}catch(a){g.logger.warning(`Error when creating the TracingClient: ${(0,h.getErrorMessage)(a)}`);return}}();return{name:c.tracingPolicyName,async sendRequest(a,c){if(!l)return c(a);let d=await b,e={"http.url":k.sanitizeUrl(a.url),"http.method":a.method,"http.user_agent":d,requestId:a.requestId};d&&(e["http.user_agent"]=d);let{span:f,tracingContext:j}=function(a,b,c){try{let{span:d,updatedOptions:e}=a.startSpan(`HTTP ${b.method}`,{tracingOptions:b.tracingOptions},{spanKind:"client",spanAttributes:c});if(!d.isRecording())return void d.end();let f=a.createRequestHeaders(e.tracingOptions.tracingContext);for(let[a,c]of Object.entries(f))b.headers.set(a,c);return{span:d,tracingContext:e.tracingOptions.tracingContext}}catch(a){g.logger.warning(`Skipping creating a tracing span due to an error: ${(0,h.getErrorMessage)(a)}`);return}}(l,a,e)??{};if(!f||!j)return c(a);try{let b=await l.withContext(j,c,a);return function(a,b){try{a.setAttribute("http.status_code",b.status);let c=b.headers.get("x-ms-request-id");c&&a.setAttribute("serviceRequestId",c),b.status>=400&&a.setStatus({status:"error"}),a.end()}catch(a){g.logger.warning(`Skipping tracing span processing due to an error: ${(0,h.getErrorMessage)(a)}`)}}(f,b),b}catch(a){throw function(a,b){try{a.setStatus({status:"error",error:(0,h.isError)(b)?b:void 0}),(0,i.isRestError)(b)&&b.statusCode&&a.setAttribute("http.status_code",b.statusCode),a.end()}catch(a){g.logger.warning(`Skipping tracing span processing due to an error: ${(0,h.getErrorMessage)(a)}`)}}(f,a),a}}}};let d=a.r(10073),e=a.r(51621),f=a.r(93583),g=a.r(80214),h=a.r(18903),i=a.r(34935),j=a.r(32263);c.tracingPolicyName="tracingPolicy"},10359,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.wrapAbortSignalLike=function(a){if(a instanceof AbortSignal)return{abortSignal:a};if(a.aborted)return{abortSignal:AbortSignal.abort(a.reason)};let b=new AbortController,c=!0;function d(){c&&(a.removeEventListener("abort",e),c=!1)}function e(){b.abort(a.reason),d()}return a.addEventListener("abort",e),{abortSignal:b.signal,cleanup:d}}},80815,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.wrapAbortSignalLikePolicyName=void 0,c.wrapAbortSignalLikePolicy=function(){return{name:c.wrapAbortSignalLikePolicyName,sendRequest:async(a,b)=>{if(!a.abortSignal)return b(a);let{abortSignal:c,cleanup:e}=(0,d.wrapAbortSignalLike)(a.abortSignal);a.abortSignal=c;try{return await b(a)}finally{e?.()}}}};let d=a.r(10359);c.wrapAbortSignalLikePolicyName="wrapAbortSignalLikePolicy"},17571,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createPipelineFromOptions=function(a){let b=(0,e.createEmptyPipeline)();return l.isNodeLike&&(a.agent&&b.addPolicy((0,o.agentPolicy)(a.agent)),a.tlsOptions&&b.addPolicy((0,p.tlsPolicy)(a.tlsOptions)),b.addPolicy((0,m.proxyPolicy)(a.proxyOptions)),b.addPolicy((0,i.decompressResponsePolicy)())),b.addPolicy((0,r.wrapAbortSignalLikePolicy)()),b.addPolicy((0,k.formDataPolicy)(),{beforePolicies:[h.multipartPolicyName]}),b.addPolicy((0,g.userAgentPolicy)(a.userAgentOptions)),b.addPolicy((0,n.setClientRequestIdPolicy)(a.telemetryOptions?.clientRequestIdHeaderName)),b.addPolicy((0,h.multipartPolicy)(),{afterPhase:"Deserialize"}),b.addPolicy((0,j.defaultRetryPolicy)(a.retryOptions),{phase:"Retry"}),b.addPolicy((0,q.tracingPolicy)({...a.userAgentOptions,...a.loggingOptions}),{afterPhase:"Retry"}),l.isNodeLike&&b.addPolicy((0,f.redirectPolicy)(a.redirectOptions),{afterPhase:"Retry"}),b.addPolicy((0,d.logPolicy)(a.loggingOptions),{afterPhase:"Sign"}),b};let d=a.r(68354),e=a.r(55953),f=a.r(78478),g=a.r(30113),h=a.r(28420),i=a.r(92663),j=a.r(78511),k=a.r(2236),l=a.r(18903),m=a.r(45087),n=a.r(99611),o=a.r(19278),p=a.r(11240),q=a.r(26367),r=a.r(80815)},47224,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createDefaultHttpClient=function(){let a=(0,d.createDefaultHttpClient)();return{async sendRequest(b){let{abortSignal:c,cleanup:d}=b.abortSignal?(0,e.wrapAbortSignalLike)(b.abortSignal):{};try{return b.abortSignal=c,await a.sendRequest(b)}finally{d?.()}}}};let d=a.r(1640),e=a.r(10359)},71925,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createHttpHeaders=function(a){return(0,d.createHttpHeaders)(a)};let d=a.r(1640)},79917,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createPipelineRequest=function(a){return(0,d.createPipelineRequest)(a)};let d=a.r(1640)},90635,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.exponentialRetryPolicyName=void 0,c.exponentialRetryPolicy=function(a={}){return(0,d.exponentialRetryPolicy)(a)};let d=a.r(75941);c.exponentialRetryPolicyName=d.exponentialRetryPolicyName},51444,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.systemErrorRetryPolicyName=void 0,c.systemErrorRetryPolicy=function(a={}){return(0,d.systemErrorRetryPolicy)(a)};let d=a.r(75941);c.systemErrorRetryPolicyName=d.systemErrorRetryPolicyName},57861,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.throttlingRetryPolicyName=void 0,c.throttlingRetryPolicy=function(a={}){return(0,d.throttlingRetryPolicy)(a)};let d=a.r(75941);c.throttlingRetryPolicyName=d.throttlingRetryPolicyName},71850,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.retryPolicy=function(a,b={maxRetries:e.DEFAULT_RETRY_POLICY_COUNT}){return(0,f.retryPolicy)(a,{logger:g,...b})};let d=a.r(83131),e=a.r(51621),f=a.r(75941),g=(0,d.createClientLogger)("core-rest-pipeline retryPolicy")},42238,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_CYCLER_OPTIONS=void 0,c.createTokenCycler=function(a,b){let d,f=null,g=null,h={...c.DEFAULT_CYCLER_OPTIONS,...b},i={get isRefreshing(){return null!==f},get shouldRefresh(){if(i.isRefreshing)return!1;if(g?.refreshAfterTimestamp&&g.refreshAfterTimestamp<Date.now())return!0;return(g?.expiresOnTimestamp??0)-h.refreshWindowInMs<Date.now()},get mustRefresh(){return null===g||g.expiresOnTimestamp-h.forcedRefreshWindowInMs<Date.now()}};function j(b,c){return i.isRefreshing||(f=e(()=>a.getToken(b,c),h.retryIntervalInMs,g?.expiresOnTimestamp??Date.now()).then(a=>(f=null,g=a,d=c.tenantId,g)).catch(a=>{throw f=null,g=null,d=void 0,a})),f}return async(a,b)=>{let c=!!b.claims,e=d!==b.tenantId;return(c&&(g=null),e||c||i.mustRefresh)?j(a,b):(i.shouldRefresh&&j(a,b),g)}};let d=a.r(18903);async function e(a,b,c){async function e(){if(Date.now()<c)try{return await a()}catch{return null}{let b=await a();if(null===b)throw Error("Failed to refresh access token.");return b}}let f=await e();for(;null===f;)await (0,d.delay)(b),f=await e();return f}c.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4}},21903,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.bearerTokenAuthenticationPolicyName=void 0,c.bearerTokenAuthenticationPolicy=function(a){let{credential:b,scopes:f,challengeCallbacks:k}=a,m=a.logger||e.logger,n={authorizeRequest:k?.authorizeRequest?.bind(k)??h,authorizeRequestOnChallenge:k?.authorizeRequestOnChallenge?.bind(k)},o=b?(0,d.createTokenCycler)(b):()=>Promise.resolve(null);return{name:c.bearerTokenAuthenticationPolicyName,async sendRequest(a,b){let c,d;if(!a.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");if(await n.authorizeRequest({scopes:Array.isArray(f)?f:[f],request:a,getAccessToken:o,logger:m}),[c,d]=await g(a,b),i(c)){let e=l(c.headers.get("WWW-Authenticate"));if(e){let h;try{h=atob(e)}catch(a){return m.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${e}`),c}await j({scopes:Array.isArray(f)?f:[f],response:c,request:a,getAccessToken:o,logger:m},h)&&([c,d]=await g(a,b))}else if(n.authorizeRequestOnChallenge&&(await n.authorizeRequestOnChallenge({scopes:Array.isArray(f)?f:[f],request:a,response:c,getAccessToken:o,logger:m})&&([c,d]=await g(a,b)),i(c))&&(e=l(c.headers.get("WWW-Authenticate")))){let h;try{h=atob(e)}catch(a){return m.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${e}`),c}await j({scopes:Array.isArray(f)?f:[f],response:c,request:a,getAccessToken:o,logger:m},h)&&([c,d]=await g(a,b))}}if(!d)return c;throw d}}},c.parseChallenges=k;let d=a.r(42238),e=a.r(80214),f=a.r(34935);async function g(a,b){try{return[await b(a),void 0]}catch(a){if((0,f.isRestError)(a)&&a.response)return[a.response,a];throw a}}async function h(a){let{scopes:b,getAccessToken:c,request:d}=a,e={abortSignal:d.abortSignal,tracingOptions:d.tracingOptions,enableCae:!0},f=await c(b,e);f&&a.request.headers.set("Authorization",`Bearer ${f.token}`)}function i(a){return 401===a.status&&a.headers.has("WWW-Authenticate")}async function j(a,b){let{scopes:c}=a,d=await a.getAccessToken(c,{enableCae:!0,claims:b});return!!d&&(a.request.headers.set("Authorization",`${d.tokenType??"Bearer"} ${d.token}`),!0)}function k(a){let b,c=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,d=/(\w+)="([^"]*)"/g,e=[];for(;null!==(b=c.exec(a));){let a,c=b[1],f=b[2],g={};for(;null!==(a=d.exec(f));)g[a[1]]=a[2];e.push({scheme:c,params:g})}return e}function l(a){if(!a)return;let b=k(a);return b.find(a=>"Bearer"===a.scheme&&a.params.claims&&"insufficient_claims"===a.params.error)?.params.claims}c.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy"},55052,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ndJsonPolicyName=void 0,c.ndJsonPolicy=function(){return{name:c.ndJsonPolicyName,async sendRequest(a,b){if("string"==typeof a.body&&a.body.startsWith("[")){let b=JSON.parse(a.body);Array.isArray(b)&&(a.body=b.map(a=>JSON.stringify(a)+"\n").join(""))}return b(a)}}},c.ndJsonPolicyName="ndJsonPolicy"},79731,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.auxiliaryAuthenticationHeaderPolicyName=void 0,c.auxiliaryAuthenticationHeaderPolicy=function(a){let{credentials:b,scopes:h}=a,i=a.logger||e.logger,j=new WeakMap;return{name:c.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(a,e){if(!a.url.toLowerCase().startsWith("https://"))throw Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!b||0===b.length)return i.info(`${c.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),e(a);let k=[];for(let c of b){let b=j.get(c);b||(b=(0,d.createTokenCycler)(c),j.set(c,b)),k.push(g({scopes:Array.isArray(h)?h:[h],request:a,getAccessToken:b,logger:i}))}let l=(await Promise.all(k)).filter(a=>!!a);return 0===l.length?i.warning(`None of the auxiliary tokens are valid. ${f} header will not be set.`):a.headers.set(f,l.map(a=>`Bearer ${a}`).join(", ")),e(a)}}};let d=a.r(42238),e=a.r(80214);c.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";let f="x-ms-authorization-auxiliary";async function g(a){let{scopes:b,getAccessToken:c,request:d}=a,e={abortSignal:d.abortSignal,tracingOptions:d.tracingOptions};return(await c(b,e))?.token??""}},57717,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createFileFromStream=c.createFile=c.agentPolicyName=c.agentPolicy=c.auxiliaryAuthenticationHeaderPolicyName=c.auxiliaryAuthenticationHeaderPolicy=c.ndJsonPolicyName=c.ndJsonPolicy=c.bearerTokenAuthenticationPolicyName=c.bearerTokenAuthenticationPolicy=c.formDataPolicyName=c.formDataPolicy=c.tlsPolicyName=c.tlsPolicy=c.userAgentPolicyName=c.userAgentPolicy=c.defaultRetryPolicy=c.tracingPolicyName=c.tracingPolicy=c.retryPolicy=c.throttlingRetryPolicyName=c.throttlingRetryPolicy=c.systemErrorRetryPolicyName=c.systemErrorRetryPolicy=c.redirectPolicyName=c.redirectPolicy=c.getDefaultProxySettings=c.proxyPolicyName=c.proxyPolicy=c.multipartPolicyName=c.multipartPolicy=c.logPolicyName=c.logPolicy=c.setClientRequestIdPolicyName=c.setClientRequestIdPolicy=c.exponentialRetryPolicyName=c.exponentialRetryPolicy=c.decompressResponsePolicyName=c.decompressResponsePolicy=c.isRestError=c.RestError=c.createPipelineRequest=c.createHttpHeaders=c.createDefaultHttpClient=c.createPipelineFromOptions=c.createEmptyPipeline=void 0;var d=a.r(55953);Object.defineProperty(c,"createEmptyPipeline",{enumerable:!0,get:function(){return d.createEmptyPipeline}});var e=a.r(17571);Object.defineProperty(c,"createPipelineFromOptions",{enumerable:!0,get:function(){return e.createPipelineFromOptions}});var f=a.r(47224);Object.defineProperty(c,"createDefaultHttpClient",{enumerable:!0,get:function(){return f.createDefaultHttpClient}});var g=a.r(71925);Object.defineProperty(c,"createHttpHeaders",{enumerable:!0,get:function(){return g.createHttpHeaders}});var h=a.r(79917);Object.defineProperty(c,"createPipelineRequest",{enumerable:!0,get:function(){return h.createPipelineRequest}});var i=a.r(34935);Object.defineProperty(c,"RestError",{enumerable:!0,get:function(){return i.RestError}}),Object.defineProperty(c,"isRestError",{enumerable:!0,get:function(){return i.isRestError}});var j=a.r(92663);Object.defineProperty(c,"decompressResponsePolicy",{enumerable:!0,get:function(){return j.decompressResponsePolicy}}),Object.defineProperty(c,"decompressResponsePolicyName",{enumerable:!0,get:function(){return j.decompressResponsePolicyName}});var k=a.r(90635);Object.defineProperty(c,"exponentialRetryPolicy",{enumerable:!0,get:function(){return k.exponentialRetryPolicy}}),Object.defineProperty(c,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return k.exponentialRetryPolicyName}});var l=a.r(99611);Object.defineProperty(c,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return l.setClientRequestIdPolicy}}),Object.defineProperty(c,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return l.setClientRequestIdPolicyName}});var m=a.r(68354);Object.defineProperty(c,"logPolicy",{enumerable:!0,get:function(){return m.logPolicy}}),Object.defineProperty(c,"logPolicyName",{enumerable:!0,get:function(){return m.logPolicyName}});var n=a.r(28420);Object.defineProperty(c,"multipartPolicy",{enumerable:!0,get:function(){return n.multipartPolicy}}),Object.defineProperty(c,"multipartPolicyName",{enumerable:!0,get:function(){return n.multipartPolicyName}});var o=a.r(45087);Object.defineProperty(c,"proxyPolicy",{enumerable:!0,get:function(){return o.proxyPolicy}}),Object.defineProperty(c,"proxyPolicyName",{enumerable:!0,get:function(){return o.proxyPolicyName}}),Object.defineProperty(c,"getDefaultProxySettings",{enumerable:!0,get:function(){return o.getDefaultProxySettings}});var p=a.r(78478);Object.defineProperty(c,"redirectPolicy",{enumerable:!0,get:function(){return p.redirectPolicy}}),Object.defineProperty(c,"redirectPolicyName",{enumerable:!0,get:function(){return p.redirectPolicyName}});var q=a.r(51444);Object.defineProperty(c,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return q.systemErrorRetryPolicy}}),Object.defineProperty(c,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return q.systemErrorRetryPolicyName}});var r=a.r(57861);Object.defineProperty(c,"throttlingRetryPolicy",{enumerable:!0,get:function(){return r.throttlingRetryPolicy}}),Object.defineProperty(c,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return r.throttlingRetryPolicyName}});var s=a.r(71850);Object.defineProperty(c,"retryPolicy",{enumerable:!0,get:function(){return s.retryPolicy}});var t=a.r(26367);Object.defineProperty(c,"tracingPolicy",{enumerable:!0,get:function(){return t.tracingPolicy}}),Object.defineProperty(c,"tracingPolicyName",{enumerable:!0,get:function(){return t.tracingPolicyName}});var u=a.r(78511);Object.defineProperty(c,"defaultRetryPolicy",{enumerable:!0,get:function(){return u.defaultRetryPolicy}});var v=a.r(30113);Object.defineProperty(c,"userAgentPolicy",{enumerable:!0,get:function(){return v.userAgentPolicy}}),Object.defineProperty(c,"userAgentPolicyName",{enumerable:!0,get:function(){return v.userAgentPolicyName}});var w=a.r(11240);Object.defineProperty(c,"tlsPolicy",{enumerable:!0,get:function(){return w.tlsPolicy}}),Object.defineProperty(c,"tlsPolicyName",{enumerable:!0,get:function(){return w.tlsPolicyName}});var x=a.r(2236);Object.defineProperty(c,"formDataPolicy",{enumerable:!0,get:function(){return x.formDataPolicy}}),Object.defineProperty(c,"formDataPolicyName",{enumerable:!0,get:function(){return x.formDataPolicyName}});var y=a.r(21903);Object.defineProperty(c,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return y.bearerTokenAuthenticationPolicy}}),Object.defineProperty(c,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return y.bearerTokenAuthenticationPolicyName}});var z=a.r(55052);Object.defineProperty(c,"ndJsonPolicy",{enumerable:!0,get:function(){return z.ndJsonPolicy}}),Object.defineProperty(c,"ndJsonPolicyName",{enumerable:!0,get:function(){return z.ndJsonPolicyName}});var A=a.r(79731);Object.defineProperty(c,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return A.auxiliaryAuthenticationHeaderPolicy}}),Object.defineProperty(c,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return A.auxiliaryAuthenticationHeaderPolicyName}});var B=a.r(19278);Object.defineProperty(c,"agentPolicy",{enumerable:!0,get:function(){return B.agentPolicy}}),Object.defineProperty(c,"agentPolicyName",{enumerable:!0,get:function(){return B.agentPolicyName}});var C=a.r(84225);Object.defineProperty(c,"createFile",{enumerable:!0,get:function(){return C.createFile}}),Object.defineProperty(c,"createFileFromStream",{enumerable:!0,get:function(){return C.createFileFromStream}})},89797,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getBearerTokenProvider=function(a,b,c){let{abortSignal:e,tracingOptions:f}=c||{},g=(0,d.createEmptyPipeline)();return g.addPolicy((0,d.bearerTokenAuthenticationPolicy)({credential:a,scopes:b})),async function(){let a=await g.sendRequest({sendRequest:a=>Promise.resolve({request:a,status:200,headers:a.headers})},(0,d.createPipelineRequest)({url:"https://example.com",abortSignal:e,tracingOptions:f})),b=a.headers.get("authorization")?.split(" ")[1];if(!b)throw Error("Failed to get access token");return b}};let d=a.r(57717)},780,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_TOKEN_CACHE_NAME=c.CACHE_NON_CAE_SUFFIX=c.CACHE_CAE_SUFFIX=c.ALL_TENANTS=c.DefaultAuthority=c.DefaultAuthorityHost=c.AzureAuthorityHosts=c.DefaultTenantId=c.DeveloperSignOnClientId=c.SDK_VERSION=void 0,c.SDK_VERSION="4.13.0",c.DeveloperSignOnClientId="04b07795-8ddb-461a-bbee-02f9e1bf7b46",c.DefaultTenantId="common",(e=d||(c.AzureAuthorityHosts=d={})).AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com",c.DefaultAuthorityHost=d.AzurePublicCloud,c.DefaultAuthority="login.microsoftonline.com",c.ALL_TENANTS=["*"],c.CACHE_CAE_SUFFIX="cae",c.CACHE_NON_CAE_SUFFIX="nocae",c.DEFAULT_TOKEN_CACHE_NAME="msal.cache"},6469,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.msalPlugins=c.msalNodeFlowVSCodeCredentialControl=c.msalNodeFlowNativeBrokerControl=c.vsCodeBrokerInfo=c.vsCodeAuthRecordPath=c.nativeBrokerInfo=c.msalNodeFlowCacheControl=c.persistenceProvider=void 0,c.hasNativeBroker=function(){return void 0!==c.nativeBrokerInfo},c.hasVSCodePlugin=function(){return void 0!==c.vsCodeAuthRecordPath&&void 0!==c.vsCodeBrokerInfo};let d=a.r(780);c.persistenceProvider=void 0,c.msalNodeFlowCacheControl={setPersistence(a){c.persistenceProvider=a}},c.nativeBrokerInfo=void 0,c.vsCodeAuthRecordPath=void 0,c.vsCodeBrokerInfo=void 0,c.msalNodeFlowNativeBrokerControl={setNativeBroker(a){c.nativeBrokerInfo={broker:a}}},c.msalNodeFlowVSCodeCredentialControl={setVSCodeAuthRecordPath(a){c.vsCodeAuthRecordPath=a},setVSCodeBroker(a){c.vsCodeBrokerInfo={broker:a}}};let e={vsCode:{credentialName:"Visual Studio Code Credential",packageName:"@azure/identity-vscode",pluginVar:"vsCodePlugin",get brokerInfo(){return c.vsCodeBrokerInfo}},native:{credentialName:"Broker for WAM",packageName:"@azure/identity-broker",pluginVar:"nativeBrokerPlugin",get brokerInfo(){return c.nativeBrokerInfo}}};c.msalPlugins={generatePluginConfiguration:function(a){let b={cache:{},broker:{...a.brokerOptions,isEnabled:a.brokerOptions?.enabled??!1,enableMsaPassthrough:a.brokerOptions?.legacyEnableMsaPassthrough??!1}};if(a.tokenCachePersistenceOptions?.enabled){if(void 0===c.persistenceProvider)throw Error("Persistent token caching was requested, but no persistence provider was configured. You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`) and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling `useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`.");let e=a.tokenCachePersistenceOptions.name||d.DEFAULT_TOKEN_CACHE_NAME;b.cache.cachePlugin=(0,c.persistenceProvider)({name:`${e}.${d.CACHE_NON_CAE_SUFFIX}`,...a.tokenCachePersistenceOptions}),b.cache.cachePluginCae=(0,c.persistenceProvider)({name:`${e}.${d.CACHE_CAE_SUFFIX}`,...a.tokenCachePersistenceOptions})}return a.brokerOptions?.enabled&&(b.broker.nativeBrokerPlugin=function(a){let{credentialName:b,packageName:c,pluginVar:d,brokerInfo:f}=e[a?"vsCode":"native"];if(void 0===f){let a,e,f;throw Error((a=b,e=c,f=d,`${a} was requested, but no plugin was configured or no authentication record was found. You must install the ${e} plugin package (npm install --save ${e}) and enable it by importing \`useIdentityPlugin\` from \`@azure/identity\` and calling useIdentityPlugin(${f}) before using enableBroker.`))}if(!1===f.broker.isBrokerAvailable){let a,d;throw Error((a=b,d=c,`${a} was requested, and the plugin is configured, but the broker is unavailable. Ensure the ${a} plugin is properly installed and configured. Check for missing native dependencies and ensure the package is properly installed. See the README for prerequisites on installing and using ${d}.`))}return f.broker}(a.isVSCodeCredential||!1)),b}}},62960,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.useIdentityPlugin=function(a){a(e)};let d=a.r(6469),e={cachePluginControl:d.msalNodeFlowCacheControl,nativeBrokerPluginControl:d.msalNodeFlowNativeBrokerControl,vsCodeCredentialControl:d.msalNodeFlowVSCodeCredentialControl}},68409,(a,b,c)=>{"use strict";function d(a){return{error:a.error,errorDescription:a.error_description,correlationId:a.correlation_id,errorCodes:a.error_codes,timestamp:a.timestamp,traceId:a.trace_id}}Object.defineProperty(c,"__esModule",{value:!0}),c.AuthenticationRequiredError=c.AggregateAuthenticationError=c.AggregateAuthenticationErrorName=c.AuthenticationError=c.AuthenticationErrorName=c.CredentialUnavailableError=c.CredentialUnavailableErrorName=void 0,c.CredentialUnavailableErrorName="CredentialUnavailableError",c.CredentialUnavailableError=class extends Error{constructor(a,b){super(a,b),this.name=c.CredentialUnavailableErrorName}},c.AuthenticationErrorName="AuthenticationError",c.AuthenticationError=class extends Error{statusCode;errorResponse;constructor(a,b,e){let f={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(function(a){return a&&"string"==typeof a.error&&"string"==typeof a.error_description}(b))f=d(b);else if("string"==typeof b)try{const a=JSON.parse(b);f=d(a)}catch(c){f=400===a?{error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${b}`}:{error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${b}`}}else f={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${f.error} Status code: ${a}
More details:
${f.errorDescription},`,e),this.statusCode=a,this.errorResponse=f,this.name=c.AuthenticationErrorName}},c.AggregateAuthenticationErrorName="AggregateAuthenticationError",c.AggregateAuthenticationError=class extends Error{errors;constructor(a,b){super(`${b}
${a.join("\n")}`),this.errors=a,this.name=c.AggregateAuthenticationErrorName}},c.AuthenticationRequiredError=class extends Error{scopes;getTokenOptions;constructor(a){super(a.message,a.cause?{cause:a.cause}:void 0),this.scopes=a.scopes,this.getTokenOptions=a.getTokenOptions,this.name="AuthenticationRequiredError"}}},90158,(a,b,c)=>{"use strict";function d(a){return a.reduce((a,b)=>(process.env[b]?a.assigned.push(b):a.missing.push(b),a),{missing:[],assigned:[]})}function e(a,b,d=c.logger){let f=b?`${b.fullTitle} ${a}`:a;return{title:a,fullTitle:f,info:function(a){d.info(`${f} =>`,a)},warning:function(a){d.warning(`${f} =>`,a)},verbose:function(a){d.verbose(`${f} =>`,a)},error:function(a){d.error(`${f} =>`,a)}}}Object.defineProperty(c,"__esModule",{value:!0}),c.logger=void 0,c.processEnvVars=d,c.logEnvVars=function(a,b){let{assigned:e}=d(b);c.logger.info(`${a} => Found the following environment variables: ${e.join(", ")}`)},c.formatSuccess=function(a){return`SUCCESS. Scopes: ${Array.isArray(a)?a.join(", "):a}.`},c.formatError=function(a,b){let c="ERROR.";return a?.length&&(c+=` Scopes: ${Array.isArray(a)?a.join(", "):a}.`),`${c} Error message: ${"string"==typeof b?b:b.message}.`},c.credentialLoggerInstance=e,c.credentialLogger=function(a,b=c.logger){let d=e(a,void 0,b);return{...d,parent:b,getToken:e("=> getToken()",d,b)}},c.logger=(0,a.r(83131).createClientLogger)("identity")},23602,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.tracingClient=void 0;let d=a.r(780);c.tracingClient=(0,a.r(10073).createTracingClient)({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:d.SDK_VERSION})},41559,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ChainedTokenCredential=c.logger=void 0;let d=a.r(68409),e=a.r(90158),f=a.r(23602);c.logger=(0,e.credentialLogger)("ChainedTokenCredential"),c.ChainedTokenCredential=class{_sources=[];constructor(...a){this._sources=a}async getToken(a,b={}){let{token:c}=await this.getTokenInternal(a,b);return c}async getTokenInternal(a,b={}){let g,h=null,i=[];return f.tracingClient.withSpan("ChainedTokenCredential.getToken",b,async b=>{for(let d=0;d<this._sources.length&&null===h;d++)try{h=await this._sources[d].getToken(a,b),g=this._sources[d]}catch(b){if("CredentialUnavailableError"===b.name||"AuthenticationRequiredError"===b.name)i.push(b);else throw c.logger.getToken.info((0,e.formatError)(a,b)),b}if(!h&&i.length>0){let b=new d.AggregateAuthenticationError(i,"ChainedTokenCredential authentication failed.");throw c.logger.getToken.info((0,e.formatError)(a,b)),b}if(c.logger.getToken.info(`Result for ${g.constructor.name}: ${(0,e.formatSuccess)(a)}`),null===h)throw new d.CredentialUnavailableError("Failed to retrieve a valid token");return{token:h,successfulCredential:g}})}}},7137,a=>{"use strict";let b,c;a.s([],14840),a.i(14840);var d=a.i(54799);let e=new Uint8Array(256),f=e.length;function g(){return f>e.length-16&&(d.default.randomFillSync(e),f=0),e.slice(f,f+=16)}let h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,i=function(a){return"string"==typeof a&&h.test(a)},j=[];for(let a=0;a<256;++a)j.push((a+256).toString(16).substr(1));let k=function(a,b=0){let c=(j[a[b+0]]+j[a[b+1]]+j[a[b+2]]+j[a[b+3]]+"-"+j[a[b+4]]+j[a[b+5]]+"-"+j[a[b+6]]+j[a[b+7]]+"-"+j[a[b+8]]+j[a[b+9]]+"-"+j[a[b+10]]+j[a[b+11]]+j[a[b+12]]+j[a[b+13]]+j[a[b+14]]+j[a[b+15]]).toLowerCase();if(!i(c))throw TypeError("Stringified UUID is invalid");return c},l=0,m=0,n=function(a){let b;if(!i(a))throw TypeError("Invalid UUID");let c=new Uint8Array(16);return c[0]=(b=parseInt(a.slice(0,8),16))>>>24,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c[4]=(b=parseInt(a.slice(9,13),16))>>>8,c[5]=255&b,c[6]=(b=parseInt(a.slice(14,18),16))>>>8,c[7]=255&b,c[8]=(b=parseInt(a.slice(19,23),16))>>>8,c[9]=255&b,c[10]=(b=parseInt(a.slice(24,36),16))/0x10000000000&255,c[11]=b/0x100000000&255,c[12]=b>>>24&255,c[13]=b>>>16&255,c[14]=b>>>8&255,c[15]=255&b,c};function o(a,b,c){function d(a,d,e,f){if("string"==typeof a&&(a=function(a){a=unescape(encodeURIComponent(a));let b=[];for(let c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b}(a)),"string"==typeof d&&(d=n(d)),16!==d.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let g=new Uint8Array(16+a.length);if(g.set(d),g.set(a,d.length),(g=c(g))[6]=15&g[6]|b,g[8]=63&g[8]|128,e){f=f||0;for(let a=0;a<16;++a)e[f+a]=g[a];return e}return k(g)}try{d.name=a}catch(a){}return d.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",d.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",d}let p=o("v3",48,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),d.default.createHash("md5").update(a).digest()}),q=o("v5",80,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),d.default.createHash("sha1").update(a).digest()});a.s(["NIL",0,"00000000-0000-0000-0000-000000000000","parse",0,n,"stringify",0,k,"v1",0,function(a,d,e){let f=d&&e||0,h=d||Array(16),i=(a=a||{}).node||b,j=void 0!==a.clockseq?a.clockseq:c;if(null==i||null==j){let d=a.random||(a.rng||g)();null==i&&(i=b=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==j&&(j=c=(d[6]<<8|d[7])&16383)}let n=void 0!==a.msecs?a.msecs:Date.now(),o=void 0!==a.nsecs?a.nsecs:m+1,p=n-l+(o-m)/1e4;if(p<0&&void 0===a.clockseq&&(j=j+1&16383),(p<0||n>l)&&void 0===a.nsecs&&(o=0),o>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");l=n,m=o,c=j;let q=((0xfffffff&(n+=122192928e5))*1e4+o)%0x100000000;h[f++]=q>>>24&255,h[f++]=q>>>16&255,h[f++]=q>>>8&255,h[f++]=255&q;let r=n/0x100000000*1e4&0xfffffff;h[f++]=r>>>8&255,h[f++]=255&r,h[f++]=r>>>24&15|16,h[f++]=r>>>16&255,h[f++]=j>>>8|128,h[f++]=255&j;for(let a=0;a<6;++a)h[f+a]=i[a];return d||k(h)},"v3",0,p,"v4",0,function(a,b,c){let d=(a=a||{}).random||(a.rng||g)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(let a=0;a<16;++a)b[c+a]=d[a];return b}return k(d)},"v5",0,q,"validate",0,i,"version",0,function(a){if(!i(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}],7137)},61971,(a,b,c)=>{"use strict";let d={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},e={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},f=[d.OPENID_SCOPE,d.PROFILE_SCOPE,d.OFFLINE_ACCESS_SCOPE],g=[...f,d.EMAIL_SCOPE],h={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},i={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},j={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},k={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},l={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},m={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},n={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},o={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},p="appmetadata",q="authority-metadata",r="config",s="cache",t="network",u="hardcoded_values",v="server-telemetry",w={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},x={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},y={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},z={username:"username",password:"password"},A={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},B="unexpected_error",C="post_request_failed";var D,E=Object.freeze({__proto__:null,postRequestFailed:C,unexpectedError:B});let F={[B]:"Unexpected error in authentication.",[C]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},G={unexpectedError:{code:B,desc:F[B]},postRequestFailed:{code:C,desc:F[C]}};class H extends Error{constructor(a,b,c){super(b?`${a}: ${b}`:a),Object.setPrototypeOf(this,H.prototype),this.errorCode=a||d.EMPTY_STRING,this.errorMessage=b||d.EMPTY_STRING,this.subError=c||d.EMPTY_STRING,this.name="AuthError"}setCorrelationId(a){this.correlationId=a}}let I="client_info_decoding_error",J="client_info_empty_error",K="token_parsing_error",L="null_or_empty_token",M="endpoints_resolution_error",N="network_error",O="openid_config_error",P="hash_not_deserialized",Q="invalid_state",R="state_mismatch",S="state_not_found",T="nonce_mismatch",U="auth_time_not_found",V="max_age_transpired",W="multiple_matching_tokens",X="multiple_matching_accounts",Y="multiple_matching_appMetadata",Z="request_cannot_be_made",$="cannot_remove_empty_scope",_="cannot_append_scopeset",aa="empty_input_scopeset",ab="device_code_polling_cancelled",ac="device_code_expired",ad="device_code_unknown_error",ae="no_account_in_silent_request",af="invalid_cache_record",ag="invalid_cache_environment",ah="no_account_found",ai="no_crypto_object",aj="unexpected_credential_type",ak="invalid_assertion",al="invalid_client_credential",am="token_refresh_required",an="user_timeout_reached",ao="token_claims_cnf_required_for_signedjwt",ap="authorization_code_missing_from_server_response",aq="binding_key_not_removed",ar="end_session_endpoint_not_supported",as="key_id_missing",at="no_network_connectivity",au="user_canceled",av="missing_tenant_id_error",aw="method_not_implemented",ax="nested_app_auth_bridge_disabled",ay="platform_broker_error";var az=Object.freeze({__proto__:null,authTimeNotFound:U,authorizationCodeMissingFromServerResponse:ap,bindingKeyNotRemoved:aq,cannotAppendScopeSet:_,cannotRemoveEmptyScope:$,clientInfoDecodingError:I,clientInfoEmptyError:J,deviceCodeExpired:ac,deviceCodePollingCancelled:ab,deviceCodeUnknownError:ad,emptyInputScopeSet:aa,endSessionEndpointNotSupported:ar,endpointResolutionError:M,hashNotDeserialized:P,invalidAssertion:ak,invalidCacheEnvironment:ag,invalidCacheRecord:af,invalidClientCredential:al,invalidState:Q,keyIdMissing:as,maxAgeTranspired:V,methodNotImplemented:aw,missingTenantIdError:av,multipleMatchingAccounts:X,multipleMatchingAppMetadata:Y,multipleMatchingTokens:W,nestedAppAuthBridgeDisabled:ax,networkError:N,noAccountFound:ah,noAccountInSilentRequest:ae,noCryptoObject:ai,noNetworkConnectivity:at,nonceMismatch:T,nullOrEmptyToken:L,openIdConfigError:O,platformBrokerError:ay,requestCannotBeMade:Z,stateMismatch:R,stateNotFound:S,tokenClaimsCnfRequiredForSignedJwt:ao,tokenParsingError:K,tokenRefreshRequired:am,unexpectedCredentialType:aj,userCanceled:au,userTimeoutReached:an});let aA={[I]:"The client info could not be parsed/decoded correctly",[J]:"The client info was empty",[K]:"Token cannot be parsed",[L]:"The token is null or empty",[M]:"Endpoints cannot be resolved",[N]:"Network request failed",[O]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[P]:"The hash parameters could not be deserialized",[Q]:"State was not the expected format",[R]:"State mismatch error",[S]:"State not found",[T]:"Nonce mismatch error",[U]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[V]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[W]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[X]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Y]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Z]:"Token request cannot be made without authorization code or refresh token.",[$]:"Cannot remove null or empty scope from ScopeSet",[_]:"Cannot append ScopeSet",[aa]:"Empty input ScopeSet cannot be processed",[ab]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[ac]:"Device code is expired.",[ad]:"Device code stopped polling for unknown reasons.",[ae]:"Please pass an account object, silent flow is not supported without account information",[af]:"Cache record object was null or undefined.",[ag]:"Invalid environment when attempting to create cache entry",[ah]:"No account found in cache for given key.",[ai]:"No crypto object detected.",[aj]:"Unexpected credential type.",[ak]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[al]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[am]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[an]:"User defined timeout for device code polling reached",[ao]:"Cannot generate a POP jwt if the token_claims are not populated",[ap]:"Server response does not contain an authorization code to proceed",[aq]:"Could not remove the credential's binding key from storage.",[ar]:"The provided authority does not support logout",[as]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[at]:"No network connectivity. Check your internet connection.",[au]:"User cancelled the flow.",[av]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[aw]:"This method has not been implemented",[ax]:"The nested app auth bridge is disabled",[ay]:"An error occurred in the native broker. See the platformBrokerError property for details."},aB={clientInfoDecodingError:{code:I,desc:aA[I]},clientInfoEmptyError:{code:J,desc:aA[J]},tokenParsingError:{code:K,desc:aA[K]},nullOrEmptyToken:{code:L,desc:aA[L]},endpointResolutionError:{code:M,desc:aA[M]},networkError:{code:N,desc:aA[N]},unableToGetOpenidConfigError:{code:O,desc:aA[O]},hashNotDeserialized:{code:P,desc:aA[P]},invalidStateError:{code:Q,desc:aA[Q]},stateMismatchError:{code:R,desc:aA[R]},stateNotFoundError:{code:S,desc:aA[S]},nonceMismatchError:{code:T,desc:aA[T]},authTimeNotFoundError:{code:U,desc:aA[U]},maxAgeTranspired:{code:V,desc:aA[V]},multipleMatchingTokens:{code:W,desc:aA[W]},multipleMatchingAccounts:{code:X,desc:aA[X]},multipleMatchingAppMetadata:{code:Y,desc:aA[Y]},tokenRequestCannotBeMade:{code:Z,desc:aA[Z]},removeEmptyScopeError:{code:$,desc:aA[$]},appendScopeSetError:{code:_,desc:aA[_]},emptyInputScopeSetError:{code:aa,desc:aA[aa]},DeviceCodePollingCancelled:{code:ab,desc:aA[ab]},DeviceCodeExpired:{code:ac,desc:aA[ac]},DeviceCodeUnknownError:{code:ad,desc:aA[ad]},NoAccountInSilentRequest:{code:ae,desc:aA[ae]},invalidCacheRecord:{code:af,desc:aA[af]},invalidCacheEnvironment:{code:ag,desc:aA[ag]},noAccountFound:{code:ah,desc:aA[ah]},noCryptoObj:{code:ai,desc:aA[ai]},unexpectedCredentialType:{code:aj,desc:aA[aj]},invalidAssertion:{code:ak,desc:aA[ak]},invalidClientCredential:{code:al,desc:aA[al]},tokenRefreshRequired:{code:am,desc:aA[am]},userTimeoutReached:{code:an,desc:aA[an]},tokenClaimsRequired:{code:ao,desc:aA[ao]},noAuthorizationCodeFromServer:{code:ap,desc:aA[ap]},bindingKeyNotRemovedError:{code:aq,desc:aA[aq]},logoutNotSupported:{code:ar,desc:aA[ar]},keyIdMissing:{code:as,desc:aA[as]},noNetworkConnectivity:{code:at,desc:aA[at]},userCanceledError:{code:au,desc:aA[au]},missingTenantIdError:{code:av,desc:aA[av]},nestedAppAuthBridgeDisabled:{code:ax,desc:aA[ax]},platformBrokerError:{code:ay,desc:aA[ay]}};class aC extends H{constructor(a,b){super(a,b?`${aA[a]}: ${b}`:aA[a]),this.name="ClientAuthError",Object.setPrototypeOf(this,aC.prototype)}}function aD(a,b){return new aC(a,b)}function aE(a,b){let c=aG(a);try{let a=b(c);return JSON.parse(a)}catch(a){throw aD(K)}}function aF(a){if(!a.signin_state)return!1;let b=["kmsi","dvc_dmjd"];return a.signin_state.some(a=>b.includes(a.trim().toLowerCase()))}function aG(a){if(!a)throw aD(L);let b=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(a);if(!b||b.length<4)throw aD(K);return b[2]}function aH(a,b){if(0===b||Date.now()-3e5>a+b)throw aD(V)}var aI=Object.freeze({__proto__:null,checkMaxAge:aH,extractTokenClaims:aE,getJWSPayload:aG,isKmsi:aF});let aJ={Default:0,Adfs:1,Dsts:2,Ciam:3},aK="redirect_uri_empty",aL="claims_request_parsing_error",aM="authority_uri_insecure",aN="url_parse_error",aO="empty_url_error",aP="empty_input_scopes_error",aQ="invalid_claims",aR="token_request_empty",aS="logout_request_empty",aT="invalid_code_challenge_method",aU="pkce_params_missing",aV="invalid_cloud_discovery_metadata",aW="invalid_authority_metadata",aX="untrusted_authority",aY="missing_ssh_jwk",aZ="missing_ssh_kid",a$="missing_nonce_authentication_header",a_="invalid_authentication_header",a0="cannot_set_OIDCOptions",a1="cannot_allow_platform_broker",a2="authority_mismatch",a3="invalid_request_method_for_EAR",a4="invalid_authorize_post_body_parameters",a5="invalid_platform_broker_configuration";var a6=Object.freeze({__proto__:null,authorityMismatch:a2,authorityUriInsecure:aM,cannotAllowPlatformBroker:a1,cannotSetOIDCOptions:a0,claimsRequestParsingError:aL,emptyInputScopesError:aP,invalidAuthenticationHeader:a_,invalidAuthorityMetadata:aW,invalidAuthorizePostBodyParameters:a4,invalidClaims:aQ,invalidCloudDiscoveryMetadata:aV,invalidCodeChallengeMethod:aT,invalidPlatformBrokerConfiguration:a5,invalidRequestMethodForEAR:a3,logoutRequestEmpty:aS,missingNonceAuthenticationHeader:a$,missingSshJwk:aY,missingSshKid:aZ,pkceParamsMissing:aU,redirectUriEmpty:aK,tokenRequestEmpty:aR,untrustedAuthority:aX,urlEmptyError:aO,urlParseError:aN});let a7={[aK]:"A redirect URI is required for all calls, and none has been set.",[aL]:"Could not parse the given claims request object.",[aM]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[aN]:"URL could not be parsed into appropriate segments.",[aO]:"URL was empty or null.",[aP]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[aQ]:"Given claims parameter must be a stringified JSON object.",[aR]:"Token request was empty and not found in cache.",[aS]:"The logout request was null or undefined.",[aT]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[aU]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[aV]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[aW]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[aX]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[aY]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[aZ]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[a$]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[a_]:"Invalid authentication header provided",[a0]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[a1]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[a2]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[a4]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[a3]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[a5]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."},a8={redirectUriNotSet:{code:aK,desc:a7[aK]},claimsRequestParsingError:{code:aL,desc:a7[aL]},authorityUriInsecure:{code:aM,desc:a7[aM]},urlParseError:{code:aN,desc:a7[aN]},urlEmptyError:{code:aO,desc:a7[aO]},emptyScopesError:{code:aP,desc:a7[aP]},invalidClaimsRequest:{code:aQ,desc:a7[aQ]},tokenRequestEmptyError:{code:aR,desc:a7[aR]},logoutRequestEmptyError:{code:aS,desc:a7[aS]},invalidCodeChallengeMethod:{code:aT,desc:a7[aT]},invalidCodeChallengeParams:{code:aU,desc:a7[aU]},invalidCloudDiscoveryMetadata:{code:aV,desc:a7[aV]},invalidAuthorityMetadata:{code:aW,desc:a7[aW]},untrustedAuthority:{code:aX,desc:a7[aX]},missingSshJwk:{code:aY,desc:a7[aY]},missingSshKid:{code:aZ,desc:a7[aZ]},missingNonceAuthenticationHeader:{code:a$,desc:a7[a$]},invalidAuthenticationHeader:{code:a_,desc:a7[a_]},cannotSetOIDCOptions:{code:a0,desc:a7[a0]},cannotAllowPlatformBroker:{code:a1,desc:a7[a1]},authorityMismatch:{code:a2,desc:a7[a2]},invalidAuthorizePostBodyParameters:{code:a4,desc:a7[a4]},invalidRequestMethodForEAR:{code:a3,desc:a7[a3]},invalidPlatformBrokerConfiguration:{code:a5,desc:a7[a5]}};class a9 extends H{constructor(a){super(a,a7[a]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,a9.prototype)}}function ba(a){return new a9(a)}class bb{static isEmptyObj(a){if(a)try{let b=JSON.parse(a);return 0===Object.keys(b).length}catch(a){}return!0}static startsWith(a,b){return 0===a.indexOf(b)}static endsWith(a,b){return a.length>=b.length&&a.lastIndexOf(b)===a.length-b.length}static queryStringToObject(a){let b={},c=a.split("&"),d=a=>decodeURIComponent(a.replace(/\+/g," "));return c.forEach(a=>{if(a.trim()){let[c,e]=a.split(/=(.+)/g,2);c&&e&&(b[d(c)]=d(e))}}),b}static trimArrayEntries(a){return a.map(a=>a.trim())}static removeEmptyStringsFromArray(a){return a.filter(a=>!!a)}static jsonParseHelper(a){try{return JSON.parse(a)}catch(a){return null}}static matchPattern(a,b){return new RegExp(a.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(b)}}function bc(a){if(!a)return a;let b=a.toLowerCase();return bb.endsWith(b,"?")?b=b.slice(0,-1):bb.endsWith(b,"?/")&&(b=b.slice(0,-2)),bb.endsWith(b,"/")||(b+="/"),b}function bd(a){return a.startsWith("#/")?a.substring(2):a.startsWith("#")||a.startsWith("?")?a.substring(1):a}function be(a){if(!a||0>a.indexOf("="))return null;try{let b=bd(a),c=Object.fromEntries(new URLSearchParams(b));if(c.code||c.ear_jwe||c.error||c.error_description||c.state)return c}catch(a){throw aD(P)}return null}function bf(a,b=!0,c){let d=[];return a.forEach((a,e)=>{!b&&c&&e in c?d.push(`${e}=${a}`):d.push(`${e}=${encodeURIComponent(a)}`)}),d.join("&")}var bg=Object.freeze({__proto__:null,getDeserializedResponse:be,mapToQueryString:bf,normalizeUrlForComparison:function(a){if(!a)return a;let b=a.split("#")[0];try{let a=new URL(b),c=a.origin+a.pathname+a.search;return bc(c)}catch(a){return bc(b)}},stripLeadingHashOrQuery:bd});class bh{get urlString(){return this._urlString}constructor(a){if(this._urlString=a,!this._urlString)throw ba(aO);a.includes("#")||(this._urlString=bh.canonicalizeUri(a))}static canonicalizeUri(a){if(a){let b=a.toLowerCase();return bb.endsWith(b,"?")?b=b.slice(0,-1):bb.endsWith(b,"?/")&&(b=b.slice(0,-2)),bb.endsWith(b,"/")||(b+="/"),b}return a}validateAsUri(){let a;try{a=this.getUrlComponents()}catch(a){throw ba(aN)}if(!a.HostNameAndPort||!a.PathSegments)throw ba(aN);if(!a.Protocol||"https:"!==a.Protocol.toLowerCase())throw ba(aM)}static appendQueryString(a,b){return b?0>a.indexOf("?")?`${a}?${b}`:`${a}&${b}`:a}static removeHashFromUrl(a){return bh.canonicalizeUri(a.split("#")[0])}replaceTenantPath(a){let b=this.getUrlComponents(),c=b.PathSegments;return a&&0!==c.length&&(c[0]===i.COMMON||c[0]===i.ORGANIZATIONS)&&(c[0]=a),bh.constructAuthorityUriFromObject(b)}getUrlComponents(){let a=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),b=this.urlString.match(a);if(!b)throw ba(aN);let c={Protocol:b[1],HostNameAndPort:b[4],AbsolutePath:b[5],QueryString:b[7]},d=c.AbsolutePath.split("/");return c.PathSegments=d=d.filter(a=>a&&a.length>0),c.QueryString&&c.QueryString.endsWith("/")&&(c.QueryString=c.QueryString.substring(0,c.QueryString.length-1)),c}static getDomainFromUrl(a){let b=RegExp("^([^:/?#]+://)?([^/?#]*)"),c=a.match(b);if(!c)throw ba(aN);return c[2]}static getAbsoluteUrl(a,b){if(a[0]===d.FORWARD_SLASH){let c=new bh(b).getUrlComponents();return c.Protocol+"//"+c.HostNameAndPort+a}return a}static constructAuthorityUriFromObject(a){return new bh(a.Protocol+"//"+a.HostNameAndPort+"/"+a.PathSegments.join("/"))}static hashContainsKnownProperties(a){return!!be(a)}}let bi={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},bj=[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}],bk=new Set;function bl(a,b,c,d){if(d?.trace(`getAliasesFromMetadata called with source: ${c}`),a&&b){let e=bm(b,a);if(e)return d?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${c}, returning aliases`),e.aliases;d?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${c}`)}return null}function bm(a,b){for(let c=0;c<a.length;c++){let d=a[c];if(d.aliases.includes(b))return d}return null}bj.forEach(a=>{a.aliases.forEach(a=>{bk.add(a)})});let bn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"},bo={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},bp={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},bq=new Map([[bp.AcquireTokenByCode,"ATByCode"],[bp.AcquireTokenByRefreshToken,"ATByRT"],[bp.AcquireTokenSilent,"ATS"],[bp.AcquireTokenSilentAsync,"ATSAsync"],[bp.AcquireTokenPopup,"ATPopup"],[bp.AcquireTokenRedirect,"ATRedirect"],[bp.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[bp.CryptoOptsSignJwt,"CryptoSignJwt"],[bp.SilentCacheClientAcquireToken,"SltCacheClientAT"],[bp.SilentIframeClientAcquireToken,"SltIframeClientAT"],[bp.SilentRefreshClientAcquireToken,"SltRClientAT"],[bp.SsoSilent,"SsoSlt"],[bp.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[bp.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[bp.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[bp.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[bp.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[bp.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[bp.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[bp.BrokerHandhshake,"BrokerHandshake"],[bp.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[bp.AcquireTokenByBroker,"ATByBroker"],[bp.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[bp.RefreshTokenClientAcquireToken,"RTClientAT"],[bp.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[bp.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[bp.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[bp.AcquireTokenFromCache,"ATFromCache"],[bp.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[bp.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[bp.AcquireTokenBySilentIframe,"ATBySltIframe"],[bp.InitializeBaseRequest,"InitBaseReq"],[bp.InitializeSilentRequest,"InitSltReq"],[bp.InitializeClientApplication,"InitClientApplication"],[bp.InitializeCache,"InitCache"],[bp.ImportExistingCache,"importCache"],[bp.SetUserData,"setUserData"],[bp.LocalStorageUpdated,"localStorageUpdated"],[bp.SilentIframeClientTokenHelper,"SIClientTHelper"],[bp.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[bp.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[bp.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[bp.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[bp.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[bp.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[bp.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[bp.GetAuthCodeUrl,"GetAuthCodeUrl"],[bp.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[bp.HandleCodeResponse,"HandleCodeResp"],[bp.HandleResponseEar,"HandleRespEar"],[bp.HandleResponseCode,"HandleRespCode"],[bp.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[bp.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[bp.AuthClientAcquireToken,"AuthClientAT"],[bp.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[bp.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[bp.PopTokenGenerateCnf,"PopTGenCnf"],[bp.PopTokenGenerateKid,"PopTGenKid"],[bp.HandleServerTokenResponse,"HandleServerTRes"],[bp.DeserializeResponse,"DeserializeRes"],[bp.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[bp.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[bp.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[bp.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[bp.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[bp.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[bp.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[bp.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[bp.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[bp.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[bp.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[bp.AcquireTokenByCodeAsync,"ATByCodeAsync"],[bp.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[bp.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[bp.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[bp.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[bp.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[bp.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[bp.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[bp.NativeGenerateAuthResult,"NtvGenAuthRes"],[bp.RemoveHiddenIframe,"RemoveHiddenIframe"],[bp.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[bp.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[bp.GeneratePkceCodes,"GenPkceCodes"],[bp.GenerateCodeVerifier,"GenCodeVerifier"],[bp.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[bp.Sha256Digest,"Sha256Digest"],[bp.GetRandomValues,"GetRandomValues"],[bp.GenerateHKDF,"genHKDF"],[bp.GenerateBaseKey,"genBaseKey"],[bp.Base64Decode,"b64Decode"],[bp.UrlEncodeArr,"urlEncArr"],[bp.Encrypt,"encrypt"],[bp.Decrypt,"decrypt"],[bp.GenerateEarKey,"genEarKey"],[bp.DecryptEarResponse,"decryptEarResp"]]),br={NotStarted:0,InProgress:1,Completed:2},bs=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]),bt=(a,b,c,d,e)=>(...f)=>{c.trace(`Executing function ${b}`);let g=d?.startMeasurement(b,e);e&&d?.incrementFields({[b+"CallCount"]:1},e);try{let d=a(...f);return g?.end({success:!0}),c.trace(`Returning result from ${b}`),d}catch(a){c.trace(`Error occurred in ${b}`);try{c.trace(JSON.stringify(a))}catch(a){c.trace("Unable to print error message.")}throw g?.end({success:!1},a),a}},bu=(a,b,c,d,e)=>(...f)=>{c.trace(`Executing function ${b}`);let g=d?.startMeasurement(b,e);return e&&d?.incrementFields({[b+"CallCount"]:1},e),d?.setPreQueueTime(b,e),a(...f).then(a=>(c.trace(`Returning result from ${b}`),g?.end({success:!0}),a)).catch(a=>{c.trace(`Error occurred in ${b}`);try{c.trace(JSON.stringify(a))}catch(a){c.trace("Unable to print error message.")}throw g?.end({success:!1},a),a})};class bv{constructor(a,b,c,d){this.networkInterface=a,this.logger=b,this.performanceClient=c,this.correlationId=d}async detectRegion(a,b){this.performanceClient?.addQueueMeasurement(bp.RegionDiscoveryDetectRegion,this.correlationId);let c=a;if(c)b.region_source="3";else{let a=bv.IMDS_OPTIONS;try{let f=await bu(this.getRegionFromIMDS.bind(this),bp.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d.IMDS_VERSION,a);if(f.status===e.SUCCESS&&(c=f.body,b.region_source="4"),f.status===e.BAD_REQUEST){let d=await bu(this.getCurrentVersion.bind(this),bp.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(a);if(!d)return b.region_source="1",null;let f=await bu(this.getRegionFromIMDS.bind(this),bp.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,a);f.status===e.SUCCESS&&(c=f.body,b.region_source="4")}}catch(a){return b.region_source="1",null}}return c||(b.region_source="1"),c||null}async getRegionFromIMDS(a,b){return this.performanceClient?.addQueueMeasurement(bp.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${d.IMDS_ENDPOINT}?api-version=${a}&format=text`,b,d.IMDS_TIMEOUT)}async getCurrentVersion(a){this.performanceClient?.addQueueMeasurement(bp.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let b=await this.networkInterface.sendGetRequestAsync(`${d.IMDS_ENDPOINT}?format=json`,a);if(b.status===e.BAD_REQUEST&&b.body&&b.body["newest-versions"]&&b.body["newest-versions"].length>0)return b.body["newest-versions"][0];return null}catch(a){return null}}}function bw(){return Math.round(new Date().getTime()/1e3)}function bx(a){return a?new Date(1e3*Number(a)):new Date}function by(a,b){let c=Number(a)||0;return bw()+b>c}function bz(a){return Number(a)>bw()}bv.IMDS_OPTIONS={headers:{Metadata:"true"}};var bA=Object.freeze({__proto__:null,delay:function(a,b){return new Promise(c=>setTimeout(()=>c(b),a))},isCacheExpired:function(a,b){let c=Number(a)+24*b*36e5;return Date.now()>c},isTokenExpired:by,nowSeconds:bw,toDateFromSeconds:bx,toSecondsFromDate:function(a){return a.getTime()/1e3},wasClockTurnedBack:bz});function bB(a,b,c,d,e){return{credentialType:o.ID_TOKEN,homeAccountId:a,environment:b,clientId:d,secret:c,realm:e,lastUpdatedAt:Date.now().toString()}}function bC(a,b,c,d,e,f,g,h,i,j,k,l,m,n,p){let q={homeAccountId:a,credentialType:o.ACCESS_TOKEN,secret:c,cachedAt:bw().toString(),expiresOn:g.toString(),extendedExpiresOn:h.toString(),environment:b,clientId:d,realm:e,target:f,tokenType:k||w.BEARER,lastUpdatedAt:Date.now().toString()};if(l&&(q.userAssertionHash=l),j&&(q.refreshOn=j.toString()),n&&(q.requestedClaims=n,q.requestedClaimsHash=p),q.tokenType?.toLowerCase()!==w.BEARER.toLowerCase())switch(q.credentialType=o.ACCESS_TOKEN_WITH_AUTH_SCHEME,q.tokenType){case w.POP:let r=aE(c,i);if(!r?.cnf?.kid)throw aD(ao);q.keyId=r.cnf.kid;break;case w.SSH:q.keyId=m}return q}function bD(a,b,c,d,e,f,g){let h={credentialType:o.REFRESH_TOKEN,homeAccountId:a,environment:b,clientId:d,secret:c,lastUpdatedAt:Date.now().toString()};return f&&(h.userAssertionHash=f),e&&(h.familyId=e),g&&(h.expiresOn=g.toString()),h}function bE(a){return a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("credentialType")&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("secret")}function bF(){return bw()+86400}function bG(a,b,c){a.authorization_endpoint=b.authorization_endpoint,a.token_endpoint=b.token_endpoint,a.end_session_endpoint=b.end_session_endpoint,a.issuer=b.issuer,a.endpointsFromNetwork=c,a.jwks_uri=b.jwks_uri}function bH(a,b,c){a.aliases=b.aliases,a.preferred_cache=b.preferred_cache,a.preferred_network=b.preferred_network,a.aliasesFromNetwork=c}function bI(a){return a.expiresAt<=bw()}var bJ=Object.freeze({__proto__:null,createAccessTokenEntity:bC,createIdTokenEntity:bB,createRefreshTokenEntity:bD,generateAppMetadataKey:function({environment:a,clientId:b}){return[p,a,b].join("-").toLowerCase()},generateAuthorityMetadataExpiresAt:bF,isAccessTokenEntity:function(a){return!!a&&bE(a)&&a.hasOwnProperty("realm")&&a.hasOwnProperty("target")&&(a.credentialType===o.ACCESS_TOKEN||a.credentialType===o.ACCESS_TOKEN_WITH_AUTH_SCHEME)},isAppMetadataEntity:function(a,b){return!!b&&0===a.indexOf(p)&&b.hasOwnProperty("clientId")&&b.hasOwnProperty("environment")},isAuthorityMetadataEntity:function(a,b){return!!b&&0===a.indexOf(q)&&b.hasOwnProperty("aliases")&&b.hasOwnProperty("preferred_cache")&&b.hasOwnProperty("preferred_network")&&b.hasOwnProperty("canonical_authority")&&b.hasOwnProperty("authorization_endpoint")&&b.hasOwnProperty("token_endpoint")&&b.hasOwnProperty("issuer")&&b.hasOwnProperty("aliasesFromNetwork")&&b.hasOwnProperty("endpointsFromNetwork")&&b.hasOwnProperty("expiresAt")&&b.hasOwnProperty("jwks_uri")},isAuthorityMetadataExpired:bI,isCredentialEntity:bE,isIdTokenEntity:function(a){return!!a&&bE(a)&&a.hasOwnProperty("realm")&&a.credentialType===o.ID_TOKEN},isRefreshTokenEntity:function(a){return!!a&&bE(a)&&a.credentialType===o.REFRESH_TOKEN},isServerTelemetryEntity:function(a,b){let c=0===a.indexOf(v),d=!0;return b&&(d=b.hasOwnProperty("failedRequests")&&b.hasOwnProperty("errors")&&b.hasOwnProperty("cacheHits")),c&&d},isThrottlingEntity:function(a,b){let c=!1;a&&(c=0===a.indexOf(x.THROTTLING_PREFIX));let d=!0;return b&&(d=b.hasOwnProperty("throttleTime")),c&&d},updateAuthorityEndpointMetadata:bG,updateCloudDiscoveryMetadata:bH});class bK{constructor(a,b,c,d,e,f,g,h){this.canonicalAuthority=a,this._canonicalAuthority.validateAsUri(),this.networkInterface=b,this.cacheManager=c,this.authorityOptions=d,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=e,this.performanceClient=g,this.correlationId=f,this.managedIdentity=h||!1,this.regionDiscovery=new bv(b,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(a){if(a.HostNameAndPort.endsWith(d.CIAM_AUTH_URL))return aJ.Ciam;let b=a.PathSegments;if(b.length)switch(b[0].toLowerCase()){case d.ADFS:return aJ.Adfs;case d.DSTS:return aJ.Dsts}return aJ.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(a){this._canonicalAuthority=new bh(a),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw aD(M)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw aD(M)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw aD(M)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw aD(ar);return this.replacePath(this.metadata.end_session_endpoint)}throw aD(M)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw aD(M)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw aD(M)}canReplaceTenant(a){return 1===a.PathSegments.length&&!bK.reservedTenantDomains.has(a.PathSegments[0])&&this.getAuthorityType(a)===aJ.Default&&this.protocolMode!==bn.OIDC}replaceTenant(a){return a.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(a){let b=a,c=new bh(this.metadata.canonical_authority).getUrlComponents(),d=c.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,e)=>{let f=d[e];if(0===e&&this.canReplaceTenant(c)){let a=new bh(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];f!==a&&(this.logger.verbose(`Replacing tenant domain name ${f} with id ${a}`),f=a)}a!==f&&(b=b.replace(`/${f}/`,`/${a}/`))}),this.replaceTenant(b)}get defaultOpenIdConfigurationEndpoint(){let a=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===aJ.Adfs||this.protocolMode===bn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(a)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(bp.AuthorityResolveEndpointsAsync,this.correlationId);let a=this.getCurrentMetadataEntity(),b=await bu(this.updateCloudDiscoveryMetadata.bind(this),bp.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(a);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,a.preferred_network);let c=await bu(this.updateEndpointMetadata.bind(this),bp.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(a);this.updateCachedMetadata(a,b,{source:c}),this.performanceClient?.addFields({cloudDiscoverySource:b,authorityEndpointSource:c},this.correlationId)}getCurrentMetadataEntity(){let a=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return a||(a={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:bF(),jwks_uri:""}),a}updateCachedMetadata(a,b,c){b!==s&&c?.source!==s&&(a.expiresAt=bF(),a.canonical_authority=this.canonicalAuthority);let d=this.cacheManager.generateAuthorityMetadataCacheKey(a.preferred_cache);this.cacheManager.setAuthorityMetadata(d,a),this.metadata=a}async updateEndpointMetadata(a){this.performanceClient?.addQueueMeasurement(bp.AuthorityUpdateEndpointMetadata,this.correlationId);let b=this.updateEndpointMetadataFromLocalSources(a);if(b)return b.source===u&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&b.metadata&&(bG(a,await bu(this.updateMetadataWithRegionalInformation.bind(this),bp.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(b.metadata),!1),a.canonical_authority=this.canonicalAuthority),b.source;let c=await bu(this.getEndpointMetadataFromNetwork.bind(this),bp.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(c)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(c=await bu(this.updateMetadataWithRegionalInformation.bind(this),bp.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(c)),bG(a,c,!0),t;throw aD(O,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(a){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let b=this.getEndpointMetadataFromConfig();if(b)return this.logger.verbose("Found endpoint metadata in authority configuration"),bG(a,b,!1),{source:r};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let b=this.getEndpointMetadataFromHardcodedValues();if(b)return bG(a,b,!1),{source:u,metadata:b};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let c=bI(a);return this.isAuthoritySameType(a)&&a.endpointsFromNetwork&&!c?(this.logger.verbose("Found endpoint metadata in the cache."),{source:s}):(c&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(a){return new bh(a.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(a){throw ba(aW)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(bp.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{var b;let c=await this.networkInterface.sendGetRequestAsync(a,{});if((b=c.body).hasOwnProperty("authorization_endpoint")&&b.hasOwnProperty("token_endpoint")&&b.hasOwnProperty("issuer")&&b.hasOwnProperty("jwks_uri"))return c.body;return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in bi?bi[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(a){this.performanceClient?.addQueueMeasurement(bp.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let b=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(b){if(b!==d.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=b,bK.replaceWithRegionalInformation(a,b);let c=await bu(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),bp.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(c)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=c,bK.replaceWithRegionalInformation(a,c);this.regionDiscoveryMetadata.region_outcome="5"}return a}async updateCloudDiscoveryMetadata(a){this.performanceClient?.addQueueMeasurement(bp.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let b=this.updateCloudDiscoveryMetadataFromLocalSources(a);if(b)return b;let c=await bu(this.getCloudDiscoveryMetadataFromNetwork.bind(this),bp.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(c)return bH(a,c,!0),t;throw ba(aX)}updateCloudDiscoveryMetadataFromLocalSources(a){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||d.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||d.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${a.canonical_authority||d.NOT_APPLICABLE}`);let b=this.getCloudDiscoveryMetadataFromConfig();if(b)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),bH(a,b,!1),r;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{var c;let b=(c=this.hostnameAndPort,bm(bj,c));if(b)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),bH(a,b,!1),u;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let e=bI(a);return this.isAuthoritySameType(a)&&a.aliasesFromNetwork&&!e?(this.logger.verbose("Found cloud discovery metadata in the cache."),s):(e&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===aJ.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),bK.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let a=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),b=bm(a.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),b)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),b;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(a){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ba(aV)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),bK.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(bp.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let a=`${d.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,b=null;try{var c,e;let f,g,h=await this.networkInterface.sendGetRequestAsync(a,{});if((c=h.body).hasOwnProperty("tenant_discovery_endpoint")&&c.hasOwnProperty("metadata"))g=(f=h.body).metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${f.tenant_discovery_endpoint}`);else{if(!((e=h.body).hasOwnProperty("error")&&e.hasOwnProperty("error_description")))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${h.status}`),(f=h.body).error===d.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${f.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${f.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),g=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),b=bm(g,this.hostnameAndPort)}catch(a){return a instanceof H?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${a.errorCode}
Error Description: ${a.errorMessage}`):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${a.name}
Error Description: ${a.message}`),null}return b||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),b=bK.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),b}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&bh.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(a,b){let c;if(b&&b.azureCloudInstance!==bo.None){let a=b.tenant?b.tenant:d.DEFAULT_COMMON_TENANT;c=`${b.azureCloudInstance}/${a}/`}return c||a}static createCloudDiscoveryMetadataFromHost(a){return{preferred_network:a,preferred_cache:a,aliases:[a]}}getPreferredCache(){if(this.managedIdentity)return d.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw aD(M)}isAlias(a){return this.metadata.aliases.indexOf(a)>-1}isAliasOfKnownMicrosoftAuthority(a){return bk.has(a)}static isPublicCloudAuthority(a){return d.KNOWN_PUBLIC_CLOUDS.indexOf(a)>=0}static buildRegionalAuthorityString(a,b,c){let e=new bh(a);e.validateAsUri();let f=e.getUrlComponents(),g=`${b}.${f.HostNameAndPort}`;this.isPublicCloudAuthority(f.HostNameAndPort)&&(g=`${b}.${d.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let h=bh.constructAuthorityUriFromObject({...e.getUrlComponents(),HostNameAndPort:g}).urlString;return c?`${h}?${c}`:h}static replaceWithRegionalInformation(a,b){let c={...a};return c.authorization_endpoint=bK.buildRegionalAuthorityString(c.authorization_endpoint,b),c.token_endpoint=bK.buildRegionalAuthorityString(c.token_endpoint,b),c.end_session_endpoint&&(c.end_session_endpoint=bK.buildRegionalAuthorityString(c.end_session_endpoint,b)),c}static transformCIAMAuthority(a){let b=a,c=new bh(a).getUrlComponents();if(0===c.PathSegments.length&&c.HostNameAndPort.endsWith(d.CIAM_AUTH_URL)){let a=c.HostNameAndPort.split(".")[0];b=`${b}${a}${d.AAD_TENANT_DOMAIN_SUFFIX}`}return b}}function bL(a){return a.endsWith(d.FORWARD_SLASH)?a:`${a}${d.FORWARD_SLASH}`}async function bM(a,b,c,d,e,f,g){g?.addQueueMeasurement(bp.AuthorityFactoryCreateDiscoveredInstance,f);let h=bK.transformCIAMAuthority(bL(a)),i=new bK(h,b,c,d,e,f,g);try{return await bu(i.resolveEndpointsAsync.bind(i),bp.AuthorityResolveEndpointsAsync,e,g,f)(),i}catch(a){throw aD(M)}}bK.reservedTenantDomains=new Set(["{tenant}","{tenantid}",i.COMMON,i.CONSUMERS,i.ORGANIZATIONS]);var bN=Object.freeze({__proto__:null,createDiscoveredInstance:bM});let bO="client_id",bP="redirect_uri",bQ="response_type",bR="response_mode",bS="grant_type",bT="claims",bU="scope",bV="refresh_token",bW="state",bX="nonce",bY="prompt",bZ="code",b$="code_challenge",b_="code_challenge_method",b0="code_verifier",b1="client-request-id",b2="x-client-SKU",b3="x-client-VER",b4="x-client-OS",b5="x-client-CPU",b6="x-client-current-telemetry",b7="x-client-last-telemetry",b8="x-ms-lib-capability",b9="x-app-name",ca="x-app-ver",cb="post_logout_redirect_uri",cc="id_token_hint",cd="device_code",ce="client_secret",cf="client_assertion",cg="client_assertion_type",ch="token_type",ci="req_cnf",cj="assertion",ck="requested_token_use",cl="return_spa_code",cm="nativebroker",cn="logout_hint",co="login_hint",cp="domain_hint",cq="brk_client_id",cr="brk_redirect_uri",cs="instance_aware",ct="ear_jwk",cu="ear_jwe_crypto";var cv=Object.freeze({__proto__:null,ACCESS_TOKEN:"access_token",BROKER_CLIENT_ID:cq,BROKER_REDIRECT_URI:cr,CCS_HEADER:"X-AnchorMailbox",CLAIMS:bT,CLIENT_ASSERTION:cf,CLIENT_ASSERTION_TYPE:cg,CLIENT_ID:bO,CLIENT_INFO:"client_info",CLIENT_REQUEST_ID:b1,CLIENT_SECRET:ce,CODE:bZ,CODE_CHALLENGE:b$,CODE_CHALLENGE_METHOD:b_,CODE_VERIFIER:b0,DEVICE_CODE:cd,DOMAIN_HINT:cp,EAR_JWE_CRYPTO:cu,EAR_JWK:ct,ERROR:"error",ERROR_DESCRIPTION:"error_description",EXPIRES_IN:"expires_in",FOCI:"foci",GRANT_TYPE:bS,ID_TOKEN:"id_token",ID_TOKEN_HINT:cc,INSTANCE_AWARE:cs,LOGIN_HINT:co,LOGOUT_HINT:cn,NATIVE_BROKER:cm,NONCE:bX,OBO_ASSERTION:cj,ON_BEHALF_OF:"on_behalf_of",POST_LOGOUT_URI:cb,PROMPT:bY,REDIRECT_URI:bP,REFRESH_TOKEN:bV,REFRESH_TOKEN_EXPIRES_IN:"refresh_token_expires_in",REQUESTED_TOKEN_USE:ck,REQ_CNF:ci,RESPONSE_MODE:bR,RESPONSE_TYPE:bQ,RETURN_SPA_CODE:cl,SCOPE:bU,SESSION_STATE:"session_state",SID:"sid",STATE:bW,TOKEN_TYPE:ch,X_APP_NAME:b9,X_APP_VER:ca,X_CLIENT_CPU:b5,X_CLIENT_CURR_TELEM:b6,X_CLIENT_EXTRA_SKU:"x-client-xtra-sku",X_CLIENT_LAST_TELEM:b7,X_CLIENT_OS:b4,X_CLIENT_SKU:b2,X_CLIENT_VER:b3,X_MS_LIB_CAPABILITY:b8});let cw={createNewGuid:()=>{throw aD(aw)},base64Decode:()=>{throw aD(aw)},base64Encode:()=>{throw aD(aw)},base64UrlEncode:()=>{throw aD(aw)},encodeKid:()=>{throw aD(aw)},async getPublicKeyThumbprint(){throw aD(aw)},async removeTokenBindingKey(){throw aD(aw)},async clearKeystore(){throw aD(aw)},async signJwt(){throw aD(aw)},async hashString(){throw aD(aw)}};c.LogLevel=void 0,(D=c.LogLevel||(c.LogLevel={}))[D.Error=0]="Error",D[D.Warning=1]="Warning",D[D.Info=2]="Info",D[D.Verbose=3]="Verbose",D[D.Trace=4]="Trace";class cx{constructor(a,b,e){this.level=c.LogLevel.Info;const f=a||cx.createDefaultLoggerOptions();this.localCallback=f.loggerCallback||(()=>{}),this.piiLoggingEnabled=f.piiLoggingEnabled||!1,this.level="number"==typeof f.logLevel?f.logLevel:c.LogLevel.Info,this.correlationId=f.correlationId||d.EMPTY_STRING,this.packageName=b||d.EMPTY_STRING,this.packageVersion=e||d.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:c.LogLevel.Info}}clone(a,b,c){return new cx({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:c||this.correlationId},a,b)}logMessage(a,b){if(b.logLevel>this.level||!this.piiLoggingEnabled&&b.containsPii)return;let d=new Date().toUTCString(),e=`[${d}] : [${b.correlationId||this.correlationId||""}]`,f=`${e} : ${this.packageName}@${this.packageVersion} : ${c.LogLevel[b.logLevel]} - ${a}`;this.executeCallback(b.logLevel,f,b.containsPii||!1)}executeCallback(a,b,c){this.localCallback&&this.localCallback(a,b,c)}error(a,b){this.logMessage(a,{logLevel:c.LogLevel.Error,containsPii:!1,correlationId:b||d.EMPTY_STRING})}errorPii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Error,containsPii:!0,correlationId:b||d.EMPTY_STRING})}warning(a,b){this.logMessage(a,{logLevel:c.LogLevel.Warning,containsPii:!1,correlationId:b||d.EMPTY_STRING})}warningPii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Warning,containsPii:!0,correlationId:b||d.EMPTY_STRING})}info(a,b){this.logMessage(a,{logLevel:c.LogLevel.Info,containsPii:!1,correlationId:b||d.EMPTY_STRING})}infoPii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Info,containsPii:!0,correlationId:b||d.EMPTY_STRING})}verbose(a,b){this.logMessage(a,{logLevel:c.LogLevel.Verbose,containsPii:!1,correlationId:b||d.EMPTY_STRING})}verbosePii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Verbose,containsPii:!0,correlationId:b||d.EMPTY_STRING})}trace(a,b){this.logMessage(a,{logLevel:c.LogLevel.Trace,containsPii:!1,correlationId:b||d.EMPTY_STRING})}tracePii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Trace,containsPii:!0,correlationId:b||d.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}let cy="@azure/msal-common",cz="15.13.3";class cA{constructor(a){const b=a?bb.trimArrayEntries([...a]):[],c=b?bb.removeEmptyStringsFromArray(b):[];if(!c||!c.length)throw ba(aP);this.scopes=new Set,c.forEach(a=>this.scopes.add(a))}static fromString(a){return new cA((a||d.EMPTY_STRING).split(" "))}static createSearchScopes(a){let b=new cA(a&&a.length>0?a:[...f]);return b.containsOnlyOIDCScopes()?b.removeScope(d.OFFLINE_ACCESS_SCOPE):b.removeOIDCScopes(),b}containsScope(a){let b=new cA(this.printScopesLowerCase().split(" "));return!!a&&b.scopes.has(a.toLowerCase())}containsScopeSet(a){return!!a&&!(a.scopes.size<=0)&&this.scopes.size>=a.scopes.size&&a.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let a=0;return g.forEach(b=>{this.containsScope(b)&&(a+=1)}),this.scopes.size===a}appendScope(a){a&&this.scopes.add(a.trim())}appendScopes(a){try{a.forEach(a=>this.appendScope(a))}catch(a){throw aD(_)}}removeScope(a){if(!a)throw aD($);this.scopes.delete(a.trim())}removeOIDCScopes(){g.forEach(a=>{this.scopes.delete(a)})}unionScopeSets(a){if(!a)throw aD(aa);let b=new Set;return a.scopes.forEach(a=>b.add(a.toLowerCase())),this.scopes.forEach(a=>b.add(a.toLowerCase())),b}intersectingScopeSets(a){if(!a)throw aD(aa);a.containsOnlyOIDCScopes()||a.removeOIDCScopes();let b=this.unionScopeSets(a),c=a.getScopeCount(),d=this.getScopeCount();return b.size<d+c}getScopeCount(){return this.scopes.size}asArray(){let a=[];return this.scopes.forEach(b=>a.push(b)),a}printScopes(){return this.scopes?this.asArray().join(" "):d.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function cB(a,b){if(!a)throw aD(J);try{let c=b(a);return JSON.parse(c)}catch(a){throw aD(I)}}function cC(a){if(!a)throw aD(I);let b=a.split(".",2);return{uid:b[0],utid:b.length<2?d.EMPTY_STRING:b[1]}}function cD(a,b){return!!a&&!!b&&a===b.split(".")[1]}function cE(a,b,c,d){if(!d)return{tenantId:c,localAccountId:b,username:"",isHomeTenant:cD(c,a)};{let{oid:b,sub:c,tid:e,name:f,tfp:g,acr:h,preferred_username:i,upn:j,login_hint:k}=d,l=e||g||h||"";return{tenantId:l,localAccountId:b||c||"",name:f,username:i||j||"",loginHint:k,isHomeTenant:cD(l,a)}}}function cF(a,b,c,d){let e=a;if(b){let{isHomeTenant:c,...d}=b;e={...a,...d}}if(c){let{isHomeTenant:b,...f}=cE(a.homeAccountId,a.localAccountId,a.tenantId,c);e={...e,...f,idTokenClaims:c,idToken:d}}return e}function cG(a){return a&&(a.tid||a.tfp||a.acr)||null}class cH{static getAccountInfo(a){return{homeAccountId:a.homeAccountId,environment:a.environment,tenantId:a.realm,username:a.username,localAccountId:a.localAccountId,loginHint:a.loginHint,name:a.name,nativeAccountId:a.nativeAccountId,authorityType:a.authorityType,tenantProfiles:new Map((a.tenantProfiles||[]).map(a=>[a.tenantId,a])),dataBoundary:a.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(a,b,c){let d,e=new cH;b.authorityType===aJ.Adfs?e.authorityType=n.ADFS_ACCOUNT_TYPE:b.protocolMode===bn.OIDC?e.authorityType=n.GENERIC_ACCOUNT_TYPE:e.authorityType=n.MSSTS_ACCOUNT_TYPE,a.clientInfo&&c&&(d=cB(a.clientInfo,c)).xms_tdbr&&(e.dataBoundary="EU"===d.xms_tdbr?"EU":"None"),e.clientInfo=a.clientInfo,e.homeAccountId=a.homeAccountId,e.nativeAccountId=a.nativeAccountId;let f=a.environment||b&&b.getPreferredCache();if(!f)throw aD(ag);e.environment=f,e.realm=d?.utid||cG(a.idTokenClaims)||"",e.localAccountId=d?.uid||a.idTokenClaims?.oid||a.idTokenClaims?.sub||"";let g=a.idTokenClaims?.preferred_username||a.idTokenClaims?.upn,h=a.idTokenClaims?.emails?a.idTokenClaims.emails[0]:null;if(e.username=g||h||"",e.loginHint=a.idTokenClaims?.login_hint,e.name=a.idTokenClaims?.name||"",e.cloudGraphHostName=a.cloudGraphHostName,e.msGraphHost=a.msGraphHost,a.tenantProfiles)e.tenantProfiles=a.tenantProfiles;else{let b=cE(a.homeAccountId,e.localAccountId,e.realm,a.idTokenClaims);e.tenantProfiles=[b]}return e}static createFromAccountInfo(a,b,c){let d=new cH;return d.authorityType=a.authorityType||n.GENERIC_ACCOUNT_TYPE,d.homeAccountId=a.homeAccountId,d.localAccountId=a.localAccountId,d.nativeAccountId=a.nativeAccountId,d.realm=a.tenantId,d.environment=a.environment,d.username=a.username,d.name=a.name,d.loginHint=a.loginHint,d.cloudGraphHostName=b,d.msGraphHost=c,d.tenantProfiles=Array.from(a.tenantProfiles?.values()||[]),d.dataBoundary=a.dataBoundary,d}static generateHomeAccountId(a,b,c,d,e){if(b!==aJ.Adfs&&b!==aJ.Dsts){if(a)try{let b=cB(a,d.base64Decode);if(b.uid&&b.utid)return`${b.uid}.${b.utid}`}catch(a){}c.warning("No client info in response")}return e?.sub||""}static isAccountEntity(a){return!!a&&a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("realm")&&a.hasOwnProperty("localAccountId")&&a.hasOwnProperty("username")&&a.hasOwnProperty("authorityType")}static accountInfoIsEqual(a,b,c){if(!a||!b)return!1;let d=!0;if(c){let c=a.idTokenClaims||{},e=b.idTokenClaims||{};d=c.iat===e.iat&&c.nonce===e.nonce}return a.homeAccountId===b.homeAccountId&&a.localAccountId===b.localAccountId&&a.username===b.username&&a.tenantId===b.tenantId&&a.loginHint===b.loginHint&&a.environment===b.environment&&a.nativeAccountId===b.nativeAccountId&&d}}let cI="cache_quota_exceeded",cJ="cache_error_unknown";var cK=Object.freeze({__proto__:null,cacheErrorUnknown:cJ,cacheQuotaExceeded:cI});let cL={[cI]:"Exceeded cache storage capacity.",[cJ]:"Unexpected error occurred when using cache storage."};class cM extends H{constructor(a,b){const c=b||(cL[a]?cL[a]:cL[cJ]);super(`${a}: ${c}`),Object.setPrototypeOf(this,cM.prototype),this.name="CacheError",this.errorCode=a,this.errorMessage=c}}function cN(a){return a instanceof Error?"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name||a.message.includes("exceeded the quota")?new cM(cI):new cM(a.name,a.message):new cM(cJ)}class cO{constructor(a,b,c,d,e){this.clientId=a,this.cryptoImpl=b,this.commonLogger=c.clone(cy,cz),this.staticAuthorityOptions=e,this.performanceClient=d}getAllAccounts(a,b){return this.buildTenantProfiles(this.getAccountsFilteredBy(a,b),b,a)}getAccountInfoFilteredBy(a,b){if(0===Object.keys(a).length||Object.values(a).every(a=>!a))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let c=this.getAllAccounts(a,b);return c.length>1?c.sort(a=>a.idTokenClaims?-1:1)[0]:1===c.length?c[0]:null}getBaseAccountInfo(a,b){let c=this.getAccountsFilteredBy(a,b);return c.length>0?cH.getAccountInfo(c[0]):null}buildTenantProfiles(a,b,c){return a.flatMap(a=>this.getTenantProfilesFromAccountEntity(a,b,c?.tenantId,c))}getTenantedAccountInfoByFilter(a,b,c,d,e){let f;if(e&&!this.tenantProfileMatchesFilter(c,e))return null;let g=this.getIdToken(a,d,b,c.tenantId);return g&&(f=aE(g.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,e))?null:cF(a,c,f,g?.secret)}getTenantProfilesFromAccountEntity(a,b,c,d){let e=cH.getAccountInfo(a),f=e.tenantProfiles||new Map,g=this.getTokenKeys();if(c){let a=f.get(c);if(!a)return[];f=new Map([[c,a]])}let h=[];return f.forEach(a=>{let c=this.getTenantedAccountInfoByFilter(e,g,a,b,d);c&&h.push(c)}),h}tenantProfileMatchesFilter(a,b){return(!b.localAccountId||!!this.matchLocalAccountIdFromTenantProfile(a,b.localAccountId))&&(!b.name||a.name===b.name)&&(void 0===b.isHomeTenant||a.isHomeTenant===b.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(a,b){return(!b||(!b.localAccountId||!!this.matchLocalAccountIdFromTokenClaims(a,b.localAccountId))&&(!b.loginHint||!!this.matchLoginHintFromTokenClaims(a,b.loginHint))&&(!b.username||!!this.matchUsername(a.preferred_username,b.username))&&(!b.name||!!this.matchName(a,b.name))&&(!b.sid||!!this.matchSid(a,b.sid)))&&!0}async saveCacheRecord(a,b,c,d){if(!a)throw aD(af);try{a.account&&await this.setAccount(a.account,b,c),a.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(a.idToken,b,c),a.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(a.accessToken,b,c),a.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(a.refreshToken,b,c),a.appMetadata&&this.setAppMetadata(a.appMetadata,b)}catch(a){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),a instanceof H)throw a;throw cN(a)}}async saveAccessToken(a,b,c){let d={clientId:a.clientId,credentialType:a.credentialType,environment:a.environment,homeAccountId:a.homeAccountId,realm:a.realm,tokenType:a.tokenType,requestedClaimsHash:a.requestedClaimsHash},e=this.getTokenKeys(),f=cA.fromString(a.target);e.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,d,!1))return;let c=this.getAccessTokenCredential(a,b);c&&this.credentialMatchesFilter(c,d)&&cA.fromString(c.target).intersectingScopeSets(f)&&this.removeAccessToken(a,b)}),await this.setAccessTokenCredential(a,b,c)}getAccountsFilteredBy(a,b){let c=this.getAccountKeys(),d=[];return c.forEach(c=>{let e=this.getAccount(c,b);if(!e||a.homeAccountId&&!this.matchHomeAccountId(e,a.homeAccountId)||a.username&&!this.matchUsername(e.username,a.username)||a.environment&&!this.matchEnvironment(e,a.environment)||a.realm&&!this.matchRealm(e,a.realm)||a.nativeAccountId&&!this.matchNativeAccountId(e,a.nativeAccountId)||a.authorityType&&!this.matchAuthorityType(e,a.authorityType))return;let f={localAccountId:a?.localAccountId,name:a?.name},g=e.tenantProfiles?.filter(a=>this.tenantProfileMatchesFilter(a,f));g&&0===g.length||d.push(e)}),d}credentialMatchesFilter(a,b){return(!b.clientId||!!this.matchClientId(a,b.clientId))&&(!b.userAssertionHash||!!this.matchUserAssertionHash(a,b.userAssertionHash))&&("string"!=typeof b.homeAccountId||!!this.matchHomeAccountId(a,b.homeAccountId))&&(!b.environment||!!this.matchEnvironment(a,b.environment))&&(!b.realm||!!this.matchRealm(a,b.realm))&&(!b.credentialType||!!this.matchCredentialType(a,b.credentialType))&&(!b.familyId||!!this.matchFamilyId(a,b.familyId))&&(!b.target||!!this.matchTarget(a,b.target))&&(!b.requestedClaimsHash&&!a.requestedClaimsHash||a.requestedClaimsHash===b.requestedClaimsHash)&&(a.credentialType!==o.ACCESS_TOKEN_WITH_AUTH_SCHEME||(!b.tokenType||!!this.matchTokenType(a,b.tokenType))&&(b.tokenType!==w.SSH||!b.keyId||!!this.matchKeyId(a,b.keyId)))&&!0}getAppMetadataFilteredBy(a){let b=this.getKeys(),c={};return b.forEach(b=>{if(!this.isAppMetadata(b))return;let d=this.getAppMetadata(b);!d||a.environment&&!this.matchEnvironment(d,a.environment)||(!a.clientId||this.matchClientId(d,a.clientId))&&(c[b]=d)}),c}getAuthorityMetadataByAlias(a){let b=this.getAuthorityMetadataKeys(),c=null;return b.forEach(b=>{if(!this.isAuthorityMetadata(b)||-1===b.indexOf(this.clientId))return;let d=this.getAuthorityMetadata(b);d&&-1!==d.aliases.indexOf(a)&&(c=d)}),c}removeAllAccounts(a){this.getAllAccounts({},a).forEach(b=>{this.removeAccount(b,a)})}removeAccount(a,b){this.removeAccountContext(a,b),this.getAccountKeys().filter(b=>b.includes(a.homeAccountId)&&b.includes(a.environment)).forEach(a=>{this.removeItem(a,b),this.performanceClient.incrementFields({accountsRemoved:1},b)})}removeAccountContext(a,b){let c=this.getTokenKeys(),d=b=>b.includes(a.homeAccountId)&&b.includes(a.environment);c.idToken.filter(d).forEach(a=>{this.removeIdToken(a,b)}),c.accessToken.filter(d).forEach(a=>{this.removeAccessToken(a,b)}),c.refreshToken.filter(d).forEach(a=>{this.removeRefreshToken(a,b)})}removeAccessToken(a,b){let c=this.getAccessTokenCredential(a,b);if(this.removeItem(a,b),this.performanceClient.incrementFields({accessTokensRemoved:1},b),!c||c.credentialType.toLowerCase()!==o.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||c.tokenType!==w.POP)return;let d=c.keyId;d&&this.cryptoImpl.removeTokenBindingKey(d).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${d}`,b),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},b)})}removeAppMetadata(a){return this.getKeys().forEach(b=>{this.isAppMetadata(b)&&this.removeItem(b,a)}),!0}getIdToken(a,b,c,d,e){this.commonLogger.trace("CacheManager - getIdToken called");let f={homeAccountId:a.homeAccountId,environment:a.environment,credentialType:o.ID_TOKEN,clientId:this.clientId,realm:d},g=this.getIdTokensByFilter(f,b,c),h=g.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(h>1){let c=g;if(!d){let b=new Map;g.forEach((c,d)=>{c.realm===a.tenantId&&b.set(d,c)});let d=b.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),g.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),b.values().next().value;c=b}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((a,c)=>{this.removeIdToken(c,b)}),e&&b&&e.addFields({multiMatchedID:g.size},b),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),g.values().next().value}getIdTokensByFilter(a,b,c){let d=c&&c.idToken||this.getTokenKeys().idToken,e=new Map;return d.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...a}))return;let d=this.getIdTokenCredential(c,b);d&&this.credentialMatchesFilter(d,a)&&e.set(c,d)}),e}idTokenKeyMatchesFilter(a,b){let c=a.toLowerCase();return(!b.clientId||-1!==c.indexOf(b.clientId.toLowerCase()))&&(!b.homeAccountId||-1!==c.indexOf(b.homeAccountId.toLowerCase()))}removeIdToken(a,b){this.removeItem(a,b)}removeRefreshToken(a,b){this.removeItem(a,b)}getAccessToken(a,b,c,d){let e=b.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",e);let f=cA.createSearchScopes(b.scopes),g=b.authenticationScheme||w.BEARER,h=g&&g.toLowerCase()!==w.BEARER.toLowerCase()?o.ACCESS_TOKEN_WITH_AUTH_SCHEME:o.ACCESS_TOKEN,i={homeAccountId:a.homeAccountId,environment:a.environment,credentialType:h,clientId:this.clientId,realm:d||a.tenantId,target:f,tokenType:g,keyId:b.sshKid,requestedClaimsHash:b.requestedClaimsHash},j=c&&c.accessToken||this.getTokenKeys().accessToken,k=[];j.forEach(a=>{if(this.accessTokenKeyMatchesFilter(a,i,!0)){let b=this.getAccessTokenCredential(a,e);b&&this.credentialMatchesFilter(b,i)&&k.push(b)}});let l=k.length;return l<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",e),null):l>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",e),k.forEach(a=>{this.removeAccessToken(this.generateCredentialKey(a),e)}),this.performanceClient.addFields({multiMatchedAT:k.length},e),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",e),k[0])}accessTokenKeyMatchesFilter(a,b,c){let d=a.toLowerCase();if(b.clientId&&-1===d.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===d.indexOf(b.homeAccountId.toLowerCase())||b.realm&&-1===d.indexOf(b.realm.toLowerCase())||b.requestedClaimsHash&&-1===d.indexOf(b.requestedClaimsHash.toLowerCase()))return!1;if(b.target){let a=b.target.asArray();for(let b=0;b<a.length;b++)if(c&&!d.includes(a[b].toLowerCase()))return!1;else if(!c&&d.includes(a[b].toLowerCase()))break}return!0}getAccessTokensByFilter(a,b){let c=this.getTokenKeys(),d=[];return c.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,a,!0))return;let e=this.getAccessTokenCredential(c,b);e&&this.credentialMatchesFilter(e,a)&&d.push(e)}),d}getRefreshToken(a,b,c,d,e){this.commonLogger.trace("CacheManager - getRefreshToken called");let f={homeAccountId:a.homeAccountId,environment:a.environment,credentialType:o.REFRESH_TOKEN,clientId:this.clientId,familyId:b?"1":void 0},g=d&&d.refreshToken||this.getTokenKeys().refreshToken,h=[];g.forEach(a=>{if(this.refreshTokenKeyMatchesFilter(a,f)){let b=this.getRefreshTokenCredential(a,c);b&&this.credentialMatchesFilter(b,f)&&h.push(b)}});let i=h.length;return i<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(i>1&&e&&c&&e.addFields({multiMatchedRT:i},c),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),h[0])}refreshTokenKeyMatchesFilter(a,b){let c=a.toLowerCase();return(!b.familyId||-1!==c.indexOf(b.familyId.toLowerCase()))&&(!!b.familyId||!b.clientId||-1!==c.indexOf(b.clientId.toLowerCase()))&&(!b.homeAccountId||-1!==c.indexOf(b.homeAccountId.toLowerCase()))}readAppMetadataFromCache(a){let b={environment:a,clientId:this.clientId},c=this.getAppMetadataFilteredBy(b),d=Object.keys(c).map(a=>c[a]),e=d.length;if(e<1)return null;if(e>1)throw aD(Y);return d[0]}isAppMetadataFOCI(a){let b=this.readAppMetadataFromCache(a);return!!(b&&"1"===b.familyId)}matchHomeAccountId(a,b){return"string"==typeof a.homeAccountId&&b===a.homeAccountId}matchLocalAccountIdFromTokenClaims(a,b){return b===(a.oid||a.sub)}matchLocalAccountIdFromTenantProfile(a,b){return a.localAccountId===b}matchName(a,b){return b.toLowerCase()===a.name?.toLowerCase()}matchUsername(a,b){return!!(a&&"string"==typeof a&&b?.toLowerCase()===a.toLowerCase())}matchUserAssertionHash(a,b){return!!(a.userAssertionHash&&b===a.userAssertionHash)}matchEnvironment(a,b){if(this.staticAuthorityOptions){let c=function(a,b){let c,d=a.canonicalAuthority;if(d){let e=new bh(d).getUrlComponents().HostNameAndPort;c=bl(e,a.cloudDiscoveryMetadata?.metadata,r,b)||bl(e,bj,u,b)||a.knownAuthorities}return c||[]}(this.staticAuthorityOptions,this.commonLogger);if(c.includes(b)&&c.includes(a.environment))return!0}let c=this.getAuthorityMetadataByAlias(b);return!!(c&&c.aliases.indexOf(a.environment)>-1)}matchCredentialType(a,b){return a.credentialType&&b.toLowerCase()===a.credentialType.toLowerCase()}matchClientId(a,b){return!!(a.clientId&&b===a.clientId)}matchFamilyId(a,b){return!!(a.familyId&&b===a.familyId)}matchRealm(a,b){return a.realm?.toLowerCase()===b.toLowerCase()}matchNativeAccountId(a,b){return!!(a.nativeAccountId&&b===a.nativeAccountId)}matchLoginHintFromTokenClaims(a,b){return a.login_hint===b||a.preferred_username===b||a.upn===b}matchSid(a,b){return a.sid===b}matchAuthorityType(a,b){return!!(a.authorityType&&b.toLowerCase()===a.authorityType.toLowerCase())}matchTarget(a,b){return(a.credentialType===o.ACCESS_TOKEN||a.credentialType===o.ACCESS_TOKEN_WITH_AUTH_SCHEME)&&!!a.target&&cA.fromString(a.target).containsScopeSet(b)}matchTokenType(a,b){return!!(a.tokenType&&a.tokenType===b)}matchKeyId(a,b){return!!(a.keyId&&a.keyId===b)}isAppMetadata(a){return -1!==a.indexOf(p)}isAuthorityMetadata(a){return -1!==a.indexOf(q)}generateAuthorityMetadataCacheKey(a){return`${q}-${this.clientId}-${a}`}static toObject(a,b){for(let c in b)a[c]=b[c];return a}}class cP extends cO{async setAccount(){throw aD(aw)}getAccount(){throw aD(aw)}async setIdTokenCredential(){throw aD(aw)}getIdTokenCredential(){throw aD(aw)}async setAccessTokenCredential(){throw aD(aw)}getAccessTokenCredential(){throw aD(aw)}async setRefreshTokenCredential(){throw aD(aw)}getRefreshTokenCredential(){throw aD(aw)}setAppMetadata(){throw aD(aw)}getAppMetadata(){throw aD(aw)}setServerTelemetry(){throw aD(aw)}getServerTelemetry(){throw aD(aw)}setAuthorityMetadata(){throw aD(aw)}getAuthorityMetadata(){throw aD(aw)}getAuthorityMetadataKeys(){throw aD(aw)}setThrottlingCache(){throw aD(aw)}getThrottlingCache(){throw aD(aw)}removeItem(){throw aD(aw)}getKeys(){throw aD(aw)}getAccountKeys(){throw aD(aw)}getTokenKeys(){throw aD(aw)}generateCredentialKey(){throw aD(aw)}generateAccountKey(){throw aD(aw)}}class cQ{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class cR{generateId(){return"callback-id"}startMeasurement(a,b){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:br.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:a,startTimeMs:Date.now(),correlationId:b||""},measurement:new cQ}}startPerformanceMeasurement(){return new cQ}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}let cS={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},cT={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:c.LogLevel.Info,correlationId:d.EMPTY_STRING},cU={claimsBasedCachingEnabled:!1},cV={async sendGetRequestAsync(){throw aD(aw)},async sendPostRequestAsync(){throw aD(aw)}},cW={sku:d.SKU,version:cz,cpu:d.EMPTY_STRING,os:d.EMPTY_STRING},cX={clientSecret:d.EMPTY_STRING,clientAssertion:void 0},cY={azureCloudInstance:bo.None,tenant:`${d.DEFAULT_COMMON_TENANT}`},cZ={application:{appName:"",appVersion:""}};function c$(a){return a.authOptions.authority.options.protocolMode===bn.OIDC}let c_={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};function c0(a,b,c){if(!b)return;let d=a.get(bO);d&&a.has(cq)&&c?.addFields({embeddedClientId:d,embeddedRedirectUri:a.get(bP)},b)}function c1(a,b){a.set(bR,b||l.QUERY)}function c2(a,b,c=!0,d=f){!c||d.includes("openid")||b.includes("openid")||d.push("openid");let e=new cA(c?[...b||[],...d]:b||[]);a.set(bU,e.printScopes())}function c3(a,b){a.set(bO,b)}function c4(a,b){a.set(bP,b)}function c5(a,b){a.set(cb,b)}function c6(a,b){a.set(cc,b)}function c7(a,b){a.set(cp,b)}function c8(a,b){a.set(co,b)}function c9(a,b){a.set(h.CCS_HEADER,`UPN:${b}`)}function da(a,b){a.set(h.CCS_HEADER,`Oid:${b.uid}@${b.utid}`)}function db(a,b){a.set("sid",b)}function dc(a,b,c){let d=du(b,c);try{JSON.parse(d)}catch(a){throw ba(aQ)}a.set(bT,d)}function dd(a,b){a.set(b1,b)}function de(a,b){a.set(b2,b.sku),a.set(b3,b.version),b.os&&a.set(b4,b.os),b.cpu&&a.set(b5,b.cpu)}function df(a,b){b?.appName&&a.set(b9,b.appName),b?.appVersion&&a.set(ca,b.appVersion)}function dg(a,b){a.set(bY,b)}function dh(a,b){b&&a.set(bW,b)}function di(a,b){a.set(bX,b)}function dj(a,b){a.set(bZ,b)}function dk(a,b){a.set(bV,b)}function dl(a,b){a.set(b0,b)}function dm(a,b){a.set(ce,b)}function dn(a,b){b&&a.set(cf,b)}function dp(a,b){b&&a.set(cg,b)}function dq(a,b){a.set(bS,b)}function dr(a){a.set("client_info","1")}function ds(a){a.has(cs)||a.set(cs,"true")}function dt(a,b){Object.entries(b).forEach(([b,c])=>{!a.has(b)&&c&&a.set(b,c)})}function du(a,b){let c;if(a)try{c=JSON.parse(a)}catch(a){throw ba(aQ)}else c={};return b&&b.length>0&&(c.hasOwnProperty(j.ACCESS_TOKEN)||(c[j.ACCESS_TOKEN]={}),c[j.ACCESS_TOKEN][j.XMS_CC]={values:b}),JSON.stringify(c)}function dv(a,b){b&&(a.set(ch,w.POP),a.set(ci,b))}function dw(a,b){b&&(a.set(ch,w.SSH),a.set(ci,b))}function dx(a,b){a.set(b6,b.generateCurrentRequestHeaderValue()),a.set(b7,b.generateLastRequestHeaderValue())}function dy(a){a.set(b8,x.X_MS_LIB_CAPABILITY_VALUE)}function dz(a,b){a.set(cn,b)}function dA(a,b,c){a.has(cq)||a.set(cq,b),a.has(cr)||a.set(cr,c)}var dB=Object.freeze({__proto__:null,addApplicationTelemetry:df,addAuthorizationCode:dj,addBrokerParameters:dA,addCcsOid:da,addCcsUpn:c9,addClaims:dc,addClientAssertion:dn,addClientAssertionType:dp,addClientCapabilitiesToClaims:du,addClientId:c3,addClientInfo:dr,addClientSecret:dm,addCodeChallengeParams:function(a,b,c){if(b&&c)a.set(b$,b),a.set(b_,c);else throw ba(aU)},addCodeVerifier:dl,addCorrelationId:dd,addDeviceCode:function(a,b){a.set(cd,b)},addDomainHint:c7,addEARParameters:function(a,b){a.set(ct,encodeURIComponent(b)),a.set(cu,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")},addExtraQueryParameters:dt,addGrantType:dq,addIdTokenHint:c6,addInstanceAware:ds,addLibraryInfo:de,addLoginHint:c8,addLogoutHint:dz,addNativeBroker:function(a){a.set(cm,"1")},addNonce:di,addOboAssertion:function(a,b){a.set(cj,b)},addPassword:function(a,b){a.set(z.password,b)},addPopToken:dv,addPostBodyParameters:function(a,b){Object.entries(b).forEach(([b,c])=>{c&&a.set(b,c)})},addPostLogoutRedirectUri:c5,addPrompt:dg,addRedirectUri:c4,addRefreshToken:dk,addRequestTokenUse:function(a,b){a.set(ck,b)},addResponseMode:c1,addResponseType:function(a,b){a.set(bQ,b)},addScopes:c2,addServerTelemetry:dx,addSid:db,addSshJwk:dw,addState:dh,addThrottling:dy,addUsername:function(a,b){a.set(z.username,b)},instrumentBrokerParams:c0});class dC extends H{constructor(a,b,c,d,e){super(a,b,c),this.name="ServerError",this.errorNo=d,this.status=e,Object.setPrototypeOf(this,dC.prototype)}}function dD(a,b,c){return{clientId:a,authority:b.authority,scopes:b.scopes,homeAccountIdentifier:c,claims:b.claims,authenticationScheme:b.authenticationScheme,resourceRequestMethod:b.resourceRequestMethod,resourceRequestUri:b.resourceRequestUri,shrClaims:b.shrClaims,sshKid:b.sshKid,embeddedClientId:b.embeddedClientId||b.tokenBodyParameters?.clientId}}class dE{static generateThrottlingStorageKey(a){return`${x.THROTTLING_PREFIX}.${JSON.stringify(a)}`}static preProcess(a,b,c){let e=dE.generateThrottlingStorageKey(b),f=a.getThrottlingCache(e);if(f){if(f.throttleTime<Date.now())return void a.removeItem(e,c);throw new dC(f.errorCodes?.join(" ")||d.EMPTY_STRING,f.errorMessage,f.subError)}}static postProcess(a,b,c,d){if(dE.checkResponseStatus(c)||dE.checkResponseForRetryAfter(c)){let e={throttleTime:dE.calculateThrottleTime(parseInt(c.headers[h.RETRY_AFTER])),error:c.body.error,errorCodes:c.body.error_codes,errorMessage:c.body.error_description,subError:c.body.suberror};a.setThrottlingCache(dE.generateThrottlingStorageKey(b),e,d)}}static checkResponseStatus(a){return 429===a.status||a.status>=500&&a.status<600}static checkResponseForRetryAfter(a){return!!a.headers&&a.headers.hasOwnProperty(h.RETRY_AFTER)&&(a.status<200||a.status>=300)}static calculateThrottleTime(a){let b=Date.now()/1e3;return Math.floor(1e3*Math.min(b+((a<=0?0:a)||x.DEFAULT_THROTTLE_TIME_SECONDS),b+x.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(a,b,c,d){let e=dD(b,c,d),f=this.generateThrottlingStorageKey(e);a.removeItem(f,c.correlationId)}}class dF extends H{constructor(a,b,c){super(a.errorCode,a.errorMessage,a.subError),Object.setPrototypeOf(this,dF.prototype),this.name="NetworkError",this.error=a,this.httpStatus=b,this.responseHeaders=c}}class dG{constructor(a,b){this.config=function({authOptions:a,systemOptions:b,loggerOptions:c,cacheOptions:d,storageInterface:e,networkInterface:f,cryptoInterface:g,clientCredentials:h,libraryInfo:i,telemetry:j,serverTelemetryManager:k,persistencePlugin:l,serializableCache:m}){let n={...cT,...c};return{authOptions:{clientCapabilities:[],azureCloudOptions:cY,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...a},systemOptions:{...cS,...b},loggerOptions:n,cacheOptions:{...cU,...d},storageInterface:e||new cP(a.clientId,cw,new cx(n),new cR),networkInterface:f||cV,cryptoInterface:g||cw,clientCredentials:h||cX,libraryInfo:{...cW,...i},telemetry:{...cZ,...j},serverTelemetryManager:k||null,persistencePlugin:l||null,serializableCache:m||null}}(a),this.logger=new cx(this.config.loggerOptions,cy,cz),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=b}createTokenRequestHeaders(a){let b={};if(b[h.CONTENT_TYPE]=d.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case c_.HOME_ACCOUNT_ID:try{let c=cC(a.credential);b[h.CCS_HEADER]=`Oid:${c.uid}@${c.utid}`}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case c_.UPN:b[h.CCS_HEADER]=`UPN: ${a.credential}`}return b}async executePostToTokenEndpoint(a,b,c,d,e,f){f&&this.performanceClient?.addQueueMeasurement(f,e);let g=await this.sendPostRequest(d,a,{body:b,headers:c},e);return this.config.serverTelemetryManager&&g.status<500&&429!==g.status&&this.config.serverTelemetryManager.clearTelemetryCache(),g}async sendPostRequest(a,b,c,d){let e;dE.preProcess(this.cacheManager,a,d);try{let a=(e=await bu(this.networkClient.sendPostRequestAsync.bind(this.networkClient),bp.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,d)(b,c)).headers||{};this.performanceClient?.addFields({refreshTokenSize:e.body.refresh_token?.length||0,httpVerToken:a[h.X_MS_HTTP_VERSION]||"",requestId:a[h.X_MS_REQUEST_ID]||""},d)}catch(a){if(a instanceof dF){let b=a.responseHeaders;throw b&&this.performanceClient?.addFields({httpVerToken:b[h.X_MS_HTTP_VERSION]||"",requestId:b[h.X_MS_REQUEST_ID]||"",contentTypeHeader:b[h.CONTENT_TYPE]||void 0,contentLengthHeader:b[h.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},d),a.error}if(a instanceof H)throw a;throw aD(N)}return dE.postProcess(this.cacheManager,a,e,d),e}async updateAuthority(a,b){this.performanceClient?.addQueueMeasurement(bp.UpdateTokenEndpointAuthority,b);let c=`https://${a}/${this.authority.tenant}/`,d=await bM(c,this.networkClient,this.cacheManager,this.authority.options,this.logger,b,this.performanceClient);this.authority=d}createTokenQueryParameters(a){let b=new Map;return a.embeddedClientId&&dA(b,this.config.authOptions.clientId,this.config.authOptions.redirectUri),a.tokenQueryParameters&&dt(b,a.tokenQueryParameters),dd(b,a.correlationId),c0(b,a.correlationId,this.performanceClient),bf(b)}}let dH="no_tokens_found",dI="native_account_unavailable",dJ="refresh_token_expired",dK="ux_not_allowed",dL="interaction_required",dM="consent_required",dN="login_required",dO="bad_token";var dP=Object.freeze({__proto__:null,badToken:dO,consentRequired:dM,interactionRequired:dL,loginRequired:dN,nativeAccountUnavailable:dI,noTokensFound:dH,refreshTokenExpired:dJ,uxNotAllowed:dK});let dQ=[dL,dM,dN,dO,dK],dR=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],dS={[dH]:"No refresh token found in the cache. Please sign-in.",[dI]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[dJ]:"Refresh token has expired.",[dO]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[dK]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},dT={noTokensFoundError:{code:dH,desc:dS[dH]},native_account_unavailable:{code:dI,desc:dS[dI]},bad_token:{code:dO,desc:dS[dO]}};class dU extends H{constructor(a,b,c,e,f,g,h,i){super(a,b,c),Object.setPrototypeOf(this,dU.prototype),this.timestamp=e||d.EMPTY_STRING,this.traceId=f||d.EMPTY_STRING,this.correlationId=g||d.EMPTY_STRING,this.claims=h||d.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=i}}function dV(a,b,c){let d=!!a&&dQ.indexOf(a)>-1,e=!!c&&dR.indexOf(c)>-1,f=!!b&&dQ.some(a=>b.indexOf(a)>-1);return d||f||e}function dW(a){return new dU(a,dS[a])}class dX{static setRequestState(a,b,c){let e=dX.generateLibraryState(a,c);return b?`${e}${d.RESOURCE_DELIM}${b}`:e}static generateLibraryState(a,b){if(!a)throw aD(ai);let c={id:a.createNewGuid()};b&&(c.meta=b);let d=JSON.stringify(c);return a.base64Encode(d)}static parseRequestState(a,b){if(!a)throw aD(ai);if(!b)throw aD(Q);try{let c=b.split(d.RESOURCE_DELIM),e=c[0],f=c.length>1?c.slice(1).join(d.RESOURCE_DELIM):d.EMPTY_STRING,g=a.base64Decode(e),h=JSON.parse(g);return{userRequestState:f||d.EMPTY_STRING,libraryState:h}}catch(a){throw aD(Q)}}}class dY{constructor(a,b){this.cryptoUtils=a,this.performanceClient=b}async generateCnf(a,b){this.performanceClient?.addQueueMeasurement(bp.PopTokenGenerateCnf,a.correlationId);let c=await bu(this.generateKid.bind(this),bp.PopTokenGenerateCnf,b,this.performanceClient,a.correlationId)(a),d=this.cryptoUtils.base64UrlEncode(JSON.stringify(c));return{kid:c.kid,reqCnfString:d}}async generateKid(a){return this.performanceClient?.addQueueMeasurement(bp.PopTokenGenerateKid,a.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(a),xms_ksl:"sw"}}async signPopToken(a,b,c){return this.signPayload(a,b,c)}async signPayload(a,b,c,d){let{resourceRequestMethod:e,resourceRequestUri:f,shrClaims:g,shrNonce:h,shrOptions:i}=c,j=f?new bh(f):void 0,k=j?.getUrlComponents();return this.cryptoUtils.signJwt({at:a,ts:bw(),m:e?.toUpperCase(),u:k?.HostNameAndPort,nonce:h||this.cryptoUtils.createNewGuid(),p:k?.AbsolutePath,q:k?.QueryString?[[],k.QueryString]:void 0,client_claims:g||void 0,...d},b,i,c.correlationId)}}class dZ{constructor(a,b){this.cache=a,this.hasChanged=b}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class d${constructor(a,b,c,d,e,f,g){this.clientId=a,this.cacheStorage=b,this.cryptoObj=c,this.logger=d,this.serializableCache=e,this.persistencePlugin=f,this.performanceClient=g}validateTokenResponse(a,b){if(a.error||a.error_description||a.suberror){let c=`Error(s): ${a.error_codes||d.NOT_AVAILABLE} - Timestamp: ${a.timestamp||d.NOT_AVAILABLE} - Description: ${a.error_description||d.NOT_AVAILABLE} - Correlation ID: ${a.correlation_id||d.NOT_AVAILABLE} - Trace ID: ${a.trace_id||d.NOT_AVAILABLE}`,f=a.error_codes?.length?a.error_codes[0]:void 0,g=new dC(a.error,c,a.suberror,f,a.status);if(b&&a.status&&a.status>=e.SERVER_ERROR_RANGE_START&&a.status<=e.SERVER_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${g}`);if(b&&a.status&&a.status>=e.CLIENT_ERROR_RANGE_START&&a.status<=e.CLIENT_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${g}`);if(dV(a.error,a.error_description,a.suberror))throw new dU(a.error,a.error_description,a.suberror,a.timestamp||d.EMPTY_STRING,a.trace_id||d.EMPTY_STRING,a.correlation_id||d.EMPTY_STRING,a.claims||d.EMPTY_STRING,f);throw g}}async handleServerTokenResponse(a,b,c,e,f,g,h,i,j){let k,l,m;if(this.performanceClient?.addQueueMeasurement(bp.HandleServerTokenResponse,a.correlation_id),a.id_token){if(k=aE(a.id_token||d.EMPTY_STRING,this.cryptoObj.base64Decode),f&&f.nonce&&k.nonce!==f.nonce)throw aD(T);if(e.maxAge||0===e.maxAge){let a=k.auth_time;if(!a)throw aD(U);aH(a,e.maxAge)}}this.homeAccountIdentifier=cH.generateHomeAccountId(a.client_info||d.EMPTY_STRING,b.authorityType,this.logger,this.cryptoObj,k),f&&f.state&&(l=dX.parseRequestState(this.cryptoObj,f.state)),a.key_id=a.key_id||e.sshKid||void 0;let n=this.generateCacheRecord(a,b,c,e,k,g,f);try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),m=new dZ(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(m)),h&&!i&&n.account){let a=this.cacheStorage.generateAccountKey(cH.getAccountInfo(n.account));if(!this.cacheStorage.getAccount(a,e.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await d$.generateAuthenticationResult(this.cryptoObj,b,n,!1,e,k,l,void 0,j)}await this.cacheStorage.saveCacheRecord(n,e.correlationId,aF(k||{}),e.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&m&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(m))}return d$.generateAuthenticationResult(this.cryptoObj,b,n,!1,e,k,l,a,j)}generateCacheRecord(a,b,c,d,e,f,g){let h,i,j=b.getPreferredCache();if(!j)throw aD(ag);let k=cG(e);a.id_token&&e&&(h=bB(this.homeAccountIdentifier,j,a.id_token,this.clientId,k||""),i=d_(this.cacheStorage,b,this.homeAccountIdentifier,this.cryptoObj.base64Decode,d.correlationId,e,a.client_info,j,k,g,void 0,this.logger));let l=null;if(a.access_token){let e=a.scope?cA.fromString(a.scope):new cA(d.scopes||[]),g=("string"==typeof a.expires_in?parseInt(a.expires_in,10):a.expires_in)||0,h=("string"==typeof a.ext_expires_in?parseInt(a.ext_expires_in,10):a.ext_expires_in)||0,i=("string"==typeof a.refresh_in?parseInt(a.refresh_in,10):a.refresh_in)||void 0,m=c+g;l=bC(this.homeAccountIdentifier,j,a.access_token,this.clientId,k||b.tenant||"",e.printScopes(),m,m+h,this.cryptoObj.base64Decode,i&&i>0?c+i:void 0,a.token_type,f,a.key_id,d.claims,d.requestedClaimsHash)}let m=null;if(a.refresh_token){let b;a.refresh_token_expires_in&&(b=c+("string"==typeof a.refresh_token_expires_in?parseInt(a.refresh_token_expires_in,10):a.refresh_token_expires_in)),m=bD(this.homeAccountIdentifier,j,a.refresh_token,this.clientId,a.foci,f,b)}let n=null;return a.foci&&(n={clientId:this.clientId,environment:j,familyId:a.foci}),{account:i,idToken:h,accessToken:l,refreshToken:m,appMetadata:n}}static async generateAuthenticationResult(a,b,c,e,f,g,h,i,j){let k,l,m=d.EMPTY_STRING,n=[],o=null,p=d.EMPTY_STRING;if(c.accessToken){if(c.accessToken.tokenType!==w.POP||f.popKid)m=c.accessToken.secret;else{let b=new dY(a),{secret:d,keyId:e}=c.accessToken;if(!e)throw aD(as);m=await b.signPopToken(d,e,f)}n=cA.fromString(c.accessToken.target).asArray(),o=bx(c.accessToken.expiresOn),k=bx(c.accessToken.extendedExpiresOn),c.accessToken.refreshOn&&(l=bx(c.accessToken.refreshOn))}c.appMetadata&&(p="1"===c.appMetadata.familyId?"1":"");let q=g?.oid||g?.sub||"",r=g?.tid||"";i?.spa_accountid&&c.account&&(c.account.nativeAccountId=i?.spa_accountid);let s=c.account?cF(cH.getAccountInfo(c.account),void 0,g,c.idToken?.secret):null;return{authority:b.canonicalAuthority,uniqueId:q,tenantId:r,scopes:n,account:s,idToken:c?.idToken?.secret||"",idTokenClaims:g||{},accessToken:m,fromCache:e,expiresOn:o,extExpiresOn:k,refreshOn:l,correlationId:f.correlationId,requestId:j||d.EMPTY_STRING,familyId:p,tokenType:c.accessToken?.tokenType||d.EMPTY_STRING,state:h?h.userRequestState:d.EMPTY_STRING,cloudGraphHostName:c.account?.cloudGraphHostName||d.EMPTY_STRING,msGraphHost:c.account?.msGraphHost||d.EMPTY_STRING,code:i?.spa_code,fromNativeBroker:!1}}}function d_(a,b,c,d,e,f,g,h,i,j,k,l){l?.verbose("setCachedAccount called");let m=a.getAccountKeys().find(a=>a.startsWith(c)),n=null;m&&(n=a.getAccount(m,e));let o=n||cH.createAccount({homeAccountId:c,idTokenClaims:f,clientInfo:g,environment:h,cloudGraphHostName:j?.cloud_graph_host_name,msGraphHost:j?.msgraph_host,nativeAccountId:k},b,d),p=o.tenantProfiles||[],q=i||o.realm;if(q&&!p.find(a=>a.tenantId===q)){let a=cE(c,o.localAccountId,q,f);p.push(a)}return o.tenantProfiles=p,o}async function d0(a,b,c){return"string"==typeof a?a:a({clientId:b,tokenEndpoint:c})}var d1=Object.freeze({__proto__:null,getClientAssertion:d0});function d2(a,b){let c,d;if(!a.state||!b)throw a.state?aD(S,"Cached State"):aD(S,"Server State");try{c=decodeURIComponent(a.state)}catch(b){throw aD(Q,a.state)}try{d=decodeURIComponent(b)}catch(b){throw aD(Q,a.state)}if(c!==d)throw aD(R);if(a.error||a.error_description||a.suberror){var e;let b,c,d=(e=a,b="code=",(c=e.error_uri?.lastIndexOf(b))&&c>=0?e.error_uri?.substring(c+b.length):void 0);if(dV(a.error,a.error_description,a.suberror))throw new dU(a.error||"",a.error_description,a.suberror,a.timestamp||"",a.trace_id||"",a.correlation_id||"",a.claims||"",d);throw new dC(a.error||"",a.error_description,a.suberror,d)}}var d3=Object.freeze({__proto__:null,getAuthorizationCodePayload:function(a,b){if(d2(a,b),!a.code)throw aD(ap);return a},getAuthorizeUrl:function(a,b,c,d){let e=bf(b,c,d);return bh.appendQueryString(a.authorizationEndpoint,e)},getStandardAuthorizeRequestParameters:function(a,b,c,d){let e=b.correlationId,f=new Map;if(c3(f,b.embeddedClientId||b.extraQueryParameters?.[bO]||a.clientId),c2(f,[...b.scopes||[],...b.extraScopesToConsent||[]],!0,a.authority.options.OIDCOptions?.defaultScopes),c4(f,b.redirectUri),dd(f,e),c1(f,b.responseMode),dr(f),b.prompt&&(dg(f,b.prompt),d?.addFields({prompt:b.prompt},e)),b.domainHint&&(c7(f,b.domainHint),d?.addFields({domainHintFromRequest:!0},e)),b.prompt!==k.SELECT_ACCOUNT)if(b.sid&&b.prompt===k.NONE)c.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),db(f,b.sid),d?.addFields({sidFromRequest:!0},e);else if(b.account){var g,h;let a=(g=b.account,g.idTokenClaims?.sid||null),i=(h=b.account).loginHint||h.idTokenClaims?.login_hint||null;if(i&&b.domainHint&&(c.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),i=null),i){c.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),c8(f,i),d?.addFields({loginHintFromClaim:!0},e);try{let a=cC(b.account.homeAccountId);da(f,a)}catch(a){c.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&b.prompt===k.NONE){c.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),db(f,a),d?.addFields({sidFromClaim:!0},e);try{let a=cC(b.account.homeAccountId);da(f,a)}catch(a){c.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(b.loginHint)c.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),c8(f,b.loginHint),c9(f,b.loginHint),d?.addFields({loginHintFromRequest:!0},e);else if(b.account.username){c.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),c8(f,b.account.username),d?.addFields({loginHintFromUpn:!0},e);try{let a=cC(b.account.homeAccountId);da(f,a)}catch(a){c.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else b.loginHint&&(c.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),c8(f,b.loginHint),c9(f,b.loginHint),d?.addFields({loginHintFromRequest:!0},e));else c.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return b.nonce&&di(f,b.nonce),b.state&&dh(f,b.state),(b.claims||a.clientCapabilities&&a.clientCapabilities.length>0)&&dc(f,b.claims,a.clientCapabilities),b.embeddedClientId&&dA(f,a.clientId,a.redirectUri),!a.instanceAware||b.extraQueryParameters&&Object.keys(b.extraQueryParameters).includes(cs)||ds(f),f},validateAuthorizationResponse:d2});class d4 extends H{constructor(a,b,c,d){const e=function(a){if(0===a)return"UNTAG";let b="abcdefghijklmnopqrstuvwxyz0123456789****************************";return[b[a>>24&63],b[a>>18&63],b[a>>12&63],b[a>>6&63],b[63&a]].join("")}(d);super(a,b?`${b} (Error Code: ${c}, Tag: ${e})`:`(Error Code: ${c}, Tag: ${e})`),this.name="PlatformBrokerError",this.statusCode=c,this.tag=e,Object.setPrototypeOf(this,d4.prototype)}}class d5{constructor(a,b){this.cacheOutcome=A.NOT_APPLICABLE,this.cacheManager=b,this.apiId=a.apiId,this.correlationId=a.correlationId,this.wrapperSKU=a.wrapperSKU||d.EMPTY_STRING,this.wrapperVer=a.wrapperVer||d.EMPTY_STRING,this.telemetryCacheKey=v+"-"+a.clientId}generateCurrentRequestHeaderValue(){let a=`${this.apiId},${this.cacheOutcome}`,b=[this.wrapperSKU,this.wrapperVer],c=this.getNativeBrokerErrorCode();c?.length&&b.push(`broker_error=${c}`);let d=b.join(",");return[5,[a,this.getRegionDiscoveryFields()].join(","),d].join("|")}generateLastRequestHeaderValue(){let a=this.getLastRequests(),b=d5.maxErrorsToSend(a),c=a.failedRequests.slice(0,2*b).join(","),d=a.errors.slice(0,b).join(","),e=a.errors.length,f=b<e?"1":"0",g=[e,f].join(",");return[5,a.cacheHits,c,d,g].join("|")}cacheFailedRequest(a){let b=this.getLastRequests();b.errors.length>=50&&(b.failedRequests.shift(),b.failedRequests.shift(),b.errors.shift()),b.failedRequests.push(this.apiId,this.correlationId),a instanceof Error&&a&&a.toString()?a instanceof H?a.subError?b.errors.push(a.subError):a.errorCode?b.errors.push(a.errorCode):b.errors.push(a.toString()):b.errors.push(a.toString()):b.errors.push("unknown_error"),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,b,this.correlationId)}incrementCacheHits(){let a=this.getLastRequests();return a.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId),a.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){let a=this.getLastRequests(),b=d5.maxErrorsToSend(a);if(b===a.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let c={failedRequests:a.failedRequests.slice(2*b),errors:a.errors.slice(b),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c,this.correlationId)}}static maxErrorsToSend(a){let b,c=0,e=0,f=a.errors.length;for(b=0;b<f;b++){let f=a.failedRequests[2*b]||d.EMPTY_STRING,g=a.failedRequests[2*b+1]||d.EMPTY_STRING,h=a.errors[b]||d.EMPTY_STRING;if((e+=f.toString().length+g.toString().length+h.length+3)<330)c+=1;else break}return c}getRegionDiscoveryFields(){let a=[];return a.push(this.regionUsed||d.EMPTY_STRING),a.push(this.regionSource||d.EMPTY_STRING),a.push(this.regionOutcome||d.EMPTY_STRING),a.join(",")}updateRegionDiscoveryMetadata(a){this.regionUsed=a.region_used,this.regionSource=a.region_source,this.regionOutcome=a.region_outcome}setCacheOutcome(a){this.cacheOutcome=a}setNativeBrokerErrorCode(a){let b=this.getLastRequests();b.nativeBrokerErrorCode=a,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,b,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let a=this.getLastRequests();delete a.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}static makeExtraSkuString(a){return function(a){let{skus:b,libraryName:c,libraryVersion:d,extensionName:e,extensionVersion:f}=a,g=new Map([[0,[c,d]],[2,[e,f]]]),h=[];if(b?.length){if((h=b.split(",")).length<4)return b}else h=Array.from({length:4},()=>"|");return g.forEach((a,b)=>{2===a.length&&a[0]?.length&&a[1]?.length&&function(a){let{skuArr:b,index:c,skuName:d,skuVersion:e}=a;c>=b.length||(b[c]=[d,e].join("|"))}({skuArr:h,index:b,skuName:a[0],skuVersion:a[1]})}),h.join(",")}(a)}}c.AADAuthorityConstants=i,c.AADServerParamKeys=cv,c.AccountEntity=cH,c.AuthError=H,c.AuthErrorCodes=E,c.AuthErrorMessage=G,c.AuthToken=aI,c.AuthenticationHeaderParser=class{constructor(a){this.headers=a}getShrNonce(){let a=this.headers[h.AuthenticationInfo];if(a){let b=this.parseChallenges(a);if(b.nextnonce)return b.nextnonce;throw ba(a_)}let b=this.headers[h.WWWAuthenticate];if(b){let a=this.parseChallenges(b);if(a.nonce)return a.nonce;throw ba(a_)}throw ba(a$)}parseChallenges(a){let b=a.indexOf(" "),c=a.substr(b+1).split(","),e={};return c.forEach(a=>{let[b,c]=a.split("=");e[b]=unescape(c.replace(/['"]+/g,d.EMPTY_STRING))}),e}},c.AuthenticationScheme=w,c.Authority=bK,c.AuthorityFactory=bN,c.AuthorityType=aJ,c.AuthorizationCodeClient=class extends dG{constructor(a,b){super(a,b),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(a,b){if(this.performanceClient?.addQueueMeasurement(bp.AuthClientAcquireToken,a.correlationId),!a.code)throw aD(Z);let c=bw(),d=await bu(this.executeTokenRequest.bind(this),bp.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,a.correlationId)(this.authority,a),e=d.headers?.[h.X_MS_REQUEST_ID],f=new d$(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return f.validateTokenResponse(d.body),bu(f.handleServerTokenResponse.bind(f),bp.HandleServerTokenResponse,this.logger,this.performanceClient,a.correlationId)(d.body,this.authority,c,a,b,void 0,void 0,void 0,e)}getLogoutUri(a){if(!a)throw ba(aS);let b=this.createLogoutUrlQueryString(a);return bh.appendQueryString(this.authority.endSessionEndpoint,b)}async executeTokenRequest(a,b){let c;this.performanceClient?.addQueueMeasurement(bp.AuthClientExecuteTokenRequest,b.correlationId);let d=this.createTokenQueryParameters(b),e=bh.appendQueryString(a.tokenEndpoint,d),f=await bu(this.createTokenRequestBody.bind(this),bp.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,b.correlationId)(b);if(b.clientInfo)try{let a=cB(b.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${a.uid}.${a.utid}`,type:c_.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}let g=this.createTokenRequestHeaders(c||b.ccsCredential),h=dD(this.config.authOptions.clientId,b);return bu(this.executePostToTokenEndpoint.bind(this),bp.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,b.correlationId)(e,f,g,h,b.correlationId,bp.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(a){let b;this.performanceClient?.addQueueMeasurement(bp.AuthClientCreateTokenRequestBody,a.correlationId);let c=new Map;if(c3(c,a.embeddedClientId||a.tokenBodyParameters?.[bO]||this.config.authOptions.clientId),this.includeRedirectUri)c4(c,a.redirectUri);else if(!a.redirectUri)throw ba(aK);if(c2(c,a.scopes,!0,this.oidcDefaultScopes),dj(c,a.code),de(c,this.config.libraryInfo),df(c,this.config.telemetry.application),dy(c),this.serverTelemetryManager&&!c$(this.config)&&dx(c,this.serverTelemetryManager),a.codeVerifier&&dl(c,a.codeVerifier),this.config.clientCredentials.clientSecret&&dm(c,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let b=this.config.clientCredentials.clientAssertion;dn(c,await d0(b.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),dp(c,b.assertionType)}if(dq(c,m.AUTHORIZATION_CODE_GRANT),dr(c),a.authenticationScheme===w.POP){let b=new dY(this.cryptoUtils,this.performanceClient);dv(c,a.popKid?this.cryptoUtils.encodeKid(a.popKid):(await bu(b.generateCnf.bind(b),bp.PopTokenGenerateCnf,this.logger,this.performanceClient,a.correlationId)(a,this.logger)).reqCnfString)}else if(a.authenticationScheme===w.SSH)if(a.sshJwk)dw(c,a.sshJwk);else throw ba(aY);if((!bb.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dc(c,a.claims,this.config.authOptions.clientCapabilities),a.clientInfo)try{let c=cB(a.clientInfo,this.cryptoUtils.base64Decode);b={credential:`${c.uid}.${c.utid}`,type:c_.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else b=a.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&b)switch(b.type){case c_.HOME_ACCOUNT_ID:try{let a=cC(b.credential);da(c,a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case c_.UPN:c9(c,b.credential)}return a.embeddedClientId&&dA(c,this.config.authOptions.clientId,this.config.authOptions.redirectUri),a.tokenBodyParameters&&dt(c,a.tokenBodyParameters),!a.enableSpaAuthorizationCode||a.tokenBodyParameters&&a.tokenBodyParameters[cl]||dt(c,{[cl]:"1"}),c0(c,a.correlationId,this.performanceClient),bf(c)}createLogoutUrlQueryString(a){let b=new Map;return a.postLogoutRedirectUri&&c5(b,a.postLogoutRedirectUri),a.correlationId&&dd(b,a.correlationId),a.idTokenHint&&c6(b,a.idTokenHint),a.state&&dh(b,a.state),a.logoutHint&&dz(b,a.logoutHint),a.extraQueryParameters&&dt(b,a.extraQueryParameters),this.config.authOptions.instanceAware&&ds(b),bf(b,this.config.authOptions.encodeExtraQueryParams,a.extraQueryParameters)}},c.Authorize=d3,c.AzureCloudInstance=bo,c.BaseClient=dG,c.CacheAccountType=n,c.CacheError=cM,c.CacheErrorCodes=cK,c.CacheHelpers=bJ,c.CacheManager=cO,c.CacheOutcome=A,c.CacheType={ADFS:1001,MSA:1002,MSSTS:1003,GENERIC:1004,ACCESS_TOKEN:2001,REFRESH_TOKEN:2002,ID_TOKEN:2003,APP_METADATA:3001,UNDEFINED:9999},c.CcsCredentialType=c_,c.ClaimsRequestKeys=j,c.ClientAssertionUtils=d1,c.ClientAuthError=aC,c.ClientAuthErrorCodes=az,c.ClientAuthErrorMessage=aB,c.ClientConfigurationError=a9,c.ClientConfigurationErrorCodes=a6,c.ClientConfigurationErrorMessage=a8,c.CodeChallengeMethodValues={PLAIN:"plain",S256:"S256"},c.Constants=d,c.CredentialType=o,c.DEFAULT_CRYPTO_IMPLEMENTATION=cw,c.DEFAULT_SYSTEM_OPTIONS=cS,c.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=300,c.DefaultStorageClass=cP,c.EncodingTypes={BASE64:"base64",HEX:"hex",UTF8:"utf-8"},c.Errors=y,c.GrantType=m,c.HeaderNames=h,c.HttpMethod={GET:"GET",POST:"POST"},c.HttpStatus=e,c.IntFields=bs,c.InteractionRequiredAuthError=dU,c.InteractionRequiredAuthErrorCodes=dP,c.InteractionRequiredAuthErrorMessage=dT,c.JsonWebTokenTypes={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},c.Logger=cx,c.NetworkError=dF,c.OAuthResponseType={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},c.OIDC_DEFAULT_SCOPES=f,c.ONE_DAY_IN_MS=864e5,c.PasswordGrantConstants=z,c.PerformanceEventAbbreviations=bq,c.PerformanceEventStatus=br,c.PerformanceEvents=bp,c.PersistentCacheKeys={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},c.PlatformBrokerError=d4,c.PopTokenGenerator=dY,c.PromptValue=k,c.ProtocolMode=bn,c.ProtocolUtils=dX,c.RefreshTokenClient=class extends dG{constructor(a,b){super(a,b)}async acquireToken(a){this.performanceClient?.addQueueMeasurement(bp.RefreshTokenClientAcquireToken,a.correlationId);let b=bw(),c=await bu(this.executeTokenRequest.bind(this),bp.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,a.correlationId)(a,this.authority),d=c.headers?.[h.X_MS_REQUEST_ID],e=new d$(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return e.validateTokenResponse(c.body),bu(e.handleServerTokenResponse.bind(e),bp.HandleServerTokenResponse,this.logger,this.performanceClient,a.correlationId)(c.body,this.authority,b,a,void 0,void 0,!0,a.forceCache,d)}async acquireTokenByRefreshToken(a){if(!a)throw ba(aR);if(this.performanceClient?.addQueueMeasurement(bp.RefreshTokenClientAcquireTokenByRefreshToken,a.correlationId),!a.account)throw aD(ae);if(this.cacheManager.isAppMetadataFOCI(a.account.environment))try{return await bu(this.acquireTokenWithCachedRefreshToken.bind(this),bp.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,a.correlationId)(a,!0)}catch(c){let a=c instanceof dU&&c.errorCode===dH,b=c instanceof dC&&c.errorCode===y.INVALID_GRANT_ERROR&&c.subError===y.CLIENT_MISMATCH_ERROR;if(a||b);else throw c}return bu(this.acquireTokenWithCachedRefreshToken.bind(this),bp.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,a.correlationId)(a,!1)}async acquireTokenWithCachedRefreshToken(a,b){this.performanceClient?.addQueueMeasurement(bp.RefreshTokenClientAcquireTokenWithCachedRefreshToken,a.correlationId);let c=bt(this.cacheManager.getRefreshToken.bind(this.cacheManager),bp.CacheManagerGetRefreshToken,this.logger,this.performanceClient,a.correlationId)(a.account,b,a.correlationId,void 0,this.performanceClient);if(!c)throw dW(dH);if(c.expiresOn&&by(c.expiresOn,a.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(c.expiresOn)},a.correlationId),dW(dJ);let d={...a,refreshToken:c.secret,authenticationScheme:a.authenticationScheme||w.BEARER,ccsCredential:{credential:a.account.homeAccountId,type:c_.HOME_ACCOUNT_ID}};try{return await bu(this.acquireToken.bind(this),bp.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,a.correlationId)(d)}catch(b){if(b instanceof dU&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(c.expiresOn)},a.correlationId),b.subError===dO)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let b=this.cacheManager.generateCredentialKey(c);this.cacheManager.removeRefreshToken(b,a.correlationId)}throw b}}async executeTokenRequest(a,b){this.performanceClient?.addQueueMeasurement(bp.RefreshTokenClientExecuteTokenRequest,a.correlationId);let c=this.createTokenQueryParameters(a),d=bh.appendQueryString(b.tokenEndpoint,c),e=await bu(this.createTokenRequestBody.bind(this),bp.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,a.correlationId)(a),f=this.createTokenRequestHeaders(a.ccsCredential),g=dD(this.config.authOptions.clientId,a);return bu(this.executePostToTokenEndpoint.bind(this),bp.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,a.correlationId)(d,e,f,g,a.correlationId,bp.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(a){this.performanceClient?.addQueueMeasurement(bp.RefreshTokenClientCreateTokenRequestBody,a.correlationId);let b=new Map;if(c3(b,a.embeddedClientId||a.tokenBodyParameters?.[bO]||this.config.authOptions.clientId),a.redirectUri&&c4(b,a.redirectUri),c2(b,a.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),dq(b,m.REFRESH_TOKEN_GRANT),dr(b),de(b,this.config.libraryInfo),df(b,this.config.telemetry.application),dy(b),this.serverTelemetryManager&&!c$(this.config)&&dx(b,this.serverTelemetryManager),dk(b,a.refreshToken),this.config.clientCredentials.clientSecret&&dm(b,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let c=this.config.clientCredentials.clientAssertion;dn(b,await d0(c.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),dp(b,c.assertionType)}if(a.authenticationScheme===w.POP){let c=new dY(this.cryptoUtils,this.performanceClient);dv(b,a.popKid?this.cryptoUtils.encodeKid(a.popKid):(await bu(c.generateCnf.bind(c),bp.PopTokenGenerateCnf,this.logger,this.performanceClient,a.correlationId)(a,this.logger)).reqCnfString)}else if(a.authenticationScheme===w.SSH)if(a.sshJwk)dw(b,a.sshJwk);else throw ba(aY);if((!bb.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&dc(b,a.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&a.ccsCredential)switch(a.ccsCredential.type){case c_.HOME_ACCOUNT_ID:try{let c=cC(a.ccsCredential.credential);da(b,c)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case c_.UPN:c9(b,a.ccsCredential.credential)}return a.embeddedClientId&&dA(b,this.config.authOptions.clientId,this.config.authOptions.redirectUri),a.tokenBodyParameters&&dt(b,a.tokenBodyParameters),c0(b,a.correlationId,this.performanceClient),bf(b)}},c.RequestParameterBuilder=dB,c.ResponseHandler=d$,c.ResponseMode=l,c.ScopeSet=cA,c.ServerError=dC,c.ServerResponseType={QUERY:"query",FRAGMENT:"fragment"},c.ServerTelemetryManager=d5,c.SilentFlowClient=class extends dG{constructor(a,b){super(a,b)}async acquireCachedToken(a){this.performanceClient?.addQueueMeasurement(bp.SilentFlowClientAcquireCachedToken,a.correlationId);let b=A.NOT_APPLICABLE;if(a.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!bb.isEmptyObj(a.claims))throw this.setCacheOutcome(A.FORCE_REFRESH_OR_CLAIMS,a.correlationId),aD(am);if(!a.account)throw aD(ae);let c=a.account.tenantId||function(a){let b=new bh(a).getUrlComponents(),c=b.PathSegments.slice(-1)[0]?.toLowerCase();switch(c){case i.COMMON:case i.ORGANIZATIONS:case i.CONSUMERS:return;default:return c}}(a.authority),d=this.cacheManager.getTokenKeys(),e=this.cacheManager.getAccessToken(a.account,a,d,c);if(e)if(bz(e.cachedAt)||by(e.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(A.CACHED_ACCESS_TOKEN_EXPIRED,a.correlationId),aD(am);else e.refreshOn&&by(e.refreshOn,0)&&(b=A.PROACTIVELY_REFRESHED);else throw this.setCacheOutcome(A.NO_CACHED_ACCESS_TOKEN,a.correlationId),aD(am);let f=a.authority||this.authority.getPreferredCache(),g={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(a.account),a.correlationId),accessToken:e,idToken:this.cacheManager.getIdToken(a.account,a.correlationId,d,c,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(f)};return this.setCacheOutcome(b,a.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await bu(this.generateResultFromCacheRecord.bind(this),bp.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,a.correlationId)(g,a),b]}setCacheOutcome(a,b){this.serverTelemetryManager?.setCacheOutcome(a),this.performanceClient?.addFields({cacheOutcome:a},b),a!==A.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${a}`)}async generateResultFromCacheRecord(a,b){let c;if(this.performanceClient?.addQueueMeasurement(bp.SilentFlowClientGenerateResultFromCacheRecord,b.correlationId),a.idToken&&(c=aE(a.idToken.secret,this.config.cryptoInterface.base64Decode)),b.maxAge||0===b.maxAge){let a=c?.auth_time;if(!a)throw aD(U);aH(a,b.maxAge)}return d$.generateAuthenticationResult(this.cryptoUtils,this.authority,a,!0,b,c)}},c.StringUtils=bb,c.StubPerformanceClient=cR,c.StubPerformanceMeasurement=cQ,c.StubbedNetworkModule={sendGetRequestAsync:()=>Promise.reject(aD(aw)),sendPostRequestAsync:()=>Promise.reject(aD(aw))},c.THE_FAMILY_ID="1",c.ThrottlingConstants=x,c.ThrottlingUtils=dE,c.TimeUtils=bA,c.TokenCacheContext=dZ,c.UrlString=bh,c.UrlUtils=bg,c.buildAccountToCache=d_,c.buildClientInfo=cB,c.buildClientInfoFromHomeAccountId=cC,c.buildStaticAuthorityOptions=function(a){let b,c=a.cloudDiscoveryMetadata;if(c)try{b=JSON.parse(c)}catch(a){throw ba(aV)}return{canonicalAuthority:a.authority?bL(a.authority):void 0,knownAuthorities:a.knownAuthorities,cloudDiscoveryMetadata:b}},c.buildTenantProfile=cE,c.createAuthError=function(a,b){return new H(a,b?`${F[a]} ${b}`:F[a])},c.createCacheError=cN,c.createClientAuthError=aD,c.createClientConfigurationError=ba,c.createInteractionRequiredAuthError=dW,c.createNetworkError=function(a,b,c,d){return a.errorMessage=`${a.errorMessage}, additionalErrorInfo: error.name:${d?.name}, error.message:${d?.message}`,new dF(a,b,c)},c.formatAuthorityUri=bL,c.getClientAssertion=d0,c.getRequestThumbprint=dD,c.getTenantIdFromIdTokenClaims=cG,c.invoke=bt,c.invokeAsync=bu,c.tenantIdMatchesHomeTenant=cD,c.updateAccountTenantProfileData=cF,c.version=cz},11940,(a,b,c)=>{"use strict";var d=a.r(61971);let e="missing_kid_error",f="missing_alg_error",g={[e]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[f]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class h extends d.AuthError{constructor(a,b){super(a,b),this.name="JoseHeaderError",Object.setPrototypeOf(this,h.prototype)}}function i(a){return new h(a,g[a])}class j{constructor(a){this.typ=a.typ,this.alg=a.alg,this.kid=a.kid}static getShrHeaderString(a){if(!a.kid)throw i(e);if(!a.alg)throw i(f);return JSON.stringify(new j({typ:a.typ||d.JsonWebTokenTypes.Pop,kid:a.kid,alg:a.alg}))}}function k(a){let b=a.lastIndexOf(" ")+1;if(b<1)return a;let c=a.substring(b),d=c.lastIndexOf("/");return(d=d<0?c.lastIndexOf("\\"):d)>=0?(a.substring(0,b)+"("+c.substring(d+1)+(")"===c.charAt(c.length-1)?"":")")).trimStart():a.trimStart()}c.AADAuthorityConstants=d.AADAuthorityConstants,c.AADServerParamKeys=d.AADServerParamKeys,c.AccountEntity=d.AccountEntity,c.AuthError=d.AuthError,c.AuthErrorCodes=d.AuthErrorCodes,c.AuthErrorMessage=d.AuthErrorMessage,c.AuthToken=d.AuthToken,c.AuthenticationHeaderParser=d.AuthenticationHeaderParser,c.AuthenticationScheme=d.AuthenticationScheme,c.Authority=d.Authority,c.AuthorityFactory=d.AuthorityFactory,c.AuthorityType=d.AuthorityType,c.AuthorizationCodeClient=d.AuthorizationCodeClient,c.AuthorizeProtocol=d.Authorize,c.AzureCloudInstance=d.AzureCloudInstance,c.BaseClient=d.BaseClient,c.CacheAccountType=d.CacheAccountType,c.CacheError=d.CacheError,c.CacheErrorCodes=d.CacheErrorCodes,c.CacheHelpers=d.CacheHelpers,c.CacheManager=d.CacheManager,c.CacheOutcome=d.CacheOutcome,c.CacheType=d.CacheType,c.CcsCredentialType=d.CcsCredentialType,c.ClaimsRequestKeys=d.ClaimsRequestKeys,c.ClientAuthError=d.ClientAuthError,c.ClientAuthErrorCodes=d.ClientAuthErrorCodes,c.ClientAuthErrorMessage=d.ClientAuthErrorMessage,c.ClientConfigurationError=d.ClientConfigurationError,c.ClientConfigurationErrorCodes=d.ClientConfigurationErrorCodes,c.ClientConfigurationErrorMessage=d.ClientConfigurationErrorMessage,c.CodeChallengeMethodValues=d.CodeChallengeMethodValues,c.Constants=d.Constants,c.CredentialType=d.CredentialType,c.DEFAULT_CRYPTO_IMPLEMENTATION=d.DEFAULT_CRYPTO_IMPLEMENTATION,c.DEFAULT_SYSTEM_OPTIONS=d.DEFAULT_SYSTEM_OPTIONS,c.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=d.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,c.DefaultStorageClass=d.DefaultStorageClass,c.EncodingTypes=d.EncodingTypes,c.Errors=d.Errors,c.GrantType=d.GrantType,c.HeaderNames=d.HeaderNames,c.HttpMethod=d.HttpMethod,c.HttpStatus=d.HttpStatus,c.IntFields=d.IntFields,c.InteractionRequiredAuthError=d.InteractionRequiredAuthError,c.InteractionRequiredAuthErrorCodes=d.InteractionRequiredAuthErrorCodes,c.InteractionRequiredAuthErrorMessage=d.InteractionRequiredAuthErrorMessage,c.JsonWebTokenTypes=d.JsonWebTokenTypes,Object.defineProperty(c,"LogLevel",{enumerable:!0,get:function(){return d.LogLevel}}),c.Logger=d.Logger,c.NetworkError=d.NetworkError,c.OAuthResponseType=d.OAuthResponseType,c.OIDC_DEFAULT_SCOPES=d.OIDC_DEFAULT_SCOPES,c.ONE_DAY_IN_MS=d.ONE_DAY_IN_MS,c.PasswordGrantConstants=d.PasswordGrantConstants,c.PerformanceEventStatus=d.PerformanceEventStatus,c.PerformanceEvents=d.PerformanceEvents,c.PersistentCacheKeys=d.PersistentCacheKeys,c.PlatformBrokerError=d.PlatformBrokerError,c.PopTokenGenerator=d.PopTokenGenerator,c.PromptValue=d.PromptValue,c.ProtocolMode=d.ProtocolMode,c.ProtocolUtils=d.ProtocolUtils,c.RefreshTokenClient=d.RefreshTokenClient,c.RequestParameterBuilder=d.RequestParameterBuilder,c.ResponseHandler=d.ResponseHandler,c.ResponseMode=d.ResponseMode,c.ScopeSet=d.ScopeSet,c.ServerError=d.ServerError,c.ServerResponseType=d.ServerResponseType,c.ServerTelemetryManager=d.ServerTelemetryManager,c.SilentFlowClient=d.SilentFlowClient,c.StringUtils=d.StringUtils,c.StubPerformanceClient=d.StubPerformanceClient,c.StubbedNetworkModule=d.StubbedNetworkModule,c.THE_FAMILY_ID=d.THE_FAMILY_ID,c.ThrottlingConstants=d.ThrottlingConstants,c.ThrottlingUtils=d.ThrottlingUtils,c.TimeUtils=d.TimeUtils,c.UrlString=d.UrlString,c.UrlUtils=d.UrlUtils,c.buildAccountToCache=d.buildAccountToCache,c.buildClientInfo=d.buildClientInfo,c.buildClientInfoFromHomeAccountId=d.buildClientInfoFromHomeAccountId,c.buildStaticAuthorityOptions=d.buildStaticAuthorityOptions,c.buildTenantProfile=d.buildTenantProfile,c.createAuthError=d.createAuthError,c.createCacheError=d.createCacheError,c.createClientAuthError=d.createClientAuthError,c.createClientConfigurationError=d.createClientConfigurationError,c.createInteractionRequiredAuthError=d.createInteractionRequiredAuthError,c.createNetworkError=d.createNetworkError,c.formatAuthorityUri=d.formatAuthorityUri,c.getRequestThumbprint=d.getRequestThumbprint,c.getTenantIdFromIdTokenClaims=d.getTenantIdFromIdTokenClaims,c.invoke=d.invoke,c.invokeAsync=d.invokeAsync,c.tenantIdMatchesHomeTenant=d.tenantIdMatchesHomeTenant,c.updateAccountTenantProfileData=d.updateAccountTenantProfileData,c.version=d.version,c.JoseHeader=j,c.PerformanceClient=class{constructor(a,b,c,e,f,g,h,i){for(const i of(this.authority=b,this.libraryName=e,this.libraryVersion=f,this.applicationTelemetry=g,this.clientId=a,this.logger=c,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=h||new Set,d.IntFields))this.intFields.add(i);for(const[a,b]of(this.abbreviations=i||new Map,d.PerformanceEventAbbreviations))this.abbreviations.set(a,b)}startPerformanceMeasurement(a,b){return{}}getPreQueueTime(a,b){let c=this.preQueueTimeByCorrelationId.get(b);return c?c.name!==a?void this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${a}, unable to add queue measurement`):c.time:void this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${b}, unable to add queue measurement`)}calculateQueuedTime(a,b){return a<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${a}`),0):b<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${b}`),0):b<a?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):b-a}addQueueMeasurement(a,b,c,d){if(!b)return void this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${a}, cannot add queue measurement`);if(0===c)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${a} is ${c}`);else if(!c)return void this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${a}`);let e={eventName:a,queueTime:d?0:c,manuallyCompleted:d},f=this.queueMeasurements.get(b);f?(f.push(e),this.queueMeasurements.set(b,f)):(this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${b} to queue measurements`),this.queueMeasurements.set(b,[e])),this.preQueueTimeByCorrelationId.delete(b)}startMeasurement(a,b){var c,e;let f=b||this.generateId();b||this.logger.info(`PerformanceClient: No correlation id provided for ${a}, generating`,f),this.logger.trace(`PerformanceClient: Performance measurement started for ${a}`,f);let g={eventId:this.generateId(),status:d.PerformanceEventStatus.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:a,startTimeMs:Date.now(),correlationId:f,appName:this.applicationTelemetry?.appName,appVersion:this.applicationTelemetry?.appVersion};return this.cacheEventByCorrelationId(g),c=this.abbreviations,(e=this.eventStack.get(f))&&e.push({name:c.get(g.name)||g.name}),{end:(a,b,c)=>this.endMeasurement({...g,...a},b,c),discard:()=>this.discardMeasurements(g.correlationId),add:a=>this.addFields(a,g.correlationId),increment:a=>this.incrementFields(a,g.correlationId),event:g,measurement:new d.StubPerformanceMeasurement}}endMeasurement(a,b,c){let e=this.eventsByCorrelationId.get(a.correlationId);if(!e)return this.logger.trace(`PerformanceClient: Measurement not found for ${a.eventId}`,a.correlationId),null;let f=a.eventId===e.eventId,g={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};a.durationMs=Math.round(a.durationMs||this.getDurationMs(a.startTimeMs));let h=JSON.stringify(function(a,b,c,e){let f;if(!c?.length)return;let g=a=>a.length?a[a.length-1]:void 0,h=b.get(a.name)||a.name,i=g(c);if(i?.name!==h)return;let j=c?.pop();if(!j)return;let k=e instanceof d.AuthError?e.errorCode:e instanceof Error?e.name:void 0,l=e instanceof d.AuthError?e.subError:void 0;k&&j.childErr!==k&&(j.err=k,l&&(j.subErr=l)),delete j.name,delete j.childErr;let m={...j,dur:a.durationMs};a.success||(m.fail=1);let n=g(c);if(!n)return{[h]:m};if(k&&(n.childErr=k),n[h]){let a=Object.keys(n).filter(a=>a.startsWith(h)).length;f=`${h}_${a+1}`}else f=h;return n[f]=m,n}(a,this.abbreviations,this.eventStack.get(e.correlationId),b));if(f?(g=this.getQueueInfo(a.correlationId),this.discardMeasurements(e.correlationId)):e.incompleteSubMeasurements?.delete(a.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${a.name}: ${a.durationMs} ms`,a.correlationId),b&&function(a,b,c,e=5){if(!(a instanceof Error))return b.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",c.correlationId);if(a instanceof d.AuthError){c.errorCode=a.errorCode,c.subErrorCode=a.subError,(a instanceof d.ServerError||a instanceof d.InteractionRequiredAuthError)&&(c.serverErrorNo=a.errorNo);return}if(a instanceof d.CacheError){c.errorCode=a.errorCode;return}if(c.errorStack?.length)return b.trace("PerformanceClient.addErrorStack: Stack already exist",c.correlationId);if(!a.stack?.length)return b.trace("PerformanceClient.addErrorStack: Input stack is empty",c.correlationId);a.stack&&(c.errorStack=function(a,b){if(b<0)return[];let c=a.split("\n")||[],d=[],e=c[0];e.startsWith("TypeError: Cannot read property")||e.startsWith("TypeError: Cannot read properties of")||e.startsWith("TypeError: Cannot set property")||e.startsWith("TypeError: Cannot set properties of")||e.endsWith("is not a function")?d.push(k(e)):(e.startsWith("SyntaxError")||e.startsWith("TypeError"))&&d.push(k(e.replace(/['].*[']|["].*["]/g,"<redacted>")));for(let a=1;a<c.length&&!(d.length>=b);a++){let b=c[a];d.push(k(b))}return d}(a.stack,e)),c.errorName=a.name}(b,this.logger,e),!f)return e[a.name+"DurationMs"]=Math.floor(a.durationMs),{...e};f&&!b&&(e.errorCode||e.subErrorCode)&&(this.logger.trace(`PerformanceClient: Remove error and sub-error codes for root event ${a.name} as intermediate error was successfully handled`,a.correlationId),e.errorCode=void 0,e.subErrorCode=void 0);let i={...e,...a},j=0;if(i.incompleteSubMeasurements?.forEach(b=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${b.name} found for ${a.name}`,i.correlationId),j++}),i.incompleteSubMeasurements=void 0,i={...i,queuedTimeMs:g.totalQueueTime,queuedCount:g.totalQueueCount,queuedManuallyCompletedCount:g.manuallyCompletedCount,status:d.PerformanceEventStatus.Completed,incompleteSubsCount:j,context:h},c){let a;i.accountType=(a=c?.idTokenClaims,a?.tfp||a?.acr?"B2C":a?.tid?a?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad"?"MSA":"AAD":void 0),i.dataBoundary=c.dataBoundary}return this.truncateIntegralFields(i),this.emitEvents([i],a.correlationId),i}addFields(a,b){this.logger.trace("PerformanceClient: Updating static fields");let c=this.eventsByCorrelationId.get(b);c?this.eventsByCorrelationId.set(b,{...c,...a}):this.logger.trace("PerformanceClient: Event not found for",b)}incrementFields(a,b){this.logger.trace("PerformanceClient: Updating counters");let c=this.eventsByCorrelationId.get(b);if(c)for(let b in a){if(c.hasOwnProperty(b)){if(isNaN(Number(c[b])))return}else c[b]=0;c[b]+=a[b]}else this.logger.trace("PerformanceClient: Event not found for",b)}cacheEventByCorrelationId(a){let b=this.eventsByCorrelationId.get(a.correlationId);b?(this.logger.trace(`PerformanceClient: Performance measurement for ${a.name} added/updated`,a.correlationId),b.incompleteSubMeasurements=b.incompleteSubMeasurements||new Map,b.incompleteSubMeasurements.set(a.eventId,{name:a.name,startTimeMs:a.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${a.name} started`,a.correlationId),this.eventsByCorrelationId.set(a.correlationId,{...a}),this.eventStack.set(a.correlationId,[]))}getQueueInfo(a){let b=this.queueMeasurements.get(a);b||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${a}`);let c=0,d=0,e=0;return b?.forEach(a=>{c+=a.queueTime,d++,e+=+!!a.manuallyCompleted}),{totalQueueTime:c,totalQueueCount:d,manuallyCompletedCount:e}}discardMeasurements(a){this.logger.trace("PerformanceClient: Performance measurements discarded",a),this.eventsByCorrelationId.delete(a),this.logger.trace("PerformanceClient: QueueMeasurements discarded",a),this.queueMeasurements.delete(a),this.logger.trace("PerformanceClient: Pre-queue times discarded",a),this.preQueueTimeByCorrelationId.delete(a),this.logger.trace("PerformanceClient: Event stack discarded",a),this.eventStack.delete(a)}addPerformanceCallback(a){for(let[b,c]of this.callbacks)if(c.toString()===a.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${b}`),b;let b=this.generateId();return this.callbacks.set(b,a),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${b}`),b}removePerformanceCallback(a){let b=this.callbacks.delete(a);return b?this.logger.verbose(`PerformanceClient: Performance callback ${a} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${a} not removed.`),b}emitEvents(a,b){this.logger.verbose("PerformanceClient: Emitting performance events",b),this.callbacks.forEach((c,d)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${d}`,b),c.apply(null,[a])})}truncateIntegralFields(a){this.intFields.forEach(b=>{b in a&&"number"==typeof a[b]&&(a[b]=Math.floor(a[b]))})}getDurationMs(a){let b=Date.now()-a;return b<0?b:0}}},79063,(a,b,c)=>{"use strict";var d=a.r(61971),e=a.r(11940);c.AADAuthorityConstants=d.AADAuthorityConstants,c.AADServerParamKeys=d.AADServerParamKeys,c.AccountEntity=d.AccountEntity,c.AuthError=d.AuthError,c.AuthErrorCodes=d.AuthErrorCodes,c.AuthErrorMessage=d.AuthErrorMessage,c.AuthToken=d.AuthToken,c.AuthenticationHeaderParser=d.AuthenticationHeaderParser,c.AuthenticationScheme=d.AuthenticationScheme,c.Authority=d.Authority,c.AuthorityFactory=d.AuthorityFactory,c.AuthorityType=d.AuthorityType,c.AuthorizationCodeClient=d.AuthorizationCodeClient,c.AuthorizeProtocol=d.Authorize,c.AzureCloudInstance=d.AzureCloudInstance,c.BaseClient=d.BaseClient,c.CacheAccountType=d.CacheAccountType,c.CacheError=d.CacheError,c.CacheErrorCodes=d.CacheErrorCodes,c.CacheHelpers=d.CacheHelpers,c.CacheManager=d.CacheManager,c.CacheOutcome=d.CacheOutcome,c.CacheType=d.CacheType,c.CcsCredentialType=d.CcsCredentialType,c.ClaimsRequestKeys=d.ClaimsRequestKeys,c.ClientAssertionUtils=d.ClientAssertionUtils,c.ClientAuthError=d.ClientAuthError,c.ClientAuthErrorCodes=d.ClientAuthErrorCodes,c.ClientAuthErrorMessage=d.ClientAuthErrorMessage,c.ClientConfigurationError=d.ClientConfigurationError,c.ClientConfigurationErrorCodes=d.ClientConfigurationErrorCodes,c.ClientConfigurationErrorMessage=d.ClientConfigurationErrorMessage,c.CodeChallengeMethodValues=d.CodeChallengeMethodValues,c.Constants=d.Constants,c.CredentialType=d.CredentialType,c.DEFAULT_CRYPTO_IMPLEMENTATION=d.DEFAULT_CRYPTO_IMPLEMENTATION,c.DEFAULT_SYSTEM_OPTIONS=d.DEFAULT_SYSTEM_OPTIONS,c.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC=d.DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,c.DefaultStorageClass=d.DefaultStorageClass,c.EncodingTypes=d.EncodingTypes,c.Errors=d.Errors,c.GrantType=d.GrantType,c.HeaderNames=d.HeaderNames,c.HttpMethod=d.HttpMethod,c.HttpStatus=d.HttpStatus,c.IntFields=d.IntFields,c.InteractionRequiredAuthError=d.InteractionRequiredAuthError,c.InteractionRequiredAuthErrorCodes=d.InteractionRequiredAuthErrorCodes,c.InteractionRequiredAuthErrorMessage=d.InteractionRequiredAuthErrorMessage,c.JsonWebTokenTypes=d.JsonWebTokenTypes,Object.defineProperty(c,"LogLevel",{enumerable:!0,get:function(){return d.LogLevel}}),c.Logger=d.Logger,c.NetworkError=d.NetworkError,c.OAuthResponseType=d.OAuthResponseType,c.OIDC_DEFAULT_SCOPES=d.OIDC_DEFAULT_SCOPES,c.ONE_DAY_IN_MS=d.ONE_DAY_IN_MS,c.PasswordGrantConstants=d.PasswordGrantConstants,c.PerformanceEventStatus=d.PerformanceEventStatus,c.PerformanceEvents=d.PerformanceEvents,c.PersistentCacheKeys=d.PersistentCacheKeys,c.PlatformBrokerError=d.PlatformBrokerError,c.PopTokenGenerator=d.PopTokenGenerator,c.PromptValue=d.PromptValue,c.ProtocolMode=d.ProtocolMode,c.ProtocolUtils=d.ProtocolUtils,c.RefreshTokenClient=d.RefreshTokenClient,c.RequestParameterBuilder=d.RequestParameterBuilder,c.ResponseHandler=d.ResponseHandler,c.ResponseMode=d.ResponseMode,c.ScopeSet=d.ScopeSet,c.ServerError=d.ServerError,c.ServerResponseType=d.ServerResponseType,c.ServerTelemetryManager=d.ServerTelemetryManager,c.SilentFlowClient=d.SilentFlowClient,c.StringUtils=d.StringUtils,c.StubPerformanceClient=d.StubPerformanceClient,c.StubbedNetworkModule=d.StubbedNetworkModule,c.THE_FAMILY_ID=d.THE_FAMILY_ID,c.ThrottlingConstants=d.ThrottlingConstants,c.ThrottlingUtils=d.ThrottlingUtils,c.TimeUtils=d.TimeUtils,c.TokenCacheContext=d.TokenCacheContext,c.UrlString=d.UrlString,c.UrlUtils=d.UrlUtils,c.buildAccountToCache=d.buildAccountToCache,c.buildClientInfo=d.buildClientInfo,c.buildClientInfoFromHomeAccountId=d.buildClientInfoFromHomeAccountId,c.buildStaticAuthorityOptions=d.buildStaticAuthorityOptions,c.buildTenantProfile=d.buildTenantProfile,c.createAuthError=d.createAuthError,c.createCacheError=d.createCacheError,c.createClientAuthError=d.createClientAuthError,c.createClientConfigurationError=d.createClientConfigurationError,c.createInteractionRequiredAuthError=d.createInteractionRequiredAuthError,c.createNetworkError=d.createNetworkError,c.formatAuthorityUri=d.formatAuthorityUri,c.getClientAssertion=d.getClientAssertion,c.getRequestThumbprint=d.getRequestThumbprint,c.getTenantIdFromIdTokenClaims=d.getTenantIdFromIdTokenClaims,c.invoke=d.invoke,c.invokeAsync=d.invokeAsync,c.tenantIdMatchesHomeTenant=d.tenantIdMatchesHomeTenant,c.updateAccountTenantProfileData=d.updateAccountTenantProfileData,c.version=d.version,c.JoseHeader=e.JoseHeader,c.PerformanceClient=e.PerformanceClient},47044,(a,b,c)=>{var d=a.r(874),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?b.exports=d:(f(d,c),c.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},35945,(a,b,c)=>{var d=a.r(47044).Buffer,e=a.r(88947);function f(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=d.alloc(0),this;if("function"==typeof a.pipe)return this.buffer=d.alloc(0),a.pipe(this),this;if(a.length||"object"==typeof a)return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof a+")")}a.r(24361).inherits(f,e),f.prototype.write=function(a){this.buffer=d.concat([this.buffer,d.from(a)]),this.emit("data",a)},f.prototype.end=function(a){a&&this.write(a),this.emit("end",a),this.emit("close"),this.writable=!1,this.readable=!1},b.exports=f},49993,(a,b,c)=>{"use strict";function d(a){return(a/8|0)+ +(a%8!=0)}var e={ES256:d(256),ES384:d(384),ES512:d(521)};b.exports=function(a){var b=e[a];if(b)return b;throw Error('Unknown algorithm "'+a+'"')}},63016,(a,b,c)=>{"use strict";var d=a.r(47044).Buffer,e=a.r(49993);function f(a){if(d.isBuffer(a))return a;if("string"==typeof a)return d.from(a,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function g(a,b,c){for(var d=0;b+d<c&&0===a[b+d];)++d;return a[b+d]>=128&&--d,d}b.exports={derToJose:function(a,b){a=f(a);var c=e(b),g=c+1,h=a.length,i=0;if(48!==a[i++])throw Error('Could not find expected "seq"');var j=a[i++];if(129===j&&(j=a[i++]),h-i<j)throw Error('"seq" specified length of "'+j+'", only "'+(h-i)+'" remaining');if(2!==a[i++])throw Error('Could not find expected "int" for "r"');var k=a[i++];if(h-i-2<k)throw Error('"r" specified length of "'+k+'", only "'+(h-i-2)+'" available');if(g<k)throw Error('"r" specified length of "'+k+'", max of "'+g+'" is acceptable');var l=i;if(i+=k,2!==a[i++])throw Error('Could not find expected "int" for "s"');var m=a[i++];if(h-i!==m)throw Error('"s" specified length of "'+m+'", expected "'+(h-i)+'"');if(g<m)throw Error('"s" specified length of "'+m+'", max of "'+g+'" is acceptable');var n=i;if((i+=m)!==h)throw Error('Expected to consume entire buffer, but "'+(h-i)+'" bytes remain');var o=c-k,p=c-m,q=d.allocUnsafe(o+k+p+m);for(i=0;i<o;++i)q[i]=0;a.copy(q,i,l+Math.max(-o,0),l+k),i=c;for(var r=i;i<r+p;++i)q[i]=0;return a.copy(q,i,n+Math.max(-p,0),n+m),q=(q=q.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(a,b){a=f(a);var c=e(b),h=a.length;if(h!==2*c)throw TypeError('"'+b+'" signatures must be "'+2*c+'" bytes, saw "'+h+'"');var i=g(a,0,c),j=g(a,c,a.length),k=c-i,l=c-j,m=2+k+1+1+l,n=m<128,o=d.allocUnsafe((n?2:3)+m),p=0;return o[p++]=48,n?o[p++]=m:(o[p++]=129,o[p++]=255&m),o[p++]=2,o[p++]=k,i<0?(o[p++]=0,p+=a.copy(o,p,0,c)):p+=a.copy(o,p,i,c),o[p++]=2,o[p++]=l,j<0?(o[p++]=0,a.copy(o,p,c)):a.copy(o,p,c+j),o}}},27102,(a,b,c)=>{"use strict";var d=a.r(874).Buffer,e=a.r(874).SlowBuffer;function f(a,b){if(!d.isBuffer(a)||!d.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,e=0;e<a.length;e++)c|=a[e]^b[e];return 0===c}b.exports=f,f.install=function(){d.prototype.equal=e.prototype.equal=function(a){return f(this,a)}};var g=d.prototype.equal,h=e.prototype.equal;f.restore=function(){d.prototype.equal=g,e.prototype.equal=h}},62810,(a,b,c)=>{var d,e=a.r(47044).Buffer,f=a.r(54799),g=a.r(63016),h=a.r(24361),i="secret must be a string or buffer",j="key must be a string or a buffer",k="function"==typeof f.createPublicKey;function l(a){if(!e.isBuffer(a)&&"string"!=typeof a&&(!k||"object"!=typeof a||"string"!=typeof a.type||"string"!=typeof a.asymmetricKeyType||"function"!=typeof a.export))throw p(j)}function m(a){if(!e.isBuffer(a)&&"string"!=typeof a&&"object"!=typeof a)throw p("key must be a string, a buffer or an object")}function n(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){var b=4-(a=a.toString()).length%4;if(4!==b)for(var c=0;c<b;++c)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function p(a){var b=[].slice.call(arguments,1);return TypeError(h.format.bind(h,a).apply(null,b))}function q(a){var b;return b=a,e.isBuffer(b)||"string"==typeof b||(a=JSON.stringify(a)),a}function r(a){return function(b,c){!function(a){if(!e.isBuffer(a)){if("string"!=typeof a){if(!k||"object"!=typeof a||"secret"!==a.type||"function"!=typeof a.export)throw p(i)}}}(c),b=q(b);var d=f.createHmac("sha"+a,c);return n((d.update(b),d.digest("base64")))}}k&&(j+=" or a KeyObject",i+="or a KeyObject");var s="timingSafeEqual"in f?function(a,b){return a.byteLength===b.byteLength&&f.timingSafeEqual(a,b)}:function(b,c){return d||(d=a.r(27102)),d(b,c)};function t(a){return function(b,c,d){var f=r(a)(b,d);return s(e.from(c),e.from(f))}}function u(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign(c,"base64")))}}function v(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify(d,c,"base64")}}function w(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign({key:c,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify({key:d,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},c,"base64")}}function y(a){var b=u(a);return function(){var c=b.apply(null,arguments);return g.derToJose(c,"ES"+a)}}function z(a){var b=v(a);return function(c,d,e){return b(c,d=g.joseToDer(d,"ES"+a).toString("base64"),e)}}function A(){return function(){return""}}function B(){return function(a,b){return""===b}}b.exports=function(a){var b=a.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!b)throw p('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',a);var c=(b[1]||b[3]).toLowerCase(),d=b[2];return{sign:({hs:r,rs:u,ps:w,es:y,none:A})[c](d),verify:({hs:t,rs:v,ps:x,es:z,none:B})[c](d)}}},69945,(a,b,c)=>{var d=a.r(874).Buffer;b.exports=function(a){return"string"==typeof a?a:"number"==typeof a||d.isBuffer(a)?a.toString():JSON.stringify(a)}},23162,(a,b,c)=>{var d=a.r(47044).Buffer,e=a.r(35945),f=a.r(62810),g=a.r(88947),h=a.r(69945),i=a.r(24361);function j(a,b){return d.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(a){var b,c,d,e=a.header,g=a.payload,k=a.secret||a.privateKey,l=a.encoding,m=f(e.alg),n=(b=(b=l)||"utf8",c=j(h(e),"binary"),d=j(h(g),b),i.format("%s.%s",c,d)),o=m.sign(n,k);return i.format("%s.%s",n,o)}function l(a){var b=a.secret;if(b=null==(b=null==b?a.privateKey:b)?a.key:b,!0===/^hs/i.test(a.header.alg)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=c,this.payload=new e(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}i.inherits(l,g),l.prototype.sign=function(){try{var a=k({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",a),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},l.sign=k,b.exports=l},63973,(a,b,c)=>{var d=a.r(47044).Buffer,e=a.r(35945),f=a.r(62810),g=a.r(88947),h=a.r(69945),i=a.r(24361),j=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function k(a){var b=a.split(".",1)[0],c=d.from(b,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(c))return c;try{return JSON.parse(c)}catch(a){return}}function l(a){return a.split(".")[2]}function m(a){return j.test(a)&&!!k(a)}function n(a,b,c){if(!b){var d=Error("Missing algorithm parameter for jws.verify");throw d.code="MISSING_ALGORITHM",d}var e=l(a=h(a)),g=a.split(".",2).join(".");return f(b).verify(g,e,c)}function o(a,b){if(b=b||{},!m(a=h(a)))return null;var c,e,f=k(a);if(!f)return null;var g=(c=c||"utf8",e=a.split(".")[1],d.from(e,"base64").toString(c));return("JWT"===f.typ||b.json)&&(g=JSON.parse(g,b.encoding)),{header:f,payload:g,signature:l(a)}}function p(a){var b=(a=a||{}).secret;if(b=null==(b=null==b?a.publicKey:b)?a.key:b,!0===/^hs/i.test(a.algorithm)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=c,this.signature=new e(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}i.inherits(p,g),p.prototype.verify=function(){try{var a=n(this.signature.buffer,this.algorithm,this.key.buffer),b=o(this.signature.buffer,this.encoding);return this.emit("done",a,b),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},p.decode=o,p.isValid=m,p.verify=n,b.exports=p},16051,(a,b,c)=>{var d=a.r(23162),e=a.r(63973);c.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],c.sign=d.sign,c.verify=e.verify,c.decode=e.decode,c.isValid=e.isValid,c.createSign=function(a){return new d(a)},c.createVerify=function(a){return new e(a)}},56347,(a,b,c)=>{var d=a.r(16051);b.exports=function(a,b){b=b||{};var c=d.decode(a,b);if(!c)return null;var e=c.payload;if("string"==typeof e)try{var f=JSON.parse(e);null!==f&&"object"==typeof f&&(e=f)}catch(a){}return!0===b.complete?{header:c.header,payload:e,signature:c.signature}:e}},7870,(a,b,c)=>{var d=function(a,b){Error.call(this,a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=a,b&&(this.inner=b)};d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,b.exports=d},10895,(a,b,c)=>{var d=a.r(7870),e=function(a,b){d.call(this,a),this.name="NotBeforeError",this.date=b};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,b.exports=e},76251,(a,b,c)=>{var d=a.r(7870),e=function(a,b){d.call(this,a),this.name="TokenExpiredError",this.expiredAt=b};e.prototype=Object.create(d.prototype),e.prototype.constructor=e,b.exports=e},41604,(a,b,c)=>{var d=a.r(1620);b.exports=function(a,b){var c=b||Math.floor(Date.now()/1e3);if("string"==typeof a){var e=d(a);if(void 0===e)return;return Math.floor(c+e/1e3)}if("number"==typeof a)return c+a}},59833,(a,b,c)=>{"use strict";b.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},71676,(a,b,c)=>{"use strict";b.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{}},523,(a,b,c)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:d,MAX_SAFE_BUILD_LENGTH:e,MAX_LENGTH:f}=a.r(59833),g=a.r(71676),h=(c=b.exports={}).re=[],i=c.safeRe=[],j=c.src=[],k=c.safeSrc=[],l=c.t={},m=0,n="[a-zA-Z0-9-]",o=[["\\s",1],["\\d",f],[n,e]],p=(a,b,c)=>{let d=(a=>{for(let[b,c]of o)a=a.split(`${b}*`).join(`${b}{0,${c}}`).split(`${b}+`).join(`${b}{1,${c}}`);return a})(b),e=m++;g(a,e,b),l[a]=e,j[e]=b,k[e]=d,h[e]=new RegExp(b,c?"g":void 0),i[e]=new RegExp(d,c?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${n}*`),p("MAINVERSION",`(${j[l.NUMERICIDENTIFIER]})\\.(${j[l.NUMERICIDENTIFIER]})\\.(${j[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${j[l.NUMERICIDENTIFIERLOOSE]})\\.(${j[l.NUMERICIDENTIFIERLOOSE]})\\.(${j[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${j[l.NONNUMERICIDENTIFIER]}|${j[l.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${j[l.NONNUMERICIDENTIFIER]}|${j[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${j[l.PRERELEASEIDENTIFIER]}(?:\\.${j[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${j[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${j[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${n}+`),p("BUILD",`(?:\\+(${j[l.BUILDIDENTIFIER]}(?:\\.${j[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${j[l.MAINVERSION]}${j[l.PRERELEASE]}?${j[l.BUILD]}?`),p("FULL",`^${j[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${j[l.MAINVERSIONLOOSE]}${j[l.PRERELEASELOOSE]}?${j[l.BUILD]}?`),p("LOOSE",`^${j[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${j[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${j[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${j[l.XRANGEIDENTIFIER]})(?:\\.(${j[l.XRANGEIDENTIFIER]})(?:\\.(${j[l.XRANGEIDENTIFIER]})(?:${j[l.PRERELEASE]})?${j[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${j[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${j[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${j[l.XRANGEIDENTIFIERLOOSE]})(?:${j[l.PRERELEASELOOSE]})?${j[l.BUILD]}?)?)?`),p("XRANGE",`^${j[l.GTLT]}\\s*${j[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${j[l.GTLT]}\\s*${j[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${d}})(?:\\.(\\d{1,${d}}))?(?:\\.(\\d{1,${d}}))?`),p("COERCE",`${j[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",j[l.COERCEPLAIN]+`(?:${j[l.PRERELEASE]})?`+`(?:${j[l.BUILD]})?`+"(?:$|[^\\d])"),p("COERCERTL",j[l.COERCE],!0),p("COERCERTLFULL",j[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${j[l.LONETILDE]}\\s+`,!0),c.tildeTrimReplace="$1~",p("TILDE",`^${j[l.LONETILDE]}${j[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${j[l.LONETILDE]}${j[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${j[l.LONECARET]}\\s+`,!0),c.caretTrimReplace="$1^",p("CARET",`^${j[l.LONECARET]}${j[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${j[l.LONECARET]}${j[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${j[l.GTLT]}\\s*(${j[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${j[l.GTLT]}\\s*(${j[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${j[l.GTLT]}\\s*(${j[l.LOOSEPLAIN]}|${j[l.XRANGEPLAIN]})`,!0),c.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${j[l.XRANGEPLAIN]})\\s+-\\s+(${j[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${j[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${j[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},71123,(a,b,c)=>{"use strict";let d=Object.freeze({loose:!0}),e=Object.freeze({});b.exports=a=>a?"object"!=typeof a?d:a:e},76560,(a,b,c)=>{"use strict";let d=/^[0-9]+$/,e=(a,b)=>{if("number"==typeof a&&"number"==typeof b)return a===b?0:a<b?-1:1;let c=d.test(a),e=d.test(b);return c&&e&&(a*=1,b*=1),a===b?0:c&&!e?-1:e&&!c?1:a<b?-1:1};b.exports={compareIdentifiers:e,rcompareIdentifiers:(a,b)=>e(b,a)}},72728,(a,b,c)=>{"use strict";let d=a.r(71676),{MAX_LENGTH:e,MAX_SAFE_INTEGER:f}=a.r(59833),{safeRe:g,t:h}=a.r(523),i=a.r(71123),{compareIdentifiers:j}=a.r(76560);class k{constructor(a,b){if(b=i(b),a instanceof k)if(!!b.loose===a.loose&&!!b.includePrerelease===a.includePrerelease)return a;else a=a.version;else if("string"!=typeof a)throw TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>e)throw TypeError(`version is longer than ${e} characters`);d("SemVer",a,b),this.options=b,this.loose=!!b.loose,this.includePrerelease=!!b.includePrerelease;const c=a.trim().match(b.loose?g[h.LOOSE]:g[h.FULL]);if(!c)throw TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>f||this.major<0)throw TypeError("Invalid major version");if(this.minor>f||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>f||this.patch<0)throw TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let b=+a;if(b>=0&&b<f)return b}return a}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(d("SemVer.compare",this.version,this.options,a),!(a instanceof k)){if("string"==typeof a&&a===this.version)return 0;a=new k(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return(a instanceof k||(a=new k(a,this.options)),this.major<a.major)?-1:this.major>a.major?1:this.minor<a.minor?-1:this.minor>a.minor?1:this.patch<a.patch?-1:+(this.patch>a.patch)}comparePre(a){if(a instanceof k||(a=new k(a,this.options)),this.prerelease.length&&!a.prerelease.length)return -1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let b=0;do{let c=this.prerelease[b],e=a.prerelease[b];if(d("prerelease compare",b,c,e),void 0===c&&void 0===e)return 0;if(void 0===e)return 1;if(void 0===c)return -1;else if(c===e)continue;else return j(c,e)}while(++b)}compareBuild(a){a instanceof k||(a=new k(a,this.options));let b=0;do{let c=this.build[b],e=a.build[b];if(d("build compare",b,c,e),void 0===c&&void 0===e)return 0;if(void 0===e)return 1;if(void 0===c)return -1;else if(c===e)continue;else return j(c,e)}while(++b)}inc(a,b,c){if(a.startsWith("pre")){if(!b&&!1===c)throw Error("invalid increment argument: identifier is empty");if(b){let a=`-${b}`.match(this.options.loose?g[h.PRERELEASELOOSE]:g[h.PRERELEASE]);if(!a||a[1]!==b)throw Error(`invalid identifier: ${b}`)}}switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",b,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",b,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",b,c),this.inc("pre",b,c);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",b,c),this.inc("pre",b,c);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let a=+!!Number(c);if(0===this.prerelease.length)this.prerelease=[a];else{let d=this.prerelease.length;for(;--d>=0;)"number"==typeof this.prerelease[d]&&(this.prerelease[d]++,d=-2);if(-1===d){if(b===this.prerelease.join(".")&&!1===c)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(b){let d=[b,a];!1===c&&(d=[b]),0===j(this.prerelease[0],b)?isNaN(this.prerelease[1])&&(this.prerelease=d):this.prerelease=d}break}default:throw Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}b.exports=k},91540,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b,c=!1)=>{if(a instanceof d)return a;try{return new d(a,b)}catch(a){if(!c)return null;throw a}}},79453,(a,b,c)=>{"use strict";let d=a.r(91540);b.exports=(a,b)=>{let c=d(a,b);return c?c.version:null}},84592,(a,b,c)=>{"use strict";let d=a.r(91540);b.exports=(a,b)=>{let c=d(a.trim().replace(/^[=v]+/,""),b);return c?c.version:null}},37465,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b,c,e,f)=>{"string"==typeof c&&(f=e,e=c,c=void 0);try{return new d(a instanceof d?a.version:a,c).inc(b,e,f).version}catch(a){return null}}},74052,(a,b,c)=>{"use strict";let d=a.r(91540);b.exports=(a,b)=>{let c=d(a,null,!0),e=d(b,null,!0),f=c.compare(e);if(0===f)return null;let g=f>0,h=g?c:e,i=g?e:c,j=!!h.prerelease.length;if(i.prerelease.length&&!j){if(!i.patch&&!i.minor)return"major";if(0===i.compareMain(h))return i.minor&&!i.patch?"minor":"patch"}let k=j?"pre":"";return c.major!==e.major?k+"major":c.minor!==e.minor?k+"minor":c.patch!==e.patch?k+"patch":"prerelease"}},1249,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b)=>new d(a,b).major},10365,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b)=>new d(a,b).minor},96628,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b)=>new d(a,b).patch},16665,(a,b,c)=>{"use strict";let d=a.r(91540);b.exports=(a,b)=>{let c=d(a,b);return c&&c.prerelease.length?c.prerelease:null}},49627,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b,c)=>new d(a,c).compare(new d(b,c))},22680,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>d(b,a,c)},48880,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b)=>d(a,b,!0)},75202,(a,b,c)=>{"use strict";let d=a.r(72728);b.exports=(a,b,c)=>{let e=new d(a,c),f=new d(b,c);return e.compare(f)||e.compareBuild(f)}},17667,(a,b,c)=>{"use strict";let d=a.r(75202);b.exports=(a,b)=>a.sort((a,c)=>d(a,c,b))},96498,(a,b,c)=>{"use strict";let d=a.r(75202);b.exports=(a,b)=>a.sort((a,c)=>d(c,a,b))},60646,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>d(a,b,c)>0},1776,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>0>d(a,b,c)},92145,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>0===d(a,b,c)},40761,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>0!==d(a,b,c)},90068,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>d(a,b,c)>=0},41334,(a,b,c)=>{"use strict";let d=a.r(49627);b.exports=(a,b,c)=>0>=d(a,b,c)},38301,(a,b,c)=>{"use strict";let d=a.r(92145),e=a.r(40761),f=a.r(60646),g=a.r(90068),h=a.r(1776),i=a.r(41334);b.exports=(a,b,c,j)=>{switch(b){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof c&&(c=c.version),a===c;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof c&&(c=c.version),a!==c;case"":case"=":case"==":return d(a,c,j);case"!=":return e(a,c,j);case">":return f(a,c,j);case">=":return g(a,c,j);case"<":return h(a,c,j);case"<=":return i(a,c,j);default:throw TypeError(`Invalid operator: ${b}`)}}},50949,(a,b,c)=>{"use strict";let d=a.r(72728),e=a.r(91540),{safeRe:f,t:g}=a.r(523);b.exports=(a,b)=>{if(a instanceof d)return a;if("number"==typeof a&&(a=String(a)),"string"!=typeof a)return null;let c=null;if((b=b||{}).rtl){let d,e=b.includePrerelease?f[g.COERCERTLFULL]:f[g.COERCERTL];for(;(d=e.exec(a))&&(!c||c.index+c[0].length!==a.length);)c&&d.index+d[0].length===c.index+c[0].length||(c=d),e.lastIndex=d.index+d[1].length+d[2].length;e.lastIndex=-1}else c=a.match(b.includePrerelease?f[g.COERCEFULL]:f[g.COERCE]);if(null===c)return null;let h=c[2],i=c[3]||"0",j=c[4]||"0",k=b.includePrerelease&&c[5]?`-${c[5]}`:"",l=b.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${h}.${i}.${j}${k}${l}`,b)}},81323,(a,b,c)=>{"use strict";b.exports=class{constructor(){this.max=1e3,this.map=new Map}get(a){let b=this.map.get(a);if(void 0!==b)return this.map.delete(a),this.map.set(a,b),b}delete(a){return this.map.delete(a)}set(a,b){if(!this.delete(a)&&void 0!==b){if(this.map.size>=this.max){let a=this.map.keys().next().value;this.delete(a)}this.map.set(a,b)}return this}}},77693,(a,b,c)=>{"use strict";let d=/\s+/g;class e{constructor(a,b){if(b=g(b),a instanceof e)if(!!b.loose===a.loose&&!!b.includePrerelease===a.includePrerelease)return a;else return new e(a.raw,b);if(a instanceof h)return this.raw=a.value,this.set=[[a]],this.formatted=void 0,this;if(this.options=b,this.loose=!!b.loose,this.includePrerelease=!!b.includePrerelease,this.raw=a.trim().replace(d," "),this.set=this.raw.split("||").map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const a=this.set[0];if(this.set=this.set.filter(a=>!r(a[0])),0===this.set.length)this.set=[a];else if(this.set.length>1){for(const a of this.set)if(1===a.length&&s(a[0])){this.set=[a];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let a=0;a<this.set.length;a++){a>0&&(this.formatted+="||");let b=this.set[a];for(let a=0;a<b.length;a++)a>0&&(this.formatted+=" "),this.formatted+=b[a].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(a){let b=((this.options.includePrerelease&&p)|(this.options.loose&&q))+":"+a,c=f.get(b);if(c)return c;let d=this.options.loose,e=d?k[l.HYPHENRANGELOOSE]:k[l.HYPHENRANGE];i("hyphen replace",a=a.replace(e,E(this.options.includePrerelease))),i("comparator trim",a=a.replace(k[l.COMPARATORTRIM],m)),i("tilde trim",a=a.replace(k[l.TILDETRIM],n)),i("caret trim",a=a.replace(k[l.CARETTRIM],o));let g=a.split(" ").map(a=>u(a,this.options)).join(" ").split(/\s+/).map(a=>D(a,this.options));d&&(g=g.filter(a=>(i("loose invalid filter",a,this.options),!!a.match(k[l.COMPARATORLOOSE])))),i("range list",g);let j=new Map;for(let a of g.map(a=>new h(a,this.options))){if(r(a))return[a];j.set(a.value,a)}j.size>1&&j.has("")&&j.delete("");let s=[...j.values()];return f.set(b,s),s}intersects(a,b){if(!(a instanceof e))throw TypeError("a Range is required");return this.set.some(c=>t(c,b)&&a.set.some(a=>t(a,b)&&c.every(c=>a.every(a=>c.intersects(a,b)))))}test(a){if(!a)return!1;if("string"==typeof a)try{a=new j(a,this.options)}catch(a){return!1}for(let b=0;b<this.set.length;b++)if(F(this.set[b],a,this.options))return!0;return!1}}b.exports=e;let f=new(a.r(81323)),g=a.r(71123),h=a.r(44202),i=a.r(71676),j=a.r(72728),{safeRe:k,t:l,comparatorTrimReplace:m,tildeTrimReplace:n,caretTrimReplace:o}=a.r(523),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:q}=a.r(59833),r=a=>"<0.0.0-0"===a.value,s=a=>""===a.value,t=(a,b)=>{let c=!0,d=a.slice(),e=d.pop();for(;c&&d.length;)c=d.every(a=>e.intersects(a,b)),e=d.pop();return c},u=(a,b)=>(i("comp",a=a.replace(k[l.BUILD],""),b),i("caret",a=y(a,b)),i("tildes",a=w(a,b)),i("xrange",a=A(a,b)),i("stars",a=C(a,b)),a),v=a=>!a||"x"===a.toLowerCase()||"*"===a,w=(a,b)=>a.trim().split(/\s+/).map(a=>x(a,b)).join(" "),x=(a,b)=>{let c=b.loose?k[l.TILDELOOSE]:k[l.TILDE];return a.replace(c,(b,c,d,e,f)=>{let g;return i("tilde",a,b,c,d,e,f),v(c)?g="":v(d)?g=`>=${c}.0.0 <${+c+1}.0.0-0`:v(e)?g=`>=${c}.${d}.0 <${c}.${+d+1}.0-0`:f?(i("replaceTilde pr",f),g=`>=${c}.${d}.${e}-${f} <${c}.${+d+1}.0-0`):g=`>=${c}.${d}.${e} <${c}.${+d+1}.0-0`,i("tilde return",g),g})},y=(a,b)=>a.trim().split(/\s+/).map(a=>z(a,b)).join(" "),z=(a,b)=>{i("caret",a,b);let c=b.loose?k[l.CARETLOOSE]:k[l.CARET],d=b.includePrerelease?"-0":"";return a.replace(c,(b,c,e,f,g)=>{let h;return i("caret",a,b,c,e,f,g),v(c)?h="":v(e)?h=`>=${c}.0.0${d} <${+c+1}.0.0-0`:v(f)?h="0"===c?`>=${c}.${e}.0${d} <${c}.${+e+1}.0-0`:`>=${c}.${e}.0${d} <${+c+1}.0.0-0`:g?(i("replaceCaret pr",g),h="0"===c?"0"===e?`>=${c}.${e}.${f}-${g} <${c}.${e}.${+f+1}-0`:`>=${c}.${e}.${f}-${g} <${c}.${+e+1}.0-0`:`>=${c}.${e}.${f}-${g} <${+c+1}.0.0-0`):(i("no pr"),h="0"===c?"0"===e?`>=${c}.${e}.${f}${d} <${c}.${e}.${+f+1}-0`:`>=${c}.${e}.${f}${d} <${c}.${+e+1}.0-0`:`>=${c}.${e}.${f} <${+c+1}.0.0-0`),i("caret return",h),h})},A=(a,b)=>(i("replaceXRanges",a,b),a.split(/\s+/).map(a=>B(a,b)).join(" ")),B=(a,b)=>{a=a.trim();let c=b.loose?k[l.XRANGELOOSE]:k[l.XRANGE];return a.replace(c,(c,d,e,f,g,h)=>{i("xRange",a,c,d,e,f,g,h);let j=v(e),k=j||v(f),l=k||v(g);return"="===d&&l&&(d=""),h=b.includePrerelease?"-0":"",j?c=">"===d||"<"===d?"<0.0.0-0":"*":d&&l?(k&&(f=0),g=0,">"===d?(d=">=",k?(e=+e+1,f=0):f=+f+1,g=0):"<="===d&&(d="<",k?e=+e+1:f=+f+1),"<"===d&&(h="-0"),c=`${d+e}.${f}.${g}${h}`):k?c=`>=${e}.0.0${h} <${+e+1}.0.0-0`:l&&(c=`>=${e}.${f}.0${h} <${e}.${+f+1}.0-0`),i("xRange return",c),c})},C=(a,b)=>(i("replaceStars",a,b),a.trim().replace(k[l.STAR],"")),D=(a,b)=>(i("replaceGTE0",a,b),a.trim().replace(k[b.includePrerelease?l.GTE0PRE:l.GTE0],"")),E=a=>(b,c,d,e,f,g,h,i,j,k,l,m)=>(c=v(d)?"":v(e)?`>=${d}.0.0${a?"-0":""}`:v(f)?`>=${d}.${e}.0${a?"-0":""}`:g?`>=${c}`:`>=${c}${a?"-0":""}`,i=v(j)?"":v(k)?`<${+j+1}.0.0-0`:v(l)?`<${j}.${+k+1}.0-0`:m?`<=${j}.${k}.${l}-${m}`:a?`<${j}.${k}.${+l+1}-0`:`<=${i}`,`${c} ${i}`.trim()),F=(a,b,c)=>{for(let c=0;c<a.length;c++)if(!a[c].test(b))return!1;if(b.prerelease.length&&!c.includePrerelease){for(let c=0;c<a.length;c++)if(i(a[c].semver),a[c].semver!==h.ANY&&a[c].semver.prerelease.length>0){let d=a[c].semver;if(d.major===b.major&&d.minor===b.minor&&d.patch===b.patch)return!0}return!1}return!0}},44202,(a,b,c)=>{"use strict";let d=Symbol("SemVer ANY");class e{static get ANY(){return d}constructor(a,b){if(b=f(b),a instanceof e)if(!!b.loose===a.loose)return a;else a=a.value;j("comparator",a=a.trim().split(/\s+/).join(" "),b),this.options=b,this.loose=!!b.loose,this.parse(a),this.semver===d?this.value="":this.value=this.operator+this.semver.version,j("comp",this)}parse(a){let b=this.options.loose?g[h.COMPARATORLOOSE]:g[h.COMPARATOR],c=a.match(b);if(!c)throw TypeError(`Invalid comparator: ${a}`);this.operator=void 0!==c[1]?c[1]:"","="===this.operator&&(this.operator=""),c[2]?this.semver=new k(c[2],this.options.loose):this.semver=d}toString(){return this.value}test(a){if(j("Comparator.test",a,this.options.loose),this.semver===d||a===d)return!0;if("string"==typeof a)try{a=new k(a,this.options)}catch(a){return!1}return i(a,this.operator,this.semver,this.options)}intersects(a,b){if(!(a instanceof e))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(a.value,b).test(this.value):""===a.operator?""===a.value||new l(this.value,b).test(a.semver):!((b=f(b)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===a.value)||!b.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||i(this.semver,"<",a.semver,b)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||i(this.semver,">",a.semver,b)&&this.operator.startsWith("<")&&a.operator.startsWith(">"))}}b.exports=e;let f=a.r(71123),{safeRe:g,t:h}=a.r(523),i=a.r(38301),j=a.r(71676),k=a.r(72728),l=a.r(77693)},82874,(a,b,c)=>{"use strict";let d=a.r(77693);b.exports=(a,b,c)=>{try{b=new d(b,c)}catch(a){return!1}return b.test(a)}},73992,(a,b,c)=>{"use strict";let d=a.r(77693);b.exports=(a,b)=>new d(a,b).set.map(a=>a.map(a=>a.value).join(" ").trim().split(" "))},38777,(a,b,c)=>{"use strict";let d=a.r(72728),e=a.r(77693);b.exports=(a,b,c)=>{let f=null,g=null,h=null;try{h=new e(b,c)}catch(a){return null}return a.forEach(a=>{h.test(a)&&(!f||-1===g.compare(a))&&(g=new d(f=a,c))}),f}},33902,(a,b,c)=>{"use strict";let d=a.r(72728),e=a.r(77693);b.exports=(a,b,c)=>{let f=null,g=null,h=null;try{h=new e(b,c)}catch(a){return null}return a.forEach(a=>{h.test(a)&&(!f||1===g.compare(a))&&(g=new d(f=a,c))}),f}},51491,(a,b,c)=>{"use strict";let d=a.r(72728),e=a.r(77693),f=a.r(60646);b.exports=(a,b)=>{a=new e(a,b);let c=new d("0.0.0");if(a.test(c)||(c=new d("0.0.0-0"),a.test(c)))return c;c=null;for(let b=0;b<a.set.length;++b){let e=a.set[b],g=null;e.forEach(a=>{let b=new d(a.semver.version);switch(a.operator){case">":0===b.prerelease.length?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!g||f(b,g))&&(g=b);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${a.operator}`)}}),g&&(!c||f(c,g))&&(c=g)}return c&&a.test(c)?c:null}},19802,(a,b,c)=>{"use strict";let d=a.r(77693);b.exports=(a,b)=>{try{return new d(a,b).range||"*"}catch(a){return null}}},452,(a,b,c)=>{"use strict";let d=a.r(72728),e=a.r(44202),{ANY:f}=e,g=a.r(77693),h=a.r(82874),i=a.r(60646),j=a.r(1776),k=a.r(41334),l=a.r(90068);b.exports=(a,b,c,m)=>{let n,o,p,q,r;switch(a=new d(a,m),b=new g(b,m),c){case">":n=i,o=k,p=j,q=">",r=">=";break;case"<":n=j,o=l,p=i,q="<",r="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(h(a,b,m))return!1;for(let c=0;c<b.set.length;++c){let d=b.set[c],g=null,h=null;if(d.forEach(a=>{a.semver===f&&(a=new e(">=0.0.0")),g=g||a,h=h||a,n(a.semver,g.semver,m)?g=a:p(a.semver,h.semver,m)&&(h=a)}),g.operator===q||g.operator===r||(!h.operator||h.operator===q)&&o(a,h.semver)||h.operator===r&&p(a,h.semver))return!1}return!0}},69815,(a,b,c)=>{"use strict";let d=a.r(452);b.exports=(a,b,c)=>d(a,b,">",c)},67374,(a,b,c)=>{"use strict";let d=a.r(452);b.exports=(a,b,c)=>d(a,b,"<",c)},69025,(a,b,c)=>{"use strict";let d=a.r(77693);b.exports=(a,b,c)=>(a=new d(a,c),b=new d(b,c),a.intersects(b,c))},74845,(a,b,c)=>{"use strict";let d=a.r(82874),e=a.r(49627);b.exports=(a,b,c)=>{let f=[],g=null,h=null,i=a.sort((a,b)=>e(a,b,c));for(let a of i)d(a,b,c)?(h=a,g||(g=a)):(h&&f.push([g,h]),h=null,g=null);g&&f.push([g,null]);let j=[];for(let[a,b]of f)a===b?j.push(a):b||a!==i[0]?b?a===i[0]?j.push(`<=${b}`):j.push(`${a} - ${b}`):j.push(`>=${a}`):j.push("*");let k=j.join(" || "),l="string"==typeof b.raw?b.raw:String(b);return k.length<l.length?k:b}},2238,(a,b,c)=>{"use strict";let d=a.r(77693),e=a.r(44202),{ANY:f}=e,g=a.r(82874),h=a.r(49627),i=[new e(">=0.0.0-0")],j=[new e(">=0.0.0")],k=(a,b,c)=>{let d,e,k,n,o,p,q;if(a===b)return!0;if(1===a.length&&a[0].semver===f)if(1===b.length&&b[0].semver===f)return!0;else a=c.includePrerelease?i:j;if(1===b.length&&b[0].semver===f)if(c.includePrerelease)return!0;else b=j;let r=new Set;for(let b of a)">"===b.operator||">="===b.operator?d=l(d,b,c):"<"===b.operator||"<="===b.operator?e=m(e,b,c):r.add(b.semver);if(r.size>1)return null;if(d&&e&&((k=h(d.semver,e.semver,c))>0||0===k&&(">="!==d.operator||"<="!==e.operator)))return null;for(let a of r){if(d&&!g(a,String(d),c)||e&&!g(a,String(e),c))return null;for(let d of b)if(!g(a,String(d),c))return!1;return!0}let s=!!e&&!c.includePrerelease&&!!e.semver.prerelease.length&&e.semver,t=!!d&&!c.includePrerelease&&!!d.semver.prerelease.length&&d.semver;for(let a of(s&&1===s.prerelease.length&&"<"===e.operator&&0===s.prerelease[0]&&(s=!1),b)){if(q=q||">"===a.operator||">="===a.operator,p=p||"<"===a.operator||"<="===a.operator,d){if(t&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===t.major&&a.semver.minor===t.minor&&a.semver.patch===t.patch&&(t=!1),">"===a.operator||">="===a.operator){if((n=l(d,a,c))===a&&n!==d)return!1}else if(">="===d.operator&&!g(d.semver,String(a),c))return!1}if(e){if(s&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===s.major&&a.semver.minor===s.minor&&a.semver.patch===s.patch&&(s=!1),"<"===a.operator||"<="===a.operator){if((o=m(e,a,c))===a&&o!==e)return!1}else if("<="===e.operator&&!g(e.semver,String(a),c))return!1}if(!a.operator&&(e||d)&&0!==k)return!1}return(!d||!p||!!e||0===k)&&(!e||!q||!!d||0===k)&&!t&&!s&&!0},l=(a,b,c)=>{if(!a)return b;let d=h(a.semver,b.semver,c);return d>0?a:d<0||">"===b.operator&&">="===a.operator?b:a},m=(a,b,c)=>{if(!a)return b;let d=h(a.semver,b.semver,c);return d<0?a:d>0||"<"===b.operator&&"<="===a.operator?b:a};b.exports=(a,b,c={})=>{if(a===b)return!0;a=new d(a,c),b=new d(b,c);let e=!1;b:for(let d of a.set){for(let a of b.set){let b=k(d,a,c);if(e=e||null!==b,b)continue b}if(e)return!1}return!0}},93611,(a,b,c)=>{"use strict";let d=a.r(523),e=a.r(59833),f=a.r(72728),g=a.r(76560),h=a.r(91540),i=a.r(79453),j=a.r(84592),k=a.r(37465),l=a.r(74052),m=a.r(1249),n=a.r(10365),o=a.r(96628),p=a.r(16665),q=a.r(49627),r=a.r(22680),s=a.r(48880),t=a.r(75202),u=a.r(17667),v=a.r(96498),w=a.r(60646),x=a.r(1776),y=a.r(92145),z=a.r(40761),A=a.r(90068),B=a.r(41334),C=a.r(38301),D=a.r(50949),E=a.r(44202),F=a.r(77693),G=a.r(82874),H=a.r(73992),I=a.r(38777),J=a.r(33902),K=a.r(51491),L=a.r(19802),M=a.r(452),N=a.r(69815),O=a.r(67374),P=a.r(69025);b.exports={parse:h,valid:i,clean:j,inc:k,diff:l,major:m,minor:n,patch:o,prerelease:p,compare:q,rcompare:r,compareLoose:s,compareBuild:t,sort:u,rsort:v,gt:w,lt:x,eq:y,neq:z,gte:A,lte:B,cmp:C,coerce:D,Comparator:E,Range:F,satisfies:G,toComparators:H,maxSatisfying:I,minSatisfying:J,minVersion:K,validRange:L,outside:M,gtr:N,ltr:O,intersects:P,simplifyRange:a.r(74845),subset:a.r(2238),SemVer:f,re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:g.compareIdentifiers,rcompareIdentifiers:g.rcompareIdentifiers}},98152,(a,b,c)=>{b.exports=a.r(93611).satisfies(process.version,">=15.7.0")},81953,(a,b,c)=>{b.exports=a.r(93611).satisfies(process.version,">=16.9.0")},21948,(a,b,c)=>{let d=a.r(98152),e=a.r(81953),f={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},g={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};b.exports=function(a,b){if(!a||!b)return;let c=b.asymmetricKeyType;if(!c)return;let h=f[c];if(!h)throw Error(`Unknown key type "${c}".`);if(!h.includes(a))throw Error(`"alg" parameter for "${c}" key type must be one of: ${h.join(", ")}.`);if(d)switch(c){case"ec":let i=b.asymmetricKeyDetails.namedCurve,j=g[a];if(i!==j)throw Error(`"alg" parameter "${a}" requires curve "${j}".`);break;case"rsa-pss":if(e){let c=parseInt(a.slice(-3),10),{hashAlgorithm:d,mgf1HashAlgorithm:e,saltLength:f}=b.asymmetricKeyDetails;if(d!==`sha${c}`||e!==d)throw Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}.`);if(void 0!==f&&f>c>>3)throw Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}.`)}}}},49408,(a,b,c)=>{b.exports=a.r(93611).satisfies(process.version,"^6.12.0 || >=8.0.0")},99565,(a,b,c)=>{let d=a.r(7870),e=a.r(10895),f=a.r(76251),g=a.r(56347),h=a.r(41604),i=a.r(21948),j=a.r(49408),k=a.r(16051),{KeyObject:l,createSecretKey:m,createPublicKey:n}=a.r(54799),o=["RS256","RS384","RS512"],p=["ES256","ES384","ES512"],q=["RS256","RS384","RS512"],r=["HS256","HS384","HS512"];j&&(o.splice(o.length,0,"PS256","PS384","PS512"),q.splice(q.length,0,"PS256","PS384","PS512")),b.exports=function(a,b,c,j){let s,t,u;if("function"!=typeof c||j||(j=c,c={}),c||(c={}),c=Object.assign({},c),s=j||function(a,b){if(a)throw a;return b},c.clockTimestamp&&"number"!=typeof c.clockTimestamp)return s(new d("clockTimestamp must be a number"));if(void 0!==c.nonce&&("string"!=typeof c.nonce||""===c.nonce.trim()))return s(new d("nonce must be a non-empty string"));if(void 0!==c.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof c.allowInvalidAsymmetricKeyTypes)return s(new d("allowInvalidAsymmetricKeyTypes must be a boolean"));let v=c.clockTimestamp||Math.floor(Date.now()/1e3);if(!a)return s(new d("jwt must be provided"));if("string"!=typeof a)return s(new d("jwt must be a string"));let w=a.split(".");if(3!==w.length)return s(new d("jwt malformed"));try{t=g(a,{complete:!0})}catch(a){return s(a)}if(!t)return s(new d("invalid token"));let x=t.header;if("function"==typeof b){if(!j)return s(new d("verify must be called asynchronous if secret or public key is provided as a callback"));u=b}else u=function(a,c){return c(null,b)};return u(x,function(b,g){let j;if(b)return s(new d("error in secret or public key callback: "+b.message));let u=""!==w[2].trim();if(!u&&g)return s(new d("jwt signature is required"));if(u&&!g)return s(new d("secret or public key must be provided"));if(!u&&!c.algorithms)return s(new d('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=g&&!(g instanceof l))try{g=n(g)}catch(a){try{g=m("string"==typeof g?Buffer.from(g):g)}catch(a){return s(new d("secretOrPublicKey is not valid key material"))}}if(c.algorithms||("secret"===g.type?c.algorithms=r:["rsa","rsa-pss"].includes(g.asymmetricKeyType)?c.algorithms=q:"ec"===g.asymmetricKeyType?c.algorithms=p:c.algorithms=o),-1===c.algorithms.indexOf(t.header.alg))return s(new d("invalid algorithm"));if(x.alg.startsWith("HS")&&"secret"!==g.type)return s(new d(`secretOrPublicKey must be a symmetric key when using ${x.alg}`));if(/^(?:RS|PS|ES)/.test(x.alg)&&"public"!==g.type)return s(new d(`secretOrPublicKey must be an asymmetric key when using ${x.alg}`));if(!c.allowInvalidAsymmetricKeyTypes)try{i(x.alg,g)}catch(a){return s(a)}try{j=k.verify(a,t.header.alg,g)}catch(a){return s(a)}if(!j)return s(new d("invalid signature"));let y=t.payload;if(void 0!==y.nbf&&!c.ignoreNotBefore){if("number"!=typeof y.nbf)return s(new d("invalid nbf value"));if(y.nbf>v+(c.clockTolerance||0))return s(new e("jwt not active",new Date(1e3*y.nbf)))}if(void 0!==y.exp&&!c.ignoreExpiration){if("number"!=typeof y.exp)return s(new d("invalid exp value"));if(v>=y.exp+(c.clockTolerance||0))return s(new f("jwt expired",new Date(1e3*y.exp)))}if(c.audience){let a=Array.isArray(c.audience)?c.audience:[c.audience];if(!(Array.isArray(y.aud)?y.aud:[y.aud]).some(function(b){return a.some(function(a){return a instanceof RegExp?a.test(b):a===b})}))return s(new d("jwt audience invalid. expected: "+a.join(" or ")))}if(c.issuer&&("string"==typeof c.issuer&&y.iss!==c.issuer||Array.isArray(c.issuer)&&-1===c.issuer.indexOf(y.iss)))return s(new d("jwt issuer invalid. expected: "+c.issuer));if(c.subject&&y.sub!==c.subject)return s(new d("jwt subject invalid. expected: "+c.subject));if(c.jwtid&&y.jti!==c.jwtid)return s(new d("jwt jwtid invalid. expected: "+c.jwtid));if(c.nonce&&y.nonce!==c.nonce)return s(new d("jwt nonce invalid. expected: "+c.nonce));if(c.maxAge){if("number"!=typeof y.iat)return s(new d("iat required when maxAge is specified"));let a=h(c.maxAge,y.iat);if(void 0===a)return s(new d('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(v>=a+(c.clockTolerance||0))return s(new f("maxAge exceeded",new Date(1e3*a)))}return!0===c.complete?s(null,{header:x,payload:y,signature:t.signature}):s(null,y)})}},81888,(a,b,c)=>{var d,e,f=1/0,g=0/0,h=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,k=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,m=parseInt;function n(a){return a!=a}var o=Object.prototype,p=o.hasOwnProperty,q=o.toString,r=o.propertyIsEnumerable,s=(d=Object.keys,e=Object,function(a){return d(e(a))}),t=Math.max,u=Array.isArray;function v(a){var b,c,d;return null!=a&&"number"==typeof(b=a.length)&&b>-1&&b%1==0&&b<=0x1fffffffffffff&&"[object Function]"!=(d=w(c=a)?q.call(c):"")&&"[object GeneratorFunction]"!=d}function w(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function x(a){return!!a&&"object"==typeof a}b.exports=function(a,b,c,d){a=v(a)?a:function(a){return a?function(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}(v(a)?function(a,b){var c,d,e,f,g=u(a)||x(d=c=a)&&v(d)&&p.call(c,"callee")&&(!r.call(c,"callee")||"[object Arguments]"==q.call(c))?function(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}(a.length,String):[],h=g.length,i=!!h;for(var j in a){p.call(a,j)&&!(i&&("length"==j||(e=j,(f=null==(f=h)?0x1fffffffffffff:f)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<f)))&&g.push(j)}return g}(a):function(a){if(c=(b=a)&&b.constructor,b!==("function"==typeof c&&c.prototype||o))return s(a);var b,c,d=[];for(var e in Object(a))p.call(a,e)&&"constructor"!=e&&d.push(e);return d}(a),function(b){return a[b]}):[]}(a),c=c&&!d?(z=(y=(e=c)?(e=function(a){if("number"==typeof a)return a;if("symbol"==typeof(b=a)||x(b)&&"[object Symbol]"==q.call(b))return g;if(w(a)){var b,c="function"==typeof a.valueOf?a.valueOf():a;a=w(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(h,"");var d=j.test(a);return d||k.test(a)?m(a.slice(2),d?2:8):i.test(a)?g:+a}(e))===f||e===-f?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0)%1,y==y?z?y-z:y:0):0;var e,y,z,A,B=a.length;return c<0&&(c=t(B+c,0)),"string"==typeof(A=a)||!u(A)&&x(A)&&"[object String]"==q.call(A)?c<=B&&a.indexOf(b,c)>-1:!!B&&function(a,b,c){if(b!=b){for(var d=a.length,e=c+-1;++e<d;)if(n(a[e],e,a))return e;return -1}for(var f=c-1,g=a.length;++f<g;)if(a[f]===b)return f;return -1}(a,b,c)>-1}},11560,(a,b,c)=>{var d=Object.prototype.toString;b.exports=function(a){var b;return!0===a||!1===a||!!(b=a)&&"object"==typeof b&&"[object Boolean]"==d.call(a)}},97452,(a,b,c)=>{var d=1/0,e=0/0,f=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,i=/^0o[0-7]+$/i,j=parseInt,k=Object.prototype.toString;function l(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}b.exports=function(a){var b,c,m;return"number"==typeof a&&a==(m=(c=(b=a)?(b=function(a){if("number"==typeof a)return a;if("symbol"==typeof(b=a)||b&&"object"==typeof b&&"[object Symbol]"==k.call(b))return e;if(l(a)){var b,c="function"==typeof a.valueOf?a.valueOf():a;a=l(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(f,"");var d=h.test(a);return d||i.test(a)?j(a.slice(2),d?2:8):g.test(a)?e:+a}(b))===d||b===-d?(b<0?-1:1)*17976931348623157e292:b==b?b:0:0===b?b:0)%1,c==c?m?c-m:c:0)}},9114,(a,b,c)=>{var d=Object.prototype.toString;b.exports=function(a){return"number"==typeof a||!!a&&"object"==typeof a&&"[object Number]"==d.call(a)}},79171,(a,b,c)=>{var d,e,f=Object.prototype,g=Function.prototype.toString,h=f.hasOwnProperty,i=g.call(Object),j=f.toString,k=(d=Object.getPrototypeOf,e=Object,function(a){return d(e(a))});b.exports=function(a){if(!(a&&"object"==typeof a)||"[object Object]"!=j.call(a)||function(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}(a))return!1;var b=k(a);if(null===b)return!0;var c=h.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&g.call(c)==i}},11714,(a,b,c)=>{var d=Object.prototype.toString,e=Array.isArray;b.exports=function(a){var b;return"string"==typeof a||!e(a)&&!!(b=a)&&"object"==typeof b&&"[object String]"==d.call(a)}},84564,(a,b,c)=>{var d=1/0,e=0/0,f=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,i=/^0o[0-7]+$/i,j=parseInt,k=Object.prototype.toString;function l(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}b.exports=function(a){var b,c,m,n,o=2,p=a;if("function"!=typeof p)throw TypeError("Expected a function");return m=(c=(b=o)?(b=function(a){if("number"==typeof a)return a;if("symbol"==typeof(b=a)||b&&"object"==typeof b&&"[object Symbol]"==k.call(b))return e;if(l(a)){var b,c="function"==typeof a.valueOf?a.valueOf():a;a=l(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(f,"");var d=h.test(a);return d||i.test(a)?j(a.slice(2),d?2:8):g.test(a)?e:+a}(b))===d||b===-d?(b<0?-1:1)*17976931348623157e292:b==b?b:0:0===b?b:0)%1,o=c==c?m?c-m:c:0,function(){return--o>0&&(n=p.apply(this,arguments)),o<=1&&(p=void 0),n}}},9372,(a,b,c)=>{let d=a.r(41604),e=a.r(49408),f=a.r(21948),g=a.r(16051),h=a.r(81888),i=a.r(11560),j=a.r(97452),k=a.r(9114),l=a.r(79171),m=a.r(11714),n=a.r(84564),{KeyObject:o,createSecretKey:p,createPrivateKey:q}=a.r(54799),r=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];e&&r.splice(3,0,"PS256","PS384","PS512");let s={expiresIn:{isValid:function(a){return j(a)||m(a)&&a},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(a){return j(a)||m(a)&&a},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(a){return m(a)||Array.isArray(a)},message:'"audience" must be a string or array'},algorithm:{isValid:h.bind(null,r),message:'"algorithm" must be a valid string enum value'},header:{isValid:l,message:'"header" must be an object'},encoding:{isValid:m,message:'"encoding" must be a string'},issuer:{isValid:m,message:'"issuer" must be a string'},subject:{isValid:m,message:'"subject" must be a string'},jwtid:{isValid:m,message:'"jwtid" must be a string'},noTimestamp:{isValid:i,message:'"noTimestamp" must be a boolean'},keyid:{isValid:m,message:'"keyid" must be a string'},mutatePayload:{isValid:i,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:i,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:i,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},t={iat:{isValid:k,message:'"iat" should be a number of seconds'},exp:{isValid:k,message:'"exp" should be a number of seconds'},nbf:{isValid:k,message:'"nbf" should be a number of seconds'}};function u(a,b,c,d){if(!l(c))throw Error('Expected "'+d+'" to be a plain object.');Object.keys(c).forEach(function(e){let f=a[e];if(!f){if(!b)throw Error('"'+e+'" is not allowed in "'+d+'"');return}if(!f.isValid(c[e]))throw Error(f.message)})}let v={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},w=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];b.exports=function(a,b,c,e){var h,i;"function"==typeof c?(e=c,c={}):c=c||{};let j="object"==typeof a&&!Buffer.isBuffer(a),k=Object.assign({alg:c.algorithm||"HS256",typ:j?"JWT":void 0,kid:c.keyid},c.header);function l(a){if(e)return e(a);throw a}if(!b&&"none"!==c.algorithm)return l(Error("secretOrPrivateKey must have a value"));if(null!=b&&!(b instanceof o))try{b=q(b)}catch(a){try{b=p("string"==typeof b?Buffer.from(b):b)}catch(a){return l(Error("secretOrPrivateKey is not valid key material"))}}if(k.alg.startsWith("HS")&&"secret"!==b.type)return l(Error(`secretOrPrivateKey must be a symmetric key when using ${k.alg}`));if(/^(?:RS|PS|ES)/.test(k.alg)){if("private"!==b.type)return l(Error(`secretOrPrivateKey must be an asymmetric key when using ${k.alg}`));if(!c.allowInsecureKeySizes&&!k.alg.startsWith("ES")&&void 0!==b.asymmetricKeyDetails&&b.asymmetricKeyDetails.modulusLength<2048)return l(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${k.alg}`))}if(void 0===a)return l(Error("payload is required"));if(j){try{h=a,u(t,!0,h,"payload")}catch(a){return l(a)}c.mutatePayload||(a=Object.assign({},a))}else{let b=w.filter(function(a){return void 0!==c[a]});if(b.length>0)return l(Error("invalid "+b.join(",")+" option for "+typeof a+" payload"))}if(void 0!==a.exp&&void 0!==c.expiresIn)return l(Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==a.nbf&&void 0!==c.notBefore)return l(Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{i=c,u(s,!1,i,"options")}catch(a){return l(a)}if(!c.allowInvalidAsymmetricKeyTypes)try{f(k.alg,b)}catch(a){return l(a)}let m=a.iat||Math.floor(Date.now()/1e3);if(c.noTimestamp?delete a.iat:j&&(a.iat=m),void 0!==c.notBefore){try{a.nbf=d(c.notBefore,m)}catch(a){return l(a)}if(void 0===a.nbf)return l(Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==c.expiresIn&&"object"==typeof a){try{a.exp=d(c.expiresIn,m)}catch(a){return l(a)}if(void 0===a.exp)return l(Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(v).forEach(function(b){let d=v[b];if(void 0!==c[b]){if(void 0!==a[d])return l(Error('Bad "options.'+b+'" option. The payload already has an "'+d+'" property.'));a[d]=c[b]}});let r=c.encoding||"utf8";if("function"==typeof e)e=e&&n(e),g.createSign({header:k,privateKey:b,payload:a,encoding:r}).once("error",e).once("done",function(a){if(!c.allowInsecureKeySizes&&/^(?:RS|PS)/.test(k.alg)&&a.length<256)return e(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${k.alg}`));e(null,a)});else{let d=g.sign({header:k,payload:a,secret:b,encoding:r});if(!c.allowInsecureKeySizes&&/^(?:RS|PS)/.test(k.alg)&&d.length<256)throw Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${k.alg}`);return d}}},43029,(a,b,c)=>{b.exports={decode:a.r(56347),verify:a.r(99565),sign:a.r(9372),JsonWebTokenError:a.r(7870),NotBeforeError:a.r(10895),TokenExpiredError:a.r(76251)}},84347,(a,b,c)=>{"use strict";var d,e=a.r(21517),f=a.r(24836),g=a.r(7137),h=a.r(54799),i=a.r(79063),j=a.r(43029),k=a.r(22734),l=a.r(14747);class m{static serializeJSONBlob(a){return JSON.stringify(a)}static serializeAccounts(a){let b={};return Object.keys(a).map(function(c){let d=a[c];b[c]={home_account_id:d.homeAccountId,environment:d.environment,realm:d.realm,local_account_id:d.localAccountId,username:d.username,authority_type:d.authorityType,name:d.name,client_info:d.clientInfo,last_modification_time:d.lastModificationTime,last_modification_app:d.lastModificationApp,tenantProfiles:d.tenantProfiles?.map(a=>JSON.stringify(a))}}),b}static serializeIdTokens(a){let b={};return Object.keys(a).map(function(c){let d=a[c];b[c]={home_account_id:d.homeAccountId,environment:d.environment,credential_type:d.credentialType,client_id:d.clientId,secret:d.secret,realm:d.realm}}),b}static serializeAccessTokens(a){let b={};return Object.keys(a).map(function(c){let d=a[c];b[c]={home_account_id:d.homeAccountId,environment:d.environment,credential_type:d.credentialType,client_id:d.clientId,secret:d.secret,realm:d.realm,target:d.target,cached_at:d.cachedAt,expires_on:d.expiresOn,extended_expires_on:d.extendedExpiresOn,refresh_on:d.refreshOn,key_id:d.keyId,token_type:d.tokenType,requestedClaims:d.requestedClaims,requestedClaimsHash:d.requestedClaimsHash,userAssertionHash:d.userAssertionHash}}),b}static serializeRefreshTokens(a){let b={};return Object.keys(a).map(function(c){let d=a[c];b[c]={home_account_id:d.homeAccountId,environment:d.environment,credential_type:d.credentialType,client_id:d.clientId,secret:d.secret,family_id:d.familyId,target:d.target,realm:d.realm}}),b}static serializeAppMetadata(a){let b={};return Object.keys(a).map(function(c){let d=a[c];b[c]={client_id:d.clientId,environment:d.environment,family_id:d.familyId}}),b}static serializeAllCache(a){return{Account:this.serializeAccounts(a.accounts),IdToken:this.serializeIdTokens(a.idTokens),AccessToken:this.serializeAccessTokens(a.accessTokens),RefreshToken:this.serializeRefreshTokens(a.refreshTokens),AppMetadata:this.serializeAppMetadata(a.appMetadata)}}}let n="https://login.microsoftonline.com/common/",o="common",p=".ciamlogin.com",q="offline_access",r="application/x-www-form-urlencoded;charset=utf-8",s="Not Available",t="http://169.254.169.254/metadata/instance/compute/location",u=["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],v=["openid","profile",q],w=[...v,"email"],x="Content-Type",y="Retry-After",z="X-AnchorMailbox",A="x-ms-request-id",B="x-ms-httpver",C={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},D="access_token",E={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},F={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},G="Generic",H="IdToken",I="AccessToken",J="AccessToken_With_AuthScheme",K="RefreshToken",L="appmetadata",M="authority-metadata",N="config",O="cache",P="network",Q="hardcoded_values",R="server-telemetry",S="Bearer",T="ssh-cert",U="throttling",V="base64",W="unexpected_error",X="post_request_failed";var Y=Object.freeze({__proto__:null,postRequestFailed:X,unexpectedError:W});let Z={[W]:"Unexpected error in authentication.",[X]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},$={unexpectedError:{code:W,desc:Z[W]},postRequestFailed:{code:X,desc:Z[X]}};class _ extends Error{constructor(a,b,c){super(b?`${a}: ${b}`:a),Object.setPrototypeOf(this,_.prototype),this.errorCode=a||"",this.errorMessage=b||"",this.subError=c||"",this.name="AuthError"}setCorrelationId(a){this.correlationId=a}}let aa="client_info_decoding_error",ab="client_info_empty_error",ac="token_parsing_error",ad="null_or_empty_token",ae="endpoints_resolution_error",af="network_error",ag="openid_config_error",ah="hash_not_deserialized",ai="invalid_state",aj="state_mismatch",ak="state_not_found",al="nonce_mismatch",am="auth_time_not_found",an="max_age_transpired",ao="multiple_matching_tokens",ap="multiple_matching_accounts",aq="multiple_matching_appMetadata",ar="request_cannot_be_made",as="cannot_remove_empty_scope",at="cannot_append_scopeset",au="empty_input_scopeset",av="device_code_polling_cancelled",aw="device_code_expired",ax="device_code_unknown_error",ay="no_account_in_silent_request",az="invalid_cache_record",aA="invalid_cache_environment",aB="no_account_found",aC="no_crypto_object",aD="unexpected_credential_type",aE="invalid_assertion",aF="invalid_client_credential",aG="token_refresh_required",aH="user_timeout_reached",aI="token_claims_cnf_required_for_signedjwt",aJ="authorization_code_missing_from_server_response",aK="binding_key_not_removed",aL="end_session_endpoint_not_supported",aM="key_id_missing",aN="no_network_connectivity",aO="user_canceled",aP="missing_tenant_id_error",aQ="method_not_implemented",aR="nested_app_auth_bridge_disabled",aS="platform_broker_error";var aT=Object.freeze({__proto__:null,authTimeNotFound:am,authorizationCodeMissingFromServerResponse:aJ,bindingKeyNotRemoved:aK,cannotAppendScopeSet:at,cannotRemoveEmptyScope:as,clientInfoDecodingError:aa,clientInfoEmptyError:ab,deviceCodeExpired:aw,deviceCodePollingCancelled:av,deviceCodeUnknownError:ax,emptyInputScopeSet:au,endSessionEndpointNotSupported:aL,endpointResolutionError:ae,hashNotDeserialized:ah,invalidAssertion:aE,invalidCacheEnvironment:aA,invalidCacheRecord:az,invalidClientCredential:aF,invalidState:ai,keyIdMissing:aM,maxAgeTranspired:an,methodNotImplemented:aQ,missingTenantIdError:aP,multipleMatchingAccounts:ap,multipleMatchingAppMetadata:aq,multipleMatchingTokens:ao,nestedAppAuthBridgeDisabled:aR,networkError:af,noAccountFound:aB,noAccountInSilentRequest:ay,noCryptoObject:aC,noNetworkConnectivity:aN,nonceMismatch:al,nullOrEmptyToken:ad,openIdConfigError:ag,platformBrokerError:aS,requestCannotBeMade:ar,stateMismatch:aj,stateNotFound:ak,tokenClaimsCnfRequiredForSignedJwt:aI,tokenParsingError:ac,tokenRefreshRequired:aG,unexpectedCredentialType:aD,userCanceled:aO,userTimeoutReached:aH});let aU={[aa]:"The client info could not be parsed/decoded correctly",[ab]:"The client info was empty",[ac]:"Token cannot be parsed",[ad]:"The token is null or empty",[ae]:"Endpoints cannot be resolved",[af]:"Network request failed",[ag]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ah]:"The hash parameters could not be deserialized",[ai]:"State was not the expected format",[aj]:"State mismatch error",[ak]:"State not found",[al]:"Nonce mismatch error",[am]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[an]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ao]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ap]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[aq]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ar]:"Token request cannot be made without authorization code or refresh token.",[as]:"Cannot remove null or empty scope from ScopeSet",[at]:"Cannot append ScopeSet",[au]:"Empty input ScopeSet cannot be processed",[av]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[aw]:"Device code is expired.",[ax]:"Device code stopped polling for unknown reasons.",[ay]:"Please pass an account object, silent flow is not supported without account information",[az]:"Cache record object was null or undefined.",[aA]:"Invalid environment when attempting to create cache entry",[aB]:"No account found in cache for given key.",[aC]:"No crypto object detected.",[aD]:"Unexpected credential type.",[aE]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[aF]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[aG]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[aH]:"User defined timeout for device code polling reached",[aI]:"Cannot generate a POP jwt if the token_claims are not populated",[aJ]:"Server response does not contain an authorization code to proceed",[aK]:"Could not remove the credential's binding key from storage.",[aL]:"The provided authority does not support logout",[aM]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[aN]:"No network connectivity. Check your internet connection.",[aO]:"User cancelled the flow.",[aP]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[aQ]:"This method has not been implemented",[aR]:"The nested app auth bridge is disabled",[aS]:"An error occurred in the native broker. See the platformBrokerError property for details."},aV={clientInfoDecodingError:{code:aa,desc:aU[aa]},clientInfoEmptyError:{code:ab,desc:aU[ab]},tokenParsingError:{code:ac,desc:aU[ac]},nullOrEmptyToken:{code:ad,desc:aU[ad]},endpointResolutionError:{code:ae,desc:aU[ae]},networkError:{code:af,desc:aU[af]},unableToGetOpenidConfigError:{code:ag,desc:aU[ag]},hashNotDeserialized:{code:ah,desc:aU[ah]},invalidStateError:{code:ai,desc:aU[ai]},stateMismatchError:{code:aj,desc:aU[aj]},stateNotFoundError:{code:ak,desc:aU[ak]},nonceMismatchError:{code:al,desc:aU[al]},authTimeNotFoundError:{code:am,desc:aU[am]},maxAgeTranspired:{code:an,desc:aU[an]},multipleMatchingTokens:{code:ao,desc:aU[ao]},multipleMatchingAccounts:{code:ap,desc:aU[ap]},multipleMatchingAppMetadata:{code:aq,desc:aU[aq]},tokenRequestCannotBeMade:{code:ar,desc:aU[ar]},removeEmptyScopeError:{code:as,desc:aU[as]},appendScopeSetError:{code:at,desc:aU[at]},emptyInputScopeSetError:{code:au,desc:aU[au]},DeviceCodePollingCancelled:{code:av,desc:aU[av]},DeviceCodeExpired:{code:aw,desc:aU[aw]},DeviceCodeUnknownError:{code:ax,desc:aU[ax]},NoAccountInSilentRequest:{code:ay,desc:aU[ay]},invalidCacheRecord:{code:az,desc:aU[az]},invalidCacheEnvironment:{code:aA,desc:aU[aA]},noAccountFound:{code:aB,desc:aU[aB]},noCryptoObj:{code:aC,desc:aU[aC]},unexpectedCredentialType:{code:aD,desc:aU[aD]},invalidAssertion:{code:aE,desc:aU[aE]},invalidClientCredential:{code:aF,desc:aU[aF]},tokenRefreshRequired:{code:aG,desc:aU[aG]},userTimeoutReached:{code:aH,desc:aU[aH]},tokenClaimsRequired:{code:aI,desc:aU[aI]},noAuthorizationCodeFromServer:{code:aJ,desc:aU[aJ]},bindingKeyNotRemovedError:{code:aK,desc:aU[aK]},logoutNotSupported:{code:aL,desc:aU[aL]},keyIdMissing:{code:aM,desc:aU[aM]},noNetworkConnectivity:{code:aN,desc:aU[aN]},userCanceledError:{code:aO,desc:aU[aO]},missingTenantIdError:{code:aP,desc:aU[aP]},nestedAppAuthBridgeDisabled:{code:aR,desc:aU[aR]},platformBrokerError:{code:aS,desc:aU[aS]}};class aW extends _{constructor(a,b){super(a,b?`${aU[a]}: ${b}`:aU[a]),this.name="ClientAuthError",Object.setPrototypeOf(this,aW.prototype)}}function aX(a,b){return new aW(a,b)}let aY={createNewGuid:()=>{throw aX(aQ)},base64Decode:()=>{throw aX(aQ)},base64Encode:()=>{throw aX(aQ)},base64UrlEncode:()=>{throw aX(aQ)},encodeKid:()=>{throw aX(aQ)},async getPublicKeyThumbprint(){throw aX(aQ)},async removeTokenBindingKey(){throw aX(aQ)},async clearKeystore(){throw aX(aQ)},async signJwt(){throw aX(aQ)},async hashString(){throw aX(aQ)}};c.LogLevel=void 0,(d=c.LogLevel||(c.LogLevel={}))[d.Error=0]="Error",d[d.Warning=1]="Warning",d[d.Info=2]="Info",d[d.Verbose=3]="Verbose",d[d.Trace=4]="Trace";class aZ{constructor(a,b,d){this.level=c.LogLevel.Info;const e=a||aZ.createDefaultLoggerOptions();this.localCallback=e.loggerCallback||(()=>{}),this.piiLoggingEnabled=e.piiLoggingEnabled||!1,this.level="number"==typeof e.logLevel?e.logLevel:c.LogLevel.Info,this.correlationId=e.correlationId||"",this.packageName=b||"",this.packageVersion=d||""}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:c.LogLevel.Info}}clone(a,b,c){return new aZ({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:c||this.correlationId},a,b)}logMessage(a,b){if(b.logLevel>this.level||!this.piiLoggingEnabled&&b.containsPii)return;let d=new Date().toUTCString(),e=`[${d}] : [${b.correlationId||this.correlationId||""}]`,f=`${e} : ${this.packageName}@${this.packageVersion} : ${c.LogLevel[b.logLevel]} - ${a}`;this.executeCallback(b.logLevel,f,b.containsPii||!1)}executeCallback(a,b,c){this.localCallback&&this.localCallback(a,b,c)}error(a,b){this.logMessage(a,{logLevel:c.LogLevel.Error,containsPii:!1,correlationId:b||""})}errorPii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Error,containsPii:!0,correlationId:b||""})}warning(a,b){this.logMessage(a,{logLevel:c.LogLevel.Warning,containsPii:!1,correlationId:b||""})}warningPii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Warning,containsPii:!0,correlationId:b||""})}info(a,b){this.logMessage(a,{logLevel:c.LogLevel.Info,containsPii:!1,correlationId:b||""})}infoPii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Info,containsPii:!0,correlationId:b||""})}verbose(a,b){this.logMessage(a,{logLevel:c.LogLevel.Verbose,containsPii:!1,correlationId:b||""})}verbosePii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Verbose,containsPii:!0,correlationId:b||""})}trace(a,b){this.logMessage(a,{logLevel:c.LogLevel.Trace,containsPii:!1,correlationId:b||""})}tracePii(a,b){this.logMessage(a,{logLevel:c.LogLevel.Trace,containsPii:!0,correlationId:b||""})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}let a$="@azure/msal-common",a_="15.13.3",a0={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},a1="redirect_uri_empty",a2="claims_request_parsing_error",a3="authority_uri_insecure",a4="url_parse_error",a5="empty_url_error",a6="empty_input_scopes_error",a7="invalid_claims",a8="token_request_empty",a9="logout_request_empty",ba="invalid_code_challenge_method",bb="pkce_params_missing",bc="invalid_cloud_discovery_metadata",bd="invalid_authority_metadata",be="untrusted_authority",bf="missing_ssh_jwk",bg="missing_ssh_kid",bh="missing_nonce_authentication_header",bi="invalid_authentication_header",bj="cannot_set_OIDCOptions",bk="cannot_allow_platform_broker",bl="authority_mismatch",bm="invalid_request_method_for_EAR",bn="invalid_authorize_post_body_parameters",bo="invalid_platform_broker_configuration";var bp=Object.freeze({__proto__:null,authorityMismatch:bl,authorityUriInsecure:a3,cannotAllowPlatformBroker:bk,cannotSetOIDCOptions:bj,claimsRequestParsingError:a2,emptyInputScopesError:a6,invalidAuthenticationHeader:bi,invalidAuthorityMetadata:bd,invalidAuthorizePostBodyParameters:bn,invalidClaims:a7,invalidCloudDiscoveryMetadata:bc,invalidCodeChallengeMethod:ba,invalidPlatformBrokerConfiguration:bo,invalidRequestMethodForEAR:bm,logoutRequestEmpty:a9,missingNonceAuthenticationHeader:bh,missingSshJwk:bf,missingSshKid:bg,pkceParamsMissing:bb,redirectUriEmpty:a1,tokenRequestEmpty:a8,untrustedAuthority:be,urlEmptyError:a5,urlParseError:a4});let bq={[a1]:"A redirect URI is required for all calls, and none has been set.",[a2]:"Could not parse the given claims request object.",[a3]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[a4]:"URL could not be parsed into appropriate segments.",[a5]:"URL was empty or null.",[a6]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[a7]:"Given claims parameter must be a stringified JSON object.",[a8]:"Token request was empty and not found in cache.",[a9]:"The logout request was null or undefined.",[ba]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[bb]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[bc]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[bd]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[be]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[bf]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[bg]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[bh]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[bi]:"Invalid authentication header provided",[bj]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[bk]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[bl]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[bn]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[bm]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[bo]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."},br={redirectUriNotSet:{code:a1,desc:bq[a1]},claimsRequestParsingError:{code:a2,desc:bq[a2]},authorityUriInsecure:{code:a3,desc:bq[a3]},urlParseError:{code:a4,desc:bq[a4]},urlEmptyError:{code:a5,desc:bq[a5]},emptyScopesError:{code:a6,desc:bq[a6]},invalidClaimsRequest:{code:a7,desc:bq[a7]},tokenRequestEmptyError:{code:a8,desc:bq[a8]},logoutRequestEmptyError:{code:a9,desc:bq[a9]},invalidCodeChallengeMethod:{code:ba,desc:bq[ba]},invalidCodeChallengeParams:{code:bb,desc:bq[bb]},invalidCloudDiscoveryMetadata:{code:bc,desc:bq[bc]},invalidAuthorityMetadata:{code:bd,desc:bq[bd]},untrustedAuthority:{code:be,desc:bq[be]},missingSshJwk:{code:bf,desc:bq[bf]},missingSshKid:{code:bg,desc:bq[bg]},missingNonceAuthenticationHeader:{code:bh,desc:bq[bh]},invalidAuthenticationHeader:{code:bi,desc:bq[bi]},cannotSetOIDCOptions:{code:bj,desc:bq[bj]},cannotAllowPlatformBroker:{code:bk,desc:bq[bk]},authorityMismatch:{code:bl,desc:bq[bl]},invalidAuthorizePostBodyParameters:{code:bn,desc:bq[bn]},invalidRequestMethodForEAR:{code:bm,desc:bq[bm]},invalidPlatformBrokerConfiguration:{code:bo,desc:bq[bo]}};class bs extends _{constructor(a){super(a,bq[a]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,bs.prototype)}}function bt(a){return new bs(a)}class bu{static isEmptyObj(a){if(a)try{let b=JSON.parse(a);return 0===Object.keys(b).length}catch(a){}return!0}static startsWith(a,b){return 0===a.indexOf(b)}static endsWith(a,b){return a.length>=b.length&&a.lastIndexOf(b)===a.length-b.length}static queryStringToObject(a){let b={},c=a.split("&"),d=a=>decodeURIComponent(a.replace(/\+/g," "));return c.forEach(a=>{if(a.trim()){let[c,e]=a.split(/=(.+)/g,2);c&&e&&(b[d(c)]=d(e))}}),b}static trimArrayEntries(a){return a.map(a=>a.trim())}static removeEmptyStringsFromArray(a){return a.filter(a=>!!a)}static jsonParseHelper(a){try{return JSON.parse(a)}catch(a){return null}}static matchPattern(a,b){return new RegExp(a.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(b)}}class bv{constructor(a){const b=a?bu.trimArrayEntries([...a]):[],c=b?bu.removeEmptyStringsFromArray(b):[];if(!c||!c.length)throw bt(a6);this.scopes=new Set,c.forEach(a=>this.scopes.add(a))}static fromString(a){return new bv((a||"").split(" "))}static createSearchScopes(a){let b=new bv(a&&a.length>0?a:[...v]);return b.containsOnlyOIDCScopes()?b.removeScope(q):b.removeOIDCScopes(),b}containsScope(a){let b=new bv(this.printScopesLowerCase().split(" "));return!!a&&b.scopes.has(a.toLowerCase())}containsScopeSet(a){return!!a&&!(a.scopes.size<=0)&&this.scopes.size>=a.scopes.size&&a.asArray().every(a=>this.containsScope(a))}containsOnlyOIDCScopes(){let a=0;return w.forEach(b=>{this.containsScope(b)&&(a+=1)}),this.scopes.size===a}appendScope(a){a&&this.scopes.add(a.trim())}appendScopes(a){try{a.forEach(a=>this.appendScope(a))}catch(a){throw aX(at)}}removeScope(a){if(!a)throw aX(as);this.scopes.delete(a.trim())}removeOIDCScopes(){w.forEach(a=>{this.scopes.delete(a)})}unionScopeSets(a){if(!a)throw aX(au);let b=new Set;return a.scopes.forEach(a=>b.add(a.toLowerCase())),this.scopes.forEach(a=>b.add(a.toLowerCase())),b}intersectingScopeSets(a){if(!a)throw aX(au);a.containsOnlyOIDCScopes()||a.removeOIDCScopes();let b=this.unionScopeSets(a),c=a.getScopeCount(),d=this.getScopeCount();return b.size<d+c}getScopeCount(){return this.scopes.size}asArray(){let a=[];return this.scopes.forEach(b=>a.push(b)),a}printScopes(){return this.scopes?this.asArray().join(" "):""}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function bw(a,b){if(!a)throw aX(ab);try{let c=b(a);return JSON.parse(c)}catch(a){throw aX(aa)}}function bx(a){if(!a)throw aX(aa);let b=a.split(".",2);return{uid:b[0],utid:b.length<2?"":b[1]}}function by(a,b){return!!a&&!!b&&a===b.split(".")[1]}function bz(a,b,c,d){if(!d)return{tenantId:c,localAccountId:b,username:"",isHomeTenant:by(c,a)};{let{oid:b,sub:c,tid:e,name:f,tfp:g,acr:h,preferred_username:i,upn:j,login_hint:k}=d,l=e||g||h||"";return{tenantId:l,localAccountId:b||c||"",name:f,username:i||j||"",loginHint:k,isHomeTenant:by(l,a)}}}function bA(a,b,c,d){let e=a;if(b){let{isHomeTenant:c,...d}=b;e={...a,...d}}if(c){let{isHomeTenant:b,...f}=bz(a.homeAccountId,a.localAccountId,a.tenantId,c);e={...e,...f,idTokenClaims:c,idToken:d}}return e}function bB(a){return a&&(a.tid||a.tfp||a.acr)||null}let bC={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};class bD{static getAccountInfo(a){return{homeAccountId:a.homeAccountId,environment:a.environment,tenantId:a.realm,username:a.username,localAccountId:a.localAccountId,loginHint:a.loginHint,name:a.name,nativeAccountId:a.nativeAccountId,authorityType:a.authorityType,tenantProfiles:new Map((a.tenantProfiles||[]).map(a=>[a.tenantId,a])),dataBoundary:a.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(a,b,c){let d,e=new bD;1===b.authorityType?e.authorityType="ADFS":b.protocolMode===bC.OIDC?e.authorityType=G:e.authorityType="MSSTS",a.clientInfo&&c&&(d=bw(a.clientInfo,c)).xms_tdbr&&(e.dataBoundary="EU"===d.xms_tdbr?"EU":"None"),e.clientInfo=a.clientInfo,e.homeAccountId=a.homeAccountId,e.nativeAccountId=a.nativeAccountId;let f=a.environment||b&&b.getPreferredCache();if(!f)throw aX(aA);e.environment=f,e.realm=d?.utid||bB(a.idTokenClaims)||"",e.localAccountId=d?.uid||a.idTokenClaims?.oid||a.idTokenClaims?.sub||"";let g=a.idTokenClaims?.preferred_username||a.idTokenClaims?.upn,h=a.idTokenClaims?.emails?a.idTokenClaims.emails[0]:null;if(e.username=g||h||"",e.loginHint=a.idTokenClaims?.login_hint,e.name=a.idTokenClaims?.name||"",e.cloudGraphHostName=a.cloudGraphHostName,e.msGraphHost=a.msGraphHost,a.tenantProfiles)e.tenantProfiles=a.tenantProfiles;else{let b=bz(a.homeAccountId,e.localAccountId,e.realm,a.idTokenClaims);e.tenantProfiles=[b]}return e}static createFromAccountInfo(a,b,c){let d=new bD;return d.authorityType=a.authorityType||G,d.homeAccountId=a.homeAccountId,d.localAccountId=a.localAccountId,d.nativeAccountId=a.nativeAccountId,d.realm=a.tenantId,d.environment=a.environment,d.username=a.username,d.name=a.name,d.loginHint=a.loginHint,d.cloudGraphHostName=b,d.msGraphHost=c,d.tenantProfiles=Array.from(a.tenantProfiles?.values()||[]),d.dataBoundary=a.dataBoundary,d}static generateHomeAccountId(a,b,c,d,e){if(1!==b&&2!==b){if(a)try{let b=bw(a,d.base64Decode);if(b.uid&&b.utid)return`${b.uid}.${b.utid}`}catch(a){}c.warning("No client info in response")}return e?.sub||""}static isAccountEntity(a){return!!a&&a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("realm")&&a.hasOwnProperty("localAccountId")&&a.hasOwnProperty("username")&&a.hasOwnProperty("authorityType")}static accountInfoIsEqual(a,b,c){if(!a||!b)return!1;let d=!0;if(c){let c=a.idTokenClaims||{},e=b.idTokenClaims||{};d=c.iat===e.iat&&c.nonce===e.nonce}return a.homeAccountId===b.homeAccountId&&a.localAccountId===b.localAccountId&&a.username===b.username&&a.tenantId===b.tenantId&&a.loginHint===b.loginHint&&a.environment===b.environment&&a.nativeAccountId===b.nativeAccountId&&d}}function bE(a,b){let c=function(a){if(!a)throw aX(ad);let b=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(a);if(!b||b.length<4)throw aX(ac);return b[2]}(a);try{let a=b(c);return JSON.parse(a)}catch(a){throw aX(ac)}}function bF(a,b){if(0===b||Date.now()-3e5>a+b)throw aX(an)}function bG(a){if(!a||0>a.indexOf("="))return null;try{let b=a.startsWith("#/")?a.substring(2):a.startsWith("#")||a.startsWith("?")?a.substring(1):a,c=Object.fromEntries(new URLSearchParams(b));if(c.code||c.ear_jwe||c.error||c.error_description||c.state)return c}catch(a){throw aX(ah)}return null}function bH(a,b=!0,c){let d=[];return a.forEach((a,e)=>{!b&&c&&e in c?d.push(`${e}=${a}`):d.push(`${e}=${encodeURIComponent(a)}`)}),d.join("&")}class bI{get urlString(){return this._urlString}constructor(a){if(this._urlString=a,!this._urlString)throw bt(a5);a.includes("#")||(this._urlString=bI.canonicalizeUri(a))}static canonicalizeUri(a){if(a){let b=a.toLowerCase();return bu.endsWith(b,"?")?b=b.slice(0,-1):bu.endsWith(b,"?/")&&(b=b.slice(0,-2)),bu.endsWith(b,"/")||(b+="/"),b}return a}validateAsUri(){let a;try{a=this.getUrlComponents()}catch(a){throw bt(a4)}if(!a.HostNameAndPort||!a.PathSegments)throw bt(a4);if(!a.Protocol||"https:"!==a.Protocol.toLowerCase())throw bt(a3)}static appendQueryString(a,b){return b?0>a.indexOf("?")?`${a}?${b}`:`${a}&${b}`:a}static removeHashFromUrl(a){return bI.canonicalizeUri(a.split("#")[0])}replaceTenantPath(a){let b=this.getUrlComponents(),c=b.PathSegments;return a&&0!==c.length&&(c[0]===C.COMMON||c[0]===C.ORGANIZATIONS)&&(c[0]=a),bI.constructAuthorityUriFromObject(b)}getUrlComponents(){let a=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),b=this.urlString.match(a);if(!b)throw bt(a4);let c={Protocol:b[1],HostNameAndPort:b[4],AbsolutePath:b[5],QueryString:b[7]},d=c.AbsolutePath.split("/");return c.PathSegments=d=d.filter(a=>a&&a.length>0),c.QueryString&&c.QueryString.endsWith("/")&&(c.QueryString=c.QueryString.substring(0,c.QueryString.length-1)),c}static getDomainFromUrl(a){let b=RegExp("^([^:/?#]+://)?([^/?#]*)"),c=a.match(b);if(!c)throw bt(a4);return c[2]}static getAbsoluteUrl(a,b){if("/"===a[0]){let c=new bI(b).getUrlComponents();return c.Protocol+"//"+c.HostNameAndPort+a}return a}static constructAuthorityUriFromObject(a){return new bI(a.Protocol+"//"+a.HostNameAndPort+"/"+a.PathSegments.join("/"))}static hashContainsKnownProperties(a){return!!bG(a)}}let bJ={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},bK=[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}],bL=new Set;function bM(a,b,c,d){if(d?.trace(`getAliasesFromMetadata called with source: ${c}`),a&&b){let e=bN(b,a);if(e)return d?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${c}, returning aliases`),e.aliases;d?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${c}`)}return null}function bN(a,b){for(let c=0;c<a.length;c++){let d=a[c];if(d.aliases.includes(b))return d}return null}bK.forEach(a=>{a.aliases.forEach(a=>{bL.add(a)})});let bO="cache_quota_exceeded",bP="cache_error_unknown",bQ={[bO]:"Exceeded cache storage capacity.",[bP]:"Unexpected error occurred when using cache storage."};class bR extends _{constructor(a,b){const c=b||(bQ[a]?bQ[a]:bQ[bP]);super(`${a}: ${c}`),Object.setPrototypeOf(this,bR.prototype),this.name="CacheError",this.errorCode=a,this.errorMessage=c}}class bS{constructor(a,b,c,d,e){this.clientId=a,this.cryptoImpl=b,this.commonLogger=c.clone(a$,a_),this.staticAuthorityOptions=e,this.performanceClient=d}getAllAccounts(a,b){return this.buildTenantProfiles(this.getAccountsFilteredBy(a,b),b,a)}getAccountInfoFilteredBy(a,b){if(0===Object.keys(a).length||Object.values(a).every(a=>!a))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let c=this.getAllAccounts(a,b);return c.length>1?c.sort(a=>a.idTokenClaims?-1:1)[0]:1===c.length?c[0]:null}getBaseAccountInfo(a,b){let c=this.getAccountsFilteredBy(a,b);return c.length>0?bD.getAccountInfo(c[0]):null}buildTenantProfiles(a,b,c){return a.flatMap(a=>this.getTenantProfilesFromAccountEntity(a,b,c?.tenantId,c))}getTenantedAccountInfoByFilter(a,b,c,d,e){let f;if(e&&!this.tenantProfileMatchesFilter(c,e))return null;let g=this.getIdToken(a,d,b,c.tenantId);return g&&(f=bE(g.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,e))?null:bA(a,c,f,g?.secret)}getTenantProfilesFromAccountEntity(a,b,c,d){let e=bD.getAccountInfo(a),f=e.tenantProfiles||new Map,g=this.getTokenKeys();if(c){let a=f.get(c);if(!a)return[];f=new Map([[c,a]])}let h=[];return f.forEach(a=>{let c=this.getTenantedAccountInfoByFilter(e,g,a,b,d);c&&h.push(c)}),h}tenantProfileMatchesFilter(a,b){return(!b.localAccountId||!!this.matchLocalAccountIdFromTenantProfile(a,b.localAccountId))&&(!b.name||a.name===b.name)&&(void 0===b.isHomeTenant||a.isHomeTenant===b.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(a,b){return(!b||(!b.localAccountId||!!this.matchLocalAccountIdFromTokenClaims(a,b.localAccountId))&&(!b.loginHint||!!this.matchLoginHintFromTokenClaims(a,b.loginHint))&&(!b.username||!!this.matchUsername(a.preferred_username,b.username))&&(!b.name||!!this.matchName(a,b.name))&&(!b.sid||!!this.matchSid(a,b.sid)))&&!0}async saveCacheRecord(a,b,c,d){if(!a)throw aX(az);try{a.account&&await this.setAccount(a.account,b,c),a.idToken&&d?.idToken!==!1&&await this.setIdTokenCredential(a.idToken,b,c),a.accessToken&&d?.accessToken!==!1&&await this.saveAccessToken(a.accessToken,b,c),a.refreshToken&&d?.refreshToken!==!1&&await this.setRefreshTokenCredential(a.refreshToken,b,c),a.appMetadata&&this.setAppMetadata(a.appMetadata,b)}catch(a){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),a instanceof _)throw a;throw a instanceof Error?"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name||a.message.includes("exceeded the quota")?new bR(bO):new bR(a.name,a.message):new bR(bP)}}async saveAccessToken(a,b,c){let d={clientId:a.clientId,credentialType:a.credentialType,environment:a.environment,homeAccountId:a.homeAccountId,realm:a.realm,tokenType:a.tokenType,requestedClaimsHash:a.requestedClaimsHash},e=this.getTokenKeys(),f=bv.fromString(a.target);e.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,d,!1))return;let c=this.getAccessTokenCredential(a,b);c&&this.credentialMatchesFilter(c,d)&&bv.fromString(c.target).intersectingScopeSets(f)&&this.removeAccessToken(a,b)}),await this.setAccessTokenCredential(a,b,c)}getAccountsFilteredBy(a,b){let c=this.getAccountKeys(),d=[];return c.forEach(c=>{let e=this.getAccount(c,b);if(!e||a.homeAccountId&&!this.matchHomeAccountId(e,a.homeAccountId)||a.username&&!this.matchUsername(e.username,a.username)||a.environment&&!this.matchEnvironment(e,a.environment)||a.realm&&!this.matchRealm(e,a.realm)||a.nativeAccountId&&!this.matchNativeAccountId(e,a.nativeAccountId)||a.authorityType&&!this.matchAuthorityType(e,a.authorityType))return;let f={localAccountId:a?.localAccountId,name:a?.name},g=e.tenantProfiles?.filter(a=>this.tenantProfileMatchesFilter(a,f));g&&0===g.length||d.push(e)}),d}credentialMatchesFilter(a,b){return(!b.clientId||!!this.matchClientId(a,b.clientId))&&(!b.userAssertionHash||!!this.matchUserAssertionHash(a,b.userAssertionHash))&&("string"!=typeof b.homeAccountId||!!this.matchHomeAccountId(a,b.homeAccountId))&&(!b.environment||!!this.matchEnvironment(a,b.environment))&&(!b.realm||!!this.matchRealm(a,b.realm))&&(!b.credentialType||!!this.matchCredentialType(a,b.credentialType))&&(!b.familyId||!!this.matchFamilyId(a,b.familyId))&&(!b.target||!!this.matchTarget(a,b.target))&&(!b.requestedClaimsHash&&!a.requestedClaimsHash||a.requestedClaimsHash===b.requestedClaimsHash)&&(a.credentialType!==J||(!b.tokenType||!!this.matchTokenType(a,b.tokenType))&&(b.tokenType!==T||!b.keyId||!!this.matchKeyId(a,b.keyId)))&&!0}getAppMetadataFilteredBy(a){let b=this.getKeys(),c={};return b.forEach(b=>{if(!this.isAppMetadata(b))return;let d=this.getAppMetadata(b);!d||a.environment&&!this.matchEnvironment(d,a.environment)||(!a.clientId||this.matchClientId(d,a.clientId))&&(c[b]=d)}),c}getAuthorityMetadataByAlias(a){let b=this.getAuthorityMetadataKeys(),c=null;return b.forEach(b=>{if(!this.isAuthorityMetadata(b)||-1===b.indexOf(this.clientId))return;let d=this.getAuthorityMetadata(b);d&&-1!==d.aliases.indexOf(a)&&(c=d)}),c}removeAllAccounts(a){this.getAllAccounts({},a).forEach(b=>{this.removeAccount(b,a)})}removeAccount(a,b){this.removeAccountContext(a,b),this.getAccountKeys().filter(b=>b.includes(a.homeAccountId)&&b.includes(a.environment)).forEach(a=>{this.removeItem(a,b),this.performanceClient.incrementFields({accountsRemoved:1},b)})}removeAccountContext(a,b){let c=this.getTokenKeys(),d=b=>b.includes(a.homeAccountId)&&b.includes(a.environment);c.idToken.filter(d).forEach(a=>{this.removeIdToken(a,b)}),c.accessToken.filter(d).forEach(a=>{this.removeAccessToken(a,b)}),c.refreshToken.filter(d).forEach(a=>{this.removeRefreshToken(a,b)})}removeAccessToken(a,b){let c=this.getAccessTokenCredential(a,b);if(this.removeItem(a,b),this.performanceClient.incrementFields({accessTokensRemoved:1},b),!c||c.credentialType.toLowerCase()!==J.toLowerCase()||"pop"!==c.tokenType)return;let d=c.keyId;d&&this.cryptoImpl.removeTokenBindingKey(d).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${d}`,b),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},b)})}removeAppMetadata(a){return this.getKeys().forEach(b=>{this.isAppMetadata(b)&&this.removeItem(b,a)}),!0}getIdToken(a,b,c,d,e){this.commonLogger.trace("CacheManager - getIdToken called");let f={homeAccountId:a.homeAccountId,environment:a.environment,credentialType:H,clientId:this.clientId,realm:d},g=this.getIdTokensByFilter(f,b,c),h=g.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(h>1){let c=g;if(!d){let b=new Map;g.forEach((c,d)=>{c.realm===a.tenantId&&b.set(d,c)});let d=b.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),g.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),b.values().next().value;c=b}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((a,c)=>{this.removeIdToken(c,b)}),e&&b&&e.addFields({multiMatchedID:g.size},b),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),g.values().next().value}getIdTokensByFilter(a,b,c){let d=c&&c.idToken||this.getTokenKeys().idToken,e=new Map;return d.forEach(c=>{if(!this.idTokenKeyMatchesFilter(c,{clientId:this.clientId,...a}))return;let d=this.getIdTokenCredential(c,b);d&&this.credentialMatchesFilter(d,a)&&e.set(c,d)}),e}idTokenKeyMatchesFilter(a,b){let c=a.toLowerCase();return(!b.clientId||-1!==c.indexOf(b.clientId.toLowerCase()))&&(!b.homeAccountId||-1!==c.indexOf(b.homeAccountId.toLowerCase()))}removeIdToken(a,b){this.removeItem(a,b)}removeRefreshToken(a,b){this.removeItem(a,b)}getAccessToken(a,b,c,d){let e=b.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",e);let f=bv.createSearchScopes(b.scopes),g=b.authenticationScheme||S,h=g.toLowerCase()!==S.toLowerCase()?J:I,i={homeAccountId:a.homeAccountId,environment:a.environment,credentialType:h,clientId:this.clientId,realm:d||a.tenantId,target:f,tokenType:g,keyId:b.sshKid,requestedClaimsHash:b.requestedClaimsHash},j=c&&c.accessToken||this.getTokenKeys().accessToken,k=[];j.forEach(a=>{if(this.accessTokenKeyMatchesFilter(a,i,!0)){let b=this.getAccessTokenCredential(a,e);b&&this.credentialMatchesFilter(b,i)&&k.push(b)}});let l=k.length;return l<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",e),null):l>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",e),k.forEach(a=>{this.removeAccessToken(this.generateCredentialKey(a),e)}),this.performanceClient.addFields({multiMatchedAT:k.length},e),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",e),k[0])}accessTokenKeyMatchesFilter(a,b,c){let d=a.toLowerCase();if(b.clientId&&-1===d.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===d.indexOf(b.homeAccountId.toLowerCase())||b.realm&&-1===d.indexOf(b.realm.toLowerCase())||b.requestedClaimsHash&&-1===d.indexOf(b.requestedClaimsHash.toLowerCase()))return!1;if(b.target){let a=b.target.asArray();for(let b=0;b<a.length;b++)if(c&&!d.includes(a[b].toLowerCase()))return!1;else if(!c&&d.includes(a[b].toLowerCase()))break}return!0}getAccessTokensByFilter(a,b){let c=this.getTokenKeys(),d=[];return c.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,a,!0))return;let e=this.getAccessTokenCredential(c,b);e&&this.credentialMatchesFilter(e,a)&&d.push(e)}),d}getRefreshToken(a,b,c,d,e){this.commonLogger.trace("CacheManager - getRefreshToken called");let f={homeAccountId:a.homeAccountId,environment:a.environment,credentialType:K,clientId:this.clientId,familyId:b?"1":void 0},g=d&&d.refreshToken||this.getTokenKeys().refreshToken,h=[];g.forEach(a=>{if(this.refreshTokenKeyMatchesFilter(a,f)){let b=this.getRefreshTokenCredential(a,c);b&&this.credentialMatchesFilter(b,f)&&h.push(b)}});let i=h.length;return i<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(i>1&&e&&c&&e.addFields({multiMatchedRT:i},c),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),h[0])}refreshTokenKeyMatchesFilter(a,b){let c=a.toLowerCase();return(!b.familyId||-1!==c.indexOf(b.familyId.toLowerCase()))&&(!!b.familyId||!b.clientId||-1!==c.indexOf(b.clientId.toLowerCase()))&&(!b.homeAccountId||-1!==c.indexOf(b.homeAccountId.toLowerCase()))}readAppMetadataFromCache(a){let b={environment:a,clientId:this.clientId},c=this.getAppMetadataFilteredBy(b),d=Object.keys(c).map(a=>c[a]),e=d.length;if(e<1)return null;if(e>1)throw aX(aq);return d[0]}isAppMetadataFOCI(a){let b=this.readAppMetadataFromCache(a);return!!(b&&"1"===b.familyId)}matchHomeAccountId(a,b){return"string"==typeof a.homeAccountId&&b===a.homeAccountId}matchLocalAccountIdFromTokenClaims(a,b){return b===(a.oid||a.sub)}matchLocalAccountIdFromTenantProfile(a,b){return a.localAccountId===b}matchName(a,b){return b.toLowerCase()===a.name?.toLowerCase()}matchUsername(a,b){return!!(a&&"string"==typeof a&&b?.toLowerCase()===a.toLowerCase())}matchUserAssertionHash(a,b){return!!(a.userAssertionHash&&b===a.userAssertionHash)}matchEnvironment(a,b){if(this.staticAuthorityOptions){let c=function(a,b){let c,d=a.canonicalAuthority;if(d){let e=new bI(d).getUrlComponents().HostNameAndPort;c=bM(e,a.cloudDiscoveryMetadata?.metadata,N,b)||bM(e,bK,Q,b)||a.knownAuthorities}return c||[]}(this.staticAuthorityOptions,this.commonLogger);if(c.includes(b)&&c.includes(a.environment))return!0}let c=this.getAuthorityMetadataByAlias(b);return!!(c&&c.aliases.indexOf(a.environment)>-1)}matchCredentialType(a,b){return a.credentialType&&b.toLowerCase()===a.credentialType.toLowerCase()}matchClientId(a,b){return!!(a.clientId&&b===a.clientId)}matchFamilyId(a,b){return!!(a.familyId&&b===a.familyId)}matchRealm(a,b){return a.realm?.toLowerCase()===b.toLowerCase()}matchNativeAccountId(a,b){return!!(a.nativeAccountId&&b===a.nativeAccountId)}matchLoginHintFromTokenClaims(a,b){return a.login_hint===b||a.preferred_username===b||a.upn===b}matchSid(a,b){return a.sid===b}matchAuthorityType(a,b){return!!(a.authorityType&&b.toLowerCase()===a.authorityType.toLowerCase())}matchTarget(a,b){return(a.credentialType===I||a.credentialType===J)&&!!a.target&&bv.fromString(a.target).containsScopeSet(b)}matchTokenType(a,b){return!!(a.tokenType&&a.tokenType===b)}matchKeyId(a,b){return!!(a.keyId&&a.keyId===b)}isAppMetadata(a){return -1!==a.indexOf(L)}isAuthorityMetadata(a){return -1!==a.indexOf(M)}generateAuthorityMetadataCacheKey(a){return`${M}-${this.clientId}-${a}`}static toObject(a,b){for(let c in b)a[c]=b[c];return a}}class bT extends bS{async setAccount(){throw aX(aQ)}getAccount(){throw aX(aQ)}async setIdTokenCredential(){throw aX(aQ)}getIdTokenCredential(){throw aX(aQ)}async setAccessTokenCredential(){throw aX(aQ)}getAccessTokenCredential(){throw aX(aQ)}async setRefreshTokenCredential(){throw aX(aQ)}getRefreshTokenCredential(){throw aX(aQ)}setAppMetadata(){throw aX(aQ)}getAppMetadata(){throw aX(aQ)}setServerTelemetry(){throw aX(aQ)}getServerTelemetry(){throw aX(aQ)}setAuthorityMetadata(){throw aX(aQ)}getAuthorityMetadata(){throw aX(aQ)}getAuthorityMetadataKeys(){throw aX(aQ)}setThrottlingCache(){throw aX(aQ)}getThrottlingCache(){throw aX(aQ)}removeItem(){throw aX(aQ)}getKeys(){throw aX(aQ)}getAccountKeys(){throw aX(aQ)}getTokenKeys(){throw aX(aQ)}generateCredentialKey(){throw aX(aQ)}generateAccountKey(){throw aX(aQ)}}let bU="refreshTokenClientExecutePostToTokenEndpoint",bV="authorizationCodeClientExecutePostToTokenEndpoint",bW="refreshTokenClientExecuteTokenRequest",bX="refreshTokenClientAcquireToken",bY="refreshTokenClientAcquireTokenWithCachedRefreshToken",bZ="refreshTokenClientCreateTokenRequestBody",b$="silentFlowClientGenerateResultFromCacheRecord",b_="authClientExecuteTokenRequest",b0="authClientCreateTokenRequestBody",b1="popTokenGenerateCnf",b2="handleServerTokenResponse",b3="authorityResolveEndpointsAsync",b4="authorityGetCloudDiscoveryMetadataFromNetwork",b5="authorityUpdateCloudDiscoveryMetadata",b6="authorityGetEndpointMetadataFromNetwork",b7="authorityUpdateEndpointMetadata",b8="authorityUpdateMetadataWithRegionalInformation",b9="regionDiscoveryDetectRegion",ca="regionDiscoveryGetRegionFromIMDS",cb="regionDiscoveryGetCurrentVersion";class cc{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class cd{generateId(){return"callback-id"}startMeasurement(a,b){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:a,startTimeMs:Date.now(),correlationId:b||""},measurement:new cc}}startPerformanceMeasurement(){return new cc}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}let ce={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},cf={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:c.LogLevel.Info,correlationId:""},cg={claimsBasedCachingEnabled:!1},ch={async sendGetRequestAsync(){throw aX(aQ)},async sendPostRequestAsync(){throw aX(aQ)}},ci={sku:"msal.js.common",version:a_,cpu:"",os:""},cj={clientSecret:"",clientAssertion:void 0},ck={azureCloudInstance:a0.None,tenant:`${o}`},cl={application:{appName:"",appVersion:""}};function cm(a){return a.authOptions.authority.options.protocolMode===bC.OIDC}let cn="home_account_id",co="client_id",cp="redirect_uri",cq="token_type",cr="req_cnf",cs="return_spa_code",ct="x-client-xtra-sku",cu="brk_client_id",cv="brk_redirect_uri",cw="instance_aware";function cx(a,b,c){if(!b)return;let d=a.get(co);d&&a.has(cu)&&c?.addFields({embeddedClientId:d,embeddedRedirectUri:a.get(cp)},b)}function cy(a,b){a.set("response_type",b)}function cz(a,b,c=!0,d=v){!c||d.includes("openid")||b.includes("openid")||d.push("openid");let e=new bv(c?[...b||[],...d]:b||[]);a.set("scope",e.printScopes())}function cA(a,b){a.set(co,b)}function cB(a,b){a.set("login_hint",b)}function cC(a,b){a.set(z,`UPN:${b}`)}function cD(a,b){a.set(z,`Oid:${b.uid}@${b.utid}`)}function cE(a,b){a.set("sid",b)}function cF(a,b,c){let d=function(a,b){let c;if(a)try{c=JSON.parse(a)}catch(a){throw bt(a7)}else c={};return b&&b.length>0&&(c.hasOwnProperty(D)||(c[D]={}),c[D].xms_cc={values:b}),JSON.stringify(c)}(b,c);try{JSON.parse(d)}catch(a){throw bt(a7)}a.set("claims",d)}function cG(a,b){a.set("client-request-id",b)}function cH(a,b){a.set("x-client-SKU",b.sku),a.set("x-client-VER",b.version),b.os&&a.set("x-client-OS",b.os),b.cpu&&a.set("x-client-CPU",b.cpu)}function cI(a,b){b?.appName&&a.set("x-app-name",b.appName),b?.appVersion&&a.set("x-app-ver",b.appVersion)}function cJ(a,b){b&&a.set("state",b)}function cK(a,b){a.set("client_secret",b)}function cL(a,b){b&&a.set("client_assertion",b)}function cM(a,b){b&&a.set("client_assertion_type",b)}function cN(a,b){a.set("grant_type",b)}function cO(a){a.set("client_info","1")}function cP(a){a.has(cw)||a.set(cw,"true")}function cQ(a,b){Object.entries(b).forEach(([b,c])=>{!a.has(b)&&c&&a.set(b,c)})}function cR(a,b){b&&(a.set(cq,"pop"),a.set(cr,b))}function cS(a,b){b&&(a.set(cq,T),a.set(cr,b))}function cT(a,b){a.set("x-client-current-telemetry",b.generateCurrentRequestHeaderValue()),a.set("x-client-last-telemetry",b.generateLastRequestHeaderValue())}function cU(a){a.set("x-ms-lib-capability","retry-after, h429")}function cV(a,b,c){a.has(cu)||a.set(cu,b),a.has(cv)||a.set(cv,c)}let cW=(a,b,c,d,e)=>(...f)=>{c.trace(`Executing function ${b}`);let g=d?.startMeasurement(b,e);return e&&d?.incrementFields({[b+"CallCount"]:1},e),d?.setPreQueueTime(b,e),a(...f).then(a=>(c.trace(`Returning result from ${b}`),g?.end({success:!0}),a)).catch(a=>{c.trace(`Error occurred in ${b}`);try{c.trace(JSON.stringify(a))}catch(a){c.trace("Unable to print error message.")}throw g?.end({success:!1},a),a})};class cX{constructor(a,b,c,d){this.networkInterface=a,this.logger=b,this.performanceClient=c,this.correlationId=d}async detectRegion(a,b){this.performanceClient?.addQueueMeasurement(b9,this.correlationId);let c=a;if(c)b.region_source="3";else{let a=cX.IMDS_OPTIONS;try{let d=await cW(this.getRegionFromIMDS.bind(this),ca,this.logger,this.performanceClient,this.correlationId)("2020-06-01",a);if(200===d.status&&(c=d.body,b.region_source="4"),400===d.status){let d=await cW(this.getCurrentVersion.bind(this),cb,this.logger,this.performanceClient,this.correlationId)(a);if(!d)return b.region_source="1",null;let e=await cW(this.getRegionFromIMDS.bind(this),ca,this.logger,this.performanceClient,this.correlationId)(d,a);200===e.status&&(c=e.body,b.region_source="4")}}catch(a){return b.region_source="1",null}}return c||(b.region_source="1"),c||null}async getRegionFromIMDS(a,b){return this.performanceClient?.addQueueMeasurement(ca,this.correlationId),this.networkInterface.sendGetRequestAsync(`${t}?api-version=${a}&format=text`,b,2e3)}async getCurrentVersion(a){this.performanceClient?.addQueueMeasurement(cb,this.correlationId);try{let b=await this.networkInterface.sendGetRequestAsync(`${t}?format=json`,a);if(400===b.status&&b.body&&b.body["newest-versions"]&&b.body["newest-versions"].length>0)return b.body["newest-versions"][0];return null}catch(a){return null}}}function cY(){return Math.round(new Date().getTime()/1e3)}function cZ(a){return a?new Date(1e3*Number(a)):new Date}function c$(a,b){let c=Number(a)||0;return cY()+b>c}function c_(a){return a.hasOwnProperty("homeAccountId")&&a.hasOwnProperty("environment")&&a.hasOwnProperty("credentialType")&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("secret")}function c0(a){return!!a&&c_(a)&&a.hasOwnProperty("realm")&&a.hasOwnProperty("target")&&(a.credentialType===I||a.credentialType===J)}function c1(a){return!!a&&c_(a)&&a.hasOwnProperty("realm")&&a.credentialType===H}function c2(a){return!!a&&c_(a)&&a.credentialType===K}function c3(a,b){return!!b&&0===a.indexOf(L)&&b.hasOwnProperty("clientId")&&b.hasOwnProperty("environment")}cX.IMDS_OPTIONS={headers:{Metadata:"true"}};function c4(a,b,c){a.authorization_endpoint=b.authorization_endpoint,a.token_endpoint=b.token_endpoint,a.end_session_endpoint=b.end_session_endpoint,a.issuer=b.issuer,a.endpointsFromNetwork=c,a.jwks_uri=b.jwks_uri}function c5(a,b,c){a.aliases=b.aliases,a.preferred_cache=b.preferred_cache,a.preferred_network=b.preferred_network,a.aliasesFromNetwork=c}function c6(a){return a.expiresAt<=cY()}class c7{constructor(a,b,c,d,e,f,g,h){this.canonicalAuthority=a,this._canonicalAuthority.validateAsUri(),this.networkInterface=b,this.cacheManager=c,this.authorityOptions=d,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=e,this.performanceClient=g,this.correlationId=f,this.managedIdentity=h||!1,this.regionDiscovery=new cX(b,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(a){if(a.HostNameAndPort.endsWith(p))return 3;let b=a.PathSegments;if(b.length)switch(b[0].toLowerCase()){case"adfs":return 1;case"dstsv2":return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(a){this._canonicalAuthority=new bI(a),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw aX(ae)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw aX(ae)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw aX(ae)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw aX(aL);return this.replacePath(this.metadata.end_session_endpoint)}throw aX(ae)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw aX(ae)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw aX(ae)}canReplaceTenant(a){return 1===a.PathSegments.length&&!c7.reservedTenantDomains.has(a.PathSegments[0])&&0===this.getAuthorityType(a)&&this.protocolMode!==bC.OIDC}replaceTenant(a){return a.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(a){let b=a,c=new bI(this.metadata.canonical_authority).getUrlComponents(),d=c.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,e)=>{let f=d[e];if(0===e&&this.canReplaceTenant(c)){let a=new bI(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];f!==a&&(this.logger.verbose(`Replacing tenant domain name ${f} with id ${a}`),f=a)}a!==f&&(b=b.replace(`/${f}/`,`/${a}/`))}),this.replaceTenant(b)}get defaultOpenIdConfigurationEndpoint(){let a=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode===bC.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(a)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(b3,this.correlationId);let a=this.getCurrentMetadataEntity(),b=await cW(this.updateCloudDiscoveryMetadata.bind(this),b5,this.logger,this.performanceClient,this.correlationId)(a);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,a.preferred_network);let c=await cW(this.updateEndpointMetadata.bind(this),b7,this.logger,this.performanceClient,this.correlationId)(a);this.updateCachedMetadata(a,b,{source:c}),this.performanceClient?.addFields({cloudDiscoverySource:b,authorityEndpointSource:c},this.correlationId)}getCurrentMetadataEntity(){let a=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return a||(a={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:cY()+86400,jwks_uri:""}),a}updateCachedMetadata(a,b,c){b!==O&&c?.source!==O&&(a.expiresAt=cY()+86400,a.canonical_authority=this.canonicalAuthority);let d=this.cacheManager.generateAuthorityMetadataCacheKey(a.preferred_cache);this.cacheManager.setAuthorityMetadata(d,a),this.metadata=a}async updateEndpointMetadata(a){this.performanceClient?.addQueueMeasurement(b7,this.correlationId);let b=this.updateEndpointMetadataFromLocalSources(a);if(b)return b.source===Q&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&b.metadata&&(c4(a,await cW(this.updateMetadataWithRegionalInformation.bind(this),b8,this.logger,this.performanceClient,this.correlationId)(b.metadata),!1),a.canonical_authority=this.canonicalAuthority),b.source;let c=await cW(this.getEndpointMetadataFromNetwork.bind(this),b6,this.logger,this.performanceClient,this.correlationId)();if(c)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(c=await cW(this.updateMetadataWithRegionalInformation.bind(this),b8,this.logger,this.performanceClient,this.correlationId)(c)),c4(a,c,!0),P;throw aX(ag,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(a){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let b=this.getEndpointMetadataFromConfig();if(b)return this.logger.verbose("Found endpoint metadata in authority configuration"),c4(a,b,!1),{source:N};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let b=this.getEndpointMetadataFromHardcodedValues();if(b)return c4(a,b,!1),{source:Q,metadata:b};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let c=c6(a);return this.isAuthoritySameType(a)&&a.endpointsFromNetwork&&!c?(this.logger.verbose("Found endpoint metadata in the cache."),{source:O}):(c&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(a){return new bI(a.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(a){throw bt(bd)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(b6,this.correlationId);let a=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${a}`);try{var b;let c=await this.networkInterface.sendGetRequestAsync(a,{});if((b=c.body).hasOwnProperty("authorization_endpoint")&&b.hasOwnProperty("token_endpoint")&&b.hasOwnProperty("issuer")&&b.hasOwnProperty("jwks_uri"))return c.body;return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(a){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${a}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in bJ?bJ[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(a){this.performanceClient?.addQueueMeasurement(b8,this.correlationId);let b=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(b){if("TryAutoDetect"!==b)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=b,c7.replaceWithRegionalInformation(a,b);let c=await cW(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),b9,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(c)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=c,c7.replaceWithRegionalInformation(a,c);this.regionDiscoveryMetadata.region_outcome="5"}return a}async updateCloudDiscoveryMetadata(a){this.performanceClient?.addQueueMeasurement(b5,this.correlationId);let b=this.updateCloudDiscoveryMetadataFromLocalSources(a);if(b)return b;let c=await cW(this.getCloudDiscoveryMetadataFromNetwork.bind(this),b4,this.logger,this.performanceClient,this.correlationId)();if(c)return c5(a,c,!0),P;throw bt(be)}updateCloudDiscoveryMetadataFromLocalSources(a){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||"N/A"}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||"N/A"}`),this.logger.verbosePii(`Canonical Authority: ${a.canonical_authority||"N/A"}`);let b=this.getCloudDiscoveryMetadataFromConfig();if(b)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),c5(a,b,!1),N;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{var c;let b=(c=this.hostnameAndPort,bN(bK,c));if(b)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),c5(a,b,!1),Q;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let d=c6(a);return this.isAuthoritySameType(a)&&a.aliasesFromNetwork&&!d?(this.logger.verbose("Found cloud discovery metadata in the cache."),O):(d&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),c7.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let a=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),b=bN(a.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),b)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),b;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(a){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),bt(bc)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),c7.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(b4,this.correlationId);let a=`https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=${this.canonicalAuthority}oauth2/v2.0/authorize`,b=null;try{var c,d;let e,f,g=await this.networkInterface.sendGetRequestAsync(a,{});if((c=g.body).hasOwnProperty("tenant_discovery_endpoint")&&c.hasOwnProperty("metadata"))f=(e=g.body).metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${e.tenant_discovery_endpoint}`);else{if(!((d=g.body).hasOwnProperty("error")&&d.hasOwnProperty("error_description")))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${g.status}`),"invalid_instance"===(e=g.body).error)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${e.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${e.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),f=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),b=bN(f,this.hostnameAndPort)}catch(a){return a instanceof _?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${a.errorCode}
Error Description: ${a.errorMessage}`):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${a.name}
Error Description: ${a.message}`),null}return b||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),b=c7.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),b}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(a=>a&&bI.getDomainFromUrl(a).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(a,b){let c;if(b&&b.azureCloudInstance!==a0.None){let a=b.tenant?b.tenant:o;c=`${b.azureCloudInstance}/${a}/`}return c||a}static createCloudDiscoveryMetadataFromHost(a){return{preferred_network:a,preferred_cache:a,aliases:[a]}}getPreferredCache(){if(this.managedIdentity)return"login.microsoftonline.com";if(this.discoveryComplete())return this.metadata.preferred_cache;throw aX(ae)}isAlias(a){return this.metadata.aliases.indexOf(a)>-1}isAliasOfKnownMicrosoftAuthority(a){return bL.has(a)}static isPublicCloudAuthority(a){return u.indexOf(a)>=0}static buildRegionalAuthorityString(a,b,c){let d=new bI(a);d.validateAsUri();let e=d.getUrlComponents(),f=`${b}.${e.HostNameAndPort}`;this.isPublicCloudAuthority(e.HostNameAndPort)&&(f=`${b}.login.microsoft.com`);let g=bI.constructAuthorityUriFromObject({...d.getUrlComponents(),HostNameAndPort:f}).urlString;return c?`${g}?${c}`:g}static replaceWithRegionalInformation(a,b){let c={...a};return c.authorization_endpoint=c7.buildRegionalAuthorityString(c.authorization_endpoint,b),c.token_endpoint=c7.buildRegionalAuthorityString(c.token_endpoint,b),c.end_session_endpoint&&(c.end_session_endpoint=c7.buildRegionalAuthorityString(c.end_session_endpoint,b)),c}static transformCIAMAuthority(a){let b=a,c=new bI(a).getUrlComponents();if(0===c.PathSegments.length&&c.HostNameAndPort.endsWith(p)){let a=c.HostNameAndPort.split(".")[0];b=`${b}${a}.onmicrosoft.com`}return b}}function c8(a){return a.endsWith("/")?a:`${a}/`}async function c9(a,b,c,d,e,f,g){g?.addQueueMeasurement("authorityFactoryCreateDiscoveredInstance",f);let h=c7.transformCIAMAuthority(c8(a)),i=new c7(h,b,c,d,e,f,g);try{return await cW(i.resolveEndpointsAsync.bind(i),b3,e,g,f)(),i}catch(a){throw aX(ae)}}c7.reservedTenantDomains=new Set(["{tenant}","{tenantid}",C.COMMON,C.CONSUMERS,C.ORGANIZATIONS]);class da extends _{constructor(a,b,c,d,e){super(a,b,c),this.name="ServerError",this.errorNo=d,this.status=e,Object.setPrototypeOf(this,da.prototype)}}function db(a,b,c){return{clientId:a,authority:b.authority,scopes:b.scopes,homeAccountIdentifier:c,claims:b.claims,authenticationScheme:b.authenticationScheme,resourceRequestMethod:b.resourceRequestMethod,resourceRequestUri:b.resourceRequestUri,shrClaims:b.shrClaims,sshKid:b.sshKid,embeddedClientId:b.embeddedClientId||b.tokenBodyParameters?.clientId}}class dc{static generateThrottlingStorageKey(a){return`${U}.${JSON.stringify(a)}`}static preProcess(a,b,c){let d=dc.generateThrottlingStorageKey(b),e=a.getThrottlingCache(d);if(e){if(e.throttleTime<Date.now())return void a.removeItem(d,c);throw new da(e.errorCodes?.join(" ")||"",e.errorMessage,e.subError)}}static postProcess(a,b,c,d){if(dc.checkResponseStatus(c)||dc.checkResponseForRetryAfter(c)){let e={throttleTime:dc.calculateThrottleTime(parseInt(c.headers[y])),error:c.body.error,errorCodes:c.body.error_codes,errorMessage:c.body.error_description,subError:c.body.suberror};a.setThrottlingCache(dc.generateThrottlingStorageKey(b),e,d)}}static checkResponseStatus(a){return 429===a.status||a.status>=500&&a.status<600}static checkResponseForRetryAfter(a){return!!a.headers&&a.headers.hasOwnProperty(y)&&(a.status<200||a.status>=300)}static calculateThrottleTime(a){let b=Date.now()/1e3;return Math.floor(1e3*Math.min(b+((a<=0?0:a)||60),b+3600))}static removeThrottle(a,b,c,d){let e=db(b,c,d),f=this.generateThrottlingStorageKey(e);a.removeItem(f,c.correlationId)}}class dd extends _{constructor(a,b,c){super(a.errorCode,a.errorMessage,a.subError),Object.setPrototypeOf(this,dd.prototype),this.name="NetworkError",this.error=a,this.httpStatus=b,this.responseHeaders=c}}class de{constructor(a,b){this.config=function({authOptions:a,systemOptions:b,loggerOptions:c,cacheOptions:d,storageInterface:e,networkInterface:f,cryptoInterface:g,clientCredentials:h,libraryInfo:i,telemetry:j,serverTelemetryManager:k,persistencePlugin:l,serializableCache:m}){let n={...cf,...c};return{authOptions:{clientCapabilities:[],azureCloudOptions:ck,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...a},systemOptions:{...ce,...b},loggerOptions:n,cacheOptions:{...cg,...d},storageInterface:e||new bT(a.clientId,aY,new aZ(n),new cd),networkInterface:f||ch,cryptoInterface:g||aY,clientCredentials:h||cj,libraryInfo:{...ci,...i},telemetry:{...cl,...j},serverTelemetryManager:k||null,persistencePlugin:l||null,serializableCache:m||null}}(a),this.logger=new aZ(this.config.loggerOptions,a$,a_),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=b}createTokenRequestHeaders(a){let b={};if(b[x]=r,!this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case cn:try{let c=bx(a.credential);b[z]=`Oid:${c.uid}@${c.utid}`}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case"UPN":b[z]=`UPN: ${a.credential}`}return b}async executePostToTokenEndpoint(a,b,c,d,e,f){f&&this.performanceClient?.addQueueMeasurement(f,e);let g=await this.sendPostRequest(d,a,{body:b,headers:c},e);return this.config.serverTelemetryManager&&g.status<500&&429!==g.status&&this.config.serverTelemetryManager.clearTelemetryCache(),g}async sendPostRequest(a,b,c,d){let e;dc.preProcess(this.cacheManager,a,d);try{let a=(e=await cW(this.networkClient.sendPostRequestAsync.bind(this.networkClient),"networkClientSendPostRequestAsync",this.logger,this.performanceClient,d)(b,c)).headers||{};this.performanceClient?.addFields({refreshTokenSize:e.body.refresh_token?.length||0,httpVerToken:a[B]||"",requestId:a[A]||""},d)}catch(a){if(a instanceof dd){let b=a.responseHeaders;throw b&&this.performanceClient?.addFields({httpVerToken:b[B]||"",requestId:b[A]||"",contentTypeHeader:b[x]||void 0,contentLengthHeader:b["Content-Length"]||void 0,httpStatus:a.httpStatus},d),a.error}if(a instanceof _)throw a;throw aX(af)}return dc.postProcess(this.cacheManager,a,e,d),e}async updateAuthority(a,b){this.performanceClient?.addQueueMeasurement("updateTokenEndpointAuthority",b);let c=`https://${a}/${this.authority.tenant}/`,d=await c9(c,this.networkClient,this.cacheManager,this.authority.options,this.logger,b,this.performanceClient);this.authority=d}createTokenQueryParameters(a){let b=new Map;return a.embeddedClientId&&cV(b,this.config.authOptions.clientId,this.config.authOptions.redirectUri),a.tokenQueryParameters&&cQ(b,a.tokenQueryParameters),cG(b,a.correlationId),cx(b,a.correlationId,this.performanceClient),bH(b)}}let df="no_tokens_found",dg="native_account_unavailable",dh="refresh_token_expired",di="ux_not_allowed",dj="interaction_required",dk="consent_required",dl="login_required",dm="bad_token";var dn=Object.freeze({__proto__:null,badToken:dm,consentRequired:dk,interactionRequired:dj,loginRequired:dl,nativeAccountUnavailable:dg,noTokensFound:df,refreshTokenExpired:dh,uxNotAllowed:di});let dp=[dj,dk,dl,dm,di],dq=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],dr={[df]:"No refresh token found in the cache. Please sign-in.",[dg]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[dh]:"Refresh token has expired.",[dm]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[di]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},ds={noTokensFoundError:{code:df,desc:dr[df]},native_account_unavailable:{code:dg,desc:dr[dg]},bad_token:{code:dm,desc:dr[dm]}};class dt extends _{constructor(a,b,c,d,e,f,g,h){super(a,b,c),Object.setPrototypeOf(this,dt.prototype),this.timestamp=d||"",this.traceId=e||"",this.correlationId=f||"",this.claims=g||"",this.name="InteractionRequiredAuthError",this.errorNo=h}}function du(a){return new dt(a,dr[a])}class dv{static setRequestState(a,b,c){let d=dv.generateLibraryState(a,c);return b?`${d}|${b}`:d}static generateLibraryState(a,b){if(!a)throw aX(aC);let c={id:a.createNewGuid()};b&&(c.meta=b);let d=JSON.stringify(c);return a.base64Encode(d)}static parseRequestState(a,b){if(!a)throw aX(aC);if(!b)throw aX(ai);try{let c=b.split("|"),d=c[0],e=c.length>1?c.slice(1).join("|"):"",f=a.base64Decode(d),g=JSON.parse(f);return{userRequestState:e||"",libraryState:g}}catch(a){throw aX(ai)}}}class dw{constructor(a,b){this.cryptoUtils=a,this.performanceClient=b}async generateCnf(a,b){this.performanceClient?.addQueueMeasurement(b1,a.correlationId);let c=await cW(this.generateKid.bind(this),b1,b,this.performanceClient,a.correlationId)(a),d=this.cryptoUtils.base64UrlEncode(JSON.stringify(c));return{kid:c.kid,reqCnfString:d}}async generateKid(a){return this.performanceClient?.addQueueMeasurement("popTokenGenerateKid",a.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(a),xms_ksl:"sw"}}async signPopToken(a,b,c){return this.signPayload(a,b,c)}async signPayload(a,b,c,d){let{resourceRequestMethod:e,resourceRequestUri:f,shrClaims:g,shrNonce:h,shrOptions:i}=c,j=f?new bI(f):void 0,k=j?.getUrlComponents();return this.cryptoUtils.signJwt({at:a,ts:cY(),m:e?.toUpperCase(),u:k?.HostNameAndPort,nonce:h||this.cryptoUtils.createNewGuid(),p:k?.AbsolutePath,q:k?.QueryString?[[],k.QueryString]:void 0,client_claims:g||void 0,...d},b,i,c.correlationId)}}class dx{constructor(a,b){this.cache=a,this.hasChanged=b}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class dy{constructor(a,b,c,d,e,f,g){this.clientId=a,this.cacheStorage=b,this.cryptoObj=c,this.logger=d,this.serializableCache=e,this.persistencePlugin=f,this.performanceClient=g}validateTokenResponse(a,b){if(a.error||a.error_description||a.suberror){var c,d,e;let f,g,h,i=`Error(s): ${a.error_codes||s} - Timestamp: ${a.timestamp||s} - Description: ${a.error_description||s} - Correlation ID: ${a.correlation_id||s} - Trace ID: ${a.trace_id||s}`,j=a.error_codes?.length?a.error_codes[0]:void 0,k=new da(a.error,i,a.suberror,j,a.status);if(b&&a.status&&a.status>=500&&a.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${k}`);if(b&&a.status&&a.status>=400&&a.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${k}`);if(c=a.error,d=a.error_description,e=a.suberror,f=!!c&&dp.indexOf(c)>-1,g=!!e&&dq.indexOf(e)>-1,h=!!d&&dp.some(a=>d.indexOf(a)>-1),f||h||g)throw new dt(a.error,a.error_description,a.suberror,a.timestamp||"",a.trace_id||"",a.correlation_id||"",a.claims||"",j);throw k}}async handleServerTokenResponse(a,b,c,d,e,f,g,h,i){let j,k,l;if(this.performanceClient?.addQueueMeasurement(b2,a.correlation_id),a.id_token){if(j=bE(a.id_token||"",this.cryptoObj.base64Decode),e&&e.nonce&&j.nonce!==e.nonce)throw aX(al);if(d.maxAge||0===d.maxAge){let a=j.auth_time;if(!a)throw aX(am);bF(a,d.maxAge)}}this.homeAccountIdentifier=bD.generateHomeAccountId(a.client_info||"",b.authorityType,this.logger,this.cryptoObj,j),e&&e.state&&(k=dv.parseRequestState(this.cryptoObj,e.state)),a.key_id=a.key_id||d.sshKid||void 0;let m=this.generateCacheRecord(a,b,c,d,j,f,e);try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),l=new dx(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(l)),g&&!h&&m.account){let a=this.cacheStorage.generateAccountKey(bD.getAccountInfo(m.account));if(!this.cacheStorage.getAccount(a,d.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await dy.generateAuthenticationResult(this.cryptoObj,b,m,!1,d,j,k,void 0,i)}await this.cacheStorage.saveCacheRecord(m,d.correlationId,function(a){if(!a.signin_state)return!1;let b=["kmsi","dvc_dmjd"];return a.signin_state.some(a=>b.includes(a.trim().toLowerCase()))}(j||{}),d.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&l&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(l))}return dy.generateAuthenticationResult(this.cryptoObj,b,m,!1,d,j,k,a,i)}generateCacheRecord(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o;let p,q,r=b.getPreferredCache();if(!r)throw aX(aA);let s=bB(e);a.id_token&&e&&(h=this.homeAccountIdentifier,i=a.id_token,j=this.clientId,p={credentialType:H,homeAccountId:h,environment:r,clientId:j,secret:i,realm:s||"",lastUpdatedAt:Date.now().toString()},q=function(a,b,c,d,e,f,g,h,i,j,k,l){l?.verbose("setCachedAccount called");let m=a.getAccountKeys().find(a=>a.startsWith(c)),n=null;m&&(n=a.getAccount(m,e));let o=n||bD.createAccount({homeAccountId:c,idTokenClaims:f,clientInfo:g,environment:h,cloudGraphHostName:j?.cloud_graph_host_name,msGraphHost:j?.msgraph_host,nativeAccountId:k},b,d),p=o.tenantProfiles||[],q=i||o.realm;if(q&&!p.find(a=>a.tenantId===q)){let a=bz(c,o.localAccountId,q,f);p.push(a)}return o.tenantProfiles=p,o}(this.cacheStorage,b,this.homeAccountIdentifier,this.cryptoObj.base64Decode,d.correlationId,e,a.client_info,r,s,g,void 0,this.logger));let t=null;if(a.access_token){let e=a.scope?bv.fromString(a.scope):new bv(d.scopes||[]),g=("string"==typeof a.expires_in?parseInt(a.expires_in,10):a.expires_in)||0,h=("string"==typeof a.ext_expires_in?parseInt(a.ext_expires_in,10):a.ext_expires_in)||0,i=("string"==typeof a.refresh_in?parseInt(a.refresh_in,10):a.refresh_in)||void 0,j=c+g;t=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){let p={homeAccountId:a,credentialType:I,secret:c,cachedAt:cY().toString(),expiresOn:g.toString(),extendedExpiresOn:h.toString(),environment:b,clientId:d,realm:e,target:f,tokenType:k||S,lastUpdatedAt:Date.now().toString()};if(l&&(p.userAssertionHash=l),j&&(p.refreshOn=j.toString()),n&&(p.requestedClaims=n,p.requestedClaimsHash=o),p.tokenType?.toLowerCase()!==S.toLowerCase())switch(p.credentialType=J,p.tokenType){case"pop":let q=bE(c,i);if(!q?.cnf?.kid)throw aX(aI);p.keyId=q.cnf.kid;break;case T:p.keyId=m}return p}(this.homeAccountIdentifier,r,a.access_token,this.clientId,s||b.tenant||"",e.printScopes(),j,j+h,this.cryptoObj.base64Decode,i&&i>0?c+i:void 0,a.token_type,f,a.key_id,d.claims,d.requestedClaimsHash)}let u=null;if(a.refresh_token){let b,d;a.refresh_token_expires_in&&(b=c+("string"==typeof a.refresh_token_expires_in?parseInt(a.refresh_token_expires_in,10):a.refresh_token_expires_in)),k=this.homeAccountIdentifier,l=a.refresh_token,m=this.clientId,n=a.foci,o=b,d={credentialType:K,homeAccountId:k,environment:r,clientId:m,secret:l,lastUpdatedAt:Date.now().toString()},f&&(d.userAssertionHash=f),n&&(d.familyId=n),o&&(d.expiresOn=o.toString()),u=d}let v=null;return a.foci&&(v={clientId:this.clientId,environment:r,familyId:a.foci}),{account:q,idToken:p,accessToken:t,refreshToken:u,appMetadata:v}}static async generateAuthenticationResult(a,b,c,d,e,f,g,h,i){let j,k,l="",m=[],n=null,o="";if(c.accessToken){if("pop"!==c.accessToken.tokenType||e.popKid)l=c.accessToken.secret;else{let b=new dw(a),{secret:d,keyId:f}=c.accessToken;if(!f)throw aX(aM);l=await b.signPopToken(d,f,e)}m=bv.fromString(c.accessToken.target).asArray(),n=cZ(c.accessToken.expiresOn),j=cZ(c.accessToken.extendedExpiresOn),c.accessToken.refreshOn&&(k=cZ(c.accessToken.refreshOn))}c.appMetadata&&(o="1"===c.appMetadata.familyId?"1":"");let p=f?.oid||f?.sub||"",q=f?.tid||"";h?.spa_accountid&&c.account&&(c.account.nativeAccountId=h?.spa_accountid);let r=c.account?bA(bD.getAccountInfo(c.account),void 0,f,c.idToken?.secret):null;return{authority:b.canonicalAuthority,uniqueId:p,tenantId:q,scopes:m,account:r,idToken:c?.idToken?.secret||"",idTokenClaims:f||{},accessToken:l,fromCache:d,expiresOn:n,extExpiresOn:j,refreshOn:k,correlationId:e.correlationId,requestId:i||"",familyId:o,tokenType:c.accessToken?.tokenType||"",state:g?g.userRequestState:"",cloudGraphHostName:c.account?.cloudGraphHostName||"",msGraphHost:c.account?.msGraphHost||"",code:h?.spa_code,fromNativeBroker:!1}}}async function dz(a,b,c){return"string"==typeof a?a:a({clientId:b,tokenEndpoint:c})}class dA extends de{constructor(a,b){super(a,b),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(a,b){if(this.performanceClient?.addQueueMeasurement("authClientAcquireToken",a.correlationId),!a.code)throw aX(ar);let c=cY(),d=await cW(this.executeTokenRequest.bind(this),b_,this.logger,this.performanceClient,a.correlationId)(this.authority,a),e=d.headers?.[A],f=new dy(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return f.validateTokenResponse(d.body),cW(f.handleServerTokenResponse.bind(f),b2,this.logger,this.performanceClient,a.correlationId)(d.body,this.authority,c,a,b,void 0,void 0,void 0,e)}getLogoutUri(a){if(!a)throw bt(a9);let b=this.createLogoutUrlQueryString(a);return bI.appendQueryString(this.authority.endSessionEndpoint,b)}async executeTokenRequest(a,b){let c;this.performanceClient?.addQueueMeasurement(b_,b.correlationId);let d=this.createTokenQueryParameters(b),e=bI.appendQueryString(a.tokenEndpoint,d),f=await cW(this.createTokenRequestBody.bind(this),b0,this.logger,this.performanceClient,b.correlationId)(b);if(b.clientInfo)try{let a=bw(b.clientInfo,this.cryptoUtils.base64Decode);c={credential:`${a.uid}.${a.utid}`,type:cn}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}let g=this.createTokenRequestHeaders(c||b.ccsCredential),h=db(this.config.authOptions.clientId,b);return cW(this.executePostToTokenEndpoint.bind(this),bV,this.logger,this.performanceClient,b.correlationId)(e,f,g,h,b.correlationId,bV)}async createTokenRequestBody(a){var b,c,d;let e;this.performanceClient?.addQueueMeasurement(b0,a.correlationId);let f=new Map;if(cA(f,a.embeddedClientId||a.tokenBodyParameters?.[co]||this.config.authOptions.clientId),this.includeRedirectUri)b=a.redirectUri,f.set(cp,b);else if(!a.redirectUri)throw bt(a1);if(cz(f,a.scopes,!0,this.oidcDefaultScopes),c=a.code,f.set("code",c),cH(f,this.config.libraryInfo),cI(f,this.config.telemetry.application),cU(f),this.serverTelemetryManager&&!cm(this.config)&&cT(f,this.serverTelemetryManager),a.codeVerifier&&(d=a.codeVerifier,f.set("code_verifier",d)),this.config.clientCredentials.clientSecret&&cK(f,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let b=this.config.clientCredentials.clientAssertion;cL(f,await dz(b.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),cM(f,b.assertionType)}if(cN(f,"authorization_code"),cO(f),"pop"===a.authenticationScheme){let b=new dw(this.cryptoUtils,this.performanceClient);cR(f,a.popKid?this.cryptoUtils.encodeKid(a.popKid):(await cW(b.generateCnf.bind(b),b1,this.logger,this.performanceClient,a.correlationId)(a,this.logger)).reqCnfString)}else if(a.authenticationScheme===T)if(a.sshJwk)cS(f,a.sshJwk);else throw bt(bf);if((!bu.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(f,a.claims,this.config.authOptions.clientCapabilities),a.clientInfo)try{let b=bw(a.clientInfo,this.cryptoUtils.base64Decode);e={credential:`${b.uid}.${b.utid}`,type:cn}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else e=a.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case cn:try{let a=bx(e.credential);cD(f,a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case"UPN":cC(f,e.credential)}return a.embeddedClientId&&cV(f,this.config.authOptions.clientId,this.config.authOptions.redirectUri),a.tokenBodyParameters&&cQ(f,a.tokenBodyParameters),!a.enableSpaAuthorizationCode||a.tokenBodyParameters&&a.tokenBodyParameters[cs]||cQ(f,{[cs]:"1"}),cx(f,a.correlationId,this.performanceClient),bH(f)}createLogoutUrlQueryString(a){var b,c,d;let e=new Map;return a.postLogoutRedirectUri&&(b=a.postLogoutRedirectUri,e.set("post_logout_redirect_uri",b)),a.correlationId&&cG(e,a.correlationId),a.idTokenHint&&(c=a.idTokenHint,e.set("id_token_hint",c)),a.state&&cJ(e,a.state),a.logoutHint&&(d=a.logoutHint,e.set("logout_hint",d)),a.extraQueryParameters&&cQ(e,a.extraQueryParameters),this.config.authOptions.instanceAware&&cP(e),bH(e,this.config.authOptions.encodeExtraQueryParams,a.extraQueryParameters)}}class dB extends de{constructor(a,b){super(a,b)}async acquireToken(a){this.performanceClient?.addQueueMeasurement(bX,a.correlationId);let b=cY(),c=await cW(this.executeTokenRequest.bind(this),bW,this.logger,this.performanceClient,a.correlationId)(a,this.authority),d=c.headers?.[A],e=new dy(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return e.validateTokenResponse(c.body),cW(e.handleServerTokenResponse.bind(e),b2,this.logger,this.performanceClient,a.correlationId)(c.body,this.authority,b,a,void 0,void 0,!0,a.forceCache,d)}async acquireTokenByRefreshToken(a){if(!a)throw bt(a8);if(this.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireTokenByRefreshToken",a.correlationId),!a.account)throw aX(ay);if(this.cacheManager.isAppMetadataFOCI(a.account.environment))try{return await cW(this.acquireTokenWithCachedRefreshToken.bind(this),bY,this.logger,this.performanceClient,a.correlationId)(a,!0)}catch(c){let a=c instanceof dt&&c.errorCode===df,b=c instanceof da&&"invalid_grant"===c.errorCode&&"client_mismatch"===c.subError;if(a||b);else throw c}return cW(this.acquireTokenWithCachedRefreshToken.bind(this),bY,this.logger,this.performanceClient,a.correlationId)(a,!1)}async acquireTokenWithCachedRefreshToken(a,b){let c,d,e,f,g;this.performanceClient?.addQueueMeasurement(bY,a.correlationId);let h=(c=this.cacheManager.getRefreshToken.bind(this.cacheManager),d="cacheManagerGetRefreshToken",e=this.logger,f=this.performanceClient,g=a.correlationId,(...a)=>{e.trace(`Executing function ${d}`);let b=f?.startMeasurement(d,g);g&&f?.incrementFields({[d+"CallCount"]:1},g);try{let f=c(...a);return b?.end({success:!0}),e.trace(`Returning result from ${d}`),f}catch(a){e.trace(`Error occurred in ${d}`);try{e.trace(JSON.stringify(a))}catch(a){e.trace("Unable to print error message.")}throw b?.end({success:!1},a),a}})(a.account,b,a.correlationId,void 0,this.performanceClient);if(!h)throw du(df);if(h.expiresOn&&c$(h.expiresOn,a.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(h.expiresOn)},a.correlationId),du(dh);let i={...a,refreshToken:h.secret,authenticationScheme:a.authenticationScheme||S,ccsCredential:{credential:a.account.homeAccountId,type:cn}};try{return await cW(this.acquireToken.bind(this),bX,this.logger,this.performanceClient,a.correlationId)(i)}catch(b){if(b instanceof dt&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(h.expiresOn)},a.correlationId),b.subError===dm)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let b=this.cacheManager.generateCredentialKey(h);this.cacheManager.removeRefreshToken(b,a.correlationId)}throw b}}async executeTokenRequest(a,b){this.performanceClient?.addQueueMeasurement(bW,a.correlationId);let c=this.createTokenQueryParameters(a),d=bI.appendQueryString(b.tokenEndpoint,c),e=await cW(this.createTokenRequestBody.bind(this),bZ,this.logger,this.performanceClient,a.correlationId)(a),f=this.createTokenRequestHeaders(a.ccsCredential),g=db(this.config.authOptions.clientId,a);return cW(this.executePostToTokenEndpoint.bind(this),bU,this.logger,this.performanceClient,a.correlationId)(d,e,f,g,a.correlationId,bU)}async createTokenRequestBody(a){var b,c;this.performanceClient?.addQueueMeasurement(bZ,a.correlationId);let d=new Map;if(cA(d,a.embeddedClientId||a.tokenBodyParameters?.[co]||this.config.authOptions.clientId),a.redirectUri&&(b=a.redirectUri,d.set(cp,b)),cz(d,a.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),cN(d,"refresh_token"),cO(d),cH(d,this.config.libraryInfo),cI(d,this.config.telemetry.application),cU(d),this.serverTelemetryManager&&!cm(this.config)&&cT(d,this.serverTelemetryManager),c=a.refreshToken,d.set("refresh_token",c),this.config.clientCredentials.clientSecret&&cK(d,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let b=this.config.clientCredentials.clientAssertion;cL(d,await dz(b.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),cM(d,b.assertionType)}if("pop"===a.authenticationScheme){let b=new dw(this.cryptoUtils,this.performanceClient);cR(d,a.popKid?this.cryptoUtils.encodeKid(a.popKid):(await cW(b.generateCnf.bind(b),b1,this.logger,this.performanceClient,a.correlationId)(a,this.logger)).reqCnfString)}else if(a.authenticationScheme===T)if(a.sshJwk)cS(d,a.sshJwk);else throw bt(bf);if((!bu.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(d,a.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&a.ccsCredential)switch(a.ccsCredential.type){case cn:try{let b=bx(a.ccsCredential.credential);cD(d,b)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case"UPN":cC(d,a.ccsCredential.credential)}return a.embeddedClientId&&cV(d,this.config.authOptions.clientId,this.config.authOptions.redirectUri),a.tokenBodyParameters&&cQ(d,a.tokenBodyParameters),cx(d,a.correlationId,this.performanceClient),bH(d)}}class dC extends de{constructor(a,b){super(a,b)}async acquireCachedToken(a){this.performanceClient?.addQueueMeasurement("silentFlowClientAcquireCachedToken",a.correlationId);let b="0";if(a.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!bu.isEmptyObj(a.claims))throw this.setCacheOutcome("1",a.correlationId),aX(aG);if(!a.account)throw aX(ay);let c=a.account.tenantId||function(a){let b=new bI(a).getUrlComponents(),c=b.PathSegments.slice(-1)[0]?.toLowerCase();switch(c){case C.COMMON:case C.ORGANIZATIONS:case C.CONSUMERS:return;default:return c}}(a.authority),d=this.cacheManager.getTokenKeys(),e=this.cacheManager.getAccessToken(a.account,a,d,c);if(e)if(Number(e.cachedAt)>cY()||c$(e.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome("3",a.correlationId),aX(aG);else e.refreshOn&&c$(e.refreshOn,0)&&(b="4");else throw this.setCacheOutcome("2",a.correlationId),aX(aG);let f=a.authority||this.authority.getPreferredCache(),g={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(a.account),a.correlationId),accessToken:e,idToken:this.cacheManager.getIdToken(a.account,a.correlationId,d,c,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(f)};return this.setCacheOutcome(b,a.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await cW(this.generateResultFromCacheRecord.bind(this),b$,this.logger,this.performanceClient,a.correlationId)(g,a),b]}setCacheOutcome(a,b){this.serverTelemetryManager?.setCacheOutcome(a),this.performanceClient?.addFields({cacheOutcome:a},b),"0"!==a&&this.logger.info(`Token refresh is required due to cache outcome: ${a}`)}async generateResultFromCacheRecord(a,b){let c;if(this.performanceClient?.addQueueMeasurement(b$,b.correlationId),a.idToken&&(c=bE(a.idToken.secret,this.config.cryptoInterface.base64Decode)),b.maxAge||0===b.maxAge){let a=c?.auth_time;if(!a)throw aX(am);bF(a,b.maxAge)}return dy.generateAuthenticationResult(this.cryptoUtils,this.authority,a,!0,b,c)}}class dD{constructor(a,b){this.cacheOutcome="0",this.cacheManager=b,this.apiId=a.apiId,this.correlationId=a.correlationId,this.wrapperSKU=a.wrapperSKU||"",this.wrapperVer=a.wrapperVer||"",this.telemetryCacheKey=R+"-"+a.clientId}generateCurrentRequestHeaderValue(){let a=`${this.apiId},${this.cacheOutcome}`,b=[this.wrapperSKU,this.wrapperVer],c=this.getNativeBrokerErrorCode();c?.length&&b.push(`broker_error=${c}`);let d=b.join(",");return[5,[a,this.getRegionDiscoveryFields()].join(","),d].join("|")}generateLastRequestHeaderValue(){let a=this.getLastRequests(),b=dD.maxErrorsToSend(a),c=a.failedRequests.slice(0,2*b).join(","),d=a.errors.slice(0,b).join(","),e=a.errors.length,f=b<e?"1":"0",g=[e,f].join(",");return[5,a.cacheHits,c,d,g].join("|")}cacheFailedRequest(a){let b=this.getLastRequests();b.errors.length>=50&&(b.failedRequests.shift(),b.failedRequests.shift(),b.errors.shift()),b.failedRequests.push(this.apiId,this.correlationId),a instanceof Error&&a&&a.toString()?a instanceof _?a.subError?b.errors.push(a.subError):a.errorCode?b.errors.push(a.errorCode):b.errors.push(a.toString()):b.errors.push(a.toString()):b.errors.push("unknown_error"),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,b,this.correlationId)}incrementCacheHits(){let a=this.getLastRequests();return a.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId),a.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){let a=this.getLastRequests(),b=dD.maxErrorsToSend(a);if(b===a.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let c={failedRequests:a.failedRequests.slice(2*b),errors:a.errors.slice(b),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c,this.correlationId)}}static maxErrorsToSend(a){let b,c=0,d=0,e=a.errors.length;for(b=0;b<e;b++){let e=a.failedRequests[2*b]||"",f=a.failedRequests[2*b+1]||"",g=a.errors[b]||"";if((d+=e.toString().length+f.toString().length+g.length+3)<330)c+=1;else break}return c}getRegionDiscoveryFields(){let a=[];return a.push(this.regionUsed||""),a.push(this.regionSource||""),a.push(this.regionOutcome||""),a.join(",")}updateRegionDiscoveryMetadata(a){this.regionUsed=a.region_used,this.regionSource=a.region_source,this.regionOutcome=a.region_outcome}setCacheOutcome(a){this.cacheOutcome=a}setNativeBrokerErrorCode(a){let b=this.getLastRequests();b.nativeBrokerErrorCode=a,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,b,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let a=this.getLastRequests();delete a.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}static makeExtraSkuString(a){return function(a){let{skus:b,libraryName:c,libraryVersion:d,extensionName:e,extensionVersion:f}=a,g=new Map([[0,[c,d]],[2,[e,f]]]),h=[];if(b?.length){if((h=b.split(",")).length<4)return b}else h=Array.from({length:4},()=>"|");return g.forEach((a,b)=>{2===a.length&&a[0]?.length&&a[1]?.length&&function(a){let{skuArr:b,index:c,skuName:d,skuVersion:e}=a;c>=b.length||(b[c]=[d,e].join("|"))}({skuArr:h,index:b,skuName:a[0],skuVersion:a[1]})}),h.join(",")}(a)}}class dE{static deserializeJSONBlob(a){return a?JSON.parse(a):{}}static deserializeAccounts(a){let b={};return a&&Object.keys(a).map(function(c){let d=a[c],e={homeAccountId:d.home_account_id,environment:d.environment,realm:d.realm,localAccountId:d.local_account_id,username:d.username,authorityType:d.authority_type,name:d.name,clientInfo:d.client_info,lastModificationTime:d.last_modification_time,lastModificationApp:d.last_modification_app,tenantProfiles:d.tenantProfiles?.map(a=>JSON.parse(a)),lastUpdatedAt:Date.now().toString()},f=new bD;bS.toObject(f,e),b[c]=f}),b}static deserializeIdTokens(a){let b={};return a&&Object.keys(a).map(function(c){let d=a[c],e={homeAccountId:d.home_account_id,environment:d.environment,credentialType:d.credential_type,clientId:d.client_id,secret:d.secret,realm:d.realm,lastUpdatedAt:Date.now().toString()};b[c]=e}),b}static deserializeAccessTokens(a){let b={};return a&&Object.keys(a).map(function(c){let d=a[c],e={homeAccountId:d.home_account_id,environment:d.environment,credentialType:d.credential_type,clientId:d.client_id,secret:d.secret,realm:d.realm,target:d.target,cachedAt:d.cached_at,expiresOn:d.expires_on,extendedExpiresOn:d.extended_expires_on,refreshOn:d.refresh_on,keyId:d.key_id,tokenType:d.token_type,requestedClaims:d.requestedClaims,requestedClaimsHash:d.requestedClaimsHash,userAssertionHash:d.userAssertionHash,lastUpdatedAt:Date.now().toString()};b[c]=e}),b}static deserializeRefreshTokens(a){let b={};return a&&Object.keys(a).map(function(c){let d=a[c],e={homeAccountId:d.home_account_id,environment:d.environment,credentialType:d.credential_type,clientId:d.client_id,secret:d.secret,familyId:d.family_id,target:d.target,realm:d.realm,lastUpdatedAt:Date.now().toString()};b[c]=e}),b}static deserializeAppMetadata(a){let b={};return a&&Object.keys(a).map(function(c){let d=a[c];b[c]={clientId:d.client_id,environment:d.environment,familyId:d.family_id}}),b}static deserializeAllCache(a){return{accounts:a.Account?this.deserializeAccounts(a.Account):{},idTokens:a.IdToken?this.deserializeIdTokens(a.IdToken):{},accessTokens:a.AccessToken?this.deserializeAccessTokens(a.AccessToken):{},refreshTokens:a.RefreshToken?this.deserializeRefreshTokens(a.RefreshToken):{},appMetadata:a.AppMetadata?this.deserializeAppMetadata(a.AppMetadata):{}}}}var dF=Object.freeze({__proto__:null,Deserializer:dE,Serializer:m});let dG="https://login.microsoftonline.com/managed_identity/",dH="Metadata",dI="secret",dJ="api-version",dK="resource",dL="AZURE_POD_IDENTITY_AUTHORITY_HOST",dM="IDENTITY_ENDPOINT",dN="IDENTITY_HEADER",dO="IDENTITY_SERVER_THUMBPRINT",dP="IMDS_ENDPOINT",dQ="MSI_ENDPOINT",dR="MSI_SECRET",dS={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},dT="system-assigned",dU="user-assigned-client-id",dV="user-assigned-resource-id",dW="user-assigned-object-id",dX="post",dY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",dZ="msal.js.node",d$="urn:ietf:params:oauth:client-assertion-type:jwt-bearer";class d_{static getNetworkResponse(a,b,c){return{headers:a,body:b,status:c}}static urlToHttpOptions(a){let b={protocol:a.protocol,hostname:a.hostname&&a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,hash:a.hash,search:a.search,pathname:a.pathname,path:`${a.pathname||""}${a.search||""}`,href:a.href};return""!==a.port&&(b.port=Number(a.port)),(a.username||a.password)&&(b.auth=`${decodeURIComponent(a.username)}:${decodeURIComponent(a.password)}`),b}}let d0="@azure/msal-node",d1="3.8.4";class d2{constructor(a,b,c){this.networkRequestViaProxy=(a,b,c,d)=>{let f=new URL(b),g=new URL(this.proxyUrl),h=c?.headers||{},i={host:g.hostname,port:g.port,method:"CONNECT",path:f.hostname,headers:h};this.customAgentOptions&&Object.keys(this.customAgentOptions).length&&(i.agent=new e.Agent(this.customAgentOptions));let j="";if(a===dX){let a=c?.body||"";j=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${a.length}\r
\r
${a}`}else d&&(i.timeout=d);let k=`${a.toUpperCase()} ${f.href} HTTP/1.1\r
Host: ${f.host}\r
Connection: close\r
`+j+"\r\n";return new Promise((c,f)=>{let g=e.request(i);d&&g.on("timeout",()=>{this.logUrlWithPiiAwareness(`Request timeout after ${d}ms for URL`,b),g.destroy(),f(Error(`Request time out after ${d}ms`))}),g.end(),g.on("connect",(a,b)=>{let d=a?.statusCode||500;(d<200||d>299)&&(g.destroy(),b.destroy(),f(Error(`Error connecting to proxy. Http status code: ${a.statusCode}. Http status message: ${a?.statusMessage||"Unknown"}`))),b.write(k);let e=[];b.on("data",a=>{e.push(a)}),b.on("end",()=>{let a=Buffer.concat([...e]).toString().split("\r\n"),b=parseInt(a[0].split(" ")[1]),d=a[0].split(" ").slice(2).join(" "),f=a[a.length-1],h=a.slice(1,a.length-2),i=new Map;h.forEach(a=>{let b=a.split(new RegExp(/:\s(.*)/s)),c=b[0],d=b[1];try{let a=JSON.parse(d);a&&"object"==typeof a&&(d=a)}catch(a){}i.set(c,d)});let j=Object.fromEntries(i),k=d_.getNetworkResponse(j,this.parseBody(b,d,j,f),b);this.shouldDestroyRequest(b,k)&&g.destroy(),c(k)}),b.on("error",a=>{g.destroy(),b.destroy(),f(Error(a.toString()))})}),g.on("error",c=>{this.logger.error(`HttpClient - Proxy request error: ${c.toString()}`,""),this.logUrlWithPiiAwareness("Destination URL",b),this.logUrlWithPiiAwareness("Proxy URL",this.proxyUrl),this.logger.error(`HttpClient - Method: ${a}`,""),this.logger.errorPii(`HttpClient - Headers: ${JSON.stringify(h)}`,""),g.destroy(),f(Error(c.toString()))})})},this.networkRequestViaHttps=(a,b,c,d)=>{let g=a===dX,h=c?.body||"",i=new URL(b),j=c?.headers||{},k={method:a,headers:j,...d_.urlToHttpOptions(i)};return this.customAgentOptions&&Object.keys(this.customAgentOptions).length&&(k.agent=new f.Agent(this.customAgentOptions)),g?k.headers={...k.headers,"Content-Length":h.length}:d&&(k.timeout=d),new Promise((c,i)=>{let l;l="http:"===k.protocol?e.request(k):f.request(k),g&&l.write(h),d&&l.on("timeout",()=>{this.logUrlWithPiiAwareness(`HTTPS request timeout after ${d}ms for URL`,b),l.destroy(),i(Error(`Request time out after ${d}ms`))}),l.end(),l.on("response",a=>{let b=a.headers,d=a.statusCode,e=a.statusMessage,f=[];a.on("data",a=>{f.push(a)}),a.on("end",()=>{let a=Buffer.concat([...f]).toString(),g=d_.getNetworkResponse(b,this.parseBody(d,e,b,a),d);this.shouldDestroyRequest(d,g)&&l.destroy(),c(g)})}),l.on("error",c=>{this.logger.error(`HttpClient - HTTPS request error: ${c.toString()}`,""),this.logUrlWithPiiAwareness("URL",b),this.logger.error(`HttpClient - Method: ${a}`,""),this.logger.errorPii(`HttpClient - Headers: ${JSON.stringify(j)}`,""),l.destroy(),i(Error(c.toString()))})})},this.parseBody=(a,b,c,d)=>{let e;try{e=JSON.parse(d)}catch(g){let d,f;a>=400&&a<=499?(d="client_error",f="A client"):a>=500&&a<=599?(d="server_error",f="A server"):(d="unknown_error",f="An unknown"),e={error:d,error_description:`${f} error occured.
Http status code: ${a}
Http status message: ${b||"Unknown"}
Headers: ${JSON.stringify(c)}`}}return e},this.logUrlWithPiiAwareness=(a,b)=>{if(this.isPiiEnabled)this.logger.errorPii(`HttpClient - ${a}: ${b}`,"");else{let c;try{let a=new URL(b);c=`${a.protocol}//${a.host}${a.pathname}`}catch{c=b.split("?")[0]||"unknown"}this.logger.error(`HttpClient - ${a}: ${c} [Enable PII logging to see additional details]`,"")}},this.shouldDestroyRequest=(a,b)=>(a<200||a>299)&&!(b.body&&"object"==typeof b.body&&"error"in b.body&&"authorization_pending"===b.body.error),this.proxyUrl=a||"",this.customAgentOptions=b||{},this.logger=new aZ(c||{},d0,d1),this.isPiiEnabled=this.logger.isPiiLoggingEnabled()}async sendGetRequestAsync(a,b,c){return this.proxyUrl?this.networkRequestViaProxy("get",a,b,c):this.networkRequestViaHttps("get",a,b,c)}async sendPostRequestAsync(a,b){return this.proxyUrl?this.networkRequestViaProxy(dX,a,b):this.networkRequestViaHttps(dX,a,b)}}let d3="invalid_file_extension",d4="invalid_file_path",d5="invalid_managed_identity_id_type",d6="invalid_secret",d7="platform_not_supported",d8="unable_to_create_azure_arc",d9="unable_to_create_cloud_shell",ea="unable_to_create_source",eb="unable_to_read_secret_file",ec="www_authenticate_header_missing",ed="www_authenticate_header_unsupported_format",ee={[dL]:"azure_pod_identity_authority_host_url_malformed",[dM]:"identity_endpoint_url_malformed",[dP]:"imds_endpoint_url_malformed",[dQ]:"msi_endpoint_url_malformed"},ef={[d3]:"The file path in the WWW-Authenticate header does not contain a .key file.",[d4]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[d5]:"More than one ManagedIdentityIdType was provided.",[d6]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[d7]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",missing_client_id:"A ManagedIdentityId id was not provided.",[ee.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${dL}' environment variable is malformed.`,[ee.IDENTITY_ENDPOINT]:`The Managed Identity's '${dM}' environment variable is malformed.`,[ee.IMDS_ENDPOINT]:`The Managed Identity's '${dP}' environment variable is malformed.`,[ee.MSI_ENDPOINT]:`The Managed Identity's '${dQ}' environment variable is malformed.`,network_unavailable:"Authentication unavailable. The request to the managed identity endpoint timed out.",[d8]:"Azure Arc Managed Identities can only be system assigned.",[d9]:"Cloud Shell Managed Identities can only be system assigned.",[ea]:"Unable to create a Managed Identity source based on environment variables.",[eb]:"Unable to read the secret file.",user_assigned_not_available_at_runtime:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[ec]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[ed]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class eg extends _{constructor(a){super(a,ef[a]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,eg.prototype)}}function eh(a){return new eg(a)}class ei{get id(){return this._id}set id(a){this._id=a}get idType(){return this._idType}set idType(a){this._idType=a}constructor(a){const b=a?.userAssignedClientId,c=a?.userAssignedResourceId,d=a?.userAssignedObjectId;if(b){if(c||d)throw eh(d5);this.id=b,this.idType=dU}else if(c){if(b||d)throw eh(d5);this.id=c,this.idType=dV}else if(d){if(b||c)throw eh(d5);this.id=d,this.idType=dW}else this.id="system_assigned_managed_identity",this.idType=dT}}let ej="invalid_loopback_server_address_type",ek="Loopback server address is not type string. This is unexpected.",el="unable_to_load_redirectUrl",em="Loopback server callback was invoked without a url. This is unexpected.",en="no_auth_code_in_response",eo="No auth code found in the server response. Please check your network trace to determine what happened.",ep="no_loopback_server_exists",eq="No loopback server exists yet.",er="loopback_server_already_exists",es="Loopback server already exists. Cannot create another.",et="loopback_server_timeout",eu="Timed out waiting for auth code listener to be registered.",ev="state_not_found",ew="State not found. Please verify that the request originated from msal.",ex="thumbprint_missing_from_client_certificate",ey="Client certificate does not contain a SHA-1 or SHA-256 thumbprint.",ez="redirect_uri_not_supported",eA="RedirectUri is not supported in this scenario. Please remove redirectUri from the request.";class eB extends _{constructor(a,b){super(a,b),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new eB(ej,`${ek}`)}static createUnableToLoadRedirectUrlError(){return new eB(el,`${em}`)}static createNoAuthCodeInResponseError(){return new eB(en,`${eo}`)}static createNoLoopbackServerExistsError(){return new eB(ep,`${eq}`)}static createLoopbackServerAlreadyExistsError(){return new eB(er,`${es}`)}static createLoopbackServerTimeoutError(){return new eB(et,`${eu}`)}static createStateNotFoundError(){return new eB(ev,ew)}static createThumbprintMissingError(){return new eB(ex,ey)}static createRedirectUriNotSupportedError(){return new eB(ez,eA)}}let eC={clientId:"",authority:n,clientSecret:"",clientAssertion:"",clientCertificate:{thumbprint:"",thumbprintSha256:"",privateKey:"",x5c:""},knownAuthorities:[],cloudDiscoveryMetadata:"",authorityMetadata:"",clientCapabilities:[],protocolMode:bC.AAD,azureCloudOptions:{azureCloudInstance:a0.None,tenant:""},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},eD={claimsBasedCachingEnabled:!1},eE={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:c.LogLevel.Info},eF={loggerOptions:eE,networkClient:new d2,proxyUrl:"",customAgentOptions:{},disableInternalRetries:!1},eG={application:{appName:"",appVersion:""}};class eH{generateGuid(){return g.v4()}isGuid(a){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}}class eI{static base64Encode(a,b){return Buffer.from(a,b).toString(V)}static base64EncodeUrl(a,b){return eI.base64Encode(a,b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(a){return Buffer.from(a,V).toString("utf8")}static base64DecodeUrl(a){let b=a.replace(/-/g,"+").replace(/_/g,"/");for(;b.length%4;)b+="=";return eI.base64Decode(b)}}class eJ{sha256(a){return h.createHash("sha256").update(a).digest()}}class eK{constructor(){this.hashUtils=new eJ}async generatePkceCodes(){let a=this.generateCodeVerifier(),b=this.generateCodeChallengeFromVerifier(a);return{verifier:a,challenge:b}}generateCodeVerifier(){let a=[],b=256-256%dY.length;for(;a.length<=32;){let c=h.randomBytes(1)[0];if(c>=b)continue;let d=c%dY.length;a.push(dY[d])}let c=a.join("");return eI.base64EncodeUrl(c)}generateCodeChallengeFromVerifier(a){return eI.base64EncodeUrl(this.hashUtils.sha256(a).toString(V),V)}}class eL{constructor(){this.pkceGenerator=new eK,this.guidGenerator=new eH,this.hashUtils=new eJ}base64UrlEncode(){throw Error("Method not implemented.")}encodeKid(){throw Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(a){return eI.base64Encode(a)}base64Decode(a){return eI.base64Decode(a)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw Error("Method not implemented.")}removeTokenBindingKey(){throw Error("Method not implemented.")}clearKeystore(){throw Error("Method not implemented.")}signJwt(){throw Error("Method not implemented.")}async hashString(a){return eI.base64EncodeUrl(this.hashUtils.sha256(a).toString(V),V)}}class eM extends bS{constructor(a,b,c,d){super(b,c,a,new i.StubPerformanceClient,d),this.cache={},this.changeEmitters=[],this.logger=a}registerChangeEmitter(a){this.changeEmitters.push(a)}emitChange(){this.changeEmitters.forEach(a=>a.call(null))}cacheToInMemoryCache(a){let b={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let c in a){let d=a[c];if("object"==typeof d)if(d instanceof bD)b.accounts[c]=d;else if(c1(d))b.idTokens[c]=d;else if(c0(d))b.accessTokens[c]=d;else if(c2(d))b.refreshTokens[c]=d;else{if(!c3(c,d))continue;b.appMetadata[c]=d}}return b}inMemoryCacheToCache(a){let b=this.getCache();return{...b,...a.accounts,...a.idTokens,...a.accessTokens,...a.refreshTokens,...a.appMetadata}}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(a){this.logger.trace("Setting in-memory cache");let b=this.inMemoryCacheToCache(a);this.setCache(b),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(a){this.logger.trace("Setting cache key value store"),this.cache=a,this.emitChange()}getItem(a){return this.logger.tracePii(`Item key: ${a}`),this.getCache()[a]}setItem(a,b){this.logger.tracePii(`Item key: ${a}`);let c=this.getCache();c[a]=b,this.setCache(c)}generateCredentialKey(a){let b,c;return b=a.credentialType===K&&a.familyId||a.clientId,c=a.tokenType&&a.tokenType.toLowerCase()!==S.toLowerCase()?a.tokenType.toLowerCase():"",[a.homeAccountId,a.environment,a.credentialType,b,a.realm||"",a.target||"",a.requestedClaimsHash||"",c].join("-").toLowerCase()}generateAccountKey(a){let b;return b=a.homeAccountId.split(".")[1],[a.homeAccountId,a.environment,b||a.tenantId||""].join("-").toLowerCase()}getAccountKeys(){return Object.keys(this.getInMemoryCache().accounts)}getTokenKeys(){let a=this.getInMemoryCache();return{idToken:Object.keys(a.idTokens),accessToken:Object.keys(a.accessTokens),refreshToken:Object.keys(a.refreshTokens)}}getAccount(a){return this.getItem(a)?Object.assign(new bD,this.getItem(a)):null}async setAccount(a){let b=this.generateAccountKey(bD.getAccountInfo(a));this.setItem(b,a)}getIdTokenCredential(a){let b=this.getItem(a);return c1(b)?b:null}async setIdTokenCredential(a){let b=this.generateCredentialKey(a);this.setItem(b,a)}getAccessTokenCredential(a){let b=this.getItem(a);return c0(b)?b:null}async setAccessTokenCredential(a){let b=this.generateCredentialKey(a);this.setItem(b,a)}getRefreshTokenCredential(a){let b=this.getItem(a);return c2(b)?b:null}async setRefreshTokenCredential(a){let b=this.generateCredentialKey(a);this.setItem(b,a)}getAppMetadata(a){let b=this.getItem(a);return c3(a,b)?b:null}setAppMetadata(a){let b=function({environment:a,clientId:b}){return[L,a,b].join("-").toLowerCase()}(a);this.setItem(b,a)}getServerTelemetry(a){let b,c,d=this.getItem(a);return d&&(b=0===a.indexOf(R),c=!0,d&&(c=d.hasOwnProperty("failedRequests")&&d.hasOwnProperty("errors")&&d.hasOwnProperty("cacheHits")),b&&c)?d:null}setServerTelemetry(a,b){this.setItem(a,b)}getAuthorityMetadata(a){let b=this.getItem(a);return b&&b&&0===a.indexOf(M)&&b.hasOwnProperty("aliases")&&b.hasOwnProperty("preferred_cache")&&b.hasOwnProperty("preferred_network")&&b.hasOwnProperty("canonical_authority")&&b.hasOwnProperty("authorization_endpoint")&&b.hasOwnProperty("token_endpoint")&&b.hasOwnProperty("issuer")&&b.hasOwnProperty("aliasesFromNetwork")&&b.hasOwnProperty("endpointsFromNetwork")&&b.hasOwnProperty("expiresAt")&&b.hasOwnProperty("jwks_uri")?b:null}getAuthorityMetadataKeys(){return this.getKeys().filter(a=>this.isAuthorityMetadata(a))}setAuthorityMetadata(a,b){this.setItem(a,b)}getThrottlingCache(a){let b,c,d=this.getItem(a);return d&&(b=!1,a&&(b=0===a.indexOf(U)),c=!0,d&&(c=d.hasOwnProperty("throttleTime")),b&&c)?d:null}setThrottlingCache(a,b){this.setItem(a,b)}removeItem(a){this.logger.tracePii(`Item key: ${a}`);let b=!1,c=this.getCache();return c[a]&&(delete c[a],b=!0),b&&(this.setCache(c),this.emitChange()),b}removeOutdatedAccount(a){this.removeItem(a)}containsKey(a){return this.getKeys().includes(a)}getKeys(){return this.logger.trace("Retrieving all cache keys"),[...Object.keys(this.getCache())]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(a=>{this.removeItem(a)}),this.emitChange()}static generateInMemoryCache(a){return dE.deserializeAllCache(dE.deserializeJSONBlob(a))}static generateJsonCache(a){return m.serializeAllCache(a)}updateCredentialCacheKey(a,b){let c=this.generateCredentialKey(b);if(a!==c){let d=this.getItem(a);if(d)return this.removeItem(a),this.setItem(c,d),this.logger.verbose(`Updated an outdated ${b.credentialType} cache key`),c;this.logger.error(`Attempted to update an outdated ${b.credentialType} cache key but no item matching the outdated key was found in storage`)}return a}}let eN={},eO={},eP={},eQ={},eR={};class eS{constructor(a,b,c){this.cacheHasChanged=!1,this.storage=a,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),c&&(this.persistence=c),this.logger=b}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let a=m.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),a=this.mergeState(JSON.parse(this.cacheSnapshot),a)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(a)}deserialize(a){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=a,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let a=dE.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(a)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let a=eM.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(a)}async getAllAccounts(a=new eL().createNewGuid()){let b;this.logger.trace("getAllAccounts called");try{return this.persistence&&(b=new dx(this,!1),await this.persistence.beforeCacheAccess(b)),this.storage.getAllAccounts({},a)}finally{this.persistence&&b&&await this.persistence.afterCacheAccess(b)}}async getAccountByHomeId(a){let b=await this.getAllAccounts();return a&&b&&b.length&&b.filter(b=>b.homeAccountId===a)[0]||null}async getAccountByLocalId(a){let b=await this.getAllAccounts();return a&&b&&b.length&&b.filter(b=>b.localAccountId===a)[0]||null}async removeAccount(a,b){let c;this.logger.trace("removeAccount called");try{this.persistence&&(c=new dx(this,!0),await this.persistence.beforeCacheAccess(c)),this.storage.removeAccount(a,b||new eH().generateGuid())}finally{this.persistence&&c&&await this.persistence.afterCacheAccess(c)}}async overwriteCache(){if(!this.persistence)return void this.logger.info("No persistence layer specified, cache cannot be overwritten");this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let a=new dx(this,!1);await this.persistence.beforeCacheAccess(a);let b=this.getCacheSnapshot();this.storage.setCache(b),await this.persistence.afterCacheAccess(a)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(a,b){this.logger.trace("Merging in-memory cache with cache snapshot");let c=this.mergeRemovals(a,b);return this.mergeUpdates(c,b)}mergeUpdates(a,b){return Object.keys(b).forEach(c=>{let d=b[c];if(a.hasOwnProperty(c)){let b=null!==d,e="object"==typeof d,f=!Array.isArray(d),g=void 0!==a[c]&&null!==a[c];b&&e&&f&&g?this.mergeUpdates(a[c],d):a[c]=d}else null!==d&&(a[c]=d)}),a}mergeRemovals(a,b){this.logger.trace("Remove updated entries in cache");let c=a.Account?this.mergeRemovalsDict(a.Account,b.Account):a.Account,d=a.AccessToken?this.mergeRemovalsDict(a.AccessToken,b.AccessToken):a.AccessToken,e=a.RefreshToken?this.mergeRemovalsDict(a.RefreshToken,b.RefreshToken):a.RefreshToken,f=a.IdToken?this.mergeRemovalsDict(a.IdToken,b.IdToken):a.IdToken,g=a.AppMetadata?this.mergeRemovalsDict(a.AppMetadata,b.AppMetadata):a.AppMetadata;return{...a,Account:c,AccessToken:d,RefreshToken:e,IdToken:f,AppMetadata:g}}mergeRemovalsDict(a,b){let c={...a};return Object.keys(a).forEach(a=>{b&&b.hasOwnProperty(a)||delete c[a]}),c}overlayDefaults(a){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...eN,...a.Account},IdToken:{...eO,...a.IdToken},AccessToken:{...eP,...a.AccessToken},RefreshToken:{...eQ,...a.RefreshToken},AppMetadata:{...eR,...a.AppMetadata}}}}class eT{static fromAssertion(a){let b=new eT;return b.jwt=a,b}static fromCertificate(a,b,c){let d=new eT;return d.privateKey=b,d.thumbprint=a,d.useSha256=!1,c&&(d.publicCertificate=this.parseCertificate(c)),d}static fromCertificateWithSha256Thumbprint(a,b,c){let d=new eT;return d.privateKey=b,d.thumbprint=a,d.useSha256=!0,c&&(d.publicCertificate=this.parseCertificate(c)),d}getJwt(a,b,c){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&b===this.issuer&&c===this.jwtAudience?this.jwt:this.createJwt(a,b,c);if(this.jwt)return this.jwt;throw aX(aE)}createJwt(a,b,c){this.issuer=b,this.jwtAudience=c;let d=cY();this.expirationTime=d+600;let e={alg:this.useSha256?"PS256":"RS256"};Object.assign(e,{[this.useSha256?"x5t#S256":"x5t"]:eI.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(e,{x5c:this.publicCertificate});let f={aud:this.jwtAudience,exp:this.expirationTime,iss:this.issuer,sub:this.issuer,nbf:d,jti:a.createNewGuid()};return this.jwt=j.sign(f,this.privateKey,{header:e}),this.jwt}isExpired(){return this.expirationTime<cY()}static parseCertificate(a){let b,c=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,d=[];for(;null!==(b=c.exec(a));)d.push(b[1].replace(/\r*\n/g,""));return d}}class eU extends de{constructor(a){super(a)}async acquireToken(a){this.logger.info("in acquireToken call in username-password client");let b=cY(),c=await this.executeTokenRequest(this.authority,a),d=new dy(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(c.body),d.handleServerTokenResponse(c.body,this.authority,b,a)}async executeTokenRequest(a,b){let c=this.createTokenQueryParameters(b),d=bI.appendQueryString(a.tokenEndpoint,c),e=await this.createTokenRequestBody(b),f=this.createTokenRequestHeaders({credential:b.username,type:"UPN"}),g={clientId:this.config.authOptions.clientId,authority:a.canonicalAuthority,scopes:b.scopes,claims:b.claims,authenticationScheme:b.authenticationScheme,resourceRequestMethod:b.resourceRequestMethod,resourceRequestUri:b.resourceRequestUri,shrClaims:b.shrClaims,sshKid:b.sshKid};return this.executePostToTokenEndpoint(d,e,f,g,b.correlationId)}async createTokenRequestBody(a){var b,c;let d=new Map;cA(d,this.config.authOptions.clientId),b=a.username,d.set("username",b),c=a.password,d.set("password",c),cz(d,a.scopes),cy(d,"id_token token"),cN(d,"password"),cO(d),cH(d,this.config.libraryInfo),cI(d,this.config.telemetry.application),cU(d),this.serverTelemetryManager&&cT(d,this.serverTelemetryManager),cG(d,a.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&cK(d,this.config.clientCredentials.clientSecret);let e=this.config.clientCredentials.clientAssertion;return e&&(cL(d,await dz(e.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),cM(d,e.assertionType)),(!bu.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(d,a.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&a.username&&cC(d,a.username),bH(d)}}class eV{constructor(a){this.config=function({auth:a,broker:b,cache:c,system:d,telemetry:e}){let f={...eF,networkClient:new d2(d?.proxyUrl,d?.customAgentOptions),loggerOptions:d?.loggerOptions||eE,disableInternalRetries:d?.disableInternalRetries||!1};if(a.clientCertificate&&!a.clientCertificate.thumbprint&&!a.clientCertificate.thumbprintSha256)throw eB.createStateNotFoundError();return{auth:{...eC,...a},broker:{...b},cache:{...eD,...c},system:{...f,...d},telemetry:{...eG,...e}}}(a),this.cryptoProvider=new eL,this.logger=new aZ(this.config.system.loggerOptions,d0,d1),this.storage=new eM(this.logger,this.config.auth.clientId,this.cryptoProvider,function(a){let b,c=a.cloudDiscoveryMetadata;if(c)try{b=JSON.parse(c)}catch(a){throw bt(bc)}return{canonicalAuthority:a.authority?c8(a.authority):void 0,knownAuthorities:a.knownAuthorities,cloudDiscoveryMetadata:b}}(this.config.auth)),this.tokenCache=new eS(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(a){var b,c;let d,e;this.logger.info("getAuthCodeUrl called",a.correlationId);let f={...a,...await this.initializeBaseRequest(a),responseMode:a.responseMode||F.QUERY,authenticationScheme:S,state:a.state||"",nonce:a.nonce||""},g=await this.createAuthority(f.authority,f.correlationId,void 0,a.azureCloudOptions);return b=this.config,c=this.logger,cH(d=function(a,b,c,d){var e,f,g,h,i,j,k;let l=b.correlationId,m=new Map;if(cA(m,b.embeddedClientId||b.extraQueryParameters?.[co]||a.clientId),cz(m,[...b.scopes||[],...b.extraScopesToConsent||[]],!0,a.authority.options.OIDCOptions?.defaultScopes),e=b.redirectUri,m.set(cp,e),cG(m,l),f=b.responseMode,m.set("response_mode",f||F.QUERY),cO(m),b.prompt&&(g=b.prompt,m.set("prompt",g)),b.domainHint&&(h=b.domainHint,m.set("domain_hint",h)),b.prompt!==E.SELECT_ACCOUNT)if(b.sid&&b.prompt===E.NONE)c.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),cE(m,b.sid);else if(b.account){let a=(j=b.account,j.idTokenClaims?.sid||null),d=(k=b.account).loginHint||k.idTokenClaims?.login_hint||null;if(d&&b.domainHint&&(c.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),d=null),d){c.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),cB(m,d);try{let a=bx(b.account.homeAccountId);cD(m,a)}catch(a){c.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&b.prompt===E.NONE){c.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),cE(m,a);try{let a=bx(b.account.homeAccountId);cD(m,a)}catch(a){c.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(b.loginHint)c.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),cB(m,b.loginHint),cC(m,b.loginHint);else if(b.account.username){c.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),cB(m,b.account.username);try{let a=bx(b.account.homeAccountId);cD(m,a)}catch(a){c.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else b.loginHint&&(c.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),cB(m,b.loginHint),cC(m,b.loginHint));else c.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return b.nonce&&(i=b.nonce,m.set("nonce",i)),b.state&&cJ(m,b.state),(b.claims||a.clientCapabilities&&a.clientCapabilities.length>0)&&cF(m,b.claims,a.clientCapabilities),b.embeddedClientId&&cV(m,a.clientId,a.redirectUri),!a.instanceAware||b.extraQueryParameters&&Object.keys(b.extraQueryParameters).includes(cw)||cP(m),m}({...b.auth,authority:g,redirectUri:f.redirectUri||""},f,c),{sku:dZ,version:d1,cpu:process.arch||"",os:process.platform||""}),b.auth.protocolMode!==bC.OIDC&&cI(d,b.telemetry.application),cy(d,"code"),f.codeChallenge&&f.codeChallengeMethod&&function(a,b,c){if(b&&c)a.set("code_challenge",b),a.set("code_challenge_method",c);else throw bt(bb)}(d,f.codeChallenge,f.codeChallengeMethod),cQ(d,f.extraQueryParameters||{}),e=bH(d,b.auth.encodeExtraQueryParams,f.extraQueryParameters),bI.appendQueryString(g.authorizationEndpoint,e)}async acquireTokenByCode(a,b){this.logger.info("acquireTokenByCode called"),a.state&&b&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(a.state,b.state||""),b={...b,state:""});let c={...a,...await this.initializeBaseRequest(a),authenticationScheme:S},d=this.initializeServerTelemetryManager(871,c.correlationId);try{let e=await this.createAuthority(c.authority,c.correlationId,void 0,a.azureCloudOptions),f=await this.buildOauthClientConfiguration(e,c.correlationId,c.redirectUri,d),g=new dA(f);return this.logger.verbose("Auth code client created",c.correlationId),await g.acquireToken(c,b)}catch(a){throw a instanceof _&&a.setCorrelationId(c.correlationId),d.cacheFailedRequest(a),a}}async acquireTokenByRefreshToken(a){this.logger.info("acquireTokenByRefreshToken called",a.correlationId);let b={...a,...await this.initializeBaseRequest(a),authenticationScheme:S},c=this.initializeServerTelemetryManager(872,b.correlationId);try{let d=await this.createAuthority(b.authority,b.correlationId,void 0,a.azureCloudOptions),e=await this.buildOauthClientConfiguration(d,b.correlationId,b.redirectUri||"",c),f=new dB(e);return this.logger.verbose("Refresh token client created",b.correlationId),await f.acquireToken(b)}catch(a){throw a instanceof _&&a.setCorrelationId(b.correlationId),c.cacheFailedRequest(a),a}}async acquireTokenSilent(a){let b={...a,...await this.initializeBaseRequest(a),forceRefresh:a.forceRefresh||!1},c=this.initializeServerTelemetryManager(62,b.correlationId,b.forceRefresh);try{let d=await this.createAuthority(b.authority,b.correlationId,void 0,a.azureCloudOptions),e=await this.buildOauthClientConfiguration(d,b.correlationId,b.redirectUri||"",c),f=new dC(e);this.logger.verbose("Silent flow client created",b.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(b,f,e)}catch(a){if(a instanceof aW&&a.errorCode===aG)return new dB(e).acquireTokenByRefreshToken(b);throw a}}catch(a){throw a instanceof _&&a.setCorrelationId(b.correlationId),c.cacheFailedRequest(a),a}}async acquireCachedTokenSilent(a,b,c){let[d,e]=await b.acquireCachedToken({...a,scopes:a.scopes?.length?a.scopes:[...v]});if("4"===e){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let b=new dB(c);try{await b.acquireTokenByRefreshToken(a)}catch{}}return d}async acquireTokenByUsernamePassword(a){this.logger.info("acquireTokenByUsernamePassword called",a.correlationId);let b={...a,...await this.initializeBaseRequest(a)},c=this.initializeServerTelemetryManager(371,b.correlationId);try{let d=await this.createAuthority(b.authority,b.correlationId,void 0,a.azureCloudOptions),e=await this.buildOauthClientConfiguration(d,b.correlationId,"",c),f=new eU(e);return this.logger.verbose("Username password client created",b.correlationId),await f.acquireToken(b)}catch(a){throw a instanceof _&&a.setCorrelationId(b.correlationId),c.cacheFailedRequest(a),a}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(a,b){if(!a)throw eB.createStateNotFoundError();if(a!==b)throw aX(aj)}getLogger(){return this.logger}setLogger(a){this.logger=a}async buildOauthClientConfiguration(a,b,c,d){return this.logger.verbose("buildOauthClientConfiguration called",b),this.logger.info(`Building oauth client configuration with the following authority: ${a.tokenEndpoint}.`,b),d?.updateRegionDiscoveryMetadata(a.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:c},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:b},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:d,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(a)},libraryInfo:{sku:dZ,version:d1,cpu:process.arch||"",os:process.platform||""},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(a){return this.developerProvidedClientAssertion&&(this.clientAssertion=eT.fromAssertion(await dz(this.developerProvidedClientAssertion,this.config.auth.clientId,a.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,a.tokenEndpoint),assertionType:d$}}async initializeBaseRequest(a){return this.logger.verbose("initializeRequestScopes called",a.correlationId),a.authenticationScheme&&"pop"===a.authenticationScheme&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",a.correlationId),a.authenticationScheme=S,this.config.cache.claimsBasedCachingEnabled&&a.claims&&!bu.isEmptyObj(a.claims)&&(a.requestedClaimsHash=await this.cryptoProvider.hashString(a.claims)),{...a,scopes:[...a&&a.scopes||[],...v],correlationId:a&&a.correlationId||this.cryptoProvider.createNewGuid(),authority:a.authority||this.config.auth.authority}}initializeServerTelemetryManager(a,b,c){return new dD({clientId:this.config.auth.clientId,correlationId:b,apiId:a,forceRefresh:c||!1},this.storage)}async createAuthority(a,b,c,d){this.logger.verbose("createAuthority called",b);let e=c7.generateAuthority(a,d||this.config.auth.azureCloudOptions),f={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:c,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return c9(e,this.config.system.networkClient,this.storage,f,this.logger,b)}clearCache(){this.storage.clear()}}class eW{async listenForAuthCode(a,b){if(this.server)throw eB.createLoopbackServerAlreadyExistsError();return new Promise((c,d)=>{this.server=e.createServer((e,f)=>{let g=e.url;if(g){if("/"===g)return void f.end(a||"Auth code was successfully acquired. You can close this window now.")}else{f.end(b||"Error occurred loading redirectUrl"),d(eB.createUnableToLoadRedirectUrlError());return}let h=this.getRedirectUri(),i=bG(new URL(g,h).search)||{};i.code&&(f.writeHead(302,{location:h}),f.end()),i.error&&f.end(b||`Error occurred: ${i.error}`),c(i)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw eB.createNoLoopbackServerExistsError();let a=this.server.address();if(!a||"string"==typeof a||!a.port)throw this.closeServer(),eB.createInvalidLoopbackAddressTypeError();let b=a&&a.port;return`http://localhost:${b}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class eX extends de{constructor(a){super(a)}async acquireToken(a){let b=await this.getDeviceCode(a);a.deviceCodeCallback(b);let c=cY(),d=await this.acquireTokenWithDeviceCode(a,b),e=new dy(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return e.validateTokenResponse(d),e.handleServerTokenResponse(d,this.authority,c,a)}async getDeviceCode(a){let b=this.createExtraQueryParameters(a),c=bI.appendQueryString(this.authority.deviceCodeEndpoint,b),d=this.createQueryString(a),e=this.createTokenRequestHeaders(),f={clientId:this.config.authOptions.clientId,authority:a.authority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid};return this.executePostRequestToDeviceCodeEndpoint(c,d,e,f,a.correlationId)}createExtraQueryParameters(a){let b=new Map;return a.extraQueryParameters&&cQ(b,a.extraQueryParameters),bH(b)}async executePostRequestToDeviceCodeEndpoint(a,b,c,d,e){let{body:{user_code:f,device_code:g,verification_uri:h,expires_in:i,interval:j,message:k}}=await this.sendPostRequest(d,a,{body:b,headers:c},e);return{userCode:f,deviceCode:g,verificationUri:h,expiresIn:i,interval:j,message:k}}createQueryString(a){let b=new Map;return cz(b,a.scopes),cA(b,this.config.authOptions.clientId),a.extraQueryParameters&&cQ(b,a.extraQueryParameters),(a.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(b,a.claims,this.config.authOptions.clientCapabilities),bH(b)}continuePolling(a,b,c){if(c)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),aX(av);if(b&&b<a&&cY()>b)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${b}`),aX(aH);if(cY()>a)throw b&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${b}`),this.logger.error(`Device code expired. Expiration time of device code was ${a}`),aX(aw);return!0}async acquireTokenWithDeviceCode(a,b){let c=this.createTokenQueryParameters(a),d=bI.appendQueryString(this.authority.tokenEndpoint,c),e=this.createTokenRequestBody(a,b),f=this.createTokenRequestHeaders(),g=a.timeout?cY()+a.timeout:void 0,h=cY()+b.expiresIn,i=1e3*b.interval;for(;this.continuePolling(h,g,a.cancel);){let b={clientId:this.config.authOptions.clientId,authority:a.authority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid},c=await this.executePostToTokenEndpoint(d,e,f,b,a.correlationId);if(!c.body||!c.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),c.body;if("authorization_pending"===c.body.error)this.logger.info("Authorization pending. Continue polling."),await function(a,b){return new Promise(b=>setTimeout(()=>b(void 0),a))}(i);else{var j;throw this.logger.info("Unexpected error in polling from the server"),new _(X,(j=c.body.error)?`${Z[X]} ${j}`:Z[X])}}throw this.logger.error("Polling stopped for unknown reasons."),aX(ax)}createTokenRequestBody(a,b){var c;let d=new Map;return cz(d,a.scopes),cA(d,this.config.authOptions.clientId),cN(d,"device_code"),c=b.deviceCode,d.set("device_code",c),cG(d,a.correlationId||this.config.cryptoInterface.createNewGuid()),cO(d),cH(d,this.config.libraryInfo),cI(d,this.config.telemetry.application),cU(d),this.serverTelemetryManager&&cT(d,this.serverTelemetryManager),(!bu.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(d,a.claims,this.config.authOptions.clientCapabilities),bH(d)}}class eY extends de{constructor(a,b){super(a),this.appTokenProvider=b}async acquireToken(a){if(a.skipCache||a.claims)return this.executeTokenRequest(a,this.authority);let[b,c]=await this.getCachedAuthenticationResult(a,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return b?("4"===c&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(a,this.authority,!0)),b):this.executeTokenRequest(a,this.authority)}async getCachedAuthenticationResult(a,b,c,d,e,f){let g,h="0";b.serializableCache&&b.persistencePlugin&&(g=new dx(b.serializableCache,!1),await b.persistencePlugin.beforeCacheAccess(g));let i=this.readAccessTokenFromCache(d,b.managedIdentityId?.id||b.authOptions.clientId,new bv(a.scopes||[]),e,a.correlationId);return(b.serializableCache&&b.persistencePlugin&&g&&await b.persistencePlugin.afterCacheAccess(g),i)?c$(i.expiresOn,b.systemOptions?.tokenRenewalOffsetSeconds||300)?(f?.setCacheOutcome("3"),[null,"3"]):(i.refreshOn&&c$(i.refreshOn.toString(),0)&&(h="4",f?.setCacheOutcome("4")),[await dy.generateAuthenticationResult(c,d,{account:null,idToken:null,accessToken:i,refreshToken:null,appMetadata:null},!0,a),h]):(f?.setCacheOutcome("2"),[null,"2"])}readAccessTokenFromCache(a,b,c,d,e){let f={homeAccountId:"",environment:a.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:I,clientId:b,realm:a.tenant,target:bv.createSearchScopes(c.asArray())},g=d.getAccessTokensByFilter(f,e);if(g.length<1)return null;if(g.length>1)throw aX(ao);return g[0]}async executeTokenRequest(a,b,c){let d,e;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let b={correlationId:a.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:a.scopes,claims:a.claims};e=cY();let c=await this.appTokenProvider(b);d={access_token:c.accessToken,expires_in:c.expiresInSeconds,refresh_in:c.refreshInSeconds,token_type:S}}else{let c=this.createTokenQueryParameters(a),f=bI.appendQueryString(b.tokenEndpoint,c),g=await this.createTokenRequestBody(a),h=this.createTokenRequestHeaders(),i={clientId:this.config.authOptions.clientId,authority:a.authority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid};this.logger.info("Sending token request to endpoint: "+b.tokenEndpoint),e=cY();let j=await this.executePostToTokenEndpoint(f,g,h,i,a.correlationId);(d=j.body).status=j.status}let f=new dy(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return f.validateTokenResponse(d,c),await f.handleServerTokenResponse(d,this.authority,e,a)}async createTokenRequestBody(a){let b=new Map;cA(b,this.config.authOptions.clientId),cz(b,a.scopes,!1),cN(b,"client_credentials"),cH(b,this.config.libraryInfo),cI(b,this.config.telemetry.application),cU(b),this.serverTelemetryManager&&cT(b,this.serverTelemetryManager),cG(b,a.correlationId||this.config.cryptoInterface.createNewGuid()),this.config.clientCredentials.clientSecret&&cK(b,this.config.clientCredentials.clientSecret);let c=a.clientAssertion||this.config.clientCredentials.clientAssertion;return c&&(cL(b,await dz(c.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),cM(b,c.assertionType)),(!bu.isEmptyObj(a.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(b,a.claims,this.config.authOptions.clientCapabilities),bH(b)}}class eZ extends de{constructor(a){super(a)}async acquireToken(a){if(this.scopeSet=new bv(a.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(a.oboAssertion),a.skipCache||a.claims)return this.executeTokenRequest(a,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(a)}catch(b){return await this.executeTokenRequest(a,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(a){let b,c=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,a);if(c){if(c$(c.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome("3"),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),aX(aG)}else throw this.serverTelemetryManager?.setCacheOutcome("2"),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),aX(aG);let d=this.readIdTokenFromCacheForOBO(c.homeAccountId,a.correlationId),e=null;if(d){let c=(b=bE(d.secret,eI.base64Decode)).oid||b.sub,f={homeAccountId:d.homeAccountId,environment:d.environment,tenantId:d.realm,username:"",localAccountId:c||""};e=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(f),a.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),dy.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:e,accessToken:c,idToken:d,refreshToken:null,appMetadata:null},!0,a,b)}readIdTokenFromCacheForOBO(a,b){let c={homeAccountId:a,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:H,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},d=this.cacheManager.getIdTokensByFilter(c,b);return Object.values(d).length<1?null:Object.values(d)[0]}readAccessTokenFromCacheForOBO(a,b){let c=b.authenticationScheme||S,d={credentialType:c.toLowerCase()!==S.toLowerCase()?J:I,clientId:a,target:bv.createSearchScopes(this.scopeSet.asArray()),tokenType:c,keyId:b.sshKid,requestedClaimsHash:b.requestedClaimsHash,userAssertionHash:this.userAssertionHash},e=this.cacheManager.getAccessTokensByFilter(d,b.correlationId),f=e.length;if(f<1)return null;if(f>1)throw aX(ao);return e[0]}async executeTokenRequest(a,b,c){let d=this.createTokenQueryParameters(a),e=bI.appendQueryString(b.tokenEndpoint,d),f=await this.createTokenRequestBody(a),g=this.createTokenRequestHeaders(),h={clientId:this.config.authOptions.clientId,authority:a.authority,scopes:a.scopes,claims:a.claims,authenticationScheme:a.authenticationScheme,resourceRequestMethod:a.resourceRequestMethod,resourceRequestUri:a.resourceRequestUri,shrClaims:a.shrClaims,sshKid:a.sshKid},i=cY(),j=await this.executePostToTokenEndpoint(e,f,g,h,a.correlationId),k=new dy(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return k.validateTokenResponse(j.body),await k.handleServerTokenResponse(j.body,this.authority,i,a,void 0,c)}async createTokenRequestBody(a){var b;let c=new Map;cA(c,this.config.authOptions.clientId),cz(c,a.scopes),cN(c,"urn:ietf:params:oauth:grant-type:jwt-bearer"),cO(c),cH(c,this.config.libraryInfo),cI(c,this.config.telemetry.application),cU(c),this.serverTelemetryManager&&cT(c,this.serverTelemetryManager),cG(c,a.correlationId||this.config.cryptoInterface.createNewGuid()),c.set("requested_token_use","on_behalf_of"),b=a.oboAssertion,c.set("assertion",b),this.config.clientCredentials.clientSecret&&cK(c,this.config.clientCredentials.clientSecret);let d=this.config.clientCredentials.clientAssertion;return d&&(cL(c,await dz(d.assertion,this.config.authOptions.clientId,a.resourceRequestUri)),cM(c,d.assertionType)),(a.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&cF(c,a.claims,this.config.authOptions.clientCapabilities),bH(c)}}class e${constructor(a,b,c){this.httpClientNoRetries=a,this.retryPolicy=b,this.logger=c}async sendNetworkRequestAsyncHelper(a,b,c){return"get"===a?this.httpClientNoRetries.sendGetRequestAsync(b,c):this.httpClientNoRetries.sendPostRequestAsync(b,c)}async sendNetworkRequestAsync(a,b,c){let d=await this.sendNetworkRequestAsyncHelper(a,b,c);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let e=0;for(;await this.retryPolicy.pauseForRetry(d.status,e,this.logger,d.headers[y]);)d=await this.sendNetworkRequestAsyncHelper(a,b,c),e++;return d}async sendGetRequestAsync(a,b){return this.sendNetworkRequestAsync("get",a,b)}async sendPostRequestAsync(a,b){return this.sendNetworkRequestAsync(dX,a,b)}}let e_="clientid";class e0{constructor(a,b,c,d,e){this.logger=a,this.nodeStorage=b,this.networkClient=c,this.cryptoProvider=d,this.disableInternalRetries=e}async getServerTokenResponseAsync(a,b,c,d){return this.getServerTokenResponse(a)}getServerTokenResponse(a){let b,c;return a.body.expires_on&&(function(a){if("string"!=typeof a)return!1;let b=new Date(a);return!isNaN(b.getTime())&&b.toISOString()===a}(a.body.expires_on)&&(a.body.expires_on=new Date(a.body.expires_on).getTime()/1e3),(c=a.body.expires_on-cY())>7200&&(b=c/2)),{status:a.status,access_token:a.body.access_token,expires_in:c,scope:a.body.resource,token_type:a.body.token_type,refresh_in:b,correlation_id:a.body.correlation_id||a.body.correlationId,error:"string"==typeof a.body.error?a.body.error:a.body.error?.code,error_description:a.body.message||("string"==typeof a.body.error?a.body.error_description:a.body.error?.message),error_codes:a.body.error_codes,timestamp:a.body.timestamp,trace_id:a.body.trace_id}}async acquireTokenWithManagedIdentity(a,b,c,d){let e,f=this.createRequest(a.resource,b);if(a.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${a.claims}`),f.queryParameters.token_sha256_to_refresh=a.revokedTokenSha256Hash),a.clientCapabilities?.length){let b=a.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${b}`),f.queryParameters.xms_cc=b}let g=f.headers;g[x]=r;let h={headers:g};Object.keys(f.bodyParameters).length&&(h.body=f.computeParametersBodyString());let i=this.disableInternalRetries?this.networkClient:new e$(this.networkClient,f.retryPolicy,this.logger),j=cY();try{e=f.httpMethod===dX?await i.sendPostRequestAsync(f.computeUri(),h):await i.sendGetRequestAsync(f.computeUri(),h)}catch(a){if(a instanceof _)throw a;throw aX(af)}let k=new dy(b.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),l=await this.getServerTokenResponseAsync(e,i,f,h);return k.validateTokenResponse(l,d),k.handleServerTokenResponse(l,c,j,a)}getManagedIdentityUserAssignedIdQueryParameterKey(a,b,c){switch(a){case dU:return this.logger.info(`[Managed Identity] [API version ${c?"2017+":"2019+"}] Adding user assigned client id to the request.`),c?e_:"client_id";case dV:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),b?"msi_res_id":"mi_res_id";case dW:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),"object_id";default:throw eh(d5)}}}e0.getValidatedEnvVariableUrlString=(a,b,c,d)=>{try{return new bI(b).urlString}catch(b){throw d.info(`[Managed Identity] ${c} managed identity is unavailable because the '${a}' environment variable is malformed.`),eh(ee[a])}};class e1{calculateDelay(a,b){if(!a)return b;let c=Math.round(1e3*parseFloat(a));return isNaN(c)&&(c=new Date(a).valueOf()-new Date().valueOf()),Math.max(b,c)}}let e2=[i.HttpStatus.NOT_FOUND,i.HttpStatus.REQUEST_TIMEOUT,i.HttpStatus.TOO_MANY_REQUESTS,i.HttpStatus.SERVER_ERROR,i.HttpStatus.SERVICE_UNAVAILABLE,i.HttpStatus.GATEWAY_TIMEOUT];class e3{constructor(){this.linearRetryStrategy=new e1}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return 1e3}async pauseForRetry(a,b,c,d){if(e2.includes(a)&&b<3){let a=this.linearRetryStrategy.calculateDelay(d,e3.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return c.verbose(`Retrying request in ${a}ms (retry attempt: ${b+1})`),await new Promise(b=>setTimeout(b,a)),!0}return!1}}class e4{constructor(a,b,c){this.httpMethod=a,this._baseEndpoint=b,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=c||new e3}computeUri(){let a=new Map;this.queryParameters&&cQ(a,this.queryParameters);let b=bH(a);return bI.appendQueryString(this._baseEndpoint,b)}computeParametersBodyString(){let a=new Map;return this.bodyParameters&&cQ(a,this.bodyParameters),bH(a)}}class e5 extends e0{constructor(a,b,c,d,e,f,g){super(a,b,c,d,e),this.identityEndpoint=f,this.identityHeader=g}static getEnvironmentVariables(){return[process.env[dM],process.env[dN]]}static tryCreate(a,b,c,d,e){let[f,g]=e5.getEnvironmentVariables();if(!f||!g)return a.info(`[Managed Identity] ${dS.APP_SERVICE} managed identity is unavailable because one or both of the '${dN}' and '${dM}' environment variables are not defined.`),null;let h=e5.getValidatedEnvVariableUrlString(dM,f,dS.APP_SERVICE,a);return a.info(`[Managed Identity] Environment variables validation passed for ${dS.APP_SERVICE} managed identity. Endpoint URI: ${h}. Creating ${dS.APP_SERVICE} managed identity.`),new e5(a,b,c,d,e,f,g)}createRequest(a,b){let c=new e4("get",this.identityEndpoint);return c.headers["X-IDENTITY-HEADER"]=this.identityHeader,c.queryParameters[dJ]="2019-08-01",c.queryParameters[dK]=a,b.idType!==dT&&(c.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(b.idType)]=b.id),c}}let e6="http://127.0.0.1:40342/metadata/identity/oauth2/token",e7="N/A: himds executable exists",e8={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},e9={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class fa extends e0{constructor(a,b,c,d,e,f){super(a,b,c,d,e),this.identityEndpoint=f}static getEnvironmentVariables(){let a=process.env[dM],b=process.env[dP];if(!a||!b){let c=e9[process.platform];try{k.accessSync(c,k.constants.F_OK|k.constants.R_OK),a=e6,b=e7}catch(a){}}return[a,b]}static tryCreate(a,b,c,d,e,f){let[g,h]=fa.getEnvironmentVariables();if(!g||!h)return a.info(`[Managed Identity] ${dS.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${dM}' and '${dP}' are not defined. ${dS.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(h===e7)a.info(`[Managed Identity] ${dS.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${dS.AZURE_ARC} endpoint: ${e6}. Creating ${dS.AZURE_ARC} managed identity.`);else{let b=fa.getValidatedEnvVariableUrlString(dM,g,dS.AZURE_ARC,a);b.endsWith("/")&&b.slice(0,-1),fa.getValidatedEnvVariableUrlString(dP,h,dS.AZURE_ARC,a),a.info(`[Managed Identity] Environment variables validation passed for ${dS.AZURE_ARC} managed identity. Endpoint URI: ${b}. Creating ${dS.AZURE_ARC} managed identity.`)}if(f.idType!==dT)throw eh(d8);return new fa(a,b,c,d,e,g)}createRequest(a){let b=new e4("get",this.identityEndpoint.replace("localhost","127.0.0.1"));return b.headers[dH]="true",b.queryParameters[dJ]="2019-11-01",b.queryParameters[dK]=a,b}async getServerTokenResponseAsync(a,b,c,d){let e;if(401===a.status){let f,g,h=a.headers["www-authenticate"];if(!h)throw eh(ec);if(!h.includes("Basic realm="))throw eh(ed);let i=h.split("Basic realm=")[1];if(!e8.hasOwnProperty(process.platform))throw eh(d7);let j=e8[process.platform],m=l.basename(i);if(!m.endsWith(".key"))throw eh(d3);if(j+m!==i)throw eh(d4);try{f=await k.statSync(i).size}catch(a){throw eh(eb)}if(f>4096)throw eh(d6);try{g=k.readFileSync(i,"utf-8")}catch(a){throw eh(eb)}let n=`Basic ${g}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),c.headers.Authorization=n;try{e=await b.sendGetRequestAsync(c.computeUri(),d)}catch(a){if(a instanceof _)throw a;throw aX(af)}}return this.getServerTokenResponse(e||a)}}class fb extends e0{constructor(a,b,c,d,e,f){super(a,b,c,d,e),this.msiEndpoint=f}static getEnvironmentVariables(){return[process.env[dQ]]}static tryCreate(a,b,c,d,e,f){let[g]=fb.getEnvironmentVariables();if(!g)return a.info(`[Managed Identity] ${dS.CLOUD_SHELL} managed identity is unavailable because the '${dQ} environment variable is not defined.`),null;let h=fb.getValidatedEnvVariableUrlString(dQ,g,dS.CLOUD_SHELL,a);if(a.info(`[Managed Identity] Environment variable validation passed for ${dS.CLOUD_SHELL} managed identity. Endpoint URI: ${h}. Creating ${dS.CLOUD_SHELL} managed identity.`),f.idType!==dT)throw eh(d9);return new fb(a,b,c,d,e,g)}createRequest(a){let b=new e4(dX,this.msiEndpoint);return b.headers[dH]="true",b.bodyParameters[dK]=a,b}}class fc{constructor(a,b,c){this.minExponentialBackoff=a,this.maxExponentialBackoff=b,this.exponentialDeltaBackoff=c}calculateDelay(a){return 0===a?this.minExponentialBackoff:Math.min(Math.pow(2,a-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}}let fd=[i.HttpStatus.NOT_FOUND,i.HttpStatus.REQUEST_TIMEOUT,i.HttpStatus.GONE,i.HttpStatus.TOO_MANY_REQUESTS];class fe{constructor(){this.exponentialRetryStrategy=new fc(fe.MIN_EXPONENTIAL_BACKOFF_MS,fe.MAX_EXPONENTIAL_BACKOFF_MS,fe.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return 1e3}static get MAX_EXPONENTIAL_BACKOFF_MS(){return 4e3}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return 2e3}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return 1e4}set isNewRequest(a){this._isNewRequest=a}async pauseForRetry(a,b,c){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=a===i.HttpStatus.GONE?7:3),(fd.includes(a)||a>=i.HttpStatus.SERVER_ERROR_RANGE_START&&a<=i.HttpStatus.SERVER_ERROR_RANGE_END&&b<this.maxRetries)&&b<this.maxRetries){let d=a===i.HttpStatus.GONE?fe.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(b);return c.verbose(`Retrying request in ${d}ms (retry attempt: ${b+1})`),await new Promise(a=>setTimeout(a,d)),!0}return!1}}let ff="/metadata/identity/oauth2/token",fg=`http://169.254.169.254${ff}`;class fh extends e0{constructor(a,b,c,d,e,f){super(a,b,c,d,e),this.identityEndpoint=f}static tryCreate(a,b,c,d,e){let f;return process.env[dL]?(a.info(`[Managed Identity] Environment variable ${dL} for ${dS.IMDS} returned endpoint: ${process.env[dL]}`),f=fh.getValidatedEnvVariableUrlString(dL,`${process.env[dL]}${ff}`,dS.IMDS,a)):(a.info(`[Managed Identity] Unable to find ${dL} environment variable for ${dS.IMDS}, using the default endpoint.`),f=fg),new fh(a,b,c,d,e,f)}createRequest(a,b){let c=new e4("get",this.identityEndpoint);return c.headers[dH]="true",c.queryParameters[dJ]="2018-02-01",c.queryParameters[dK]=a,b.idType!==dT&&(c.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(b.idType,!0)]=b.id),c.retryPolicy=new fe,c}}class fi extends e0{constructor(a,b,c,d,e,f,g){super(a,b,c,d,e),this.identityEndpoint=f,this.identityHeader=g}static getEnvironmentVariables(){return[process.env[dM],process.env[dN],process.env[dO]]}static tryCreate(a,b,c,d,e,f){let[g,h,i]=fi.getEnvironmentVariables();if(!g||!h||!i)return a.info(`[Managed Identity] ${dS.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${dN}', '${dM}' or '${dO}' environment variables are not defined.`),null;let j=fi.getValidatedEnvVariableUrlString(dM,g,dS.SERVICE_FABRIC,a);return a.info(`[Managed Identity] Environment variables validation passed for ${dS.SERVICE_FABRIC} managed identity. Endpoint URI: ${j}. Creating ${dS.SERVICE_FABRIC} managed identity.`),f.idType!==dT&&a.warning(`[Managed Identity] ${dS.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new fi(a,b,c,d,e,g,h)}createRequest(a,b){let c=new e4("get",this.identityEndpoint);return c.headers[dI]=this.identityHeader,c.queryParameters[dJ]="2019-07-01-preview",c.queryParameters[dK]=a,b.idType!==dT&&(c.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(b.idType)]=b.id),c}}let fj=`Only client id is supported for user-assigned managed identity in ${dS.MACHINE_LEARNING}.`;class fk extends e0{constructor(a,b,c,d,e,f,g){super(a,b,c,d,e),this.msiEndpoint=f,this.secret=g}static getEnvironmentVariables(){return[process.env[dQ],process.env[dR]]}static tryCreate(a,b,c,d,e){let[f,g]=fk.getEnvironmentVariables();if(!f||!g)return a.info(`[Managed Identity] ${dS.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${dQ}' and '${dR}' environment variables are not defined.`),null;let h=fk.getValidatedEnvVariableUrlString(dQ,f,dS.MACHINE_LEARNING,a);return a.info(`[Managed Identity] Environment variables validation passed for ${dS.MACHINE_LEARNING} managed identity. Endpoint URI: ${h}. Creating ${dS.MACHINE_LEARNING} managed identity.`),new fk(a,b,c,d,e,f,g)}createRequest(a,b){let c=new e4("get",this.msiEndpoint);if(c.headers[dH]="true",c.headers[dI]=this.secret,c.queryParameters[dJ]="2017-09-01",c.queryParameters[dK]=a,b.idType===dT)c.queryParameters[e_]=process.env.DEFAULT_IDENTITY_CLIENT_ID;else if(b.idType===dU)c.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(b.idType,!1,!0)]=b.id;else throw Error(fj);return c}}class fl{constructor(a,b,c,d,e){this.logger=a,this.nodeStorage=b,this.networkClient=c,this.cryptoProvider=d,this.disableInternalRetries=e}async sendManagedIdentityTokenRequest(a,b,c,d){return fl.identitySource||(fl.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,b)),fl.identitySource.acquireTokenWithManagedIdentity(a,b,c,d)}allEnvironmentVariablesAreDefined(a){return Object.values(a).every(a=>void 0!==a)}getManagedIdentitySource(){return fl.sourceName=this.allEnvironmentVariablesAreDefined(fi.getEnvironmentVariables())?dS.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(e5.getEnvironmentVariables())?dS.APP_SERVICE:this.allEnvironmentVariablesAreDefined(fk.getEnvironmentVariables())?dS.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(fb.getEnvironmentVariables())?dS.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(fa.getEnvironmentVariables())?dS.AZURE_ARC:dS.DEFAULT_TO_IMDS,fl.sourceName}selectManagedIdentitySource(a,b,c,d,e,f){let g=fi.tryCreate(a,b,c,d,e,f)||e5.tryCreate(a,b,c,d,e)||fk.tryCreate(a,b,c,d,e)||fb.tryCreate(a,b,c,d,e,f)||fa.tryCreate(a,b,c,d,e,f)||fh.tryCreate(a,b,c,d,e);if(!g)throw eh(ea);return g}}let fm=[dS.SERVICE_FABRIC];class fn{constructor(a){this.config=function({clientCapabilities:a,managedIdentityIdParams:b,system:c}){let d=new ei(b);return{clientCapabilities:a||[],managedIdentityId:d,system:{loggerOptions:c?.loggerOptions||eE,networkClient:c?.networkClient?c.networkClient:new d2(c?.proxyUrl,c?.customAgentOptions)},disableInternalRetries:c?.disableInternalRetries||!1}}(a||{}),this.logger=new aZ(this.config.system.loggerOptions,d0,d1),fn.nodeStorage||(fn.nodeStorage=new eM(this.logger,this.config.managedIdentityId.id,aY,{canonicalAuthority:n})),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new eL;const b={protocolMode:bC.AAD,knownAuthorities:[dG],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new c7(dG,this.networkClient,fn.nodeStorage,b,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new eY({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new fl(this.logger,fn.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new eJ}async acquireToken(a){if(!a.resource)throw bt(a5);let b={forceRefresh:a.forceRefresh,resource:a.resource.replace("/.default",""),scopes:[a.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:a.claims,clientCapabilities:this.config.clientCapabilities};if(b.forceRefresh)return this.acquireTokenFromManagedIdentity(b,this.config.managedIdentityId,this.fakeAuthority);let[c,d]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(b,this.config,this.cryptoProvider,this.fakeAuthority,fn.nodeStorage);if(b.claims){let a=this.managedIdentityClient.getManagedIdentitySource();return c&&fm.includes(a)&&(b.revokedTokenSha256Hash=this.hashUtils.sha256(c.accessToken).toString("hex")),this.acquireTokenFromManagedIdentity(b,this.config.managedIdentityId,this.fakeAuthority)}return c?("4"===d&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(b,this.config.managedIdentityId,this.fakeAuthority,!0)),c):this.acquireTokenFromManagedIdentity(b,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(a,b,c,d){return this.managedIdentityClient.sendManagedIdentityTokenRequest(a,b,c,d)}getManagedIdentitySource(){return fl.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}c.AuthError=_,c.AuthErrorCodes=Y,c.AuthErrorMessage=$,c.AzureCloudInstance=a0,c.ClientApplication=eV,c.ClientAssertion=eT,c.ClientAuthError=aW,c.ClientAuthErrorCodes=aT,c.ClientAuthErrorMessage=aV,c.ClientConfigurationError=bs,c.ClientConfigurationErrorCodes=bp,c.ClientConfigurationErrorMessage=br,c.ClientCredentialClient=eY,c.ConfidentialClientApplication=class extends eV{constructor(a){super(a);const b=!!this.config.auth.clientSecret,c=!!this.config.auth.clientAssertion,d=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(this.appTokenProvider)return;if(b&&c||c&&d||b&&d)throw aX(aF);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(d)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?eT.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):eT.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw aX(aF);this.appTokenProvider=void 0}SetAppTokenProvider(a){this.appTokenProvider=a}async acquireTokenByClientCredential(a){let b,c;this.logger.info("acquireTokenByClientCredential called",a.correlationId),a.clientAssertion&&(b={assertion:await dz(a.clientAssertion,this.config.auth.clientId),assertionType:d$});let d=await this.initializeBaseRequest(a),e={...d,scopes:d.scopes.filter(a=>!v.includes(a))},f={...a,...e,clientAssertion:b},g=new bI(f.authority).getUrlComponents().PathSegments[0];if(Object.values(C).includes(g))throw aX(aP);let h=process.env.MSAL_FORCE_REGION;"DisableMsalForceRegion"!==f.azureRegion&&(c=!f.azureRegion&&h?h:f.azureRegion);let i={azureRegion:c,environmentRegion:process.env.REGION_NAME},j=this.initializeServerTelemetryManager(771,f.correlationId,f.skipCache);try{let b=await this.createAuthority(f.authority,f.correlationId,i,a.azureCloudOptions),c=await this.buildOauthClientConfiguration(b,f.correlationId,"",j),d=new eY(c,this.appTokenProvider);return this.logger.verbose("Client credential client created",f.correlationId),await d.acquireToken(f)}catch(a){throw a instanceof _&&a.setCorrelationId(f.correlationId),j.cacheFailedRequest(a),a}}async acquireTokenOnBehalfOf(a){this.logger.info("acquireTokenOnBehalfOf called",a.correlationId);let b={...a,...await this.initializeBaseRequest(a)};try{let c=await this.createAuthority(b.authority,b.correlationId,void 0,a.azureCloudOptions),d=await this.buildOauthClientConfiguration(c,b.correlationId,"",void 0),e=new eZ(d);return this.logger.verbose("On behalf of client created",b.correlationId),await e.acquireToken(b)}catch(a){throw a instanceof _&&a.setCorrelationId(b.correlationId),a}}},c.CryptoProvider=eL,c.DeviceCodeClient=eX,c.DistributedCachePlugin=class{constructor(a,b){this.client=a,this.partitionManager=b}async beforeCacheAccess(a){let b=await this.partitionManager.getKey(),c=await this.client.get(b);a.tokenCache.deserialize(c)}async afterCacheAccess(a){if(a.cacheHasChanged){let b,c=Object.values(a.tokenCache.getKVStore()).filter(a=>bD.isAccountEntity(a));if(c.length>0){let a=c[0];b=await this.partitionManager.extractKey(a)}else b=await this.partitionManager.getKey();await this.client.set(b,a.tokenCache.serialize())}}},c.InteractionRequiredAuthError=dt,c.InteractionRequiredAuthErrorCodes=dn,c.InteractionRequiredAuthErrorMessage=ds,c.Logger=aZ,c.ManagedIdentityApplication=fn,c.ManagedIdentitySourceNames=dS,c.OnBehalfOfClient=eZ,c.PromptValue=E,c.ProtocolMode=bC,c.PublicClientApplication=class extends eV{constructor(a){super(a),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=dD.makeExtraSkuString({libraryName:dZ,libraryVersion:d1})}async acquireTokenByDeviceCode(a){this.logger.info("acquireTokenByDeviceCode called",a.correlationId);let b=Object.assign(a,await this.initializeBaseRequest(a)),c=this.initializeServerTelemetryManager(671,b.correlationId);try{let d=await this.createAuthority(b.authority,b.correlationId,void 0,a.azureCloudOptions),e=await this.buildOauthClientConfiguration(d,b.correlationId,"",c),f=new eX(e);return this.logger.verbose("Device code client created",b.correlationId),await f.acquireToken(b)}catch(a){throw a instanceof _&&a.setCorrelationId(b.correlationId),c.cacheFailedRequest(a),a}}async acquireTokenInteractive(a){let b=a.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",b);let{openBrowser:c,successTemplate:d,errorTemplate:e,windowHandle:f,loopbackClient:g,...h}=a;if(this.nativeBrokerPlugin){let c={...h,clientId:this.config.auth.clientId,scopes:a.scopes||v,redirectUri:a.redirectUri||"",authority:a.authority||this.config.auth.authority,correlationId:b,extraParameters:{...h.extraQueryParameters,...h.tokenQueryParameters,[ct]:this.skus},accountId:h.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(c,f)}if(a.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw eB.createRedirectUriNotSupportedError();a.redirectUri=""}let{verifier:i,challenge:j}=await this.cryptoProvider.generatePkceCodes(),k=g||new eW,l={},m=null;try{let f=k.listenForAuthCode(d,e).then(a=>{l=a}).catch(a=>{m=a}),g=await this.waitForRedirectUri(k),n={...h,correlationId:b,scopes:a.scopes||v,redirectUri:g,responseMode:F.QUERY,codeChallenge:j,codeChallengeMethod:"S256"},o=await this.getAuthCodeUrl(n);if(await c(o),await f,m)throw m;if(l.error)throw new da(l.error,l.error_description,l.suberror);if(!l.code)throw eB.createNoAuthCodeInResponseError();let p=l.client_info,q={code:l.code,codeVerifier:i,clientInfo:p||"",...n};return await this.acquireTokenByCode(q)}finally{k.closeServer()}}async acquireTokenSilent(a){let b=a.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",b),this.nativeBrokerPlugin){let c={...a,clientId:this.config.auth.clientId,scopes:a.scopes||v,redirectUri:a.redirectUri||"",authority:a.authority||this.config.auth.authority,correlationId:b,extraParameters:{...a.tokenQueryParameters,[ct]:this.skus},accountId:a.account.nativeAccountId,forceRefresh:a.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(c)}if(a.redirectUri){if(!this.config.broker.nativeBrokerPlugin)throw eB.createRedirectUriNotSupportedError();a.redirectUri=""}return super.acquireTokenSilent(a)}async signOut(a){if(this.nativeBrokerPlugin&&a.account.nativeAccountId){let b={clientId:this.config.auth.clientId,accountId:a.account.nativeAccountId,correlationId:a.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(b)}await this.getTokenCache().removeAccount(a.account,a.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let a=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,a)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(a){return new Promise((b,c)=>{let d=0,e=setInterval(()=>{if(50<d){clearInterval(e),c(eB.createLoopbackServerTimeoutError());return}try{let c=a.getRedirectUri();clearInterval(e),b(c);return}catch(a){if(a instanceof _&&a.errorCode===ep)return void d++;clearInterval(e),c(a);return}},100)})}},c.ResponseMode=F,c.ServerError=da,c.TokenCache=eS,c.TokenCacheContext=dx,c.UsernamePasswordClient=eU,c.internals=dF,c.version=d1},39865,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.msalCommon=void 0,c.msalCommon=a.r(84710).__importStar(a.r(84347))},16090,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.defaultLoggerCallback=void 0,c.ensureValidMsalToken=function(a,b,c){let e=b=>(j.getToken.info(b),new d.AuthenticationRequiredError({scopes:Array.isArray(a)?a:[a],getTokenOptions:c,message:b}));if(!b)throw e("No response");if(!b.expiresOn)throw e('Response had no "expiresOn" property.');if(!b.accessToken)throw e('Response had no "accessToken" property.')},c.getAuthorityHost=function(a){let b=a?.authorityHost;return!b&&g.isNodeLike&&(b=process.env.AZURE_AUTHORITY_HOST),b??f.DefaultAuthorityHost},c.getAuthority=function(a,b){return(b||(b=f.DefaultAuthorityHost),RegExp(`${a}/?$`).test(b))?b:b.endsWith("/")?b+a:`${b}/${a}`},c.getKnownAuthorities=function(a,b,c){return"adfs"===a&&b||c?[b]:[]},c.getMSALLogLevel=function(a){switch(a){case"error":return i.msalCommon.LogLevel.Error;case"info":default:return i.msalCommon.LogLevel.Info;case"verbose":return i.msalCommon.LogLevel.Verbose;case"warning":return i.msalCommon.LogLevel.Warning}},c.randomUUID=function(){return(0,g.randomUUID)()},c.handleMsalError=function(a,b,c){if("AuthError"===b.name||"ClientAuthError"===b.name||"BrowserAuthError"===b.name)switch(b.errorCode){case"endpoints_resolution_error":return j.info((0,e.formatError)(a,b.message)),new d.CredentialUnavailableError(b.message);case"device_code_polling_cancelled":return new h.AbortError("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":j.info((0,e.formatError)(a,`Authentication returned errorCode ${b.errorCode}`));break;default:j.info((0,e.formatError)(a,`Failed to acquire token: ${b.message}`))}return"ClientConfigurationError"===b.name||"BrowserConfigurationAuthError"===b.name||"AbortError"===b.name||"AuthenticationError"===b.name?b:"NativeAuthError"===b.name?(j.info((0,e.formatError)(a,`Error from the native broker: ${b.message} with status code: ${b.statusCode}`)),b):new d.AuthenticationRequiredError({scopes:a,getTokenOptions:c,message:b.message})},c.publicToMsal=function(a){return{localAccountId:a.homeAccountId,environment:a.authority,username:a.username,homeAccountId:a.homeAccountId,tenantId:a.tenantId}},c.msalToPublic=function(a,b){return{authority:b.environment??f.DefaultAuthority,homeAccountId:b.homeAccountId,tenantId:b.tenantId||f.DefaultTenantId,username:b.username,clientId:a,version:"1.0"}},c.serializeAuthenticationRecord=function(a){return JSON.stringify(a)},c.deserializeAuthenticationRecord=function(a){let b=JSON.parse(a);if(b.version&&"1.0"!==b.version)throw Error("Unsupported AuthenticationRecord version");return b};let d=a.r(68409),e=a.r(90158),f=a.r(780),g=a.r(18903),h=a.r(3298),i=a.r(39865),j=(0,e.credentialLogger)("IdentityUtils");c.defaultLoggerCallback=(a,b=g.isNode?"Node":"Browser")=>(c,d,e)=>{if(!e)switch(c){case i.msalCommon.LogLevel.Error:a.info(`MSAL ${b} V2 error: ${d}`);return;case i.msalCommon.LogLevel.Info:a.info(`MSAL ${b} V2 info message: ${d}`);return;case i.msalCommon.LogLevel.Verbose:a.info(`MSAL ${b} V2 verbose message: ${d}`);return;case i.msalCommon.LogLevel.Warning:a.info(`MSAL ${b} V2 warning: ${d}`);return}}},17128,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.encodeString=function(a){return Buffer.from(a).toString("base64")},c.encodeByteArray=function(a){return(a instanceof Buffer?a:Buffer.from(a.buffer)).toString("base64")},c.decodeString=function(a){return Buffer.from(a,"base64")},c.decodeStringToString=function(a){return Buffer.from(a,"base64").toString()}},85523,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.XML_CHARKEY=c.XML_ATTRKEY=void 0,c.XML_ATTRKEY="$",c.XML_CHARKEY="_"},96578,(a,b,c)=>{"use strict";function d(a,b){return"Composite"!==b&&"Dictionary"!==b&&("string"==typeof a||"number"==typeof a||"boolean"==typeof a||b?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||null==a)}Object.defineProperty(c,"__esModule",{value:!0}),c.isPrimitiveBody=d,c.isDuration=function(a){return e.test(a)},c.isValidUuid=function(a){return f.test(a)},c.flattenResponse=function(a,b){var c;let e,f=a.parsedHeaders;if("HEAD"===a.request.method)return{...f,body:a.parsedBody};let g=b&&b.bodyMapper,h=!!g?.nullable,i=g?.type.name;if("Stream"===i)return{...f,blobBody:a.blobBody,readableStreamBody:a.readableStreamBody};let j="Composite"===i&&g.type.modelProperties||{},k=Object.keys(j).some(a=>""===j[a].serializedName);if("Sequence"===i||k){let b=a.parsedBody??[];for(let c of Object.keys(j))j[c].serializedName&&(b[c]=a.parsedBody?.[c]);if(f)for(let a of Object.keys(f))b[a]=f[a];return!h||a.parsedBody||f||0!==Object.getOwnPropertyNames(j).length?b:null}return e={...(c={body:a.parsedBody,headers:f,hasNullableType:h,shouldWrapBody:d(a.parsedBody,i)}).headers,...c.body},c.hasNullableType&&0===Object.getOwnPropertyNames(e).length?c.shouldWrapBody?{body:null}:null:c.shouldWrapBody?{...c.headers,body:c.body}:e};let e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i},87439,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.MapperTypeNames=void 0,c.createSerializer=function(a={},b=!1){return new g(a,b)};let d=a.r(84710).__importStar(a.r(17128)),e=a.r(85523),f=a.r(96578);class g{modelMappers;isXML;constructor(a={},b=!1){this.modelMappers=a,this.isXML=b}validateConstraints(a,b,c){let d=(a,d)=>{throw Error(`"${c}" with value "${b}" should satisfy the constraint "${a}": ${d}.`)};if(a.constraints&&null!=b){let{ExclusiveMaximum:c,ExclusiveMinimum:e,InclusiveMaximum:f,InclusiveMinimum:g,MaxItems:h,MaxLength:i,MinItems:j,MinLength:k,MultipleOf:l,Pattern:m,UniqueItems:n}=a.constraints;if(void 0!==c&&b>=c&&d("ExclusiveMaximum",c),void 0!==e&&b<=e&&d("ExclusiveMinimum",e),void 0!==f&&b>f&&d("InclusiveMaximum",f),void 0!==g&&b<g&&d("InclusiveMinimum",g),void 0!==h&&b.length>h&&d("MaxItems",h),void 0!==i&&b.length>i&&d("MaxLength",i),void 0!==j&&b.length<j&&d("MinItems",j),void 0!==k&&b.length<k&&d("MinLength",k),void 0!==l&&b%l!=0&&d("MultipleOf",l),m){let a="string"==typeof m?new RegExp(m):m;("string"!=typeof b||null===b.match(a))&&d("Pattern",m)}n&&b.some((a,b,c)=>c.indexOf(a)!==b)&&d("UniqueItems",n)}}serialize(a,b,c,g={xml:{}}){let n={xml:{rootName:g.xml.rootName??"",includeRoot:g.xml.includeRoot??!1,xmlCharKey:g.xml.xmlCharKey??e.XML_CHARKEY}},o={},p=a.type.name;c||(c=a.serializedName),null!==p.match(/^Sequence$/i)&&(o=[]),a.isConstant&&(b=a.defaultValue);let{required:q,nullable:r}=a;if(q&&r&&void 0===b)throw Error(`${c} cannot be undefined.`);if(q&&!r&&null==b)throw Error(`${c} cannot be null or undefined.`);if(!q&&!1===r&&null===b)throw Error(`${c} cannot be null.`);return null==b||null!==p.match(/^any$/i)?o=b:null!==p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?o=function(a,b,c){if(null!=c){if(null!==a.match(/^Number$/i)){if("number"!=typeof c)throw Error(`${b} with value ${c} must be of type number.`)}else if(null!==a.match(/^String$/i)){if("string"!=typeof c.valueOf())throw Error(`${b} with value "${c}" must be of type string.`)}else if(null!==a.match(/^Uuid$/i)){if(!("string"==typeof c.valueOf()&&(0,f.isValidUuid)(c)))throw Error(`${b} with value "${c}" must be of type string and a valid uuid.`)}else if(null!==a.match(/^Boolean$/i)){if("boolean"!=typeof c)throw Error(`${b} with value ${c} must be of type boolean.`)}else if(null!==a.match(/^Stream$/i)){let a=typeof c;if("string"!==a&&"function"!=typeof c.pipe&&"function"!=typeof c.tee&&!(c instanceof ArrayBuffer)&&!ArrayBuffer.isView(c)&&!(("function"==typeof Blob||"object"==typeof Blob)&&c instanceof Blob)&&"function"!==a)throw Error(`${b} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return c}(p,c,b):null!==p.match(/^Enum$/i)?o=function(a,b,c){if(!b)throw Error(`Please provide a set of allowedValues to validate ${a} as an Enum Type.`);if(!b.some(a=>"string"==typeof a.valueOf()?a.toLowerCase()===c.toLowerCase():a===c))throw Error(`${c} is not a valid value for ${a}. The valid values are: ${JSON.stringify(b)}.`);return c}(c,a.type.allowedValues,b):null!==p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?o=function(a,b,c){if(null!=b){if(null!==a.match(/^Date$/i)){if(!(b instanceof Date||"string"==typeof b.valueOf()&&!isNaN(Date.parse(b))))throw Error(`${c} must be an instanceof Date or a string in ISO8601 format.`);b=b instanceof Date?b.toISOString().substring(0,10):new Date(b).toISOString().substring(0,10)}else if(null!==a.match(/^DateTime$/i)){if(!(b instanceof Date||"string"==typeof b.valueOf()&&!isNaN(Date.parse(b))))throw Error(`${c} must be an instanceof Date or a string in ISO8601 format.`);b=b instanceof Date?b.toISOString():new Date(b).toISOString()}else if(null!==a.match(/^DateTimeRfc1123$/i)){if(!(b instanceof Date||"string"==typeof b.valueOf()&&!isNaN(Date.parse(b))))throw Error(`${c} must be an instanceof Date or a string in RFC-1123 format.`);b=b instanceof Date?b.toUTCString():new Date(b).toUTCString()}else if(null!==a.match(/^UnixTime$/i)){if(!(b instanceof Date||"string"==typeof b.valueOf()&&!isNaN(Date.parse(b))))throw Error(`${c} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);b=function(a){if(a)return"string"==typeof a.valueOf()&&(a=new Date(a)),Math.floor(a.getTime()/1e3)}(b)}else if(null!==a.match(/^TimeSpan$/i)&&!(0,f.isDuration)(b))throw Error(`${c} must be a string in ISO 8601 format. Instead was "${b}".`)}return b}(p,b,c):null!==p.match(/^ByteArray$/i)?o=function(a,b){if(null!=b){if(!(b instanceof Uint8Array))throw Error(`${a} must be of type Uint8Array.`);b=d.encodeByteArray(b)}return b}(c,b):null!==p.match(/^Base64Url$/i)?o=function(a,b){if(null!=b){if(!(b instanceof Uint8Array))throw Error(`${a} must be of type Uint8Array.`);b=function(a){if(a){if(!(a instanceof Uint8Array))throw Error("Please provide an input of type Uint8Array for converting to Base64Url.");return(function(a,b){let c=a.length;for(;c-1>=0&&"="===a[c-1];)--c;return a.substr(0,c)})(d.encodeByteArray(a),0).replace(/\+/g,"-").replace(/\//g,"_")}}(b)}return b}(c,b):null!==p.match(/^Sequence$/i)?o=function(a,b,c,d,f,g){if(!Array.isArray(c))throw Error(`${d} must be of type Array.`);let h=b.type.element;if(!h||"object"!=typeof h)throw Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${d}.`);"Composite"===h.type.name&&h.type.className&&(h=a.modelMappers[h.type.className]??h);let i=[];for(let b=0;b<c.length;b++){let j=a.serialize(h,c[b],d,g);if(f&&h.xmlNamespace){let a=h.xmlNamespacePrefix?`xmlns:${h.xmlNamespacePrefix}`:"xmlns";"Composite"===h.type.name?i[b]={...j}:(i[b]={},i[b][g.xml.xmlCharKey]=j),i[b][e.XML_ATTRKEY]={[a]:h.xmlNamespace}}else i[b]=j}return i}(this,a,b,c,!!this.isXML,n):null!==p.match(/^Dictionary$/i)?o=function(a,b,c,d,f,g){if("object"!=typeof c)throw Error(`${d} must be of type object.`);let h=b.type.value;if(!h||"object"!=typeof h)throw Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${d}.`);let i={};for(let b of Object.keys(c)){let e=a.serialize(h,c[b],d,g);i[b]=k(h,e,f,g)}if(f&&b.xmlNamespace){let a=b.xmlNamespacePrefix?`xmlns:${b.xmlNamespacePrefix}`:"xmlns";return i[e.XML_ATTRKEY]={[a]:b.xmlNamespace},i}return i}(this,a,b,c,!!this.isXML,n):null!==p.match(/^Composite$/i)&&(o=function(a,b,c,d,f,g){if(m(a,b)&&(b=l(a,b,c,"clientName")),null!=c){let l={},n=j(a,b,d);for(let i of Object.keys(n)){let j,o=n[i];if(o.readOnly)continue;let p=l;if(a.isXML)j=o.xmlIsWrapped?o.xmlName:o.xmlElementName||o.xmlName;else{let a=h(o.serializedName);for(let b of(j=a.pop(),a))null==p[b]&&(void 0!==c[i]&&null!==c[i]||void 0!==o.defaultValue)&&(p[b]={}),p=p[b]}if(null!=p){if(f&&b.xmlNamespace){let a=b.xmlNamespacePrefix?`xmlns:${b.xmlNamespacePrefix}`:"xmlns";p[e.XML_ATTRKEY]={...p[e.XML_ATTRKEY],[a]:b.xmlNamespace}}let h=""!==o.serializedName?d+"."+o.serializedName:d,l=c[i],n=m(a,b);n&&n.clientName===i&&null==l&&(l=b.serializedName);let q=a.serialize(o,l,h,g);if(void 0!==q&&null!=j){let a=k(o,q,f,g);f&&o.xmlIsAttribute?(p[e.XML_ATTRKEY]=p[e.XML_ATTRKEY]||{},p[e.XML_ATTRKEY][j]=q):f&&o.xmlIsWrapped?p[j]={[o.xmlElementName]:a}:p[j]=a}}}let o=function(a,b,c){let d=b.type.additionalProperties;if(!d&&b.type.className){let d=i(a,b,c);return d?.type.additionalProperties}return d}(a,b,d);if(o){let b=Object.keys(n);for(let e in c)b.every(a=>a!==e)&&(l[e]=a.serialize(o,c[e],d+'["'+e+'"]',g))}return l}return c}(this,a,b,c,!!this.isXML,n)),o}deserialize(a,b,c,f={xml:{}}){let g,i={xml:{rootName:f.xml.rootName??"",includeRoot:f.xml.includeRoot??!1,xmlCharKey:f.xml.xmlCharKey??e.XML_CHARKEY},ignoreUnknownProperties:f.ignoreUnknownProperties??!1};if(null==b)return this.isXML&&"Sequence"===a.type.name&&!a.xmlIsWrapped&&(b=[]),void 0!==a.defaultValue&&(b=a.defaultValue),b;let k=a.type.name;if(c||(c=a.serializedName),null!==k.match(/^Composite$/i))g=function(a,b,c,d,f){let g=f.xml.xmlCharKey??e.XML_CHARKEY;m(a,b)&&(b=l(a,b,c,"serializedName"));let i=j(a,b,d),k={},n=[];for(let j of Object.keys(i)){let l=i[j],m=h(i[j].serializedName);n.push(m[0]);let{serializedName:o,xmlName:p,xmlElementName:q}=l,r=d;""!==o&&void 0!==o&&(r=d+"."+o);let s=l.headerCollectionPrefix;if(s){let b={};for(let d of Object.keys(c))d.startsWith(s)&&(b[d.substring(s.length)]=a.deserialize(l.type.value,c[d],r,f)),n.push(d);k[j]=b}else if(a.isXML)if(l.xmlIsAttribute&&c[e.XML_ATTRKEY])k[j]=a.deserialize(l,c[e.XML_ATTRKEY][p],r,f);else if(l.xmlIsMsText)void 0!==c[g]?k[j]=c[g]:"string"==typeof c&&(k[j]=c);else{let b=q||p||o;if(l.xmlIsWrapped){let b=c[p],d=b?.[q]??[];k[j]=a.deserialize(l,d,r,f),n.push(p)}else{let d=c[b];k[j]=a.deserialize(l,d,r,f),n.push(b)}}else{let d,e,g=c,h=0;for(let a of m){if(!g)break;h++,g=g[a]}null===g&&h<m.length&&(g=void 0),d=g;let n=b.type.polymorphicDiscriminator;if(n&&j===n.clientName&&null==d&&(d=b.serializedName),Array.isArray(c[j])&&""===i[j].serializedName){d=c[j];let b=a.deserialize(l,d,r,f);for(let[a,c]of Object.entries(k))Object.prototype.hasOwnProperty.call(b,a)||(b[a]=c);k=b}else(void 0!==d||void 0!==l.defaultValue)&&(e=a.deserialize(l,d,r,f),k[j]=e)}}let o=b.type.additionalProperties;if(o){let b=a=>{for(let b in i)if(h(i[b].serializedName)[0]===a)return!1;return!0};for(let e in c)b(e)&&(k[e]=a.deserialize(o,c[e],d+'["'+e+'"]',f))}else if(c&&!f.ignoreUnknownProperties)for(let a of Object.keys(c))void 0!==k[a]||n.includes(a)||[e.XML_ATTRKEY,f.xml.xmlCharKey].includes(a)||(k[a]=c[a]);return k}(this,a,b,c,i);else{if(this.isXML){let a=i.xml.xmlCharKey;void 0!==b[e.XML_ATTRKEY]&&void 0!==b[a]&&(b=b[a])}null!==k.match(/^Number$/i)?isNaN(g=parseFloat(b))&&(g=b):null!==k.match(/^Boolean$/i)?g="true"===b||"false"!==b&&b:null!==k.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?g=b:null!==k.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?g=new Date(b):null!==k.match(/^UnixTime$/i)?g=function(a){if(a)return new Date(1e3*a)}(b):null!==k.match(/^ByteArray$/i)?g=d.decodeString(b):null!==k.match(/^Base64Url$/i)?g=function(a){if(a){if(a&&"string"!=typeof a.valueOf())throw Error("Please provide an input of type string for converting to Uint8Array");return a=a.replace(/-/g,"+").replace(/_/g,"/"),d.decodeString(a)}}(b):null!==k.match(/^Sequence$/i)?g=function(a,b,c,d,e){let f=b.type.element;if(!f||"object"!=typeof f)throw Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${d}`);if(c){Array.isArray(c)||(c=[c]),"Composite"===f.type.name&&f.type.className&&(f=a.modelMappers[f.type.className]??f);let b=[];for(let g=0;g<c.length;g++)b[g]=a.deserialize(f,c[g],`${d}[${g}]`,e);return b}return c}(this,a,b,c,i):null!==k.match(/^Dictionary$/i)&&(g=function(a,b,c,d,e){let f=b.type.value;if(!f||"object"!=typeof f)throw Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${d}`);if(c){let b={};for(let g of Object.keys(c))b[g]=a.deserialize(f,c[g],d,e);return b}return c}(this,a,b,c,i))}return a.isConstant&&(g=a.defaultValue),g}}function h(a){let b=[],c="";if(a)for(let d of a.split("."))"\\"===d.charAt(d.length-1)?c+=d.substr(0,d.length-1)+".":(c+=d,b.push(c),c="");return b}function i(a,b,c){let d=b.type.className;if(!d)throw Error(`Class name for model "${c}" is not provided in the mapper "${JSON.stringify(b,void 0,2)}".`);return a.modelMappers[d]}function j(a,b,c){let d=b.type.modelProperties;if(!d){let e=i(a,b,c);if(!e)throw Error(`mapper() cannot be null or undefined for model "${b.type.className}".`);if(!(d=e?.type.modelProperties))throw Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(e)}" of type "${b.type.className}" for object "${c}".`)}return d}function k(a,b,c,d){if(!c||!a.xmlNamespace)return b;let f={[a.xmlNamespacePrefix?`xmlns:${a.xmlNamespacePrefix}`:"xmlns"]:a.xmlNamespace};if(["Composite"].includes(a.type.name))if(b[e.XML_ATTRKEY])return b;else{let a={...b};return a[e.XML_ATTRKEY]=f,a}let g={};return g[d.xml.xmlCharKey]=b,g[e.XML_ATTRKEY]=f,g}function l(a,b,c,d){let e=m(a,b);if(e){let f=e[d];if(f){"serializedName"===d&&(f=f.replace(/\\/gi,""));let e=c[f],g=b.type.uberParent??b.type.className;if("string"==typeof e&&g){let c=function(a,b,c){let d=[c];for(;d.length;){let c=d.shift(),e=b===c?b:c+"."+b;if(Object.prototype.hasOwnProperty.call(a,e))return a[e];for(let[b,e]of Object.entries(a))b.startsWith(c+".")&&e.type.uberParent===c&&e.type.className&&d.push(e.type.className)}}(a.modelMappers.discriminators,e,g);c&&(b=c)}}}return b}function m(a,b){return b.type.polymorphicDiscriminator||n(a,b.type.uberParent)||n(a,b.type.className)}function n(a,b){return b&&a.modelMappers[b]&&a.modelMappers[b].type.polymorphicDiscriminator}c.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}},57835,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.state=void 0,c.state={operationRequestMap:new WeakMap}},68392,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getOperationArgumentValueFromParameter=function a(b,c,d){let f,g=c.parameterPath,h=c.mapper;if("string"==typeof g&&(g=[g]),Array.isArray(g)){if(g.length>0)if(h.isConstant)f=h.defaultValue;else{let a=e(b,g);!a.propertyFound&&d&&(a=e(d,g));let c=!1;a.propertyFound||(c=h.required||"options"===g[0]&&2===g.length),f=c?h.defaultValue:a.propertyValue}}else for(let c in h.required&&(f={}),g){let e=h.type.modelProperties[c],i=a(b,{parameterPath:g[c],mapper:e},d);void 0!==i&&(f||(f={}),f[c]=i)}return f},c.getOperationRequestInfo=function a(b){if(f in b)return a(b[f]);let c=d.state.operationRequestMap.get(b);return c||(c={},d.state.operationRequestMap.set(b,c)),c};let d=a.r(57835);function e(a,b){let c={propertyFound:!1},d=0;for(;d<b.length;++d){let c=b[d];if(a&&c in a)a=a[c];else break}return d===b.length&&(c.propertyValue=a,c.propertyFound=!0),c}let f=Symbol.for("@azure/core-client original request")},33219,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializationPolicyName=void 0,c.deserializationPolicy=function(a={}){let b=a.expectedContentTypes?.json??h,e=a.expectedContentTypes?.xml??i,f=a.parseXML,g=a.serializerOptions,k={xml:{rootName:g?.xml.rootName??"",includeRoot:g?.xml.includeRoot??!1,xmlCharKey:g?.xml.xmlCharKey??d.XML_CHARKEY}};return{name:c.deserializationPolicyName,sendRequest:async(a,c)=>j(b,e,await c(a),k,f)}};let d=a.r(85523),e=a.r(57717),f=a.r(87439),g=a.r(68392),h=["application/json","text/json"],i=["application/xml","application/atom+xml"];async function j(a,b,c,d,h){let i,j,l,m,n,o,p,q=await k(a,b,c,d,h);if(i=q.request,j=(0,g.getOperationRequestInfo)(i),!(void 0===(l=j?.shouldDeserialize)||("boolean"==typeof l?l:l(q))))return q;let r=(0,g.getOperationRequestInfo)(q.request),s=r?.operationSpec;if(!s||!s.responses)return q;let t=(n=q.request,o=(0,g.getOperationRequestInfo)(n),(p=o?.operationSpec)&&(m=o?.operationResponseGetter?o?.operationResponseGetter(p,q):p.responses[q.status]),m),{error:u,shouldReturnResponse:v}=function(a,b,c,d){let g,h=200<=a.status&&a.status<300;if(0===(g=Object.keys(b.responses)).length||1===g.length&&"default"===g[0]?h:!!c){if(!c)return{error:null,shouldReturnResponse:!1};else if(!c.isError)return{error:null,shouldReturnResponse:!1}}let i=c??b.responses.default,j=a.request.streamResponseStatusCodes?.has(a.status)?`Unexpected status code: ${a.status}`:a.bodyAsText,k=new e.RestError(j,{statusCode:a.status,request:a.request,response:a});if(!i&&!(a.parsedBody?.error?.code&&a.parsedBody?.error?.message))throw k;let l=i?.bodyMapper,m=i?.headersMapper;try{if(a.parsedBody){let c,e=a.parsedBody;if(l){let a=e;if(b.isXML&&l.type.name===f.MapperTypeNames.Sequence){a=[];let b=l.xmlElementName;"object"==typeof e&&b&&(a=e[b])}c=b.serializer.deserialize(l,a,"error.response.parsedBody",d)}let g=e.error||c||e;k.code=g.code,g.message&&(k.message=g.message),l&&(k.response.parsedBody=c)}a.headers&&m&&(k.response.parsedHeaders=b.serializer.deserialize(m,a.headers.toJSON(),"operationRes.parsedHeaders"))}catch(b){k.message=`Error "${b.message}" occurred in deserializing the responseBody - "${a.bodyAsText}" for the default response.`}return{error:k,shouldReturnResponse:!1}}(q,s,t,d);if(u)throw u;if(v)return q;if(t){if(t.bodyMapper){let a=q.parsedBody;s.isXML&&t.bodyMapper.type.name===f.MapperTypeNames.Sequence&&(a="object"==typeof a?a[t.bodyMapper.xmlElementName]:[]);try{q.parsedBody=s.serializer.deserialize(t.bodyMapper,a,"operationRes.parsedBody",d)}catch(a){throw new e.RestError(`Error ${a} occurred in deserializing the responseBody - ${q.bodyAsText}`,{statusCode:q.status,request:q.request,response:q})}}else"HEAD"===s.httpMethod&&(q.parsedBody=c.status>=200&&c.status<300);t.headersMapper&&(q.parsedHeaders=s.serializer.deserialize(t.headersMapper,q.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return q}async function k(a,b,c,d,f){if(!c.request.streamResponseStatusCodes?.has(c.status)&&c.bodyAsText){let g=c.bodyAsText,h=c.headers.get("Content-Type")||"",i=h?h.split(";").map(a=>a.toLowerCase()):[];try{if(0===i.length||i.some(b=>-1!==a.indexOf(b)))c.parsedBody=JSON.parse(g);else if(i.some(a=>-1!==b.indexOf(a))){if(!f)throw Error("Parsing XML not supported.");c.parsedBody=await f(g,d.xml)}}catch(d){let a=`Error "${d}" occurred while parsing the response body - ${c.bodyAsText}.`,b=d.code||e.RestError.PARSE_ERROR;throw new e.RestError(a,{code:b,statusCode:c.status,request:c.request,response:c})}}return c}c.deserializationPolicyName="deserializationPolicy"},80975,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getStreamingResponseStatusCodes=function(a){let b=new Set;for(let c in a.responses){let e=a.responses[c];e.bodyMapper&&e.bodyMapper.type.name===d.MapperTypeNames.Stream&&b.add(Number(c))}return b},c.getPathStringFromParameter=function(a){let{parameterPath:b,mapper:c}=a;return"string"==typeof b?b:Array.isArray(b)?b.join("."):c.serializedName};let d=a.r(87439)},22416,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializationPolicyName=void 0,c.serializationPolicy=function(a={}){let b=a.stringifyXML;return{name:c.serializationPolicyName,async sendRequest(a,c){let d=(0,e.getOperationRequestInfo)(a),f=d?.operationSpec,g=d?.operationArguments;return f&&g&&(h(a,g,f),i(a,g,f,b)),c(a)}}},c.serializeHeaders=h,c.serializeRequestBody=i;let d=a.r(85523),e=a.r(68392),f=a.r(87439),g=a.r(80975);function h(a,b,c){if(c.headerParameters)for(let d of c.headerParameters){let f=(0,e.getOperationArgumentValueFromParameter)(b,d);if(null!=f||d.mapper.required){f=c.serializer.serialize(d.mapper,f,(0,g.getPathStringFromParameter)(d));let b=d.mapper.headerCollectionPrefix;if(b)for(let c of Object.keys(f))a.headers.set(b+c,f[c]);else a.headers.set(d.mapper.serializedName||(0,g.getPathStringFromParameter)(d),f)}}let d=b.options?.requestOptions?.customHeaders;if(d)for(let b of Object.keys(d))a.headers.set(b,d[b])}function i(a,b,c,h=function(){throw Error("XML serialization unsupported!")}){let j=b.options?.serializerOptions,k={xml:{rootName:j?.xml.rootName??"",includeRoot:j?.xml.includeRoot??!1,xmlCharKey:j?.xml.xmlCharKey??d.XML_CHARKEY}},l=k.xml.xmlCharKey;if(c.requestBody&&c.requestBody.mapper){a.body=(0,e.getOperationArgumentValueFromParameter)(b,c.requestBody);let i=c.requestBody.mapper,{required:j,serializedName:m,xmlName:n,xmlElementName:o,xmlNamespace:p,xmlNamespacePrefix:q,nullable:r}=i,s=i.type.name;try{if(void 0!==a.body&&null!==a.body||r&&null===a.body||j){let b=(0,g.getPathStringFromParameter)(c.requestBody);a.body=c.serializer.serialize(i,a.body,b,k);let e=s===f.MapperTypeNames.Stream;if(c.isXML){let b=q?`xmlns:${q}`:"xmlns",c=function(a,b,c,e,f){if(a&&!["Composite","Sequence","Dictionary"].includes(c)){let c={};return c[f.xml.xmlCharKey]=e,c[d.XML_ATTRKEY]={[b]:a},c}return e}(p,b,s,a.body,k);s===f.MapperTypeNames.Sequence?a.body=h(function(a,b,c,e){if(Array.isArray(a)||(a=[a]),!c||!e)return{[b]:a};let f={[b]:a};return f[d.XML_ATTRKEY]={[c]:e},f}(c,o||n||m,b,p),{rootName:n||m,xmlCharKey:l}):e||(a.body=h(c,{rootName:n||m,xmlCharKey:l}))}else{if(s===f.MapperTypeNames.String&&(c.contentType?.match("text/plain")||"text"===c.mediaType))return;e||(a.body=JSON.stringify(a.body))}}}catch(a){throw Error(`Error "${a.message}" occurred in serializing the payload - ${JSON.stringify(m,void 0,"  ")}.`)}}else if(c.formDataParameters&&c.formDataParameters.length>0)for(let d of(a.formData={},c.formDataParameters)){let f=(0,e.getOperationArgumentValueFromParameter)(b,d);if(null!=f){let b=d.mapper.serializedName||(0,g.getPathStringFromParameter)(d);a.formData[b]=c.serializer.serialize(d.mapper,f,(0,g.getPathStringFromParameter)(d),k)}}}c.serializationPolicyName="serializationPolicy"},43635,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createClientPipeline=function(a={}){let b=(0,e.createPipelineFromOptions)(a??{});return a.credentialOptions&&b.addPolicy((0,e.bearerTokenAuthenticationPolicy)({credential:a.credentialOptions.credential,scopes:a.credentialOptions.credentialScopes})),b.addPolicy((0,f.serializationPolicy)(a.serializationOptions),{phase:"Serialize"}),b.addPolicy((0,d.deserializationPolicy)(a.deserializationOptions),{phase:"Deserialize"}),b};let d=a.r(33219),e=a.r(57717),f=a.r(22416)},75073,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),c.getCachedDefaultHttpClient=function(){return d||(d=(0,e.createDefaultHttpClient)()),d};let e=a.r(57717)},26232,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getRequestUrl=function(a,b,c,i){let j=function(a,b,c){let f=new Map;if(a.urlParameters?.length)for(let g of a.urlParameters){let h=(0,d.getOperationArgumentValueFromParameter)(b,g,c),i=(0,e.getPathStringFromParameter)(g);h=a.serializer.serialize(g.mapper,h,i),g.skipEncoding||(h=encodeURIComponent(h)),f.set(`{${g.mapper.serializedName||i}}`,h)}return f}(b,c,i),k=!1,l=g(a,j);if(b.path){let a=g(b.path,j);"/{nextLink}"===b.path&&a.startsWith("/")&&(a=a.substring(1)),a.includes("://")?(l=a,k=!0):l=function(a,b){if(!b)return a;let c=new URL(a),d=c.pathname;d.endsWith("/")||(d=`${d}/`),b.startsWith("/")&&(b=b.substring(1));let e=b.indexOf("?");if(-1!==e){let a=b.substring(0,e),f=b.substring(e+1);d+=a,f&&(c.search=c.search?`${c.search}&${f}`:f)}else d+=b;return c.pathname=d,c.toString()}(l,a)}let{queryParams:m,sequenceParams:n}=function(a,b,c){let g=new Map,h=new Set;if(a.queryParameters?.length)for(let i of a.queryParameters){"Sequence"===i.mapper.type.name&&i.mapper.serializedName&&h.add(i.mapper.serializedName);let j=(0,d.getOperationArgumentValueFromParameter)(b,i,c);if(null!=j||i.mapper.required){j=a.serializer.serialize(i.mapper,j,(0,e.getPathStringFromParameter)(i));let b=i.collectionFormat?f[i.collectionFormat]:"";if(Array.isArray(j)&&(j=j.map(a=>null==a?"":a)),"Multi"===i.collectionFormat&&0===j.length)continue;Array.isArray(j)&&("SSV"===i.collectionFormat||"TSV"===i.collectionFormat)&&(j=j.join(b)),i.skipEncoding||(j=Array.isArray(j)?j.map(a=>encodeURIComponent(a)):encodeURIComponent(j)),Array.isArray(j)&&("CSV"===i.collectionFormat||"Pipes"===i.collectionFormat)&&(j=j.join(b)),g.set(i.mapper.serializedName||(0,e.getPathStringFromParameter)(i),j)}}return{queryParams:g,sequenceParams:h}}(b,c,i);return h(l,m,n,k)},c.appendQueryParams=h;let d=a.r(68392),e=a.r(80975),f={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function g(a,b){let c=a;for(let[a,d]of b)c=c.split(a).join(d);return c}function h(a,b,c,d=!1){if(0===b.size)return a;let e=new URL(a),f=function(a){let b=new Map;if(!a||"?"!==a[0])return b;for(let c of(a=a.slice(1)).split("&")){let[a,d]=c.split("=",2),e=b.get(a);e?Array.isArray(e)?e.push(d):b.set(a,[e,d]):b.set(a,d)}return b}(e.search);for(let[a,e]of b){let b=f.get(a);if(Array.isArray(b))if(Array.isArray(e)){b.push(...e);let c=new Set(b);f.set(a,Array.from(c))}else b.push(e);else b?(Array.isArray(e)?e.unshift(b):c.has(a)&&f.set(a,[b,e]),d||f.set(a,e)):f.set(a,e)}let g=[];for(let[a,b]of f)if("string"==typeof b)g.push(`${a}=${b}`);else if(Array.isArray(b))for(let c of b)g.push(`${a}=${c}`);else g.push(`${a}=${b}`);return e.search=g.length?`?${g.join("&")}`:"",e.toString()}},85219,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.logger=void 0,c.logger=(0,a.r(83131).createClientLogger)("core-client")},12678,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ServiceClient=void 0;let d=a.r(57717),e=a.r(43635),f=a.r(96578),g=a.r(75073),h=a.r(68392),i=a.r(26232),j=a.r(80975),k=a.r(85219);c.ServiceClient=class{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(a={}){if(this._requestContentType=a.requestContentType,this._endpoint=a.endpoint??a.baseUri,a.baseUri&&k.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=a.allowInsecureConnection,this._httpClient=a.httpClient||(0,g.getCachedDefaultHttpClient)(),this.pipeline=a.pipeline||function(a){let b=function(a){if(a.credentialScopes)return a.credentialScopes;if(a.endpoint)return`${a.endpoint}/.default`;if(a.baseUri)return`${a.baseUri}/.default`;if(a.credential&&!a.credentialScopes)throw Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(a),c=a.credential&&b?{credentialScopes:b,credential:a.credential}:void 0;return(0,e.createClientPipeline)({...a,credentialOptions:c})}(a),a.additionalPolicies?.length)for(const{policy:b,position:c}of a.additionalPolicies){const a="perRetry"===c?"Sign":void 0;this.pipeline.addPolicy(b,{afterPhase:a})}}async sendRequest(a){return this.pipeline.sendRequest(this._httpClient,a)}async sendOperationRequest(a,b){let c=b.baseUrl||this._endpoint;if(!c)throw Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let e=(0,i.getRequestUrl)(c,b,a,this),g=(0,d.createPipelineRequest)({url:e});g.method=b.httpMethod;let k=(0,h.getOperationRequestInfo)(g);k.operationSpec=b,k.operationArguments=a;let l=b.contentType||this._requestContentType;l&&b.requestBody&&g.headers.set("Content-Type",l);let m=a.options;if(m){let a=m.requestOptions;a&&(a.timeout&&(g.timeout=a.timeout),a.onUploadProgress&&(g.onUploadProgress=a.onUploadProgress),a.onDownloadProgress&&(g.onDownloadProgress=a.onDownloadProgress),void 0!==a.shouldDeserialize&&(k.shouldDeserialize=a.shouldDeserialize),a.allowInsecureConnection&&(g.allowInsecureConnection=!0)),m.abortSignal&&(g.abortSignal=m.abortSignal),m.tracingOptions&&(g.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(g.allowInsecureConnection=!0),void 0===g.streamResponseStatusCodes&&(g.streamResponseStatusCodes=(0,j.getStreamingResponseStatusCodes)(b));try{let a=await this.sendRequest(g),c=(0,f.flattenResponse)(a,b.responses[a.status]);return m?.onResponse&&m.onResponse(a,c),c}catch(a){if("object"==typeof a&&a?.response){let c=a.response,d=(0,f.flattenResponse)(c,b.responses[a.statusCode]||b.responses.default);a.details=d,m?.onResponse&&m.onResponse(c,d,a)}throw a}}}},5350,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.parseCAEChallenge=f,c.authorizeRequestOnClaimChallenge=g;let d=a.r(85219),e=a.r(17128);function f(a){return`, ${a.trim()}`.split(", Bearer ").filter(a=>a).map(a=>`${a.trim()}, `.split('", ').filter(a=>a).map(a=>(([a,b])=>({[a]:b}))(a.trim().split('="'))).reduce((a,b)=>({...a,...b}),{}))}async function g(a){let{scopes:b,response:c}=a,g=a.logger||d.logger,h=c.headers.get("WWW-Authenticate");if(!h)return g.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let i=(f(h)||[]).find(a=>a.claims);if(!i)return g.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let j=await a.getAccessToken(i.scope?[i.scope]:b,{claims:(0,e.decodeStringToString)(i.claims)});return!!j&&(a.request.headers.set("Authorization",`${j.tokenType??"Bearer"} ${j.token}`),!0)}},1028,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.authorizeRequestOnTenantChallenge=void 0;let d="authorization";c.authorizeRequestOnTenantChallenge=async a=>{var b;let c={abortSignal:(b=a.request).abortSignal,requestOptions:{timeout:b.timeout},tracingOptions:b.tracingOptions},e=function(a){let b=a.headers.get("WWW-Authenticate");if(401===a.status&&b)return b}(a.response);if(e){let b,f=(b=e.slice(7),`${b.trim()} `.split(" ").filter(a=>a).map(a=>(([a,b])=>({[a]:b}))(a.trim().split("="))).reduce((a,b)=>({...a,...b}),{})),g=function(a,b){if(!b.resource_id)return a.scopes;let c=new URL(b.resource_id);c.pathname="/.default";let d=c.toString();return"https://disk.azure.com/.default"===d&&(d="https://disk.azure.com//.default"),[d]}(a,f),h=function(a){let b=new URL(a.authorization_uri).pathname.split("/")[1];if(b&&/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(b))return b}(f);if(!h)return!1;let i=await a.getAccessToken(g,{...c,tenantId:h});return!!i&&(a.request.headers.set(d,`${i.tokenType??"Bearer"} ${i.token}`),!0)}return!1}},85433,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.authorizeRequestOnTenantChallenge=c.authorizeRequestOnClaimChallenge=c.serializationPolicyName=c.serializationPolicy=c.deserializationPolicyName=c.deserializationPolicy=c.XML_CHARKEY=c.XML_ATTRKEY=c.createClientPipeline=c.ServiceClient=c.MapperTypeNames=c.createSerializer=void 0;var d=a.r(87439);Object.defineProperty(c,"createSerializer",{enumerable:!0,get:function(){return d.createSerializer}}),Object.defineProperty(c,"MapperTypeNames",{enumerable:!0,get:function(){return d.MapperTypeNames}});var e=a.r(12678);Object.defineProperty(c,"ServiceClient",{enumerable:!0,get:function(){return e.ServiceClient}});var f=a.r(43635);Object.defineProperty(c,"createClientPipeline",{enumerable:!0,get:function(){return f.createClientPipeline}});var g=a.r(85523);Object.defineProperty(c,"XML_ATTRKEY",{enumerable:!0,get:function(){return g.XML_ATTRKEY}}),Object.defineProperty(c,"XML_CHARKEY",{enumerable:!0,get:function(){return g.XML_CHARKEY}});var h=a.r(33219);Object.defineProperty(c,"deserializationPolicy",{enumerable:!0,get:function(){return h.deserializationPolicy}}),Object.defineProperty(c,"deserializationPolicyName",{enumerable:!0,get:function(){return h.deserializationPolicyName}});var i=a.r(22416);Object.defineProperty(c,"serializationPolicy",{enumerable:!0,get:function(){return i.serializationPolicy}}),Object.defineProperty(c,"serializationPolicyName",{enumerable:!0,get:function(){return i.serializationPolicyName}});var j=a.r(5350);Object.defineProperty(c,"authorizeRequestOnClaimChallenge",{enumerable:!0,get:function(){return j.authorizeRequestOnClaimChallenge}});var k=a.r(1028);Object.defineProperty(c,"authorizeRequestOnTenantChallenge",{enumerable:!0,get:function(){return k.authorizeRequestOnTenantChallenge}})},92853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getIdentityTokenEndpointSuffix=function(a){return"adfs"===a?"oauth2/token":"oauth2/v2.0/token"}},98743,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serviceFabricErrorMessage=void 0,c.mapScopesToResource=function(a){let b="";if(Array.isArray(a)){if(1!==a.length)return;b=a[0]}else"string"==typeof a&&(b=a);return b.endsWith(d)?b.substr(0,b.lastIndexOf(d)):b},c.parseExpirationTimestamp=function(a){if("number"==typeof a.expires_on)return 1e3*a.expires_on;if("string"==typeof a.expires_on){let b=+a.expires_on;if(!isNaN(b))return 1e3*b;let c=Date.parse(a.expires_on);if(!isNaN(c))return c}if("number"==typeof a.expires_in)return Date.now()+1e3*a.expires_in;throw Error(`Failed to parse token expiration from body. expires_in="${a.expires_in}", expires_on="${a.expires_on}"`)},c.parseRefreshTimestamp=function(a){if(a.refresh_on){if("number"==typeof a.refresh_on)return 1e3*a.refresh_on;if("string"==typeof a.refresh_on){let b=+a.refresh_on;if(!isNaN(b))return 1e3*b;let c=Date.parse(a.refresh_on);if(!isNaN(c))return c}throw Error(`Failed to parse refresh_on from body. refresh_on="${a.refresh_on}"`)}};let d="/.default";c.serviceFabricErrorMessage="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information"},5990,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IdentityClient=void 0,c.getIdentityClientAuthorityHost=n;let d=a.r(85433),e=a.r(18903),f=a.r(57717),g=a.r(68409),h=a.r(92853),i=a.r(780),j=a.r(23602),k=a.r(90158),l=a.r(98743),m="noCorrelationId";function n(a){let b=a?.authorityHost;return e.isNode&&(b=b??process.env.AZURE_AUTHORITY_HOST),b??i.DefaultAuthorityHost}class o extends d.ServiceClient{authorityHost;allowLoggingAccountIdentifiers;abortControllers;allowInsecureConnection=!1;tokenCredentialOptions;constructor(a){const b=`azsdk-js-identity/${i.SDK_VERSION}`,c=a?.userAgentOptions?.userAgentPrefix?`${a.userAgentOptions.userAgentPrefix} ${b}`:`${b}`,d=n(a);if(!d.startsWith("https:"))throw Error("The authorityHost address must use the 'https' protocol.");super({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3},...a,userAgentOptions:{userAgentPrefix:c},baseUri:d}),this.authorityHost=d,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=a?.loggingOptions?.allowLoggingAccountIdentifiers,this.tokenCredentialOptions={...a},a?.allowInsecureConnection&&(this.allowInsecureConnection=a.allowInsecureConnection)}async sendTokenRequest(a){k.logger.info(`IdentityClient: sending token request to [${a.url}]`);let b=await this.sendRequest(a);if(b.bodyAsText&&(200===b.status||201===b.status)){let c=JSON.parse(b.bodyAsText);if(!c.access_token)return null;this.logIdentifiers(b);let d={accessToken:{token:c.access_token,expiresOnTimestamp:(0,l.parseExpirationTimestamp)(c),refreshAfterTimestamp:(0,l.parseRefreshTimestamp)(c),tokenType:"Bearer"},refreshToken:c.refresh_token};return k.logger.info(`IdentityClient: [${a.url}] token acquired, expires on ${d.accessToken.expiresOnTimestamp}`),d}{let a=new g.AuthenticationError(b.status,b.bodyAsText);throw k.logger.warning(`IdentityClient: authentication error. HTTP status: ${b.status}, ${a.errorResponse.errorDescription}`),a}}async refreshAccessToken(a,b,c,d,e,i={}){if(void 0===d)return null;k.logger.info(`IdentityClient: refreshing access token with client ID: ${b}, scopes: ${c} started`);let l={grant_type:"refresh_token",client_id:b,refresh_token:d,scope:c};void 0!==e&&(l.client_secret=e);let m=new URLSearchParams(l);return j.tracingClient.withSpan("IdentityClient.refreshAccessToken",i,async c=>{try{let d=(0,h.getIdentityTokenEndpointSuffix)(a),e=(0,f.createPipelineRequest)({url:`${this.authorityHost}/${a}/${d}`,method:"POST",body:m.toString(),abortSignal:i.abortSignal,headers:(0,f.createHttpHeaders)({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:c.tracingOptions}),g=await this.sendTokenRequest(e);return k.logger.info(`IdentityClient: refreshed token for client ID: ${b}`),g}catch(a){if(a.name===g.AuthenticationErrorName&&"interaction_required"===a.errorResponse.error)return k.logger.info(`IdentityClient: interaction required for client ID: ${b}`),null;throw k.logger.warning(`IdentityClient: failed refreshing token for client ID: ${b}: ${a}`),a}})}generateAbortSignal(a){let b=new AbortController,c=this.abortControllers.get(a)||[];c.push(b),this.abortControllers.set(a,c);let d=b.signal.onabort;return b.signal.onabort=(...c)=>{this.abortControllers.set(a,void 0),d&&d.apply(b.signal,c)},b.signal}abortRequests(a){let b=a||m,c=[...this.abortControllers.get(b)||[],...this.abortControllers.get(m)||[]];if(c.length){for(let a of c)a.abort();this.abortControllers.set(b,void 0)}}getCorrelationId(a){let b=a?.body?.split("&").map(a=>a.split("=")).find(([a])=>"client-request-id"===a);return b&&b.length&&b[1]||m}async sendGetRequestAsync(a,b){let c=(0,f.createPipelineRequest)({url:a,method:"GET",body:b?.body,allowInsecureConnection:this.allowInsecureConnection,headers:(0,f.createHttpHeaders)(b?.headers),abortSignal:this.generateAbortSignal(m)}),d=await this.sendRequest(c);return this.logIdentifiers(d),{body:d.bodyAsText?JSON.parse(d.bodyAsText):void 0,headers:d.headers.toJSON(),status:d.status}}async sendPostRequestAsync(a,b){let c=(0,f.createPipelineRequest)({url:a,method:"POST",body:b?.body,headers:(0,f.createHttpHeaders)(b?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(b))}),d=await this.sendRequest(c);return this.logIdentifiers(d),{body:d.bodyAsText?JSON.parse(d.bodyAsText):void 0,headers:d.headers.toJSON(),status:d.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(a){if(this.allowLoggingAccountIdentifiers&&a.bodyAsText)try{let b=(a.parsedBody||JSON.parse(a.bodyAsText)).access_token;if(!b)return;let c=b.split(".")[1],{appid:d,upn:e,tid:f,oid:g}=JSON.parse(Buffer.from(c,"base64").toString("utf8"));k.logger.info(`[Authenticated account] Client ID: ${d}. Tenant ID: ${f}. User Principal Name: ${e||"No User Principal Name available"}. Object ID (user): ${g}`)}catch(a){k.logger.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",a.message)}}}c.IdentityClient=o},26162,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.RegionalAuthority=void 0,c.calculateRegionalAuthority=function(a){let b=a;return(void 0===b&&globalThis.process?.env?.AZURE_REGIONAL_AUTHORITY_NAME!==void 0&&(b=process.env.AZURE_REGIONAL_AUTHORITY_NAME),b===d.AutoDiscoverRegion)?"AUTO_DISCOVER":b},(e=d||(c.RegionalAuthority=d={})).AutoDiscoverRegion="AutoDiscoverRegion",e.USWest="westus",e.USWest2="westus2",e.USCentral="centralus",e.USEast="eastus",e.USEast2="eastus2",e.USNorthCentral="northcentralus",e.USSouthCentral="southcentralus",e.USWestCentral="westcentralus",e.CanadaCentral="canadacentral",e.CanadaEast="canadaeast",e.BrazilSouth="brazilsouth",e.EuropeNorth="northeurope",e.EuropeWest="westeurope",e.UKSouth="uksouth",e.UKWest="ukwest",e.FranceCentral="francecentral",e.FranceSouth="francesouth",e.SwitzerlandNorth="switzerlandnorth",e.SwitzerlandWest="switzerlandwest",e.GermanyNorth="germanynorth",e.GermanyWestCentral="germanywestcentral",e.NorwayWest="norwaywest",e.NorwayEast="norwayeast",e.AsiaEast="eastasia",e.AsiaSouthEast="southeastasia",e.JapanEast="japaneast",e.JapanWest="japanwest",e.AustraliaEast="australiaeast",e.AustraliaSouthEast="australiasoutheast",e.AustraliaCentral="australiacentral",e.AustraliaCentral2="australiacentral2",e.IndiaCentral="centralindia",e.IndiaSouth="southindia",e.IndiaWest="westindia",e.KoreaSouth="koreasouth",e.KoreaCentral="koreacentral",e.UAECentral="uaecentral",e.UAENorth="uaenorth",e.SouthAfricaNorth="southafricanorth",e.SouthAfricaWest="southafricawest",e.ChinaNorth="chinanorth",e.ChinaEast="chinaeast",e.ChinaNorth2="chinanorth2",e.ChinaEast2="chinaeast2",e.GermanyCentral="germanycentral",e.GermanyNorthEast="germanynortheast",e.GovernmentUSVirginia="usgovvirginia",e.GovernmentUSIowa="usgoviowa",e.GovernmentUSArizona="usgovarizona",e.GovernmentUSTexas="usgovtexas",e.GovernmentUSDodEast="usdodeast",e.GovernmentUSDodCentral="usdodcentral"},66063,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.processMultiTenantRequest=function(a,b,c=[],e){let f;if(f=process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||"adfs"===a?a:b?.tenantId??a,a&&f!==a&&!c.includes("*")&&!c.some(a=>0===a.localeCompare(f))){let a=`The current credential is not configured to acquire tokens for tenant ${f}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`;throw e?.info(a),new d.CredentialUnavailableError(a)}return f};let d=a.r(68409)},36124,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.processMultiTenantRequest=void 0,c.checkTenantId=g,c.resolveTenantId=function(a,b,c){return b?(g(a,b),b):(c||(c=d.DeveloperSignOnClientId),c!==d.DeveloperSignOnClientId)?"common":"organizations"},c.resolveAdditionallyAllowedTenantIds=function(a){return a&&0!==a.length?a.includes("*")?d.ALL_TENANTS:a:[]};let d=a.r(780),e=a.r(90158);var f=a.r(66063);function g(a,b){if(!b.match(/^[0-9a-zA-Z-.]+$/)){let b=Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw a.info((0,e.formatError)("",b)),b}}Object.defineProperty(c,"processMultiTenantRequest",{enumerable:!0,get:function(){return f.processMultiTenantRequest}})},27804,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.generateMsalConfiguration=n,c.createMsalClient=function(b,c,i={}){let k={msalConfig:n(b,c,i),cachedAccount:i.authenticationRecord?(0,g.publicToMsal)(i.authenticationRecord):null,pluginConfiguration:f.msalPlugins.generatePluginConfiguration(i),logger:i.logger??m},l=new Map;async function o(a={}){let b=a.enableCae?"CAE":"default",c=l.get(b);if(c)return k.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),c;k.logger.getToken.info(`Creating new PublicClientApplication with CAE ${a.enableCae?"enabled":"disabled"}.`);let e=a.enableCae?k.pluginConfiguration.cache.cachePluginCae:k.pluginConfiguration.cache.cachePlugin;return k.msalConfig.auth.clientCapabilities=a.enableCae?["cp1"]:void 0,c=new d.PublicClientApplication({...k.msalConfig,broker:{nativeBrokerPlugin:k.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await e}}),l.set(b,c),c}let p=new Map;async function q(a={}){let b=a.enableCae?"CAE":"default",c=p.get(b);if(c)return k.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),c;k.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${a.enableCae?"enabled":"disabled"}.`);let e=a.enableCae?k.pluginConfiguration.cache.cachePluginCae:k.pluginConfiguration.cache.cachePlugin;return k.msalConfig.auth.clientCapabilities=a.enableCae?["cp1"]:void 0,c=new d.ConfidentialClientApplication({...k.msalConfig,broker:{nativeBrokerPlugin:k.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await e}}),p.set(b,c),c}async function r(a,b,c={}){if(null===k.cachedAccount)throw k.logger.getToken.info("No cached account found in local state."),new h.AuthenticationRequiredError({scopes:b});c.claims&&(k.cachedClaims=c.claims);let d={account:k.cachedAccount,scopes:b,claims:k.cachedClaims};k.pluginConfiguration.broker.isEnabled&&(d.tokenQueryParameters||={},k.pluginConfiguration.broker.enableMsaPassthrough&&(d.tokenQueryParameters.msal_request_type="consumer_passthrough")),c.proofOfPossessionOptions&&(d.shrNonce=c.proofOfPossessionOptions.nonce,d.authenticationScheme="pop",d.resourceRequestMethod=c.proofOfPossessionOptions.resourceRequestMethod,d.resourceRequestUri=c.proofOfPossessionOptions.resourceRequestUrl),k.logger.getToken.info("Attempting to acquire token silently");try{return await a.acquireTokenSilent(d)}catch(a){throw(0,g.handleMsalError)(b,a,c)}}function s(a){return a?.tenantId?(0,g.getAuthority)(a.tenantId,(0,g.getAuthorityHost)(i)):k.msalConfig.auth.authority}async function t(a,b,c,d){let f=null;try{f=await r(a,b,c)}catch(a){if("AuthenticationRequiredError"!==a.name)throw a;if(c.disableAutomaticAuthentication)throw new h.AuthenticationRequiredError({scopes:b,getTokenOptions:c,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(null===f)try{f=await d()}catch(a){throw(0,g.handleMsalError)(b,a,c)}return(0,g.ensureValidMsalToken)(b,f,c),k.cachedAccount=f?.account??null,k.logger.getToken.info((0,e.formatSuccess)(b)),{token:f.accessToken,expiresOnTimestamp:f.expiresOn.getTime(),refreshAfterTimestamp:f.refreshOn?.getTime(),tokenType:f.tokenType}}function u(b,c){return{openBrowser:async b=>{let c=await a.A(27344);await c.default(b,{newInstance:!0})},scopes:b,authority:s(c),claims:c?.claims,loginHint:c?.loginHint,errorTemplate:c?.browserCustomizationOptions?.errorMessage,successTemplate:c?.browserCustomizationOptions?.successMessage,prompt:c?.loginHint?"login":"select_account"}}async function v(a,b,c={}){m.verbose("Authentication will resume through the broker");let d=await o(c),e=u(a,c);k.pluginConfiguration.broker.parentWindowHandle?e.windowHandle=Buffer.from(k.pluginConfiguration.broker.parentWindowHandle):m.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),k.pluginConfiguration.broker.enableMsaPassthrough&&((e.tokenQueryParameters??={}).msal_request_type="consumer_passthrough"),b?(e.prompt="none",m.verbose("Attempting broker authentication using the default broker account")):m.verbose("Attempting broker authentication without the default broker account"),c.proofOfPossessionOptions&&(e.shrNonce=c.proofOfPossessionOptions.nonce,e.authenticationScheme="pop",e.resourceRequestMethod=c.proofOfPossessionOptions.resourceRequestMethod,e.resourceRequestUri=c.proofOfPossessionOptions.resourceRequestUrl);try{return await d.acquireTokenInteractive(e)}catch(d){if(m.verbose(`Failed to authenticate through the broker: ${d.message}`),c.disableAutomaticAuthentication)throw new h.AuthenticationRequiredError({scopes:a,getTokenOptions:c,message:"Cannot silently authenticate with default broker account."});if(b)return v(a,!1,c);throw d}}return{getActiveAccount:function(){if(k.cachedAccount)return(0,g.msalToPublic)(b,k.cachedAccount)},getBrokeredToken:async function(a,b,c={}){m.getToken.info(`Attempting to acquire token using brokered authentication with useDefaultBrokerAccount: ${b}`);let d=await v(a,b,c);return(0,g.ensureValidMsalToken)(a,d,c),k.cachedAccount=d?.account??null,k.logger.getToken.info((0,e.formatSuccess)(a)),{token:d.accessToken,expiresOnTimestamp:d.expiresOn.getTime(),refreshAfterTimestamp:d.refreshOn?.getTime(),tokenType:d.tokenType}},getTokenByClientSecret:async function a(b,c,d={}){k.logger.getToken.info("Attempting to acquire token using client secret"),k.msalConfig.auth.clientSecret=c;let f=await q(d);try{let a=await f.acquireTokenByClientCredential({scopes:b,authority:s(d),azureRegion:(0,j.calculateRegionalAuthority)(),claims:d?.claims});return(0,g.ensureValidMsalToken)(b,a,d),k.logger.getToken.info((0,e.formatSuccess)(b)),{token:a.accessToken,expiresOnTimestamp:a.expiresOn.getTime(),refreshAfterTimestamp:a.refreshOn?.getTime(),tokenType:a.tokenType}}catch(a){throw(0,g.handleMsalError)(b,a,d)}},getTokenByClientAssertion:async function a(b,c,d={}){k.logger.getToken.info("Attempting to acquire token using client assertion"),k.msalConfig.auth.clientAssertion=c;let f=await q(d);try{let a=await f.acquireTokenByClientCredential({scopes:b,authority:s(d),azureRegion:(0,j.calculateRegionalAuthority)(),claims:d?.claims,clientAssertion:c});return(0,g.ensureValidMsalToken)(b,a,d),k.logger.getToken.info((0,e.formatSuccess)(b)),{token:a.accessToken,expiresOnTimestamp:a.expiresOn.getTime(),refreshAfterTimestamp:a.refreshOn?.getTime(),tokenType:a.tokenType}}catch(a){throw(0,g.handleMsalError)(b,a,d)}},getTokenByClientCertificate:async function a(b,c,d={}){k.logger.getToken.info("Attempting to acquire token using client certificate"),k.msalConfig.auth.clientCertificate=c;let f=await q(d);try{let a=await f.acquireTokenByClientCredential({scopes:b,authority:s(d),azureRegion:(0,j.calculateRegionalAuthority)(),claims:d?.claims});return(0,g.ensureValidMsalToken)(b,a,d),k.logger.getToken.info((0,e.formatSuccess)(b)),{token:a.accessToken,expiresOnTimestamp:a.expiresOn.getTime(),refreshAfterTimestamp:a.refreshOn?.getTime(),tokenType:a.tokenType}}catch(a){throw(0,g.handleMsalError)(b,a,d)}},getTokenByDeviceCode:async function a(b,c,d={}){k.logger.getToken.info("Attempting to acquire token using device code");let e=await o(d);return t(e,b,d,()=>{let a={scopes:b,cancel:d?.abortSignal?.aborted??!1,deviceCodeCallback:c,authority:s(d),claims:d?.claims},f=e.acquireTokenByDeviceCode(a);return d.abortSignal&&d.abortSignal.addEventListener("abort",()=>{a.cancel=!0}),f})},getTokenByUsernamePassword:async function a(b,c,d,e={}){k.logger.getToken.info("Attempting to acquire token using username and password");let f=await o(e);return t(f,b,e,()=>{let a={scopes:b,username:c,password:d,authority:s(e),claims:e?.claims};return f.acquireTokenByUsernamePassword(a)})},getTokenByAuthorizationCode:async function(a,b,c,d,e={}){let f;return k.logger.getToken.info("Attempting to acquire token using authorization code"),d?(k.msalConfig.auth.clientSecret=d,f=await q(e)):f=await o(e),t(f,a,e,()=>f.acquireTokenByCode({scopes:a,redirectUri:b,code:c,authority:s(e),claims:e?.claims}))},getTokenOnBehalfOf:async function(a,b,c,d={}){m.getToken.info("Attempting to acquire token on behalf of another user"),"string"==typeof c?(m.getToken.info("Using client secret for on behalf of flow"),k.msalConfig.auth.clientSecret=c):"function"==typeof c?(m.getToken.info("Using client assertion callback for on behalf of flow"),k.msalConfig.auth.clientAssertion=c):(m.getToken.info("Using client certificate for on behalf of flow"),k.msalConfig.auth.clientCertificate=c);let f=await q(d);try{let c=await f.acquireTokenOnBehalfOf({scopes:a,authority:s(d),claims:d.claims,oboAssertion:b});return(0,g.ensureValidMsalToken)(a,c,d),m.getToken.info((0,e.formatSuccess)(a)),{token:c.accessToken,expiresOnTimestamp:c.expiresOn.getTime(),refreshAfterTimestamp:c.refreshOn?.getTime(),tokenType:c.tokenType}}catch(b){throw(0,g.handleMsalError)(a,b,d)}},getTokenByInteractiveRequest:async function(a,b={}){m.getToken.info("Attempting to acquire token interactively");let c=await o(b);return t(c,a,b,async()=>{let d=u(a,b);return k.pluginConfiguration.broker.isEnabled?v(a,k.pluginConfiguration.broker.useDefaultBrokerAccount??!1,b):(b.proofOfPossessionOptions&&(d.shrNonce=b.proofOfPossessionOptions.nonce,d.authenticationScheme="pop",d.resourceRequestMethod=b.proofOfPossessionOptions.resourceRequestMethod,d.resourceRequestUri=b.proofOfPossessionOptions.resourceRequestUrl),c.acquireTokenInteractive(d))})}}};let d=a.r(84710).__importStar(a.r(84347)),e=a.r(90158),f=a.r(6469),g=a.r(16090),h=a.r(68409),i=a.r(5990),j=a.r(26162),k=a.r(83131),l=a.r(36124),m=(0,e.credentialLogger)("MsalClient");function n(a,b,c={}){let d=(0,l.resolveTenantId)(c.logger??m,b,a),e=(0,g.getAuthority)(d,(0,g.getAuthorityHost)(c)),f=new i.IdentityClient({...c.tokenCredentialOptions,authorityHost:e,loggingOptions:c.loggingOptions});return{auth:{clientId:a,authority:e,knownAuthorities:(0,g.getKnownAuthorities)(d,e,c.disableInstanceDiscovery)},system:{networkClient:f,loggerOptions:{loggerCallback:(0,g.defaultLoggerCallback)(c.logger??m),logLevel:(0,g.getMSALLogLevel)((0,k.getLogLevel)()),piiLoggingEnabled:c.loggingOptions?.enableUnsafeSupportLogging}}}}},6917,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ClientCertificateCredential=void 0,c.parseCertificate=l;let d=a.r(27804),e=a.r(66680),f=a.r(36124),g=a.r(90158),h=a.r(12714),i=a.r(23602),j="ClientCertificateCredential",k=(0,g.credentialLogger)(j);async function l(a,b){let c,d=a.certificate,f=a.certificatePath,g=d||await (0,h.readFile)(f,"utf8"),i=b?g:void 0,j=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,k=[];do(c=j.exec(g))&&k.push(c[3]);while(c)if(0===k.length)throw Error("The file at the specified path does not contain a PEM-encoded certificate.");let l=(0,e.createHash)("sha1").update(Buffer.from(k[0],"base64")).digest("hex").toUpperCase();return{certificateContents:g,thumbprintSha256:(0,e.createHash)("sha256").update(Buffer.from(k[0],"base64")).digest("hex").toUpperCase(),thumbprint:l,x5c:i}}c.ClientCertificateCredential=class{tenantId;additionallyAllowedTenantIds;certificateConfiguration;sendCertificateChain;msalClient;constructor(a,b,c,e={}){if(!a||!b)throw Error(`${j}: tenantId and clientId are required parameters.`);this.tenantId=a,this.additionallyAllowedTenantIds=(0,f.resolveAdditionallyAllowedTenantIds)(e?.additionallyAllowedTenants),this.sendCertificateChain=e.sendCertificateChain,this.certificateConfiguration={..."string"==typeof c?{certificatePath:c}:c};const g=this.certificateConfiguration.certificate,h=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(g||h))throw Error(`${j}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(g&&h)throw Error(`${j}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=(0,d.createMsalClient)(b,a,{...e,logger:k,tokenCredentialOptions:e})}async getToken(a,b={}){return i.tracingClient.withSpan(`${j}.getToken`,b,async b=>{b.tenantId=(0,f.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds,k);let c=Array.isArray(a)?a:[a],d=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(c,d,b)})}async buildClientCertificate(){let a,b=await l(this.certificateConfiguration,this.sendCertificateChain??!1);return a=void 0!==this.certificateConfiguration.certificatePassword?(0,e.createPrivateKey)({key:b.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():b.certificateContents,{thumbprint:b.thumbprint,thumbprintSha256:b.thumbprintSha256,privateKey:a,x5c:b.x5c}}}},58166,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ensureScopes=function(a){return Array.isArray(a)?a:[a]},c.ensureValidScopeForDevTimeCreds=function(a,b){if(!a.match(/^[0-9a-zA-Z-_.:/]+$/)){let c=Error("Invalid scope was specified by the user or calling client");throw b.getToken.info((0,d.formatError)(a,c)),c}},c.getScopeResource=function(a){return a.replace(/\/.default$/,"")};let d=a.r(90158)},34097,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ClientSecretCredential=void 0;let d=a.r(27804),e=a.r(36124),f=a.r(68409),g=a.r(90158),h=a.r(58166),i=a.r(23602),j=(0,g.credentialLogger)("ClientSecretCredential");c.ClientSecretCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;clientSecret;constructor(a,b,c,g={}){if(!a)throw new f.CredentialUnavailableError("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!b)throw new f.CredentialUnavailableError("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!c)throw new f.CredentialUnavailableError("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=c,this.tenantId=a,this.additionallyAllowedTenantIds=(0,e.resolveAdditionallyAllowedTenantIds)(g?.additionallyAllowedTenants),this.msalClient=(0,d.createMsalClient)(b,a,{...g,logger:j,tokenCredentialOptions:g})}async getToken(a,b={}){return i.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{b.tenantId=(0,e.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds,j);let c=(0,h.ensureScopes)(a);return this.msalClient.getTokenByClientSecret(c,this.clientSecret,b)})}}},15790,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UsernamePasswordCredential=void 0;let d=a.r(27804),e=a.r(36124),f=a.r(68409),g=a.r(90158),h=a.r(58166),i=a.r(23602),j=(0,g.credentialLogger)("UsernamePasswordCredential");c.UsernamePasswordCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;username;password;constructor(a,b,c,g,h={}){if(!a)throw new f.CredentialUnavailableError("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!b)throw new f.CredentialUnavailableError("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!c)throw new f.CredentialUnavailableError("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!g)throw new f.CredentialUnavailableError("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=a,this.additionallyAllowedTenantIds=(0,e.resolveAdditionallyAllowedTenantIds)(h?.additionallyAllowedTenants),this.username=c,this.password=g,this.msalClient=(0,d.createMsalClient)(b,this.tenantId,{...h,tokenCredentialOptions:h??{}})}async getToken(a,b={}){return i.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{b.tenantId=(0,e.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds,j);let c=(0,h.ensureScopes)(a);return this.msalClient.getTokenByUsernamePassword(c,this.username,this.password,b)})}}},54450,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.EnvironmentCredential=c.AllSupportedEnvironmentVariables=void 0,c.getSendCertificateChain=m;let d=a.r(68409),e=a.r(90158),f=a.r(6917),g=a.r(34097),h=a.r(15790),i=a.r(36124),j=a.r(23602);c.AllSupportedEnvironmentVariables=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];let k="EnvironmentCredential",l=(0,e.credentialLogger)(k);function m(){let a=(process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN??"").toLowerCase(),b="true"===a||"1"===a;return l.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${b}`),b}c.EnvironmentCredential=class{_credential=void 0;constructor(a){const b=(0,e.processEnvVars)(c.AllSupportedEnvironmentVariables).assigned.join(", ");l.info(`Found the following environment variables: ${b}`);const d=process.env.AZURE_TENANT_ID,j=process.env.AZURE_CLIENT_ID,k=process.env.AZURE_CLIENT_SECRET,n=(process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS??"").split(";"),o=m(),p={...a,additionallyAllowedTenantIds:n,sendCertificateChain:o};if(d&&(0,i.checkTenantId)(l,d),d&&j&&k){l.info(`Invoking ClientSecretCredential with tenant ID: ${d}, clientId: ${j} and clientSecret: [REDACTED]`),this._credential=new g.ClientSecretCredential(d,j,k,p);return}const q=process.env.AZURE_CLIENT_CERTIFICATE_PATH,r=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(d&&j&&q){l.info(`Invoking ClientCertificateCredential with tenant ID: ${d}, clientId: ${j} and certificatePath: ${q}`),this._credential=new f.ClientCertificateCredential(d,j,{certificatePath:q,certificatePassword:r},p);return}const s=process.env.AZURE_USERNAME,t=process.env.AZURE_PASSWORD;d&&j&&s&&t&&(l.info(`Invoking UsernamePasswordCredential with tenant ID: ${d}, clientId: ${j} and username: ${s}`),l.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new h.UsernamePasswordCredential(d,j,s,t,p))}async getToken(a,b={}){return j.tracingClient.withSpan(`${k}.getToken`,b,async b=>{if(this._credential)try{let c=await this._credential.getToken(a,b);return l.getToken.info((0,e.formatSuccess)(a)),c}catch(c){let b=new d.AuthenticationError(400,{error:`${k} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:c.message.toString().split("More details:").join("")});throw l.getToken.info((0,e.formatError)(a,b)),b}throw new d.CredentialUnavailableError(`${k} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}}},86851,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.imdsRetryPolicy=function(a){return(0,d.retryPolicy)([{name:"imdsRetryPolicy",retry:({retryCount:b,response:c})=>{if(c?.status!==404&&c?.status!==410)return{skipStrategy:!0};let d=c?.status===410?Math.max(3e3,a.startDelayInMs):a.startDelayInMs;return(0,e.calculateRetryDelay)(b,{retryDelayInMs:d,maxRetryDelayInMs:64e3})}}],{maxRetries:a.maxRetries})};let d=a.r(57717),e=a.r(18903)},2235,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.imdsMsi=void 0;let d=a.r(57717),e=a.r(18903),f=a.r(90158),g=a.r(98743),h=a.r(23602),i="ManagedIdentityCredential - IMDS",j=(0,f.credentialLogger)(i);c.imdsMsi={name:"imdsMsi",async isAvailable(a){let{scopes:b,identityClient:c,getTokenOptions:f}=a,k=(0,g.mapScopesToResource)(b);if(!k)return j.info(`${i}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!c)throw Error("Missing IdentityClient");let l=function(a){if(!(0,g.mapScopesToResource)(a))throw Error(`${i}: Multiple scopes are not supported.`);let b=new URL("/metadata/identity/oauth2/token",process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST??"http://169.254.169.254");return{url:`${b}`,method:"GET",headers:(0,d.createHttpHeaders)({Accept:"application/json"})}}(k);return h.tracingClient.withSpan("ManagedIdentityCredential-pingImdsEndpoint",f??{},async a=>{let b;l.tracingOptions=a.tracingOptions;let f=(0,d.createPipelineRequest)(l);f.timeout=a.requestOptions?.timeout||1e3,f.allowInsecureConnection=!0;try{j.info(`${i}: Pinging the Azure IMDS endpoint`),b=await c.sendRequest(f)}catch(a){return(0,e.isError)(a)&&j.verbose(`${i}: Caught error ${a.name}: ${a.message}`),j.info(`${i}: The Azure IMDS endpoint is unavailable`),!1}return 403===b.status&&b.bodyAsText?.includes("unreachable")?(j.info(`${i}: The Azure IMDS endpoint is unavailable`),j.info(`${i}: ${b.bodyAsText}`),!1):(j.info(`${i}: The Azure IMDS endpoint is available`),!0)})}}},91039,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ClientAssertionCredential=void 0;let d=a.r(27804),e=a.r(36124),f=a.r(68409),g=a.r(90158),h=a.r(23602),i=(0,g.credentialLogger)("ClientAssertionCredential");c.ClientAssertionCredential=class{msalClient;tenantId;additionallyAllowedTenantIds;getAssertion;options;constructor(a,b,c,g={}){if(!a)throw new f.CredentialUnavailableError("ClientAssertionCredential: tenantId is a required parameter.");if(!b)throw new f.CredentialUnavailableError("ClientAssertionCredential: clientId is a required parameter.");if(!c)throw new f.CredentialUnavailableError("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=a,this.additionallyAllowedTenantIds=(0,e.resolveAdditionallyAllowedTenantIds)(g?.additionallyAllowedTenants),this.options=g,this.getAssertion=c,this.msalClient=(0,d.createMsalClient)(b,a,{...g,logger:i,tokenCredentialOptions:this.options})}async getToken(a,b={}){return h.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{b.tenantId=(0,e.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds,i);let c=Array.isArray(a)?a:[a];return this.msalClient.getTokenByClientAssertion(c,this.getAssertion,b)})}}},74831,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.WorkloadIdentityCredential=c.SupportedWorkloadEnvironmentVariables=void 0;let d=a.r(90158),e=a.r(91039),f=a.r(68409),g=a.r(36124),h=a.r(12714),i="WorkloadIdentityCredential";c.SupportedWorkloadEnvironmentVariables=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"];let j=(0,d.credentialLogger)(i);c.WorkloadIdentityCredential=class{client;azureFederatedTokenFileContent=void 0;cacheDate=void 0;federatedTokenFilePath;constructor(a){const b=(0,d.processEnvVars)(c.SupportedWorkloadEnvironmentVariables).assigned.join(", ");j.info(`Found the following environment variables: ${b}`);const h=a??{},k=h.tenantId||process.env.AZURE_TENANT_ID,l=h.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=h.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,k&&(0,g.checkTenantId)(j,k),!l)throw new f.CredentialUnavailableError(`${i}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!k)throw new f.CredentialUnavailableError(`${i}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new f.CredentialUnavailableError(`${i}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);j.info(`Invoking ClientAssertionCredential with tenant ID: ${k}, clientId: ${h.clientId} and federated token path: [REDACTED]`),this.client=new e.ClientAssertionCredential(k,l,this.readFileContents.bind(this),a)}async getToken(a,b){if(!this.client){let a=`${i}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw j.info(a),new f.CredentialUnavailableError(a)}return j.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(a,b)}async readFileContents(){if(void 0!==this.cacheDate&&Date.now()-this.cacheDate>=3e5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new f.CredentialUnavailableError(`${i}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let a=(await (0,h.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(a)this.azureFederatedTokenFileContent=a,this.cacheDate=Date.now();else throw new f.CredentialUnavailableError(`${i}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}}},65654,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.tokenExchangeMsi=void 0;let d=a.r(74831),e=a.r(90158),f="ManagedIdentityCredential - Token Exchange",g=(0,e.credentialLogger)(f);c.tokenExchangeMsi={name:"tokenExchangeMsi",async isAvailable(a){let b=process.env,c=!!((a||b.AZURE_CLIENT_ID)&&b.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return c||g.info(`${f}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),c},async getToken(a,b={}){let{scopes:c,clientId:e}=a;return new d.WorkloadIdentityCredential({clientId:e,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE,...{},disableInstanceDiscovery:!0}).getToken(c,b)}}},33871,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ManagedIdentityCredential=void 0;let d=a.r(83131),e=a.r(84347),f=a.r(5990),g=a.r(68409),h=a.r(16090),i=a.r(86851),j=a.r(90158),k=a.r(23602),l=a.r(2235),m=a.r(65654),n=a.r(98743),o=(0,j.credentialLogger)("ManagedIdentityCredential");c.ManagedIdentityCredential=class{managedIdentityApp;identityClient;clientId;resourceId;objectId;msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};isAvailableIdentityClient;sendProbeRequest;constructor(a,b){let c;"string"==typeof a?(this.clientId=a,c=b??{}):(this.clientId=a?.clientId,c=a??{}),this.resourceId=c?.resourceId,this.objectId=c?.objectId,this.sendProbeRequest=c?.sendProbeRequest??!1;const j=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(a=>a.value);if(j.length>1)throw Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);c.allowInsecureConnection=!0,c.retryOptions?.maxRetries!==void 0&&(this.msiRetryConfig.maxRetries=c.retryOptions.maxRetries),this.identityClient=new f.IdentityClient({...c,additionalPolicies:[{policy:(0,i.imdsRetryPolicy)(this.msiRetryConfig),position:"perCall"}]}),this.managedIdentityApp=new e.ManagedIdentityApplication({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:(0,h.getMSALLogLevel)((0,d.getLogLevel)()),piiLoggingEnabled:c.loggingOptions?.enableUnsafeSupportLogging,loggerCallback:(0,h.defaultLoggerCallback)(o)}}}),this.isAvailableIdentityClient=new f.IdentityClient({...c,retryOptions:{maxRetries:0}});const k=this.managedIdentityApp.getManagedIdentitySource();if("CloudShell"===k&&(this.clientId||this.resourceId||this.objectId))throw o.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new g.CredentialUnavailableError("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if("ServiceFabric"===k&&(this.clientId||this.resourceId||this.objectId))throw o.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new g.CredentialUnavailableError(`ManagedIdentityCredential: ${n.serviceFabricErrorMessage}`);if(o.info(`Using ${k} managed identity.`),1===j.length){const{key:a,value:b}=j[0];o.info(`${k} with ${a}: ${b}`)}}async getToken(a,b={}){o.getToken.info("Using the MSAL provider for Managed Identity.");let c=(0,n.mapScopesToResource)(a);if(!c)throw new g.CredentialUnavailableError(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(a)}`);return k.tracingClient.withSpan("ManagedIdentityCredential.getToken",b,async()=>{try{let d=await m.tokenExchangeMsi.isAvailable(this.clientId),e=this.managedIdentityApp.getManagedIdentitySource();if(o.getToken.info(`MSAL Identity source: ${e}`),d){o.getToken.info("Using the token exchange managed identity.");let b=await m.tokenExchangeMsi.getToken({scopes:a,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(null===b)throw new g.CredentialUnavailableError("Attempted to use the token exchange managed identity, but received a null response.");return b}if(("DefaultToImds"===e||"Imds"===e)&&this.sendProbeRequest&&(o.getToken.info("Using the IMDS endpoint to probe for availability."),!await l.imdsMsi.isAvailable({scopes:a,clientId:this.clientId,getTokenOptions:b,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new g.CredentialUnavailableError("Attempted to use the IMDS endpoint, but it is not available.");o.getToken.info("Calling into MSAL for managed identity token.");let f=await this.managedIdentityApp.acquireToken({resource:c});return this.ensureValidMsalToken(a,f,b),o.getToken.info((0,j.formatSuccess)(a)),{expiresOnTimestamp:f.expiresOn.getTime(),token:f.accessToken,refreshAfterTimestamp:f.refreshOn?.getTime(),tokenType:"Bearer"}}catch(b){var d;if(o.getToken.error((0,j.formatError)(a,b)),"AuthenticationRequiredError"===b.name)throw b;if("network_error"===(d=b).errorCode||"ENETUNREACH"===d.code||"EHOSTUNREACH"===d.code||(403===d.statusCode||403===d.code)&&d.message.includes("unreachable"))throw new g.CredentialUnavailableError(`ManagedIdentityCredential: Network unreachable. Message: ${b.message}`,{cause:b});throw new g.CredentialUnavailableError(`ManagedIdentityCredential: Authentication failed. Message ${b.message}`,{cause:b})}})}ensureValidMsalToken(a,b,c){let d=b=>(o.getToken.info(b),new g.AuthenticationRequiredError({scopes:Array.isArray(a)?a:[a],getTokenOptions:c,message:b}));if(!b)throw d("No response.");if(!b.expiresOn)throw d('Response had no "expiresOn" property.');if(!b.accessToken)throw d('Response had no "accessToken" property.')}}},41811,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzureDeveloperCliCredential=c.developerCliCredentialInternals=c.azureDeveloperCliPublicErrorMessages=void 0;let d=a.r(84710),e=a.r(90158),f=a.r(68409),g=d.__importDefault(a.r(33405)),h=a.r(36124),i=a.r(23602),j=a.r(58166),k=(0,e.credentialLogger)("AzureDeveloperCliCredential");c.azureDeveloperCliPublicErrorMessages={notInstalled:"Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.",login:"Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.",unknown:"Unknown error while trying to retrieve the access token",claim:"This credential doesn't support claims challenges. To authenticate with the required claims, please run the following command:"},c.developerCliCredentialInternals={getSafeWorkingDir:()=>"/bin",async getAzdAccessToken(a,b,d,e){let f=[];b&&(f=["--tenant-id",b]);let h=[];return e&&(h=["--claims",btoa(e)]),new Promise((b,e)=>{try{let e=["auth","token","--output","json","--no-prompt",...a.reduce((a,b)=>a.concat("--scope",b),[]),...f,...h],i=["azd",...e].join(" ");g.default.exec(i,{cwd:c.developerCliCredentialInternals.getSafeWorkingDir(),timeout:d},(a,c,d)=>{b({stdout:c,stderr:d,error:a})})}catch(a){e(a)}})}},c.AzureDeveloperCliCredential=class{tenantId;additionallyAllowedTenantIds;timeout;constructor(a){a?.tenantId&&((0,h.checkTenantId)(k,a?.tenantId),this.tenantId=a?.tenantId),this.additionallyAllowedTenantIds=(0,h.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants),this.timeout=a?.processTimeoutInMs}async getToken(a,b={}){let d,g=(0,h.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds);return g&&(0,h.checkTenantId)(k,g),d="string"==typeof a?[a]:a,k.getToken.info(`Using the scopes ${a}`),i.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async()=>{try{d.forEach(a=>{(0,j.ensureValidScopeForDevTimeCreds)(a,k)});let h=await c.developerCliCredentialInternals.getAzdAccessToken(d,g,this.timeout,b.claims),i=h.stderr?.match("must use multi-factor authentication")||h.stderr?.match("reauthentication required"),l=h.stderr?.match("not logged in, run `azd login` to login")||h.stderr?.match("not logged in, run `azd auth login` to login");if(h.stderr?.match("azd:(.*)not found")||h.stderr?.startsWith("'azd' is not recognized")||h.error&&"ENOENT"===h.error.code){let b=new f.CredentialUnavailableError(c.azureDeveloperCliPublicErrorMessages.notInstalled);throw k.getToken.info((0,e.formatError)(a,b)),b}if(l){let b=new f.CredentialUnavailableError(c.azureDeveloperCliPublicErrorMessages.login);throw k.getToken.info((0,e.formatError)(a,b)),b}if(i){let b=d.reduce((a,b)=>a.concat("--scope",b),[]).join(" "),g=`azd auth login ${b}`,h=new f.CredentialUnavailableError(`${c.azureDeveloperCliPublicErrorMessages.claim} ${g}`);throw k.getToken.info((0,e.formatError)(a,h)),h}try{let b=JSON.parse(h.stdout);return k.getToken.info((0,e.formatSuccess)(a)),{token:b.token,expiresOnTimestamp:new Date(b.expiresOn).getTime(),tokenType:"Bearer"}}catch(a){if(h.stderr)throw new f.CredentialUnavailableError(h.stderr);throw a}}catch(d){let b="CredentialUnavailableError"===d.name?d:new f.CredentialUnavailableError(d.message||c.azureDeveloperCliPublicErrorMessages.unknown);throw k.getToken.info((0,e.formatError)(a,b)),b}})}}},10070,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.checkSubscription=function(a,b){if(!b.match(/^[0-9a-zA-Z-._ ]+$/)){let c=Error(`Subscription '${b}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw a.info((0,d.formatError)("",c)),c}};let d=a.r(90158)},28629,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzureCliCredential=c.cliCredentialInternals=c.azureCliPublicErrorMessages=void 0;let d=a.r(84710),e=a.r(36124),f=a.r(90158),g=a.r(58166),h=a.r(68409),i=d.__importDefault(a.r(33405)),j=a.r(23602),k=a.r(10070),l=(0,f.credentialLogger)("AzureCliCredential");c.azureCliPublicErrorMessages={claim:"This credential doesn't support claims challenges. To authenticate with the required claims, please run the following command:",notInstalled:"Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.",login:"Please run 'az login' from a command prompt to authenticate before using this credential.",unknown:"Unknown error while trying to retrieve the access token",unexpectedResponse:'Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got:'},c.cliCredentialInternals={getSafeWorkingDir:()=>"/bin",async getAzureCliAccessToken(a,b,d,e){let f=[],g=[];return b&&(f=["--tenant",b]),d&&(g=["--subscription",`"${d}"`]),new Promise((b,d)=>{try{let d=["account","get-access-token","--output","json","--resource",a,...f,...g],h=["az",...d].join(" ");i.default.exec(h,{cwd:c.cliCredentialInternals.getSafeWorkingDir(),timeout:e},(a,c,d)=>{b({stdout:c,stderr:d,error:a})})}catch(a){d(a)}})}},c.AzureCliCredential=class{tenantId;additionallyAllowedTenantIds;timeout;subscription;constructor(a){a?.tenantId&&((0,e.checkTenantId)(l,a?.tenantId),this.tenantId=a?.tenantId),a?.subscription&&((0,k.checkSubscription)(l,a?.subscription),this.subscription=a?.subscription),this.additionallyAllowedTenantIds=(0,e.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants),this.timeout=a?.processTimeoutInMs}async getToken(a,b={}){let d="string"==typeof a?a:a[0],i=b.claims;if(i&&i.trim()){let a=btoa(i),e=`az login --claims-challenge ${a} --scope ${d}`,g=b.tenantId;g&&(e+=` --tenant ${g}`);let j=new h.CredentialUnavailableError(`${c.azureCliPublicErrorMessages.claim} ${e}`);throw l.getToken.info((0,f.formatError)(d,j)),j}let m=(0,e.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds);return m&&(0,e.checkTenantId)(l,m),this.subscription&&(0,k.checkSubscription)(l,this.subscription),l.getToken.info(`Using the scope ${d}`),j.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async()=>{try{(0,g.ensureValidScopeForDevTimeCreds)(d,l);let b=(0,g.getScopeResource)(d),e=await c.cliCredentialInternals.getAzureCliAccessToken(b,m,this.subscription,this.timeout),i=e.stderr?.match("(.*)az login --scope(.*)"),j=e.stderr?.match("(.*)az login(.*)")&&!i;if(e.stderr?.match("az:(.*)not found")||e.stderr?.startsWith("'az' is not recognized")){let b=new h.CredentialUnavailableError(c.azureCliPublicErrorMessages.notInstalled);throw l.getToken.info((0,f.formatError)(a,b)),b}if(j){let b=new h.CredentialUnavailableError(c.azureCliPublicErrorMessages.login);throw l.getToken.info((0,f.formatError)(a,b)),b}try{let b=e.stdout,c=this.parseRawResponse(b);return l.getToken.info((0,f.formatSuccess)(a)),c}catch(a){if(e.stderr)throw new h.CredentialUnavailableError(e.stderr);throw a}}catch(d){let b="CredentialUnavailableError"===d.name?d:new h.CredentialUnavailableError(d.message||c.azureCliPublicErrorMessages.unknown);throw l.getToken.info((0,f.formatError)(a,b)),b}})}parseRawResponse(a){let b=JSON.parse(a),d=b.accessToken,e=1e3*Number.parseInt(b.expires_on,10);if(!isNaN(e))return l.getToken.info("expires_on is available and is valid, using it"),{token:d,expiresOnTimestamp:e,tokenType:"Bearer"};if(isNaN(e=new Date(b.expiresOn).getTime()))throw new h.CredentialUnavailableError(`${c.azureCliPublicErrorMessages.unexpectedResponse} "${b.expiresOn}"`);return{token:d,expiresOnTimestamp:e,tokenType:"Bearer"}}}},68496,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.processUtils=void 0;let d=a.r(84710).__importDefault(a.r(74533));c.processUtils={execFile:(a,b,c)=>new Promise((e,f)=>{d.default.execFile(a,b,c,(a,b,c)=>{Buffer.isBuffer(b)&&(b=b.toString("utf8")),Buffer.isBuffer(c)&&(c=c.toString("utf8")),c||a?f(c?Error(c):a):e(b)})})}},18095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzurePowerShellCredential=c.commandStack=c.powerShellPublicErrorMessages=c.powerShellErrors=void 0,c.formatCommand=function(a){return a},c.parseJsonToken=l;let d=a.r(36124),e=a.r(90158),f=a.r(58166),g=a.r(68409),h=a.r(68496),i=a.r(23602),j=(0,e.credentialLogger)("AzurePowerShellCredential");async function k(a,b){let c=[];for(let d of a){let[a,...e]=d,f=await h.processUtils.execFile(a,e,{encoding:"utf8",timeout:b});c.push(f)}return c}async function l(a){let b=a.match(/{[^{}]*}/g),c=a;if(b)try{for(let a of b)try{let b=JSON.parse(a);if(b?.Token)return(c=c.replace(a,""))&&j.getToken.warning(c),b}catch(a){continue}}catch(b){throw Error(`Unable to parse the output of PowerShell. Received output: ${a}`)}throw Error(`No access token found in the output. Received output: ${a}`)}process.platform,c.powerShellErrors={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},c.powerShellPublicErrorMessages={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:"The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: \"Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force\".",claim:"This credential doesn't support claims challenges. To authenticate with the required claims, please run the following command:",troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},c.commandStack=["pwsh"],c.AzurePowerShellCredential=class{tenantId;additionallyAllowedTenantIds;timeout;constructor(a){a?.tenantId&&((0,d.checkTenantId)(j,a?.tenantId),this.tenantId=a?.tenantId),this.additionallyAllowedTenantIds=(0,d.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants),this.timeout=a?.processTimeoutInMs}async getAzurePowerShellAccessToken(a,b,d){for(let e of[...c.commandStack]){try{await k([[e,"/?"]],d)}catch(a){c.commandStack.shift();continue}return l((await k([[e,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${b??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${a}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0])}throw Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(a,b={}){return i.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async()=>{let h="string"==typeof a?a:a[0],i=b.claims;if(i&&i.trim()){let a=btoa(i),d=`Connect-AzAccount -ClaimsChallenge ${a}`,f=b.tenantId;f&&(d+=` -Tenant ${f}`);let k=new g.CredentialUnavailableError(`${c.powerShellPublicErrorMessages.claim} ${d}`);throw j.getToken.info((0,e.formatError)(h,k)),k}let k=(0,d.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds);k&&(0,d.checkTenantId)(j,k);try{(0,f.ensureValidScopeForDevTimeCreds)(h,j),j.getToken.info(`Using the scope ${h}`);let b=(0,f.getScopeResource)(h),c=await this.getAzurePowerShellAccessToken(b,k,this.timeout);return j.getToken.info((0,e.formatSuccess)(a)),{token:c.Token,expiresOnTimestamp:new Date(c.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(b){if(b.message.match(c.powerShellErrors.installed)){let a=new g.CredentialUnavailableError(c.powerShellPublicErrorMessages.installed);throw j.getToken.info((0,e.formatError)(h,a)),a}if(b.message.match(`(.*)${c.powerShellErrors.login}(.*)`)){let a=new g.CredentialUnavailableError(c.powerShellPublicErrorMessages.login);throw j.getToken.info((0,e.formatError)(h,a)),a}let a=new g.CredentialUnavailableError(`${b}. ${c.powerShellPublicErrorMessages.troubleshoot}`);throw j.getToken.info((0,e.formatError)(h,a)),a}})}}},32377,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.VisualStudioCodeCredential=void 0;let d=a.r(90158),e=a.r(36124),f=a.r(68409),g=a.r(36124),h=a.r(27804),i=a.r(58166),j=a.r(6469),k=a.r(16090),l=a.r(12714),m=(0,d.credentialLogger)("VisualStudioCodeCredential"),n={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};c.VisualStudioCodeCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;options;constructor(a){this.options=a||{},a&&a.tenantId?((0,g.checkTenantId)(m,a.tenantId),this.tenantId=a.tenantId):this.tenantId="common",this.additionallyAllowedTenantIds=(0,e.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants),function(a){let b=n[a];if(b)throw new f.CredentialUnavailableError(b)}(this.tenantId)}async prepare(a){let b=(0,e.processMultiTenantRequest)(this.tenantId,this.options,this.additionallyAllowedTenantIds,m)||this.tenantId;if(!(0,j.hasVSCodePlugin)()||!j.vsCodeAuthRecordPath)throw new f.CredentialUnavailableError("Visual Studio Code Authentication is not available. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");let c=await this.loadAuthRecord(j.vsCodeAuthRecordPath,a);this.msalClient=(0,h.createMsalClient)("aebc6443-996d-45c2-90f0-388ff96faa56",b,{...this.options,isVSCodeCredential:!0,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0},authenticationRecord:c})}preparePromise;prepareOnce(a){return this.preparePromise||(this.preparePromise=this.prepare(a)),this.preparePromise}async getToken(a,b){let c=(0,i.ensureScopes)(a);if(await this.prepareOnce(c),!this.msalClient)throw new f.CredentialUnavailableError("Visual Studio Code Authentication failed to initialize. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.");return this.msalClient.getTokenByInteractiveRequest(c,{...b,disableAutomaticAuthentication:!0})}async loadAuthRecord(a,b){try{let b=await (0,l.readFile)(a,{encoding:"utf8"});return(0,k.deserializeAuthenticationRecord)(b)}catch(a){throw m.getToken.info((0,d.formatError)(b,a)),new f.CredentialUnavailableError("Cannot load authentication record in Visual Studio Code. Ensure you have have Azure Resources Extension installed in VS Code, signed into Azure via VS Code, installed the @azure/identity-vscode package, and properly configured the extension.")}}}},63028,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BrokerCredential=void 0;let d=a.r(36124),e=a.r(90158),f=a.r(58166),g=a.r(23602),h=a.r(27804),i=a.r(780),j=a.r(68409),k=(0,e.credentialLogger)("BrokerCredential");c.BrokerCredential=class{brokerMsalClient;brokerTenantId;brokerAdditionallyAllowedTenantIds;constructor(a){this.brokerTenantId=(0,d.resolveTenantId)(k,a.tenantId),this.brokerAdditionallyAllowedTenantIds=(0,d.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants);const b={...a,tokenCredentialOptions:a,logger:k,brokerOptions:{enabled:!0,parentWindowHandle:new Uint8Array(0),useDefaultBrokerAccount:!0}};this.brokerMsalClient=(0,h.createMsalClient)(i.DeveloperSignOnClientId,this.brokerTenantId,b)}async getToken(a,b={}){return g.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{b.tenantId=(0,d.processMultiTenantRequest)(this.brokerTenantId,b,this.brokerAdditionallyAllowedTenantIds,k);let c=(0,f.ensureScopes)(a);try{return this.brokerMsalClient.getBrokeredToken(c,!0,{...b,disableAutomaticAuthentication:!0})}catch(a){throw k.getToken.info((0,e.formatError)(c,a)),new j.CredentialUnavailableError("Failed to acquire token using broker authentication",{cause:a})}})}}},42815,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createDefaultBrokerCredential=function(a={}){return new k.BrokerCredential(a)},c.createDefaultVisualStudioCodeCredential=function(a={}){return new j.VisualStudioCodeCredential(a)},c.createDefaultManagedIdentityCredential=function(a={}){a.retryOptions??={maxRetries:5,retryDelayInMs:800},a.sendProbeRequest??=!0;let b=a?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,c=a?.workloadIdentityClientId??b,d=a?.managedIdentityResourceId,f=process.env.AZURE_FEDERATED_TOKEN_FILE,g=a?.tenantId??process.env.AZURE_TENANT_ID;if(d){let b={...a,resourceId:d};return new e.ManagedIdentityCredential(b)}if(f&&c){let b={...a,tenantId:g};return new e.ManagedIdentityCredential(c,b)}if(b){let c={...a,clientId:b};return new e.ManagedIdentityCredential(c)}return new e.ManagedIdentityCredential(a)},c.createDefaultWorkloadIdentityCredential=function(a){let b=a?.managedIdentityClientId??process.env.AZURE_CLIENT_ID,c=a?.workloadIdentityClientId??b,d=process.env.AZURE_FEDERATED_TOKEN_FILE,e=a?.tenantId??process.env.AZURE_TENANT_ID;if(d&&c){let b={...a,tenantId:e,clientId:c,tokenFilePath:d};return new f.WorkloadIdentityCredential(b)}if(e){let b={...a,tenantId:e};return new f.WorkloadIdentityCredential(b)}return new f.WorkloadIdentityCredential(a)},c.createDefaultAzureDeveloperCliCredential=function(a={}){return new g.AzureDeveloperCliCredential(a)},c.createDefaultAzureCliCredential=function(a={}){return new h.AzureCliCredential(a)},c.createDefaultAzurePowershellCredential=function(a={}){return new i.AzurePowerShellCredential(a)},c.createDefaultEnvironmentCredential=function(a={}){return new d.EnvironmentCredential(a)};let d=a.r(54450),e=a.r(33871),f=a.r(74831),g=a.r(41811),h=a.r(28629),i=a.r(18095),j=a.r(32377),k=a.r(63028)},92881,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DefaultAzureCredential=c.UnavailableDefaultCredential=void 0;let d=a.r(41559),e=a.r(90158),f=a.r(42815),g=(0,e.credentialLogger)("DefaultAzureCredential");class h{credentialUnavailableErrorMessage;credentialName;constructor(a,b){this.credentialName=a,this.credentialUnavailableErrorMessage=b}getToken(){return g.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}}c.UnavailableDefaultCredential=h;class i extends d.ChainedTokenCredential{constructor(a){!function(a){if(a?.requiredEnvVars){let b=(Array.isArray(a.requiredEnvVars)?a.requiredEnvVars:[a.requiredEnvVars]).filter(a=>!process.env[a]);if(b.length>0){let a=`Required environment ${1===b.length?"variable":"variables"} '${b.join(", ")}' for DefaultAzureCredential ${1===b.length?"is":"are"} not set or empty.`;throw g.warning(a),Error(a)}}}(a);const b=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,c=[f.createDefaultVisualStudioCodeCredential,f.createDefaultAzureCliCredential,f.createDefaultAzurePowershellCredential,f.createDefaultAzureDeveloperCliCredential,f.createDefaultBrokerCredential],d=[f.createDefaultEnvironmentCredential,f.createDefaultWorkloadIdentityCredential,f.createDefaultManagedIdentityCredential];let e=[];if(b)switch(b){case"dev":e=c;break;case"prod":e=d;break;case"environmentcredential":e=[f.createDefaultEnvironmentCredential];break;case"workloadidentitycredential":e=[f.createDefaultWorkloadIdentityCredential];break;case"managedidentitycredential":e=[()=>(0,f.createDefaultManagedIdentityCredential)({sendProbeRequest:!1})];break;case"visualstudiocodecredential":e=[f.createDefaultVisualStudioCodeCredential];break;case"azureclicredential":e=[f.createDefaultAzureCliCredential];break;case"azurepowershellcredential":e=[f.createDefaultAzurePowershellCredential];break;case"azuredeveloperclicredential":e=[f.createDefaultAzureDeveloperCliCredential];break;default:{const a=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev' or any of these credentials - EnvironmentCredential, WorkloadIdentityCredential, ManagedIdentityCredential, VisualStudioCodeCredential, AzureCliCredential, AzurePowerShellCredential, AzureDeveloperCliCredential.`;throw g.warning(a),Error(a)}}else e=[...d,...c];super(...e.map(b=>{try{return b(a??{})}catch(a){return g.warning(`Skipped ${b.name} because of an error creating the credential: ${a}`),new h(b.name,a.message)}}))}}c.DefaultAzureCredential=i},69548,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.InteractiveBrowserCredential=void 0;let d=a.r(36124),e=a.r(90158),f=a.r(58166),g=a.r(23602),h=a.r(27804),i=a.r(780),j=(0,e.credentialLogger)("InteractiveBrowserCredential");c.InteractiveBrowserCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;disableAutomaticAuthentication;browserCustomizationOptions;loginHint;constructor(a){this.tenantId=(0,d.resolveTenantId)(j,a.tenantId,a.clientId),this.additionallyAllowedTenantIds=(0,d.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants);const b={...a,tokenCredentialOptions:a,logger:j};if(this.browserCustomizationOptions=a.browserCustomizationOptions,this.loginHint=a.loginHint,a?.brokerOptions?.enabled)if(a?.brokerOptions?.parentWindowHandle)b.brokerOptions={enabled:!0,parentWindowHandle:a.brokerOptions.parentWindowHandle,legacyEnableMsaPassthrough:a.brokerOptions?.legacyEnableMsaPassthrough,useDefaultBrokerAccount:a.brokerOptions?.useDefaultBrokerAccount};else throw Error("In order to do WAM authentication, `parentWindowHandle` under `brokerOptions` is a required parameter");this.msalClient=(0,h.createMsalClient)(a.clientId??i.DeveloperSignOnClientId,this.tenantId,b),this.disableAutomaticAuthentication=a?.disableAutomaticAuthentication}async getToken(a,b={}){return g.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{b.tenantId=(0,d.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds,j);let c=(0,f.ensureScopes)(a);return this.msalClient.getTokenByInteractiveRequest(c,{...b,disableAutomaticAuthentication:this.disableAutomaticAuthentication,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint})})}async authenticate(a,b={}){return g.tracingClient.withSpan(`${this.constructor.name}.authenticate`,b,async b=>{let c=(0,f.ensureScopes)(a);return await this.msalClient.getTokenByInteractiveRequest(c,{...b,disableAutomaticAuthentication:!1,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint}),this.msalClient.getActiveAccount()})}}},74868,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DeviceCodeCredential=void 0,c.defaultDeviceCodePromptCallback=k;let d=a.r(36124),e=a.r(90158),f=a.r(58166),g=a.r(23602),h=a.r(27804),i=a.r(780),j=(0,e.credentialLogger)("DeviceCodeCredential");function k(a){console.log(a.message)}c.DeviceCodeCredential=class{tenantId;additionallyAllowedTenantIds;disableAutomaticAuthentication;msalClient;userPromptCallback;constructor(a){this.tenantId=a?.tenantId,this.additionallyAllowedTenantIds=(0,d.resolveAdditionallyAllowedTenantIds)(a?.additionallyAllowedTenants);const b=a?.clientId??i.DeveloperSignOnClientId,c=(0,d.resolveTenantId)(j,a?.tenantId,b);this.userPromptCallback=a?.userPromptCallback??k,this.msalClient=(0,h.createMsalClient)(b,c,{...a,logger:j,tokenCredentialOptions:a||{}}),this.disableAutomaticAuthentication=a?.disableAutomaticAuthentication}async getToken(a,b={}){return g.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{b.tenantId=(0,d.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds,j);let c=(0,f.ensureScopes)(a);return this.msalClient.getTokenByDeviceCode(c,this.userPromptCallback,{...b,disableAutomaticAuthentication:this.disableAutomaticAuthentication})})}async authenticate(a,b={}){return g.tracingClient.withSpan(`${this.constructor.name}.authenticate`,b,async b=>{let c=Array.isArray(a)?a:[a];return await this.msalClient.getTokenByDeviceCode(c,this.userPromptCallback,{...b,disableAutomaticAuthentication:!1}),this.msalClient.getActiveAccount()})}}},71853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzurePipelinesCredential=void 0,c.handleOidcResponse=l;let d=a.r(68409),e=a.r(57717),f=a.r(91039),g=a.r(5990),h=a.r(36124),i=a.r(90158),j="AzurePipelinesCredential",k=(0,i.credentialLogger)(j);function l(a){let b=a.bodyAsText;if(!b)throw k.error(`${j}: Authentication Failed. Received null token from OIDC request. Response status- ${a.status}. Complete response - ${JSON.stringify(a)}`),new d.AuthenticationError(a.status,{error:`${j}: Authentication Failed. Received null token from OIDC request.`,error_description:`${JSON.stringify(a)}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`});try{let c=JSON.parse(b);if(c?.oidcToken)return c.oidcToken;{let c=`${j}: Authentication Failed. oidcToken field not detected in the response.`,e="";throw 200!==a.status&&(e=`Response body = ${b}. Response Headers ["x-vss-e2eid"] = ${a.headers.get("x-vss-e2eid")} and ["x-msedge-ref"] = ${a.headers.get("x-msedge-ref")}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`),k.error(c),k.error(e),new d.AuthenticationError(a.status,{error:c,error_description:e})}}catch(e){let c=`${j}: Authentication Failed. oidcToken field not detected in the response.`;throw k.error(`Response from service = ${b}, Response Headers ["x-vss-e2eid"] = ${a.headers.get("x-vss-e2eid")} 
      and ["x-msedge-ref"] = ${a.headers.get("x-msedge-ref")}, error message = ${e.message}`),k.error(c),new d.AuthenticationError(a.status,{error:c,error_description:`Response = ${b}. Response headers ["x-vss-e2eid"] = ${a.headers.get("x-vss-e2eid")} and ["x-msedge-ref"] =  ${a.headers.get("x-msedge-ref")}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`})}}c.AzurePipelinesCredential=class{clientAssertionCredential;identityClient;constructor(a,b,c,e,i={}){if(!b)throw new d.CredentialUnavailableError(`${j}: is unavailable. clientId is a required parameter.`);if(!a)throw new d.CredentialUnavailableError(`${j}: is unavailable. tenantId is a required parameter.`);if(!c)throw new d.CredentialUnavailableError(`${j}: is unavailable. serviceConnectionId is a required parameter.`);if(!e)throw new d.CredentialUnavailableError(`${j}: is unavailable. systemAccessToken is a required parameter.`);if(i.loggingOptions={...i?.loggingOptions,additionalAllowedHeaderNames:[...i.loggingOptions?.additionalAllowedHeaderNames??[],"x-vss-e2eid","x-msedge-ref"]},this.identityClient=new g.IdentityClient(i),(0,h.checkTenantId)(k,a),k.info(`Invoking AzurePipelinesCredential with tenant ID: ${a}, client ID: ${b}, and service connection ID: ${c}`),!process.env.SYSTEM_OIDCREQUESTURI)throw new d.CredentialUnavailableError(`${j}: is unavailable. Ensure that you're running this task in an Azure Pipeline, so that following missing system variable(s) can be defined- "SYSTEM_OIDCREQUESTURI"`);const l=`${process.env.SYSTEM_OIDCREQUESTURI}?api-version=7.1&serviceConnectionId=${c}`;k.info(`Invoking ClientAssertionCredential with tenant ID: ${a}, client ID: ${b} and service connection ID: ${c}`),this.clientAssertionCredential=new f.ClientAssertionCredential(a,b,this.requestOidcToken.bind(this,l,e),i)}async getToken(a,b){if(!this.clientAssertionCredential){let a=`${j}: is unavailable. To use Federation Identity in Azure Pipelines, the following parameters are required - 
      tenantId,
      clientId,
      serviceConnectionId,
      systemAccessToken,
      "SYSTEM_OIDCREQUESTURI".      
      See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`;throw k.error(a),new d.CredentialUnavailableError(a)}return k.info("Invoking getToken() of Client Assertion Credential"),this.clientAssertionCredential.getToken(a,b)}async requestOidcToken(a,b){k.info("Requesting OIDC token from Azure Pipelines..."),k.info(a);let c=(0,e.createPipelineRequest)({url:a,method:"POST",headers:(0,e.createHttpHeaders)({"Content-Type":"application/json",Authorization:`Bearer ${b}`,"X-TFS-FedAuthRedirect":"Suppress"})});return l(await this.identityClient.sendRequest(c))}}},1048,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AuthorizationCodeCredential=void 0;let d=a.r(36124),e=a.r(36124),f=a.r(90158),g=a.r(58166),h=a.r(23602),i=a.r(27804),j=(0,f.credentialLogger)("AuthorizationCodeCredential");c.AuthorizationCodeCredential=class{msalClient;disableAutomaticAuthentication;authorizationCode;redirectUri;tenantId;additionallyAllowedTenantIds;clientSecret;constructor(a,b,c,f,g,h){(0,e.checkTenantId)(j,a),this.clientSecret=c,"string"==typeof g?(this.authorizationCode=f,this.redirectUri=g):(this.authorizationCode=c,this.redirectUri=f,this.clientSecret=void 0,h=g),this.tenantId=a,this.additionallyAllowedTenantIds=(0,d.resolveAdditionallyAllowedTenantIds)(h?.additionallyAllowedTenants),this.msalClient=(0,i.createMsalClient)(b,a,{...h,logger:j,tokenCredentialOptions:h??{}})}async getToken(a,b={}){return h.tracingClient.withSpan(`${this.constructor.name}.getToken`,b,async b=>{let c=(0,d.processMultiTenantRequest)(this.tenantId,b,this.additionallyAllowedTenantIds);b.tenantId=c;let e=(0,g.ensureScopes)(a);return this.msalClient.getTokenByAuthorizationCode(e,this.redirectUri,this.authorizationCode,this.clientSecret,{...b,disableAutomaticAuthentication:this.disableAutomaticAuthentication})})}}},901,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.OnBehalfOfCredential=void 0;let d=a.r(27804),e=a.r(90158),f=a.r(36124),g=a.r(68409),h=a.r(66680),i=a.r(58166),j=a.r(12714),k=a.r(23602),l="OnBehalfOfCredential",m=(0,e.credentialLogger)(l);c.OnBehalfOfCredential=class{tenantId;additionallyAllowedTenantIds;msalClient;sendCertificateChain;certificatePath;clientSecret;userAssertionToken;clientAssertion;constructor(a){const{clientSecret:b}=a,{certificatePath:c,sendCertificateChain:e}=a,{getAssertion:h}=a,{tenantId:i,clientId:j,userAssertionToken:k,additionallyAllowedTenants:n}=a;if(!i)throw new g.CredentialUnavailableError(`${l}: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!j)throw new g.CredentialUnavailableError(`${l}: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!b&&!c&&!h)throw new g.CredentialUnavailableError(`${l}: You must provide one of clientSecret, certificatePath, or a getAssertion callback but none were provided. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!k)throw new g.CredentialUnavailableError(`${l}: userAssertionToken is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.certificatePath=c,this.clientSecret=b,this.userAssertionToken=k,this.sendCertificateChain=e,this.clientAssertion=h,this.tenantId=i,this.additionallyAllowedTenantIds=(0,f.resolveAdditionallyAllowedTenantIds)(n),this.msalClient=(0,d.createMsalClient)(j,this.tenantId,{...a,logger:m,tokenCredentialOptions:a})}async getToken(a,b={}){return k.tracingClient.withSpan(`${l}.getToken`,b,async c=>{c.tenantId=(0,f.processMultiTenantRequest)(this.tenantId,c,this.additionallyAllowedTenantIds,m);let d=(0,i.ensureScopes)(a);if(this.certificatePath){let a=await this.buildClientCertificate(this.certificatePath);return this.msalClient.getTokenOnBehalfOf(d,this.userAssertionToken,a,c)}if(this.clientSecret)return this.msalClient.getTokenOnBehalfOf(d,this.userAssertionToken,this.clientSecret,b);if(this.clientAssertion)return this.msalClient.getTokenOnBehalfOf(d,this.userAssertionToken,this.clientAssertion,b);throw Error("Expected either clientSecret or certificatePath or clientAssertion to be defined.")})}async buildClientCertificate(a){try{let b=await this.parseCertificate({certificatePath:a},this.sendCertificateChain);return{thumbprint:b.thumbprint,thumbprintSha256:b.thumbprintSha256,privateKey:b.certificateContents,x5c:b.x5c}}catch(a){throw m.info((0,e.formatError)("",a)),a}}async parseCertificate(a,b){let c,d=a.certificatePath,e=await (0,j.readFile)(d,"utf8"),f=b?e:void 0,g=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,i=[];do(c=g.exec(e))&&i.push(c[3]);while(c)if(0===i.length)throw Error("The file at the specified path does not contain a PEM-encoded certificate.");let k=(0,h.createHash)("sha1").update(Buffer.from(i[0],"base64")).digest("hex").toUpperCase();return{certificateContents:e,thumbprintSha256:(0,h.createHash)("sha256").update(Buffer.from(i[0],"base64")).digest("hex").toUpperCase(),thumbprint:k,x5c:f}}}},40411,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getBearerTokenProvider=c.AzureAuthorityHosts=c.logger=c.WorkloadIdentityCredential=c.OnBehalfOfCredential=c.VisualStudioCodeCredential=c.UsernamePasswordCredential=c.AzurePowerShellCredential=c.AuthorizationCodeCredential=c.AzurePipelinesCredential=c.DeviceCodeCredential=c.ManagedIdentityCredential=c.InteractiveBrowserCredential=c.AzureDeveloperCliCredential=c.AzureCliCredential=c.ClientAssertionCredential=c.ClientCertificateCredential=c.EnvironmentCredential=c.DefaultAzureCredential=c.ClientSecretCredential=c.ChainedTokenCredential=c.deserializeAuthenticationRecord=c.serializeAuthenticationRecord=c.AuthenticationRequiredError=c.CredentialUnavailableErrorName=c.CredentialUnavailableError=c.AggregateAuthenticationErrorName=c.AuthenticationErrorName=c.AggregateAuthenticationError=c.AuthenticationError=void 0,c.getDefaultAzureCredential=function(){return new d.DefaultAzureCredential},a.r(84710).__exportStar(a.r(62960),c);let d=a.r(92881);var e=a.r(68409);Object.defineProperty(c,"AuthenticationError",{enumerable:!0,get:function(){return e.AuthenticationError}}),Object.defineProperty(c,"AggregateAuthenticationError",{enumerable:!0,get:function(){return e.AggregateAuthenticationError}}),Object.defineProperty(c,"AuthenticationErrorName",{enumerable:!0,get:function(){return e.AuthenticationErrorName}}),Object.defineProperty(c,"AggregateAuthenticationErrorName",{enumerable:!0,get:function(){return e.AggregateAuthenticationErrorName}}),Object.defineProperty(c,"CredentialUnavailableError",{enumerable:!0,get:function(){return e.CredentialUnavailableError}}),Object.defineProperty(c,"CredentialUnavailableErrorName",{enumerable:!0,get:function(){return e.CredentialUnavailableErrorName}}),Object.defineProperty(c,"AuthenticationRequiredError",{enumerable:!0,get:function(){return e.AuthenticationRequiredError}});var f=a.r(16090);Object.defineProperty(c,"serializeAuthenticationRecord",{enumerable:!0,get:function(){return f.serializeAuthenticationRecord}}),Object.defineProperty(c,"deserializeAuthenticationRecord",{enumerable:!0,get:function(){return f.deserializeAuthenticationRecord}});var g=a.r(41559);Object.defineProperty(c,"ChainedTokenCredential",{enumerable:!0,get:function(){return g.ChainedTokenCredential}});var h=a.r(34097);Object.defineProperty(c,"ClientSecretCredential",{enumerable:!0,get:function(){return h.ClientSecretCredential}});var i=a.r(92881);Object.defineProperty(c,"DefaultAzureCredential",{enumerable:!0,get:function(){return i.DefaultAzureCredential}});var j=a.r(54450);Object.defineProperty(c,"EnvironmentCredential",{enumerable:!0,get:function(){return j.EnvironmentCredential}});var k=a.r(6917);Object.defineProperty(c,"ClientCertificateCredential",{enumerable:!0,get:function(){return k.ClientCertificateCredential}});var l=a.r(91039);Object.defineProperty(c,"ClientAssertionCredential",{enumerable:!0,get:function(){return l.ClientAssertionCredential}});var m=a.r(28629);Object.defineProperty(c,"AzureCliCredential",{enumerable:!0,get:function(){return m.AzureCliCredential}});var n=a.r(41811);Object.defineProperty(c,"AzureDeveloperCliCredential",{enumerable:!0,get:function(){return n.AzureDeveloperCliCredential}});var o=a.r(69548);Object.defineProperty(c,"InteractiveBrowserCredential",{enumerable:!0,get:function(){return o.InteractiveBrowserCredential}});var p=a.r(33871);Object.defineProperty(c,"ManagedIdentityCredential",{enumerable:!0,get:function(){return p.ManagedIdentityCredential}});var q=a.r(74868);Object.defineProperty(c,"DeviceCodeCredential",{enumerable:!0,get:function(){return q.DeviceCodeCredential}});var r=a.r(71853);Object.defineProperty(c,"AzurePipelinesCredential",{enumerable:!0,get:function(){return r.AzurePipelinesCredential}});var s=a.r(1048);Object.defineProperty(c,"AuthorizationCodeCredential",{enumerable:!0,get:function(){return s.AuthorizationCodeCredential}});var t=a.r(18095);Object.defineProperty(c,"AzurePowerShellCredential",{enumerable:!0,get:function(){return t.AzurePowerShellCredential}});var u=a.r(15790);Object.defineProperty(c,"UsernamePasswordCredential",{enumerable:!0,get:function(){return u.UsernamePasswordCredential}});var v=a.r(32377);Object.defineProperty(c,"VisualStudioCodeCredential",{enumerable:!0,get:function(){return v.VisualStudioCodeCredential}});var w=a.r(901);Object.defineProperty(c,"OnBehalfOfCredential",{enumerable:!0,get:function(){return w.OnBehalfOfCredential}});var x=a.r(74831);Object.defineProperty(c,"WorkloadIdentityCredential",{enumerable:!0,get:function(){return x.WorkloadIdentityCredential}});var y=a.r(90158);Object.defineProperty(c,"logger",{enumerable:!0,get:function(){return y.logger}});var z=a.r(780);Object.defineProperty(c,"AzureAuthorityHosts",{enumerable:!0,get:function(){return z.AzureAuthorityHosts}});var A=a.r(89797);Object.defineProperty(c,"getBearerTokenProvider",{enumerable:!0,get:function(){return A.getBearerTokenProvider}})},47916,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzureKeyCredential=void 0,c.AzureKeyCredential=class{_key;get key(){return this._key}constructor(a){if(!a)throw Error("key must be a non-empty string");this._key=a}update(a){this._key=a}}},49619,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isKeyCredential=function(a){return(0,d.isObjectWithProperties)(a,["key"])&&"string"==typeof a.key};let d=a.r(18903)},66196,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzureNamedKeyCredential=void 0,c.isNamedKeyCredential=function(a){return(0,d.isObjectWithProperties)(a,["name","key"])&&"string"==typeof a.key&&"string"==typeof a.name};let d=a.r(18903);c.AzureNamedKeyCredential=class{_key;_name;get key(){return this._key}get name(){return this._name}constructor(a,b){if(!a||!b)throw TypeError("name and key must be non-empty strings");this._name=a,this._key=b}update(a,b){if(!a||!b)throw TypeError("newName and newKey must be non-empty strings");this._name=a,this._key=b}}},83648,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.AzureSASCredential=void 0,c.isSASCredential=function(a){return(0,d.isObjectWithProperties)(a,["signature"])&&"string"==typeof a.signature};let d=a.r(18903);c.AzureSASCredential=class{_signature;get signature(){return this._signature}constructor(a){if(!a)throw Error("shared access signature must be a non-empty string");this._signature=a}update(a){if(!a)throw Error("shared access signature must be a non-empty string");this._signature=a}}},43545,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isBearerToken=function(a){return!a.tokenType||"Bearer"===a.tokenType},c.isPopToken=function(a){return"pop"===a.tokenType},c.isTokenCredential=function(a){return a&&"function"==typeof a.getToken&&(void 0===a.signRequest||a.getToken.length>0)}},19756,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isTokenCredential=c.isSASCredential=c.AzureSASCredential=c.isNamedKeyCredential=c.AzureNamedKeyCredential=c.isKeyCredential=c.AzureKeyCredential=void 0;var d=a.r(47916);Object.defineProperty(c,"AzureKeyCredential",{enumerable:!0,get:function(){return d.AzureKeyCredential}});var e=a.r(49619);Object.defineProperty(c,"isKeyCredential",{enumerable:!0,get:function(){return e.isKeyCredential}});var f=a.r(66196);Object.defineProperty(c,"AzureNamedKeyCredential",{enumerable:!0,get:function(){return f.AzureNamedKeyCredential}}),Object.defineProperty(c,"isNamedKeyCredential",{enumerable:!0,get:function(){return f.isNamedKeyCredential}});var g=a.r(83648);Object.defineProperty(c,"AzureSASCredential",{enumerable:!0,get:function(){return g.AzureSASCredential}}),Object.defineProperty(c,"isSASCredential",{enumerable:!0,get:function(){return g.isSASCredential}});var h=a.r(43545);Object.defineProperty(c,"isTokenCredential",{enumerable:!0,get:function(){return h.isTokenCredential}})},98215,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(27699),e=f(a.r(24361));function f(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(f=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}class g extends d.EventEmitter{constructor({data:a=!1,payload:b=!1,packet:c=!1,token:d=!1}={}){super(),this.options={data:a,payload:b,packet:c,token:d},this.indent="  "}packet(a,b){this.haveListeners()&&this.options.packet&&(this.log(""),this.log(a),this.log(b.headerToString(this.indent)))}data(a){this.haveListeners()&&this.options.data&&this.log(a.dataToString(this.indent))}payload(a){this.haveListeners()&&this.options.payload&&this.log(a())}token(a){this.haveListeners()&&this.options.token&&this.log(e.inspect(a,{showHidden:!1,depth:5,colors:!0}))}haveListeners(){return this.listeners("debug").length>0}log(a){this.emit("debug",a)}}c.default=g,b.exports=g},23862,(a,b,c)=>{b.exports=a.x("dgram",()=>require("dgram"))},6526,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.sendInParallel=h,c.sendMessage=i;var d=g(a.r(23862)),e=g(a.r(4446)),f=g(a.r(57764));function g(a){return a&&a.__esModule?a:{default:a}}async function h(a,b,c,e){return e.throwIfAborted(),await new Promise((f,g)=>{let h=[],i=0,j=b=>{++i===a.length&&(e.removeEventListener("abort",l),m(),g(b))},k=a=>{e.removeEventListener("abort",l),m(),f(a)},l=()=>{m(),g(e.reason)},m=()=>{for(let a of h)a.removeListener("error",j),a.removeListener("message",k),a.close()};e.addEventListener("abort",l,{once:!0});for(let e=0;e<a.length;e++){let f=6===a[e].family?"udp6":"udp4",g=d.default.createSocket(f);h.push(g),g.on("error",j),g.on("message",k),g.send(c,0,c.length,b,a[e].address)}})}async function i(a,b,c,d,g){let i;return d.throwIfAborted(),i=e.default.isIP(a)?[{address:a,family:e.default.isIPv6(a)?6:4}]:await new Promise((b,e)=>{let g=()=>{e(d.reason)},h=f.default.domainToASCII(a);c(""===h?a:h,{all:!0},(a,c)=>{d.removeEventListener("abort",g),a?e(a):b(c)})}),await h(i,b,g,d)}},263,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.instanceLookup=g,c.parseBrowserResponse=h;var d,e=(d=a.r(79594))&&d.__esModule?d:{default:d},f=a.r(6526);async function g(a){let b,c=a.server;if("string"!=typeof c)throw TypeError('Invalid arguments: "server" must be a string');let d=a.instanceName;if("string"!=typeof d)throw TypeError('Invalid arguments: "instanceName" must be a string');let g=void 0===a.timeout?2e3:a.timeout;if("number"!=typeof g)throw TypeError('Invalid arguments: "timeout" must be a number');let i=void 0===a.retries?3:a.retries;if("number"!=typeof i)throw TypeError('Invalid arguments: "retries" must be a number');if(void 0!==a.lookup&&"function"!=typeof a.lookup)throw TypeError('Invalid arguments: "lookup" must be a function');let j=a.lookup??e.default.lookup;if(void 0!==a.port&&"number"!=typeof a.port)throw TypeError('Invalid arguments: "port" must be a number');let k=a.port??1434,l=a.signal;l.throwIfAborted();let m=Buffer.from([2]);for(let c=0;c<=i;c++){let c=AbortSignal.timeout(g);try{b=await (0,f.sendMessage)(a.server,k,j,AbortSignal.any([l,c]),m)}catch(a){if(c.aborted)continue;throw a}}if(!b)throw Error("Failed to get response from SQL Server Browser on "+c);let n=h(b.toString("ascii",3),d);if(!n)throw Error("Port for "+d+" not found in "+a.server);return n}function h(a,b){let c,d=a.split(";;");for(let a=0,e=d.length;a<e;a++){let e=d[a].split(";");for(let a=0,d=e.length;a<d;a+=2){let d=e[a],f=e[a+1];if("tcp"===d&&c)return parseInt(f,10);"InstanceName"===d&&(c=f.toUpperCase()===b.toUpperCase())}}}},97122,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TransientErrorLookup=void 0,c.TransientErrorLookup=class{isTransientError(a){return -1!==[4060,10928,10929,40197,40501,40613].indexOf(a)}}},52977,(a,b,c)=>{!function(){"use strict";var a=/[^T]/,b=/[^v]/,d=/[diefg]/,e=/[bcdiefguxX]/,f=/[j]/,g=/^[^\x25]+/,h=/^\x25{2}/,i=/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,j=/^([a-z_][a-z_\d]*)/i,k=/^\.([a-z_][a-z_\d]*)/i,l=/^\[(\d+)\]/,m=/^[+-]/;function n(c){return function(c,g){var h,i,j,k,l,o,p,q,r,s=1,t=c.length,u="";for(i=0;i<t;i++)if("string"==typeof c[i])u+=c[i];else if("object"==typeof c[i]){if((k=c[i]).keys)for(j=0,h=g[s];j<k.keys.length;j++){if(void 0==h)throw Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',k.keys[j],k.keys[j-1]));h=h[k.keys[j]]}else h=k.param_no?g[k.param_no]:g[s++];if(a.test(k.type)&&b.test(k.type)&&h instanceof Function&&(h=h()),e.test(k.type)&&"number"!=typeof h&&isNaN(h))throw TypeError(n("[sprintf] expecting number but found %T",h));switch(d.test(k.type)&&(q=h>=0),k.type){case"b":h=parseInt(h,10).toString(2);break;case"c":h=String.fromCharCode(parseInt(h,10));break;case"d":case"i":h=parseInt(h,10);break;case"j":h=JSON.stringify(h,null,k.width?parseInt(k.width):0);break;case"e":h=k.precision?parseFloat(h).toExponential(k.precision):parseFloat(h).toExponential();break;case"f":h=k.precision?parseFloat(h).toFixed(k.precision):parseFloat(h);break;case"g":h=k.precision?String(Number(h.toPrecision(k.precision))):parseFloat(h);break;case"o":h=(parseInt(h,10)>>>0).toString(8);break;case"s":h=String(h),h=k.precision?h.substring(0,k.precision):h;break;case"t":h=String(!!h),h=k.precision?h.substring(0,k.precision):h;break;case"T":h=Object.prototype.toString.call(h).slice(8,-1).toLowerCase(),h=k.precision?h.substring(0,k.precision):h;break;case"u":h=parseInt(h,10)>>>0;break;case"v":h=h.valueOf(),h=k.precision?h.substring(0,k.precision):h;break;case"x":h=(parseInt(h,10)>>>0).toString(16);break;case"X":h=(parseInt(h,10)>>>0).toString(16).toUpperCase()}f.test(k.type)?u+=h:(d.test(k.type)&&(!q||k.sign)?(r=q?"+":"-",h=h.toString().replace(m,"")):r="",o=k.pad_char?"0"===k.pad_char?"0":k.pad_char.charAt(1):" ",p=k.width-(r+h).length,l=k.width&&p>0?o.repeat(p):"",u+=k.align?r+h+l:"0"===o?r+l+h:l+r+h)}return u}(function(a){if(o[a])return o[a];for(var b,c=a,d=[],e=0;c;){if(null!==(b=g.exec(c)))d.push(b[0]);else if(null!==(b=h.exec(c)))d.push("%");else if(null!==(b=i.exec(c))){if(b[2]){e|=1;var f=[],m=b[2],n=[];if(null!==(n=j.exec(m)))for(f.push(n[1]);""!==(m=m.substring(n[0].length));)if(null!==(n=k.exec(m)))f.push(n[1]);else if(null!==(n=l.exec(m)))f.push(n[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");b[2]=f}else e|=2;if(3===e)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");c=c.substring(b[0].length)}return o[a]=d}(c),arguments)}var o=Object.create(null);c.sprintf=n,c.vsprintf=function(a,b){return n.apply(null,[a].concat(b||[]))}}()},85349,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TYPE=c.Packet=c.OFFSET=c.HEADER_LENGTH=void 0,c.isPacketComplete=function(a){return!(a.length<e)&&a.length>=a.readUInt16BE(i.Length)},c.packetLength=function(a){return a.readUInt16BE(i.Length)};var d=a.r(52977);let e=c.HEADER_LENGTH=8,f=c.TYPE={SQL_BATCH:1,RPC_REQUEST:3,TABULAR_RESULT:4,ATTENTION:6,BULK_LOAD:7,TRANSACTION_MANAGER:14,LOGIN7:16,NTLMAUTH_PKT:17,PRELOGIN:18,FEDAUTH_TOKEN:8},g={};for(let a in f)g[f[a]]=a;let h={NORMAL:0,EOM:1,IGNORE:2,RESETCONNECTION:8,RESETCONNECTIONSKIPTRAN:16},i=c.OFFSET={Type:0,Status:1,Length:2,SPID:4,PacketID:6,Window:7};c.Packet=class{constructor(a){a instanceof Buffer?this.buffer=a:(this.buffer=Buffer.alloc(e,0),this.buffer.writeUInt8(a,i.Type),this.buffer.writeUInt8(h.NORMAL,i.Status),this.buffer.writeUInt16BE(0,i.SPID),this.buffer.writeUInt8(1,i.PacketID),this.buffer.writeUInt8(0,i.Window),this.setLength())}setLength(){this.buffer.writeUInt16BE(this.buffer.length,i.Length)}length(){return this.buffer.readUInt16BE(i.Length)}resetConnection(a){let b=this.buffer.readUInt8(i.Status);a?b|=h.RESETCONNECTION:b&=255-h.RESETCONNECTION,this.buffer.writeUInt8(b,i.Status)}last(a){let b=this.buffer.readUInt8(i.Status);return arguments.length>0&&(a?b|=h.EOM:b&=255-h.EOM,this.buffer.writeUInt8(b,i.Status)),this.isLast()}ignore(a){let b=this.buffer.readUInt8(i.Status);a?b|=h.IGNORE:b&=255-h.IGNORE,this.buffer.writeUInt8(b,i.Status)}isLast(){return!!(this.buffer.readUInt8(i.Status)&h.EOM)}packetId(a){return a&&this.buffer.writeUInt8(a%256,i.PacketID),this.buffer.readUInt8(i.PacketID)}addData(a){return this.buffer=Buffer.concat([this.buffer,a]),this.setLength(),this}data(){return this.buffer.slice(e)}type(){return this.buffer.readUInt8(i.Type)}statusAsString(){let a=this.buffer.readUInt8(i.Status),b=[];for(let c in h)a&h[c]?b.push(c):b.push(void 0);return b.join(" ").trim()}headerToString(a=""){return a+(0,d.sprintf)("type:0x%02X(%s), status:0x%02X(%s), length:0x%04X, spid:0x%04X, packetId:0x%02X, window:0x%02X",this.buffer.readUInt8(i.Type),g[this.buffer.readUInt8(i.Type)],this.buffer.readUInt8(i.Status),this.statusAsString(),this.buffer.readUInt16BE(i.Length),this.buffer.readUInt16BE(i.SPID),this.buffer.readUInt8(i.PacketID),this.buffer.readUInt8(i.Window))}dataToString(a=""){let b=this.data(),c="",e="";for(let f=0;f<b.length;f++)f%32==0&&(c+=a,c+=(0,d.sprintf)("%04X  ",f)),b[f]<32||b[f]>126?(e+=".",(f+1)%8==0&&(f+1)%32!=0&&(e+=" ")):e+=String.fromCharCode(b[f]),null!=b[f]&&(c+=(0,d.sprintf)("%02X",b[f])),(f+1)%4==0&&(f+1)%32!=0&&(c+=" "),(f+1)%32==0&&(c+="  "+e,e="",f<b.length-1&&(c+="\n"));return e.length&&(c+="  "+e),c}toString(a=""){return this.headerToString(a)+"\n"+this.dataToString(a+a)}payloadString(){return""}}},32386,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=a.r(52977),f=(d=a.r(35952))&&d.__esModule?d:{default:d},g=a.r(54799);let h={OFF:0,ON:1,NOT_SUP:2,REQ:3},i={};for(let a in h)i[h[a]]=a;let j={OFF:0,ON:1},k={};for(let a in j)k[j[a]]=a;class l{constructor(a={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}){a instanceof Buffer?(this.data=a,this.options={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}):(this.options=a,this.createOptions()),this.extractOptions()}createOptions(){let a=[this.createVersionOption(),this.createEncryptionOption(),this.createInstanceOption(),this.createThreadIdOption(),this.createMarsOption(),this.createTraceIdOption(),this.createFedAuthOption()],b=0;for(let c=0,d=a.length;c<d;c++)b+=5+a[c].data.length;b++,this.data=Buffer.alloc(b,0);let c=0,d=5*a.length+1;for(let b=0,e=a.length;b<e;b++){let e=a[b];this.data.writeUInt8(e.token,c+0),this.data.writeUInt16BE(d,c+1),this.data.writeUInt16BE(e.data.length,c+3),c+=5,e.data.copy(this.data,d),d+=e.data.length}this.data.writeUInt8(255,c)}createVersionOption(){let a=new f.default(20);return a.writeUInt8(this.options.version.major),a.writeUInt8(this.options.version.minor),a.writeUInt16BE(this.options.version.build),a.writeUInt16BE(this.options.version.subbuild),{token:0,data:a.data}}createEncryptionOption(){let a=new f.default(20);return this.options.encrypt?a.writeUInt8(h.ON):a.writeUInt8(h.NOT_SUP),{token:1,data:a.data}}createInstanceOption(){let a=new f.default(20);return a.writeUInt8(0),{token:2,data:a.data}}createThreadIdOption(){let a=new f.default(20);return a.writeUInt32BE(0),{token:3,data:a.data}}createMarsOption(){let a=new f.default(20);return a.writeUInt8(j.OFF),{token:4,data:a.data}}createTraceIdOption(){let a=new f.default(36);return a.writeBuffer((0,g.randomBytes)(36)),{token:5,data:a.data}}createFedAuthOption(){let a=new f.default(20);return a.writeUInt8(1),{token:6,data:a.data}}extractOptions(){let a=0;for(;255!==this.data[a];){let b=this.data.readUInt16BE(a+1),c=this.data.readUInt16BE(a+3);switch(this.data[a]){case 0:this.extractVersion(b);break;case 1:this.extractEncryption(b);break;case 2:this.extractInstance(b);break;case 3:c>0&&this.extractThreadId(b);break;case 4:this.extractMars(b);break;case 5:this.extractTraceId(b);break;case 6:this.extractFedAuth(b)}a+=5,b+=c}}extractVersion(a){this.version={major:this.data.readUInt8(a+0),minor:this.data.readUInt8(a+1),build:this.data.readUInt16BE(a+2),subbuild:this.data.readUInt16BE(a+4)}}extractEncryption(a){this.encryption=this.data.readUInt8(a),this.encryptionString=i[this.encryption]}extractInstance(a){this.instance=this.data.readUInt8(a)}extractThreadId(a){this.threadId=this.data.readUInt32BE(a)}extractMars(a){this.mars=this.data.readUInt8(a),this.marsString=k[this.mars]}extractTraceId(a){this.traceId=this.data.subarray(a,a+36)}extractFedAuth(a){this.fedAuthRequired=this.data.readUInt8(a)}toString(a=""){return a+"PreLogin - "+(0,e.sprintf)("version:%d.%d.%d.%d, encryption:0x%02X(%s), instopt:0x%02X, threadId:0x%08X, mars:0x%02X(%s), traceId:%s",this.version.major,this.version.minor,this.version.build,this.version.subbuild,this.encryption?this.encryption:0,this.encryptionString?this.encryptionString:"",this.instance?this.instance:0,this.threadId?this.threadId:0,this.mars?this.mars:0,this.marsString?this.marsString:"",this.traceId?this.traceId.toString("hex"):"")}}c.default=l,b.exports=l},7033,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.versionsByValue=c.versions=void 0;let d=c.versions={"7_1":0x71000001,"7_2":0x72090002,"7_3_A":0x730a0003,"7_3_B":0x730b0003,"7_4":0x74000004,"8_0":0x8000000},e=c.versionsByValue={};for(let a in d)e[d[a]]=a},18575,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(52977),e=a.r(7033);class f{constructor({tdsVersion:a,packetSize:b,clientProgVer:c,clientPid:d,connectionId:e,clientTimeZone:f,clientLcid:g}){this.tdsVersion=a,this.packetSize=b,this.clientProgVer=c,this.clientPid=d,this.connectionId=e,this.clientTimeZone=f,this.clientLcid=g,this.readOnlyIntent=!1,this.initDbFatal=!1,this.fedAuth=void 0,this.userName=void 0,this.password=void 0,this.serverName=void 0,this.appName=void 0,this.hostname=void 0,this.libraryName=void 0,this.language=void 0,this.database=void 0,this.clientId=void 0,this.sspi=void 0,this.attachDbFile=void 0,this.changePassword=void 0}toBuffer(){let a=Buffer.alloc(94),b=[a],c=0,d=a.length;if(c=a.writeUInt32LE(0,c),c=a.writeUInt32LE(this.tdsVersion,c),c=a.writeUInt32LE(this.packetSize,c),c=a.writeUInt32LE(this.clientProgVer,c),c=a.writeUInt32LE(this.clientPid,c),c=a.writeUInt32LE(this.connectionId,c),c=a.writeUInt8(this.buildOptionFlags1(),c),c=a.writeUInt8(this.buildOptionFlags2(),c),c=a.writeUInt8(this.buildTypeFlags(),c),c=a.writeUInt8(this.buildOptionFlags3(),c),c=a.writeInt32LE(this.clientTimeZone,c),c=a.writeUInt32LE(this.clientLcid,c),c=a.writeUInt16LE(d,c),this.hostname){let e=Buffer.from(this.hostname,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(d,c);if(c=a.writeUInt16LE(d,c),this.userName){let e=Buffer.from(this.userName,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.password){let e=Buffer.from(this.password,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(this.scramblePassword(e))}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.appName){let e=Buffer.from(this.appName,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.serverName){let e=Buffer.from(this.serverName,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.tdsVersion>=e.versions["7_4"]){let e=this.buildFeatureExt();c=a.writeUInt16LE(4+e.length,c);let f=Buffer.alloc(4);f.writeUInt32LE(d+4,0),d+=4+e.length,b.push(f,e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.libraryName){let e=Buffer.from(this.libraryName,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.language){let e=Buffer.from(this.language,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.database){let e=Buffer.from(this.database,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(this.clientId&&this.clientId.copy(a,c,0,6),c+=6,c=a.writeUInt16LE(d,c),this.sspi?(c=this.sspi.length>65535?a.writeUInt16LE(65535,c):a.writeUInt16LE(this.sspi.length,c),b.push(this.sspi)):c=a.writeUInt16LE(0,c),c=a.writeUInt16LE(d,c),this.attachDbFile){let e=Buffer.from(this.attachDbFile,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);if(c=a.writeUInt16LE(d,c),this.changePassword){let e=Buffer.from(this.changePassword,"ucs2");c=a.writeUInt16LE(e.length/2,c),d+=e.length,b.push(e)}else c=a.writeUInt16LE(0,c);this.sspi&&this.sspi.length>65535?a.writeUInt32LE(this.sspi.length,c):a.writeUInt32LE(0,c);let f=Buffer.concat(b);return f.writeUInt32LE(f.length,0),f}buildOptionFlags1(){let a=176;return this.initDbFatal?a|=64:a|=0,a}buildFeatureExt(){let a=[],b=this.fedAuth;if(b)switch(b.type){case"ADAL":let c=Buffer.alloc(7);c.writeUInt8(2,0),c.writeUInt32LE(2,1),c.writeUInt8(4|1*!!b.echo,5),c.writeUInt8("integrated"===b.workflow?2:1,6),a.push(c);break;case"SECURITYTOKEN":let d=Buffer.from(b.fedAuthToken,"ucs2"),e=Buffer.alloc(10),f=0;f=e.writeUInt8(2,f),f=e.writeUInt32LE(d.length+4+1,f),f=e.writeUInt8(2|1*!!b.echo,f),e.writeInt32LE(d.length,f),a.push(e),a.push(d)}let g=Buffer.alloc(6);return g.writeUInt8(10,0),g.writeUInt32LE(1,1),g.writeUInt8(1,5),a.push(g),a.push(Buffer.from([255])),Buffer.concat(a)}buildOptionFlags2(){let a=0;return this.sspi?a|=128:a|=0,a}buildTypeFlags(){let a=0;return this.readOnlyIntent?a|=32:a|=0,a}buildOptionFlags3(){return 24}scramblePassword(a){for(let b=0,c=a.length;b<c;b++){let c=a[b];c=((15&c)<<4|c>>4)^165,a[b]=c}return a}toString(a=""){return a+"Login7 - "+(0,d.sprintf)("TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X",this.tdsVersion,this.packetSize,this.clientProgVer,this.clientPid,this.connectionId)+"\n"+a+"         "+(0,d.sprintf)("Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X",this.buildOptionFlags1(),this.buildOptionFlags2(),this.buildTypeFlags(),this.buildOptionFlags3(),this.clientTimeZone,this.clientLcid)+"\n"+a+"         "+(0,d.sprintf)("Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'",this.hostname,this.userName,this.password,this.appName,this.serverName,this.libraryName)+"\n"+a+"         "+(0,d.sprintf)("Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'",this.language,this.database,this.sspi,this.attachDbFile,this.changePassword)}}c.default=f,b.exports=f},4844,(a,b,c)=>{!function(){"use strict";var c={},d=!c.JS_MD4_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;d&&(c=a.g);var e,f=!c.JS_MD4_NO_COMMON_JS&&b.exports,g="function"==typeof define&&define.amd,h=!c.JS_MD4_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,i="0123456789abcdef".split(""),j=[128,32768,8388608,-0x80000000],k=[0,8,16,24],l=["hex","array","digest","buffer","arrayBuffer"],m=[];if(h){var n=new ArrayBuffer(68);e=new Uint8Array(n),m=new Uint32Array(n)}var o=function(a){return function(b){return new q(!0).update(b)[a]()}},p=function(b){var c=a.r(54799),d=a.r(874).Buffer;return function(a){if("string"==typeof a)return c.createHash("md4").update(a,"utf8").digest("hex");if(h&&a instanceof ArrayBuffer)a=new Uint8Array(a);else if(void 0===a.length)return b(a);return c.createHash("md4").update(new d(a)).digest("hex")}};function q(a){if(a)m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m,this.buffer8=e;else if(h){var b=new ArrayBuffer(68);this.buffer8=new Uint8Array(b),this.blocks=new Uint32Array(b)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}q.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;b&&h&&a instanceof ArrayBuffer&&(a=new Uint8Array(a));for(var c,d,e=0,f=a.length||0,g=this.blocks,i=this.buffer8;e<f;){if(this.hashed&&(this.hashed=!1,g[0]=g[16],g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0),b)if(h)for(d=this.start;e<f&&d<64;++e)i[d++]=a[e];else for(d=this.start;e<f&&d<64;++e)g[d>>2]|=a[e]<<k[3&d++];else if(h)for(d=this.start;e<f&&d<64;++e)(c=a.charCodeAt(e))<128?i[d++]=c:(c<2048?i[d++]=192|c>>6:(c<55296||c>=57344?i[d++]=224|c>>12:(c=65536+((1023&c)<<10|1023&a.charCodeAt(++e)),i[d++]=240|c>>18,i[d++]=128|c>>12&63),i[d++]=128|c>>6&63),i[d++]=128|63&c);else for(d=this.start;e<f&&d<64;++e)(c=a.charCodeAt(e))<128?g[d>>2]|=c<<k[3&d++]:(c<2048?g[d>>2]|=(192|c>>6)<<k[3&d++]:(c<55296||c>=57344?g[d>>2]|=(224|c>>12)<<k[3&d++]:(c=65536+((1023&c)<<10|1023&a.charCodeAt(++e)),g[d>>2]|=(240|c>>18)<<k[3&d++],g[d>>2]|=(128|c>>12&63)<<k[3&d++]),g[d>>2]|=(128|c>>6&63)<<k[3&d++]),g[d>>2]|=(128|63&c)<<k[3&d++]);this.lastByteIndex=d,this.bytes+=d-this.start,d>=64?(this.start=d-64,this.hash(),this.hashed=!0):this.start=d}return this}},q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=j[3&b],b>=56&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.bytes<<3,this.hash()}},q.prototype.hash=function(){var a,b,c,d,e,f,g,h,i=this.blocks;this.first?b=(b=((c=(c=((d=(d=(0xefcdab89&(a=(a=i[0]-1)<<3|a>>>29)|0x98badcfe&~a)+i[1]+0x10325476)<<7|d>>>25)&a|0xefcdab89&~d)+i[2]-0x67452302)<<11|c>>>21)&d|~c&a)+i[3]-0x10325477)<<19|b>>>13:(a=this.h0,b=this.h1,a+=(b&(c=this.h2)|~b&(d=this.h3))+i[0],d+=((a=a<<3|a>>>29)&b|~a&c)+i[1],c+=((d=d<<7|d>>>25)&a|~d&b)+i[2],b+=((c=c<<11|c>>>21)&d|~c&a)+i[3],b=b<<19|b>>>13),a+=(b&c|~b&d)+i[4],d+=((a=a<<3|a>>>29)&b|~a&c)+i[5],c+=((d=d<<7|d>>>25)&a|~d&b)+i[6],b+=((c=c<<11|c>>>21)&d|~c&a)+i[7],a+=((b=b<<19|b>>>13)&c|~b&d)+i[8],d+=((a=a<<3|a>>>29)&b|~a&c)+i[9],c+=((d=d<<7|d>>>25)&a|~d&b)+i[10],b+=((c=c<<11|c>>>21)&d|~c&a)+i[11],a+=((b=b<<19|b>>>13)&c|~b&d)+i[12],d+=((a=a<<3|a>>>29)&b|~a&c)+i[13],c+=((d=d<<7|d>>>25)&a|~d&b)+i[14],b+=((c=c<<11|c>>>21)&d|~c&a)+i[15],a+=((f=(b=b<<19|b>>>13)&c)|b&d|c&d)+i[0]+0x5a827999,d+=((e=(a=a<<3|a>>>29)&b)|a&c|f)+i[4]+0x5a827999,c+=((h=(d=d<<5|d>>>27)&a)|d&b|e)+i[8]+0x5a827999,b+=((g=(c=c<<9|c>>>23)&d)|c&a|h)+i[12]+0x5a827999,a+=((f=(b=b<<13|b>>>19)&c)|b&d|g)+i[1]+0x5a827999,d+=((e=(a=a<<3|a>>>29)&b)|a&c|f)+i[5]+0x5a827999,c+=((h=(d=d<<5|d>>>27)&a)|d&b|e)+i[9]+0x5a827999,b+=((g=(c=c<<9|c>>>23)&d)|c&a|h)+i[13]+0x5a827999,a+=((f=(b=b<<13|b>>>19)&c)|b&d|g)+i[2]+0x5a827999,d+=((e=(a=a<<3|a>>>29)&b)|a&c|f)+i[6]+0x5a827999,c+=((h=(d=d<<5|d>>>27)&a)|d&b|e)+i[10]+0x5a827999,b+=((g=(c=c<<9|c>>>23)&d)|c&a|h)+i[14]+0x5a827999,a+=((f=(b=b<<13|b>>>19)&c)|b&d|g)+i[3]+0x5a827999,d+=((e=(a=a<<3|a>>>29)&b)|a&c|f)+i[7]+0x5a827999,c+=((h=(d=d<<5|d>>>27)&a)|d&b|e)+i[11]+0x5a827999,b+=((c=c<<9|c>>>23)&d|c&a|h)+i[15]+0x5a827999,a+=((f=(b=b<<13|b>>>19)^c)^d)+i[0]+0x6ed9eba1,d+=(f^(a=a<<3|a>>>29))+i[8]+0x6ed9eba1,c+=((h=(d=d<<9|d>>>23)^a)^b)+i[4]+0x6ed9eba1,b+=(h^(c=c<<11|c>>>21))+i[12]+0x6ed9eba1,a+=((f=(b=b<<15|b>>>17)^c)^d)+i[2]+0x6ed9eba1,d+=(f^(a=a<<3|a>>>29))+i[10]+0x6ed9eba1,c+=((h=(d=d<<9|d>>>23)^a)^b)+i[6]+0x6ed9eba1,b+=(h^(c=c<<11|c>>>21))+i[14]+0x6ed9eba1,a+=((f=(b=b<<15|b>>>17)^c)^d)+i[1]+0x6ed9eba1,d+=(f^(a=a<<3|a>>>29))+i[9]+0x6ed9eba1,c+=((h=(d=d<<9|d>>>23)^a)^b)+i[5]+0x6ed9eba1,b+=(h^(c=c<<11|c>>>21))+i[13]+0x6ed9eba1,a+=((f=(b=b<<15|b>>>17)^c)^d)+i[3]+0x6ed9eba1,d+=(f^(a=a<<3|a>>>29))+i[11]+0x6ed9eba1,c+=((h=(d=d<<9|d>>>23)^a)^b)+i[7]+0x6ed9eba1,b+=(h^(c=c<<11|c>>>21))+i[15]+0x6ed9eba1,b=b<<15|b>>>17,this.first?(this.h0=a+0x67452301|0,this.h1=b-0x10325477|0,this.h2=c-0x67452302|0,this.h3=d+0x10325476|0,this.first=!1):(this.h0=this.h0+a|0,this.h1=this.h1+b|0,this.h2=this.h2+c|0,this.h3=this.h3+d|0)},q.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return i[a>>4&15]+i[15&a]+i[a>>12&15]+i[a>>8&15]+i[a>>20&15]+i[a>>16&15]+i[a>>28&15]+i[a>>24&15]+i[b>>4&15]+i[15&b]+i[b>>12&15]+i[b>>8&15]+i[b>>20&15]+i[b>>16&15]+i[b>>28&15]+i[b>>24&15]+i[c>>4&15]+i[15&c]+i[c>>12&15]+i[c>>8&15]+i[c>>20&15]+i[c>>16&15]+i[c>>28&15]+i[c>>24&15]+i[d>>4&15]+i[15&d]+i[d>>12&15]+i[d>>8&15]+i[d>>20&15]+i[d>>16&15]+i[d>>28&15]+i[d>>24&15]},q.prototype.toString=q.prototype.hex,q.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[255&a,a>>8&255,a>>16&255,a>>24&255,255&b,b>>8&255,b>>16&255,b>>24&255,255&c,c>>8&255,c>>16&255,c>>24&255,255&d,d>>8&255,d>>16&255,d>>24&255]},q.prototype.array=q.prototype.digest,q.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(16),b=new Uint32Array(a);return b[0]=this.h0,b[1]=this.h1,b[2]=this.h2,b[3]=this.h3,a},q.prototype.buffer=q.prototype.arrayBuffer;var r=function(){var a=o("hex");d&&(a=p(a)),a.create=function(){return new q},a.update=function(b){return a.create().update(b)};for(var b=0;b<l.length;++b){var c=l[b];a[c]=o(c)}return a}();if(f)b.exports=r;else c.md4=r,g&&(a.r,void 0!==r&&a.v(r))}()},6008,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=h(a.r(35952)),e=g(a.r(54799)),f=h(a.r(4844));function g(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(g=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}function h(a){return a&&a.__esModule?a:{default:a}}class i{constructor(a){this.data=this.createResponse(a)}toString(a=""){return a+"NTLM Auth"}createResponse(a){let b=this.createClientNonce(),c=a.domain,e=a.userName,f=a.password,g=a.ntlmpacket,h=g.target,i=g.nonce,j=64+2*c.length+2*e.length+24+16+8+8+8+4+h.length+4,k=new d.default(j);k.position=0,k.writeString("NTLMSSP\0","utf8"),k.writeUInt32LE(3);let l=64+2*c.length,m=l+2*e.length;k.writeUInt16LE(24),k.writeUInt16LE(24),k.writeUInt32LE(m),k.writeUInt16LE(16),k.writeUInt16LE(16),k.writeUInt32LE(m+24),k.writeUInt16LE(2*c.length),k.writeUInt16LE(2*c.length),k.writeUInt32LE(64),k.writeUInt16LE(2*e.length),k.writeUInt16LE(2*e.length),k.writeUInt32LE(l),k.writeUInt16LE(0),k.writeUInt16LE(0),k.writeUInt32LE(64),k.writeUInt16LE(0),k.writeUInt16LE(0),k.writeUInt32LE(64),k.writeUInt16LE(33281),k.writeUInt16LE(8),k.writeString(c,"ucs2"),k.writeString(e,"ucs2");let n=this.lmv2Response(c,e,f,i,b);k.copyFrom(n);let o=new Date().getTime(),p=this.ntlmv2Response(c,e,f,i,h,b,o);k.copyFrom(p),k.writeUInt32LE(257),k.writeUInt32LE(0);let q=this.createTimestamp(o);return k.copyFrom(q),k.copyFrom(b),k.writeUInt32LE(0),k.copyFrom(h),k.writeUInt32LE(0),k.data}createClientNonce(){let a=Buffer.alloc(8,0),b=0;for(;b<8;)a.writeUInt8(Math.ceil(255*Math.random()),b),b++;return a}ntlmv2Response(a,b,c,d,e,f,g){let h=this.createTimestamp(g),i=this.ntv2Hash(a,b,c),j=40+e.length,k=Buffer.alloc(j,0);return d.copy(k,0,0,8),k.writeUInt32LE(257,8),k.writeUInt32LE(0,12),h.copy(k,16,0,8),f.copy(k,24,0,8),k.writeUInt32LE(0,32),e.copy(k,36,0,e.length),k.writeUInt32LE(0,36+e.length),this.hmacMD5(k,i)}createTimestamp(a){let b=(BigInt(a)+BigInt(0x2b6109100))*BigInt(1e7),c=Number(b&BigInt(0xffffffff)),d=Number(b>>BigInt(32)&BigInt(0xffffffff)),e=Buffer.alloc(8);return e.writeUInt32LE(c,0),e.writeUInt32LE(d,4),e}lmv2Response(a,b,c,d,e){let f=this.ntv2Hash(a,b,c),g=Buffer.alloc(d.length+e.length,0);d.copy(g),e.copy(g,d.length,0,e.length);let h=this.hmacMD5(g,f),i=Buffer.alloc(h.length+e.length,0);return h.copy(i),e.copy(i,h.length,0,e.length),i}ntv2Hash(a,b,c){let d=this.ntHash(c),e=Buffer.from(b.toUpperCase()+a.toUpperCase(),"ucs2");return this.hmacMD5(e,d)}ntHash(a){let b=Buffer.from(a,"ucs2");return Buffer.from(f.default.arrayBuffer(b))}hmacMD5(a,b){return e.createHmac("MD5",b).update(a).digest()}}c.default=i,b.exports=i},57602,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.RequestError=c.InputError=c.ConnectionError=void 0,c.ConnectionError=class extends Error{constructor(a,b,c){super(a,c),this.code=b}},c.RequestError=class extends Error{constructor(a,b,c){super(a,c),this.code=b}};class d extends TypeError{}c.InputError=d},75885,(a,b,c)=>{"use strict";var d,e,f,g;Object.defineProperty(c,"__esModule",{value:!0}),c.SQLServerStatementColumnEncryptionSetting=c.SQLServerEncryptionType=c.DescribeParameterEncryptionResultSet2=c.DescribeParameterEncryptionResultSet1=void 0,(d={})[d.Deterministic=1]="Deterministic",d[d.Randomized=2]="Randomized",d[d.PlainText=0]="PlainText",c.SQLServerEncryptionType=d,(e={})[e.KeyOrdinal=0]="KeyOrdinal",e[e.DbId=1]="DbId",e[e.KeyId=2]="KeyId",e[e.KeyVersion=3]="KeyVersion",e[e.KeyMdVersion=4]="KeyMdVersion",e[e.EncryptedKey=5]="EncryptedKey",e[e.ProviderName=6]="ProviderName",e[e.KeyPath=7]="KeyPath",e[e.KeyEncryptionAlgorithm=8]="KeyEncryptionAlgorithm",c.DescribeParameterEncryptionResultSet1=e,(f={})[f.ParameterOrdinal=0]="ParameterOrdinal",f[f.ParameterName=1]="ParameterName",f[f.ColumnEncryptionAlgorithm=2]="ColumnEncryptionAlgorithm",f[f.ColumnEncrytionType=3]="ColumnEncrytionType",f[f.ColumnEncryptionKeyOrdinal=4]="ColumnEncryptionKeyOrdinal",f[f.NormalizationRuleVersion=5]="NormalizationRuleVersion",c.DescribeParameterEncryptionResultSet2=f,(g={})[g.UseConnectionSetting=0]="UseConnectionSetting",g[g.Enabled=1]="Enabled",g[g.ResultSetOnly=2]="ResultSetOnly",g[g.Disabled=3]="Disabled",c.SQLServerStatementColumnEncryptionSetting=g},10855,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(27699),e=a.r(57602),f=a.r(75885);class g extends d.EventEmitter{on(a,b){return super.on(a,b)}emit(a,...b){return super.emit(a,...b)}constructor(a,b,c){super(),this.sqlTextOrProcedure=a,this.parameters=[],this.parametersByName={},this.preparing=!1,this.handle=void 0,this.canceled=!1,this.paused=!1,this.error=void 0,this.connection=void 0,this.timeout=void 0,this.userCallback=b,this.statementColumnEncryptionSetting=c&&c.statementColumnEncryptionSetting||f.SQLServerStatementColumnEncryptionSetting.UseConnectionSetting,this.cryptoMetadataLoaded=!1,this.callback=function(a,b,c){this.preparing?(this.preparing=!1,a?this.emit("error",a):this.emit("prepared")):(this.userCallback(a,b,c),this.emit("requestCompleted"))}}addParameter(a,b,c,d){let{output:e=!1,length:f,precision:g,scale:h}=d??{},i={type:b,name:a,value:c,output:e,length:f,precision:g,scale:h};this.parameters.push(i),this.parametersByName[a]=i}addOutputParameter(a,b,c,d){this.addParameter(a,b,c,{...d,output:!0})}makeParamsParameter(a){let b="";for(let c=0,d=a.length;c<d;c++){let d=a[c];b.length>0&&(b+=", "),b+="@"+d.name+" ",b+=d.type.declaration(d),d.output&&(b+=" OUTPUT")}return b}validateParameters(a){for(let b=0,c=this.parameters.length;b<c;b++){let c=this.parameters[b];try{c.value=c.type.validate(c.value,a)}catch(a){throw new e.RequestError("Validation failed for parameter '"+c.name+"'. "+a.message,"EPARAM",{cause:a})}}}pause(){this.paused||(this.emit("pause"),this.paused=!0)}resume(){this.paused&&(this.paused=!1,this.emit("resume"))}cancel(){this.canceled||(this.canceled=!0,this.emit("cancel"))}setTimeout(a){this.timeout=a}}c.default=g,b.exports=g},67555,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.writeToTrackingBuffer=function(a,b,c){a.writeUInt32LE(0),a.writeUInt32LE(e),a.writeUInt16LE(d),a.writeBuffer(b),a.writeUInt32LE(c);let f=a.data;return f.writeUInt32LE(f.length,0),a};let d=2,e=18},82811,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(35952))&&d.__esModule?d:{default:d},f=a.r(67555),g=a.r(57602);class h{constructor(a,b,c,d,e){this.procedure=a,this.parameters=b,this.options=d,this.txnDescriptor=c,this.collation=e}[Symbol.iterator](){return this.generateData()}*generateData(){let a=new e.default(500);this.options.tdsVersion>="7_2"&&(0,f.writeToTrackingBuffer)(a,this.txnDescriptor,1),"string"==typeof this.procedure?a.writeUsVarchar(this.procedure):(a.writeUShort(65535),a.writeUShort(this.procedure)),a.writeUInt16LE(0),yield a.data;let b=this.parameters.length;for(let a=0;a<b;a++)yield*this.generateParameterData(this.parameters[a])}toString(a=""){return a+"RPC Request - "+this.procedure}*generateParameterData(a){let b=new e.default(3+Buffer.byteLength(a.name,"ucs-2")+1);a.name?b.writeBVarchar("@"+a.name):b.writeBVarchar("");let c=0;a.output&&(c|=1),b.writeUInt8(c),yield b.data;let d={value:a.value},f=a.type;(48&f.id)==32&&(a.length?d.length=a.length:f.resolveLength&&(d.length=f.resolveLength(a))),a.precision?d.precision=a.precision:f.resolvePrecision&&(d.precision=f.resolvePrecision(a)),a.scale?d.scale=a.scale:f.resolveScale&&(d.scale=f.resolveScale(a)),this.collation&&(d.collation=this.collation),yield f.generateTypeInfo(d,this.options),yield f.generateParameterLength(d,this.options);try{yield*f.generateParameterData(d,this.options)}catch(b){throw new g.InputError(`Input parameter '${a.name}' could not be validated`,{cause:b})}}}c.default=h,b.exports=h},56163,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(35952))&&d.__esModule?d:{default:d},f=a.r(67555);class g{constructor(a,b,c){this.sqlText=a,this.txnDescriptor=b,this.options=c}*[Symbol.iterator](){if(this.options.tdsVersion>="7_2"){let a=new e.default(18,"ucs2");(0,f.writeToTrackingBuffer)(a,this.txnDescriptor,1),yield a.data}yield Buffer.from(this.sqlText,"ucs2")}toString(a=""){return a+"SQL Batch - "+this.sqlText}}c.default=g,b.exports=g},29376,(a,b,c)=>{"use strict";let d=a.r(88947).Duplex,e=Symbol("Callback"),f=Symbol("Other");class g extends d{constructor(a){super(a),this[e]=null,this[f]=null}_read(){let a=this[e];a&&(this[e]=null,a())}_write(a,b,c){this[f][e]=c,this[f].push(a)}_final(a){this[f].on("end",a),this[f].push(null)}}b.exports=class{constructor(a){this.socket1=new g(a),this.socket2=new g(a),this.socket1[f]=this.socket2,this.socket2[f]=this.socket1}}},67589,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(88947);class e extends d.PassThrough{constructor({type:a,resetConnection:b=!1}){super(),this.type=a,this.resetConnection=b,this.ignore=!1}}c.default=e,b.exports=e},74835,(a,b,c)=>{b.exports=a.g.process},3494,(a,b,c)=>{"use strict";b.exports={AggregateError:class extends Error{constructor(a){if(!Array.isArray(a))throw TypeError(`Expected input to be an Array, got ${typeof a}`);let b="";for(let c=0;c<a.length;c++)b+=`    ${a[c].stack}
`;super(b),this.name="AggregateError",this.errors=a}},ArrayIsArray:a=>Array.isArray(a),ArrayPrototypeIncludes:(a,b)=>a.includes(b),ArrayPrototypeIndexOf:(a,b)=>a.indexOf(b),ArrayPrototypeJoin:(a,b)=>a.join(b),ArrayPrototypeMap:(a,b)=>a.map(b),ArrayPrototypePop:(a,b)=>a.pop(b),ArrayPrototypePush:(a,b)=>a.push(b),ArrayPrototypeSlice:(a,b,c)=>a.slice(b,c),Error,FunctionPrototypeCall:(a,b,...c)=>a.call(b,...c),FunctionPrototypeSymbolHasInstance:(a,b)=>Function.prototype[Symbol.hasInstance].call(a,b),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(a,b)=>Object.defineProperties(a,b),ObjectDefineProperty:(a,b,c)=>Object.defineProperty(a,b,c),ObjectGetOwnPropertyDescriptor:(a,b)=>Object.getOwnPropertyDescriptor(a,b),ObjectKeys:a=>Object.keys(a),ObjectSetPrototypeOf:(a,b)=>Object.setPrototypeOf(a,b),Promise,PromisePrototypeCatch:(a,b)=>a.catch(b),PromisePrototypeThen:(a,b,c)=>a.then(b,c),PromiseReject:a=>Promise.reject(a),PromiseResolve:a=>Promise.resolve(a),ReflectApply:Reflect.apply,RegExpPrototypeTest:(a,b)=>a.test(b),SafeSet:Set,String,StringPrototypeSlice:(a,b,c)=>a.slice(b,c),StringPrototypeToLowerCase:a=>a.toLowerCase(),StringPrototypeToUpperCase:a=>a.toUpperCase(),StringPrototypeTrim:a=>a.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(a,b,c)=>a.set(b,c),Boolean,Uint8Array}},40657,(a,b,c)=>{"use strict";let{ArrayIsArray:d,ObjectSetPrototypeOf:e}=a.r(3494),{EventEmitter:f}=a.r(27699);function g(a){f.call(this,a)}function h(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?d(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}e(g.prototype,f.prototype),e(g,f),g.prototype.pipe=function(a,b){let c=this;function d(b){a.writable&&!1===a.write(b)&&c.pause&&c.pause()}function e(){c.readable&&c.resume&&c.resume()}c.on("data",d),a.on("drain",e),a._isStdio||b&&!1===b.end||(c.on("end",i),c.on("close",j));let g=!1;function i(){g||(g=!0,a.end())}function j(){g||(g=!0,"function"==typeof a.destroy&&a.destroy())}function k(a){l(),0===f.listenerCount(this,"error")&&this.emit("error",a)}function l(){c.removeListener("data",d),a.removeListener("drain",e),c.removeListener("end",i),c.removeListener("close",j),c.removeListener("error",k),a.removeListener("error",k),c.removeListener("end",l),c.removeListener("close",l),a.removeListener("close",l)}return h(c,"error",k),h(a,"error",k),c.on("end",l),c.on("close",l),a.on("close",l),a.emit("pipe",c),a},b.exports={Stream:g,prependListener:h}},2549,(a,b,c)=>{"use strict";b.exports={format:(a,...b)=>a.replace(/%([sdifj])/g,function(...[a,c]){let d=b.shift();if("f"===c)return d.toFixed(6);if("j"===c)return JSON.stringify(d);if("s"!==c||"object"!=typeof d)return d.toString();{let a=d.constructor!==Object?d.constructor.name:"";return`${a} {}`.trim()}}),inspect(a){switch(typeof a){case"string":if(a.includes("'")){if(!a.includes('"'))return`"${a}"`;else if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}return`'${a}'`;case"number":if(isNaN(a))return"NaN";if(Object.is(a,-0))return String(a);return a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}}}},12722,(a,b,c)=>{"use strict";let{format:d,inspect:e}=a.r(2549),{AggregateError:f}=a.r(3494),g=globalThis.AggregateError||f,h=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],j=/^([A-Z][a-z0-9]*)+$/,k={};function l(a,b){if(!a)throw new k.ERR_INTERNAL_ASSERTION(b)}function m(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function n(a,b,c){c||(c=Error);class e extends c{constructor(...c){super(function(a,b,c){if("function"==typeof b)return l(b.length<=c.length,`Code: ${a}; The provided arguments length (${c.length}) does not match the required ones (${b.length}).`),b(...c);let e=(b.match(/%[dfijoOs]/g)||[]).length;return(l(e===c.length,`Code: ${a}; The provided arguments length (${c.length}) does not match the required ones (${e}).`),0===c.length)?b:d(b,...c)}(a,b,c))}toString(){return`${this.name} [${a}]: ${this.message}`}}Object.defineProperties(e.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${a}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),e.prototype.code=a,e.prototype[h]=!0,k[a]=e}function o(a){let b="__node_internal_"+a.name;return Object.defineProperty(a,"name",{value:b}),a}n("ERR_ASSERTION","%s",Error),n("ERR_INVALID_ARG_TYPE",(a,b,c)=>{l("string"==typeof a,"'name' must be a string"),Array.isArray(b)||(b=[b]);let d="The ";a.endsWith(" argument")?d+=`${a} `:d+=`"${a}" ${a.includes(".")?"property":"argument"} `,d+="must be ";let f=[],g=[],h=[];for(let a of b)l("string"==typeof a,"All expected entries have to be of type string"),i.includes(a)?f.push(a.toLowerCase()):j.test(a)?g.push(a):(l("object"!==a,'The value "object" should be written as "Object"'),h.push(a));if(g.length>0){let a=f.indexOf("object");-1!==a&&(f.splice(f,a,1),g.push("Object"))}if(f.length>0){switch(f.length){case 1:d+=`of type ${f[0]}`;break;case 2:d+=`one of type ${f[0]} or ${f[1]}`;break;default:{let a=f.pop();d+=`one of type ${f.join(", ")}, or ${a}`}}(g.length>0||h.length>0)&&(d+=" or ")}if(g.length>0){switch(g.length){case 1:d+=`an instance of ${g[0]}`;break;case 2:d+=`an instance of ${g[0]} or ${g[1]}`;break;default:{let a=g.pop();d+=`an instance of ${g.join(", ")}, or ${a}`}}h.length>0&&(d+=" or ")}switch(h.length){case 0:break;case 1:h[0].toLowerCase()!==h[0]&&(d+="an "),d+=`${h[0]}`;break;case 2:d+=`one of ${h[0]} or ${h[1]}`;break;default:{let a=h.pop();d+=`one of ${h.join(", ")}, or ${a}`}}if(null==c)d+=`. Received ${c}`;else if("function"==typeof c&&c.name)d+=`. Received function ${c.name}`;else if("object"==typeof c){var k;if(null!=(k=c.constructor)&&k.name)d+=`. Received an instance of ${c.constructor.name}`;else{let a=e(c,{depth:-1});d+=`. Received ${a}`}}else{let a=e(c,{colors:!1});a.length>25&&(a=`${a.slice(0,25)}...`),d+=`. Received type ${typeof c} (${a})`}return d},TypeError),n("ERR_INVALID_ARG_VALUE",(a,b,c="is invalid")=>{let d=e(b);d.length>128&&(d=d.slice(0,128)+"...");let f=a.includes(".")?"property":"argument";return`The ${f} '${a}' ${c}. Received ${d}`},TypeError),n("ERR_INVALID_RETURN_VALUE",(a,b,c)=>{var d;let e=null!=c&&null!=(d=c.constructor)&&d.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${a} to be returned from the "${b}" function but got ${e}.`},TypeError),n("ERR_MISSING_ARGS",(...a)=>{let b;l(a.length>0,"At least one arg needs to be specified");let c=a.length;switch(a=(Array.isArray(a)?a:[a]).map(a=>`"${a}"`).join(" or "),c){case 1:b+=`The ${a[0]} argument`;break;case 2:b+=`The ${a[0]} and ${a[1]} arguments`;break;default:{let c=a.pop();b+=`The ${a.join(", ")}, and ${c} arguments`}}return`${b} must be specified`},TypeError),n("ERR_OUT_OF_RANGE",(a,b,c)=>{let d;if(l(b,'Missing "range" argument'),Number.isInteger(c)&&Math.abs(c)>0x100000000)d=m(String(c));else if("bigint"==typeof c){d=String(c);let a=BigInt(2)**BigInt(32);(c>a||c<-a)&&(d=m(d)),d+="n"}else d=e(c);return`The value of "${a}" is out of range. It must be ${b}. Received ${d}`},RangeError),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),n("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),n("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),n("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),n("ERR_STREAM_WRITE_AFTER_END","write after end",Error),n("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),b.exports={AbortError:class extends Error{constructor(a="The operation was aborted",b){if(void 0!==b&&"object"!=typeof b)throw new k.ERR_INVALID_ARG_TYPE("options","Object",b);super(a,b),this.code="ABORT_ERR",this.name="AbortError"}},aggregateTwoErrors:o(function(a,b){if(a&&b&&a!==b){if(Array.isArray(b.errors))return b.errors.push(a),b;let c=new g([b,a],b.message);return c.code=b.code,c}return a||b}),hideStackFrames:o,codes:k}},60127,(a,b,c)=>{"use strict";let{SymbolAsyncIterator:d,SymbolIterator:e,SymbolFor:f}=a.r(3494),g=f("nodejs.stream.destroyed"),h=f("nodejs.stream.errored"),i=f("nodejs.stream.readable"),j=f("nodejs.stream.writable"),k=f("nodejs.stream.disturbed"),l=f("nodejs.webstream.isClosedPromise");function m(a,b=!1){var c;return!!(a&&"function"==typeof a.pipe&&"function"==typeof a.on&&(!b||"function"==typeof a.pause&&"function"==typeof a.resume)&&(!a._writableState||(null==(c=a._readableState)?void 0:c.readable)!==!1)&&(!a._writableState||a._readableState))}function n(a){var b;return!!(a&&"function"==typeof a.write&&"function"==typeof a.on&&(!a._readableState||(null==(b=a._writableState)?void 0:b.writable)!==!1))}function o(a){return a&&(a._readableState||a._writableState||"function"==typeof a.write&&"function"==typeof a.on||"function"==typeof a.pipe&&"function"==typeof a.on)}function p(a){return!!(a&&!o(a)&&"function"==typeof a.pipeThrough&&"function"==typeof a.getReader&&"function"==typeof a.cancel)}function q(a){return!!(a&&!o(a)&&"function"==typeof a.getWriter&&"function"==typeof a.abort)}function r(a){return!!(a&&!o(a)&&"object"==typeof a.readable&&"object"==typeof a.writable)}function s(a){if(!o(a))return null;let b=a._writableState,c=a._readableState,d=b||c;return!!(a.destroyed||a[g]||null!=d&&d.destroyed)}function t(a){if(!n(a))return null;if(!0===a.writableEnded)return!0;let b=a._writableState;return(null==b||!b.errored)&&("boolean"!=typeof(null==b?void 0:b.ended)?null:b.ended)}function u(a,b){if(!m(a))return null;let c=a._readableState;return(null==c||!c.errored)&&("boolean"!=typeof(null==c?void 0:c.endEmitted)?null:!!(c.endEmitted||!1===b&&!0===c.ended&&0===c.length))}function v(a){return a&&null!=a[i]?a[i]:"boolean"!=typeof(null==a?void 0:a.readable)?null:!s(a)&&m(a)&&a.readable&&!u(a)}function w(a){return a&&null!=a[j]?a[j]:"boolean"!=typeof(null==a?void 0:a.writable)?null:!s(a)&&n(a)&&a.writable&&!t(a)}function x(a){return"boolean"==typeof a._closed&&"boolean"==typeof a._defaultKeepAlive&&"boolean"==typeof a._removedConnection&&"boolean"==typeof a._removedContLen}function y(a){return"boolean"==typeof a._sent100&&x(a)}b.exports={isDestroyed:s,kIsDestroyed:g,isDisturbed:function(a){var b;return!!(a&&(null!=(b=a[k])?b:a.readableDidRead||a.readableAborted))},kIsDisturbed:k,isErrored:function(a){var b,c,d,e,f,g,i,j,k,l;return!!(a&&(null!=(b=null!=(c=null!=(d=null!=(e=null!=(f=null!=(g=a[h])?g:a.readableErrored)?f:a.writableErrored)?e:null==(i=a._readableState)?void 0:i.errorEmitted)?d:null==(j=a._writableState)?void 0:j.errorEmitted)?c:null==(k=a._readableState)?void 0:k.errored)?b:null==(l=a._writableState)?void 0:l.errored))},kIsErrored:h,isReadable:v,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:f("nodejs.webstream.controllerErrorFunction"),kIsWritable:j,isClosed:function(a){if(!o(a))return null;if("boolean"==typeof a.closed)return a.closed;let b=a._writableState,c=a._readableState;return"boolean"==typeof(null==b?void 0:b.closed)||"boolean"==typeof(null==c?void 0:c.closed)?(null==b?void 0:b.closed)||(null==c?void 0:c.closed):"boolean"==typeof a._closed&&x(a)?a._closed:null},isDuplexNodeStream:function(a){return!!(a&&"function"==typeof a.pipe&&a._readableState&&"function"==typeof a.on&&"function"==typeof a.write)},isFinished:function(a,b){return o(a)?!!s(a)||!((null==b?void 0:b.readable)!==!1&&v(a)||(null==b?void 0:b.writable)!==!1&&w(a)):null},isIterable:function(a,b){return null!=a&&(!0===b?"function"==typeof a[d]:!1===b?"function"==typeof a[e]:"function"==typeof a[d]||"function"==typeof a[e])},isReadableNodeStream:m,isReadableStream:p,isReadableEnded:function(a){if(!m(a))return null;if(!0===a.readableEnded)return!0;let b=a._readableState;return!!b&&!b.errored&&("boolean"!=typeof(null==b?void 0:b.ended)?null:b.ended)},isReadableFinished:u,isReadableErrored:function(a){var b,c;return o(a)?a.readableErrored?a.readableErrored:null!=(b=null==(c=a._readableState)?void 0:c.errored)?b:null:null},isNodeStream:o,isWebStream:function(a){return p(a)||q(a)||r(a)},isWritable:w,isWritableNodeStream:n,isWritableStream:q,isWritableEnded:t,isWritableFinished:function(a,b){if(!n(a))return null;if(!0===a.writableFinished)return!0;let c=a._writableState;return(null==c||!c.errored)&&("boolean"!=typeof(null==c?void 0:c.finished)?null:!!(c.finished||!1===b&&!0===c.ended&&0===c.length))},isWritableErrored:function(a){var b,c;return o(a)?a.writableErrored?a.writableErrored:null!=(b=null==(c=a._writableState)?void 0:c.errored)?b:null:null},isServerRequest:function(a){var b;return"boolean"==typeof a._consuming&&"boolean"==typeof a._dumped&&(null==(b=a.req)?void 0:b.upgradeOrConnect)===void 0},isServerResponse:y,willEmitClose:function(a){if(!o(a))return null;let b=a._writableState,c=a._readableState,d=b||c;return!d&&y(a)||!!(d&&d.autoDestroy&&d.emitClose&&!1===d.closed)},isTransformStream:r}},8309,(a,b,c)=>{"use strict";let d=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:f},AbortError:g}=a.r(12722),{Symbol:h}=a.r(3494),{kIsDestroyed:i,isDestroyed:j,isFinished:k,isServerRequest:l}=a.r(60127),m=h("kDestroy"),n=h("kConstruct");function o(a,b,c){a&&(a.stack,b&&!b.errored&&(b.errored=a),c&&!c.errored&&(c.errored=a))}function p(a,b,c){let e=!1;function f(b){if(e)return;e=!0;let f=a._readableState,g=a._writableState;o(b,g,f),g&&(g.closed=!0),f&&(f.closed=!0),"function"==typeof c&&c(b),b?d.nextTick(q,a,b):d.nextTick(r,a)}try{a._destroy(b||null,f)}catch(a){f(a)}}function q(a,b){s(a,b),r(a)}function r(a){let b=a._readableState,c=a._writableState;c&&(c.closeEmitted=!0),b&&(b.closeEmitted=!0),(null!=c&&c.emitClose||null!=b&&b.emitClose)&&a.emit("close")}function s(a,b){let c=a._readableState,d=a._writableState;null!=d&&d.errorEmitted||null!=c&&c.errorEmitted||(d&&(d.errorEmitted=!0),c&&(c.errorEmitted=!0),a.emit("error",b))}function t(a,b,c){let e=a._readableState,f=a._writableState;if(null!=f&&f.destroyed||null!=e&&e.destroyed)return this;null!=e&&e.autoDestroy||null!=f&&f.autoDestroy?a.destroy(b):b&&(b.stack,f&&!f.errored&&(f.errored=b),e&&!e.errored&&(e.errored=b),c?d.nextTick(s,a,b):s(a,b))}function u(a){let b=!1;function c(c){if(b)return void t(a,null!=c?c:new f);b=!0;let e=a._readableState,g=a._writableState,h=g||e;e&&(e.constructed=!0),g&&(g.constructed=!0),h.destroyed?a.emit(m,c):c?t(a,c,!0):d.nextTick(v,a)}try{a._construct(a=>{d.nextTick(c,a)})}catch(a){d.nextTick(c,a)}}function v(a){a.emit(n)}function w(a){return(null==a?void 0:a.setHeader)&&"function"==typeof a.abort}function x(a){a.emit("close")}function y(a,b){a.emit("error",b),d.nextTick(x,a)}b.exports={construct:function(a,b){if("function"!=typeof a._construct)return;let c=a._readableState,e=a._writableState;c&&(c.constructed=!1),e&&(e.constructed=!1),a.once(n,b),a.listenerCount(n)>1||d.nextTick(u,a)},destroyer:function(a,b){!(!a||j(a))&&(b||k(a)||(b=new g),l(a)?(a.socket=null,a.destroy(b)):w(a)?a.abort():w(a.req)?a.req.abort():"function"==typeof a.destroy?a.destroy(b):"function"==typeof a.close?a.close():b?d.nextTick(y,a,b):d.nextTick(x,a),a.destroyed||(a[i]=!0))},destroy:function(a,b){let c=this._readableState,d=this._writableState,f=d||c;return null!=d&&d.destroyed||null!=c&&c.destroyed?"function"==typeof b&&b():(o(a,d,c),d&&(d.destroyed=!0),c&&(c.destroyed=!0),f.constructed?p(this,a,b):this.once(m,function(c){p(this,e(c,a),b)})),this},undestroy:function(){let a=this._readableState,b=this._writableState;a&&(a.constructed=!0,a.closed=!1,a.closeEmitted=!1,a.destroyed=!1,a.errored=null,a.errorEmitted=!1,a.reading=!1,a.ended=!1===a.readable,a.endEmitted=!1===a.readable),b&&(b.constructed=!0,b.destroyed=!1,b.closed=!1,b.closeEmitted=!1,b.errored=null,b.errorEmitted=!1,b.finalCalled=!1,b.prefinished=!1,b.ended=!1===b.writable,b.ending=!1===b.writable,b.finished=!1===b.writable)},errorOrDestroy:t}},13987,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=new WeakMap,e=new WeakMap;function f(a){let b=d.get(a);return console.assert(null!=b,"'this' is expected an Event object, but got",a),b}function g(a){if(null!=a.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",a.passiveListener);return}a.event.cancelable&&(a.canceled=!0,"function"==typeof a.event.preventDefault&&a.event.preventDefault())}function h(a,b){d.set(this,{eventTarget:a,event:b,eventPhase:2,currentTarget:a,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:b.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let c=Object.keys(b);for(let a=0;a<c.length;++a){let b=c[a];b in this||Object.defineProperty(this,b,i(b))}}function i(a){return{get(){return f(this).event[a]},set(b){f(this).event[a]=b},configurable:!0,enumerable:!0}}function j(a,b){f(a).passiveListener=b}h.prototype={get type(){return f(this).event.type},get target(){return f(this).eventTarget},get currentTarget(){return f(this).currentTarget},composedPath(){let a=f(this).currentTarget;return null==a?[]:[a]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return f(this).eventPhase},stopPropagation(){let a=f(this);a.stopped=!0,"function"==typeof a.event.stopPropagation&&a.event.stopPropagation()},stopImmediatePropagation(){let a=f(this);a.stopped=!0,a.immediateStopped=!0,"function"==typeof a.event.stopImmediatePropagation&&a.event.stopImmediatePropagation()},get bubbles(){return!!f(this).event.bubbles},get cancelable(){return!!f(this).event.cancelable},preventDefault(){g(f(this))},get defaultPrevented(){return f(this).canceled},get composed(){return!!f(this).event.composed},get timeStamp(){return f(this).timeStamp},get srcElement(){return f(this).eventTarget},get cancelBubble(){return f(this).stopped},set cancelBubble(value){if(!value)return;let a=f(this);a.stopped=!0,"boolean"==typeof a.event.cancelBubble&&(a.event.cancelBubble=!0)},get returnValue(){return!f(this).canceled},set returnValue(value){value||g(f(this))},initEvent(){}},Object.defineProperty(h.prototype,"constructor",{value:h,configurable:!0,writable:!0});let k=new WeakMap;function l(a){return null!==a&&"object"==typeof a}function m(a){let b=k.get(a);if(null==b)throw TypeError("'this' is expected an EventTarget object, but got another value.");return b}function n(a,b){Object.defineProperty(a,`on${b}`,{get(){let a=m(this).get(b);for(;null!=a;){if(3===a.listenerType)return a.listener;a=a.next}return null},set(a){"function"==typeof a||l(a)||(a=null);let c=m(this),d=null,e=c.get(b);for(;null!=e;)3===e.listenerType?null!==d?d.next=e.next:null!==e.next?c.set(b,e.next):c.delete(b):d=e,e=e.next;if(null!==a){let e={listener:a,listenerType:3,passive:!1,once:!1,next:null};null===d?c.set(b,e):d.next=e}},configurable:!0,enumerable:!0})}function o(a){function b(){p.call(this)}b.prototype=Object.create(p.prototype,{constructor:{value:b,configurable:!0,writable:!0}});for(let c=0;c<a.length;++c)n(b.prototype,a[c]);return b}function p(){if(this instanceof p)return void k.set(this,new Map);if(1==arguments.length&&Array.isArray(arguments[0]))return o(arguments[0]);if(arguments.length>0){let a=Array(arguments.length);for(let b=0;b<arguments.length;++b)a[b]=arguments[b];return o(a)}throw TypeError("Cannot call a class as a function")}p.prototype={addEventListener(a,b,c){if(null==b)return;if("function"!=typeof b&&!l(b))throw TypeError("'listener' should be a function or an object.");let d=m(this),e=l(c),f=(e?c.capture:c)?1:2,g={listener:b,listenerType:f,passive:e&&!!c.passive,once:e&&!!c.once,next:null},h=d.get(a);if(void 0===h)return void d.set(a,g);let i=null;for(;null!=h;){if(h.listener===b&&h.listenerType===f)return;i=h,h=h.next}i.next=g},removeEventListener(a,b,c){if(null==b)return;let d=m(this),e=(l(c)?c.capture:c)?1:2,f=null,g=d.get(a);for(;null!=g;){if(g.listener===b&&g.listenerType===e)return void(null!==f?f.next=g.next:null!==g.next?d.set(a,g.next):d.delete(a));f=g,g=g.next}},dispatchEvent(a){if(null==a||"string"!=typeof a.type)throw TypeError('"event.type" should be a string.');let b=m(this),c=a.type,d=b.get(c);if(null==d)return!0;let g=new(function a(b){if(null==b||b===Object.prototype)return h;let c=e.get(b);return null==c&&(c=function(a,b){let c=Object.keys(b);if(0===c.length)return a;function d(b,c){a.call(this,b,c)}d.prototype=Object.create(a.prototype,{constructor:{value:d,configurable:!0,writable:!0}});for(let e=0;e<c.length;++e){let g=c[e];if(!(g in a.prototype)){let a="function"==typeof Object.getOwnPropertyDescriptor(b,g).value;Object.defineProperty(d.prototype,g,a?function(a){return{value(){let b=f(this).event;return b[a].apply(b,arguments)},configurable:!0,enumerable:!0}}(g):i(g))}}return d}(a(Object.getPrototypeOf(b)),b),e.set(b,c)),c}(Object.getPrototypeOf(a)))(this,a),k=null;for(;null!=d;){if(d.once?null!==k?k.next=d.next:null!==d.next?b.set(c,d.next):b.delete(c):k=d,j(g,d.passive?d.listener:null),"function"==typeof d.listener)try{d.listener.call(this,g)}catch(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}else 3!==d.listenerType&&"function"==typeof d.listener.handleEvent&&d.listener.handleEvent(g);if(f(g).immediateStopped)break;d=d.next}return j(g,null),f(g).eventPhase=0,f(g).currentTarget=null,!g.defaultPrevented}},Object.defineProperty(p.prototype,"constructor",{value:p,configurable:!0,writable:!0}),c.defineEventAttribute=n,c.EventTarget=p,c.default=p,b.exports=p,b.exports.EventTarget=b.exports.default=p,b.exports.defineEventAttribute=n},68009,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a.r(13987);class AbortSignal extends d.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let a=e.get(this);if("boolean"!=typeof a)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return a}}d.defineEventAttribute(AbortSignal.prototype,"abort");let e=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class f{constructor(){g.set(this,function(){let a=Object.create(AbortSignal.prototype);return d.EventTarget.call(a),e.set(a,!1),a}())}get signal(){return h(this)}abort(){var a;a=h(this),!1===e.get(a)&&(e.set(a,!0),a.dispatchEvent({type:"abort"}))}}let g=new WeakMap;function h(a){let b=g.get(a);if(null==b)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===a?"null":typeof a}`);return b}Object.defineProperties(f.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(f.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),c.AbortController=f,c.AbortSignal=AbortSignal,c.default=f,b.exports=f,b.exports.AbortController=b.exports.default=f,b.exports.AbortSignal=AbortSignal},30202,(a,b,c)=>{"use strict";let d=a.r(874),{format:e,inspect:f}=a.r(2549),{codes:{ERR_INVALID_ARG_TYPE:g}}=a.r(12722),{kResistStopPropagation:h,AggregateError:i,SymbolDispose:j}=a.r(3494),AbortSignal=globalThis.AbortSignal||a.r(68009).AbortSignal,k=globalThis.AbortController||a.r(68009).AbortController,l=Object.getPrototypeOf(async function(){}).constructor,m=globalThis.Blob||d.Blob,n=(a,b)=>{if(void 0!==a&&(null===a||"object"!=typeof a||!("aborted"in a)))throw new g(b,"AbortSignal",a)};b.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(a){let b=!1;return function(...c){b||(b=!0,a.apply(this,c))}},createDeferredPromise:function(){let a,b;return{promise:new Promise((c,d)=>{a=c,b=d}),resolve:a,reject:b}},promisify:a=>new Promise((b,c)=>{a((a,...d)=>a?c(a):b(...d))}),debuglog:()=>function(){},format:e,inspect:f,types:{isAsyncFunction:a=>a instanceof l,isArrayBufferView:a=>ArrayBuffer.isView(a)},isBlob:void 0!==m?function(a){return a instanceof m}:function(a){return!1},deprecate:(a,b)=>a,addAbortListener:a.r(27699).addAbortListener||function(a,b){let c;if(void 0===a)throw new g("signal","AbortSignal",a);n(a,"signal");if("function"!=typeof b)throw new g("listener","Function",b);return a.aborted?queueMicrotask(()=>b()):(a.addEventListener("abort",b,{__proto__:null,once:!0,[h]:!0}),c=()=>{a.removeEventListener("abort",b)}),{__proto__:null,[j](){var a;null==(a=c)||a()}}},AbortSignalAny:AbortSignal.any||function(a){if(1===a.length)return a[0];let b=new k,c=()=>b.abort();return a.forEach(a=>{n(a,"signals"),a.addEventListener("abort",c,{once:!0})}),b.signal.addEventListener("abort",()=>{a.forEach(a=>a.removeEventListener("abort",c))},{once:!0}),b.signal}},b.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},98730,(a,b,c)=>{"use strict";let{ArrayIsArray:d,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:f,ArrayPrototypeMap:g,NumberIsInteger:h,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:j,NumberMIN_SAFE_INTEGER:k,NumberParseInt:l,ObjectPrototypeHasOwnProperty:m,RegExpPrototypeExec:n,String:o,StringPrototypeToUpperCase:p,StringPrototypeTrim:q}=a.r(3494),{hideStackFrames:r,codes:{ERR_SOCKET_BAD_PORT:s,ERR_INVALID_ARG_TYPE:t,ERR_INVALID_ARG_VALUE:u,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:w}}=a.r(12722),{normalizeEncoding:x}=a.r(30202),{isAsyncFunction:y,isArrayBufferView:z}=a.r(30202).types,A={},B=/^[0-7]+$/,C=r((a,b,c=k,d=j)=>{if("number"!=typeof a)throw new t(b,"number",a);if(!h(a))throw new v(b,"an integer",a);if(a<c||a>d)throw new v(b,`>= ${c} && <= ${d}`,a)}),D=r((a,b,c=-0x80000000,d=0x7fffffff)=>{if("number"!=typeof a)throw new t(b,"number",a);if(!h(a))throw new v(b,"an integer",a);if(a<c||a>d)throw new v(b,`>= ${c} && <= ${d}`,a)}),E=r((a,b,c=!1)=>{if("number"!=typeof a)throw new t(b,"number",a);if(!h(a))throw new v(b,"an integer",a);let d=+!!c;if(a<d||a>0xffffffff)throw new v(b,`>= ${d} && <= 4294967295`,a)});function F(a,b){if("string"!=typeof a)throw new t(b,"string",a)}let G=r((a,b,c)=>{if(!e(c,a))throw new u(b,a,"must be one of: "+f(g(c,a=>"string"==typeof a?`'${a}'`:o(a)),", "))});function H(a,b){if("boolean"!=typeof a)throw new t(b,"boolean",a)}function I(a,b,c){return null!=a&&m(a,b)?a[b]:c}let J=r((a,b,c=null)=>{let e=I(c,"allowArray",!1),f=I(c,"allowFunction",!1);if(!I(c,"nullable",!1)&&null===a||!e&&d(a)||"object"!=typeof a&&(!f||"function"!=typeof a))throw new t(b,"Object",a)}),K=r((a,b)=>{if(null!=a&&"object"!=typeof a&&"function"!=typeof a)throw new t(b,"a dictionary",a)}),L=r((a,b,c=0)=>{if(!d(a))throw new t(b,"Array",a);if(a.length<c)throw new u(b,a,`must be longer than ${c}`)}),M=r((a,b="buffer")=>{if(!z(a))throw new t(b,["Buffer","TypedArray","DataView"],a)}),N=r((a,b)=>{if(void 0!==a&&(null===a||"object"!=typeof a||!("aborted"in a)))throw new t(b,"AbortSignal",a)}),O=r((a,b)=>{if("function"!=typeof a)throw new t(b,"Function",a)}),P=r((a,b)=>{if("function"!=typeof a||y(a))throw new t(b,"Function",a)}),Q=r((a,b)=>{if(void 0!==a)throw new t(b,"undefined",a)}),R=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function S(a,b){if(void 0===a||!n(R,a))throw new u(b,a,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}b.exports={isInt32:function(a){return a===(0|a)},isUint32:function(a){return a===a>>>0},parseFileMode:function(a,b,c){if(void 0===a&&(a=c),"string"==typeof a){if(null===n(B,a))throw new u(b,a,"must be a 32-bit unsigned integer or an octal string");a=l(a,8)}return E(a,b),a},validateArray:L,validateStringArray:function(a,b){L(a,b);for(let c=0;c<a.length;c++)F(a[c],`${b}[${c}]`)},validateBooleanArray:function(a,b){L(a,b);for(let c=0;c<a.length;c++)H(a[c],`${b}[${c}]`)},validateAbortSignalArray:function(a,b){L(a,b);for(let c=0;c<a.length;c++){let d=a[c],e=`${b}[${c}]`;if(null==d)throw new t(e,"AbortSignal",d);N(d,e)}},validateBoolean:H,validateBuffer:M,validateDictionary:K,validateEncoding:function(a,b){let c=x(b),d=a.length;if("hex"===c&&d%2!=0)throw new u("encoding",b,`is invalid for data of length ${d}`)},validateFunction:O,validateInt32:D,validateInteger:C,validateNumber:function(a,b,c,d){if("number"!=typeof a)throw new t(b,"number",a);if(null!=c&&a<c||null!=d&&a>d||(null!=c||null!=d)&&i(a))throw new v(b,`${null!=c?`>= ${c}`:""}${null!=c&&null!=d?" && ":""}${null!=d?`<= ${d}`:""}`,a)},validateObject:J,validateOneOf:G,validatePlainFunction:P,validatePort:function(a,b="Port",c=!0){if("number"!=typeof a&&"string"!=typeof a||"string"==typeof a&&0===q(a).length||+a!=a>>>0||a>65535||0===a&&!c)throw new s(b,a,c);return 0|a},validateSignalName:function(a,b="signal"){if(F(a,b),void 0===A[a]){if(void 0!==A[p(a)])throw new w(a+" (signals must use all capital letters)");throw new w(a)}},validateString:F,validateUint32:E,validateUndefined:Q,validateUnion:function(a,b,c){if(!e(c,a))throw new t(b,`('${f(c,"|")}')`,a)},validateAbortSignal:N,validateLinkHeaderValue:function(a){if("string"==typeof a)return S(a,"hints"),a;if(d(a)){let b=a.length,c="";if(0===b)return c;for(let d=0;d<b;d++){let e=a[d];S(e,"hints"),c+=e,d!==b-1&&(c+=", ")}return c}throw new u("hints",a,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},2311,(a,b,c)=>{"use strict";let d,e=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),{AbortError:f,codes:g}=a.r(12722),{ERR_INVALID_ARG_TYPE:h,ERR_STREAM_PREMATURE_CLOSE:i}=g,{kEmptyObject:j,once:k}=a.r(30202),{validateAbortSignal:l,validateFunction:m,validateObject:n,validateBoolean:o}=a.r(98730),{Promise:p,PromisePrototypeThen:q,SymbolDispose:r}=a.r(3494),{isClosed:s,isReadable:t,isReadableNodeStream:u,isReadableStream:v,isReadableFinished:w,isReadableErrored:x,isWritable:y,isWritableNodeStream:z,isWritableStream:A,isWritableFinished:B,isWritableErrored:C,isNodeStream:D,willEmitClose:E,kIsClosedPromise:F}=a.r(60127),G=()=>{};function H(b,c,g){var o,p;if(2==arguments.length?(g=c,c=j):null==c?c=j:n(c,"options"),m(g,"callback"),l(c.signal,"options.signal"),g=k(g),v(b)||A(b))return function(b,c,g){let h=!1,i=G;if(c.signal)if(i=()=>{h=!0,g.call(b,new f(void 0,{cause:c.signal.reason}))},c.signal.aborted)e.nextTick(i);else{let e=(d=d||a.r(30202).addAbortListener)(c.signal,i),f=g;g=k((...a)=>{e[r](),f.apply(b,a)})}let j=(...a)=>{h||e.nextTick(()=>g.apply(b,a))};return q(b[F].promise,j,j),G}(b,c,g);if(!D(b))throw new h("stream",["ReadableStream","WritableStream","Stream"],b);let H=null!=(o=c.readable)?o:u(b),I=null!=(p=c.writable)?p:z(b),J=b._writableState,K=b._readableState,L=()=>{b.writable||O()},M=E(b)&&u(b)===H&&z(b)===I,N=B(b,!1),O=()=>{N=!0,b.destroyed&&(M=!1),M&&(!b.readable||H)||(!H||P)&&g.call(b)},P=w(b,!1),Q=()=>{P=!0,b.destroyed&&(M=!1),M&&(!b.writable||I)||(!I||N)&&g.call(b)},R=a=>{g.call(b,a)},S=s(b),T=()=>{S=!0;let a=C(b)||x(b);return a&&"boolean"!=typeof a?g.call(b,a):H&&!P&&u(b,!0)&&!w(b,!1)||I&&!N&&!B(b,!1)?g.call(b,new i):void g.call(b)},U=()=>{S=!0;let a=C(b)||x(b);if(a&&"boolean"!=typeof a)return g.call(b,a);g.call(b)},V=()=>{b.req.on("finish",O)};b.setHeader&&"function"==typeof b.abort?(b.on("complete",O),M||b.on("abort",T),b.req?V():b.on("request",V)):I&&!J&&(b.on("end",L),b.on("close",L)),M||"boolean"!=typeof b.aborted||b.on("aborted",T),b.on("end",Q),b.on("finish",O),!1!==c.error&&b.on("error",R),b.on("close",T),S?e.nextTick(T):null!=J&&J.errorEmitted||null!=K&&K.errorEmitted?M||e.nextTick(U):!H&&(!M||t(b))&&(N||!1===y(b))||!I&&(!M||y(b))&&(P||!1===t(b))?e.nextTick(U):K&&b.req&&b.aborted&&e.nextTick(U);let W=()=>{g=G,b.removeListener("aborted",T),b.removeListener("complete",O),b.removeListener("abort",T),b.removeListener("request",V),b.req&&b.req.removeListener("finish",O),b.removeListener("end",L),b.removeListener("close",L),b.removeListener("finish",O),b.removeListener("end",Q),b.removeListener("error",R),b.removeListener("close",T)};if(c.signal&&!S){let h=()=>{let a=g;W(),a.call(b,new f(void 0,{cause:c.signal.reason}))};if(c.signal.aborted)e.nextTick(h);else{let e=(d=d||a.r(30202).addAbortListener)(c.signal,h),f=g;g=k((...a)=>{e[r](),f.apply(b,a)})}}return W}b.exports=H,b.exports.finished=function(a,b){var c;let d=!1;return null===b&&(b=j),null!=(c=b)&&c.cleanup&&(o(b.cleanup,"cleanup"),d=b.cleanup),new p((c,e)=>{let f=H(a,b,a=>{d&&f(),a?e(a):c()})})}},23187,(a,b,c)=>{"use strict";let d,{SymbolDispose:e}=a.r(3494),{AbortError:f,codes:g}=a.r(12722),{isNodeStream:h,isWebStream:i,kControllerErrorFunction:j}=a.r(60127),k=a.r(2311),{ERR_INVALID_ARG_TYPE:l}=g;b.exports.addAbortSignal=function(a,c){if("object"!=typeof a||!("aborted"in a))throw new l("signal","AbortSignal",a);if(!h(c)&&!i(c))throw new l("stream",["ReadableStream","WritableStream","Stream"],c);return b.exports.addAbortSignalNoValidate(a,c)},b.exports.addAbortSignalNoValidate=function(b,c){if("object"!=typeof b||!("aborted"in b))return c;let g=h(c)?()=>{c.destroy(new f(void 0,{cause:b.reason}))}:()=>{c[j](new f(void 0,{cause:b.reason}))};return b.aborted?g():k(c,(d=d||a.r(30202).addAbortListener)(b,g)[e]),c}},44099,(a,b,c)=>{"use strict";let{MathFloor:d,NumberIsInteger:e}=a.r(3494),{validateInteger:f}=a.r(98730),{ERR_INVALID_ARG_VALUE:g}=a.r(12722).codes,h=16384,i=16;function j(a){return a?i:h}b.exports={getHighWaterMark:function(a,b,c,f){let h=null!=b.highWaterMark?b.highWaterMark:f?b[c]:null;if(null!=h){if(!e(h)||h<0)throw new g(f?`options.${c}`:"options.highWaterMark",h);return d(h)}return j(a.objectMode)},getDefaultHighWaterMark:j,setDefaultHighWaterMark:function(a,b){f(b,"value",0),a?i=b:h=b}}},31479,(a,b,c)=>{"use strict";let{StringPrototypeSlice:d,SymbolIterator:e,TypedArrayPrototypeSet:f,Uint8Array:g}=a.r(3494),{Buffer:h}=a.r(874),{inspect:i}=a.r(30202);b.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}unshift(a){let b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length}shift(){if(0===this.length)return;let a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(0===this.length)return"";let b=this.head,c=""+b.data;for(;null!==(b=b.next);)c+=a+b.data;return c}concat(a){if(0===this.length)return h.alloc(0);let b=h.allocUnsafe(a>>>0),c=this.head,d=0;for(;c;)f(b,c.data,d),d+=c.data.length,c=c.next;return b}consume(a,b){let c=this.head.data;if(a<c.length){let b=c.slice(0,a);return this.head.data=c.slice(a),b}return a===c.length?this.shift():b?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[e](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let b="",c=this.head,e=0;do{let f=c.data;if(a>f.length)b+=f,a-=f.length;else{a===f.length?(b+=f,++e,c.next?this.head=c.next:this.head=this.tail=null):(b+=d(f,0,a),this.head=c,c.data=d(f,a));break}++e}while(null!==(c=c.next))return this.length-=e,b}_getBuffer(a){let b=h.allocUnsafe(a),c=a,d=this.head,e=0;do{let h=d.data;if(a>h.length)f(b,h,c-a),a-=h.length;else{a===h.length?(f(b,h,c-a),++e,d.next?this.head=d.next:this.head=this.tail=null):(f(b,new g(h.buffer,h.byteOffset,a),c-a),this.head=d,d.data=h.slice(a));break}++e}while(null!==(d=d.next))return this.length-=e,b}[Symbol.for("nodejs.util.inspect.custom")](a,b){return i(this,{...b,depth:0,customInspect:!1})}}},1958,(a,b,c)=>{"use strict";var d=a.r(47044).Buffer,e=d.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(a){var b;switch(this.encoding=function(a){var b=function(a){var b;if(!a)return"utf8";for(;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}(a);if("string"!=typeof b&&(d.isEncoding===e||!e(a)))throw Error("Unknown encoding: "+a);return b||a}(a),this.encoding){case"utf16le":this.text=i,this.end=j,b=4;break;case"utf8":this.fillLast=h,b=4;break;case"base64":this.text=k,this.end=l,b=3;break;default:this.write=m,this.end=n;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(b)}function g(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function h(a){var b=this.lastTotal-this.lastNeed,c=function(a,b,c){if((192&b[0])!=128)return a.lastNeed=0,"";if(a.lastNeed>1&&b.length>1){if((192&b[1])!=128)return a.lastNeed=1,"";if(a.lastNeed>2&&b.length>2&&(192&b[2])!=128)return a.lastNeed=2,""}}(this,a,0);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(a.copy(this.lastChar,b,0,a.length),this.lastNeed-=a.length)}function i(a,b){if((a.length-b)%2==0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",b,a.length-1)}function j(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function k(a,b){var c=(a.length-b)%3;return 0===c?a.toString("base64",b):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",b,a.length-c))}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}c.StringDecoder=f,f.prototype.write=function(a){var b,c;if(0===a.length)return"";if(this.lastNeed){if(void 0===(b=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""},f.prototype.end=function(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"":b},f.prototype.text=function(a,b){var c=function(a,b,c){var d=b.length-1;if(d<c)return 0;var e=g(b[d]);return e>=0?(e>0&&(a.lastNeed=e-1),e):--d<c||-2===e?0:(e=g(b[d]))>=0?(e>0&&(a.lastNeed=e-2),e):--d<c||-2===e?0:(e=g(b[d]))>=0?(e>0&&(2===e?e=0:a.lastNeed=e-3),e):0}(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)},f.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},99060,(a,b,c)=>{"use strict";let d=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),{PromisePrototypeThen:e,SymbolAsyncIterator:f,SymbolIterator:g}=a.r(3494),{Buffer:h}=a.r(874),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:j}=a.r(12722).codes;b.exports=function(a,b,c){let k,l;if("string"==typeof b||b instanceof h)return new a({objectMode:!0,...c,read(){this.push(b),this.push(null)}});if(b&&b[f])l=!0,k=b[f]();else if(b&&b[g])l=!1,k=b[g]();else throw new i("iterable",["Iterable"],b);let m=new a({objectMode:!0,highWaterMark:1,...c}),n=!1;async function o(a){let b=null!=a,c="function"==typeof k.throw;if(b&&c){let{value:b,done:c}=await k.throw(a);if(await b,c)return}if("function"==typeof k.return){let{value:a}=await k.return();await a}}async function p(){for(;;){try{let{value:a,done:b}=l?await k.next():k.next();if(b)m.push(null);else{let b=a&&"function"==typeof a.then?await a:a;if(null===b)throw n=!1,new j;if(m.push(b))continue;n=!1}}catch(a){m.destroy(a)}break}}return m._read=function(){n||(n=!0,p())},m._destroy=function(a,b){e(o(a),()=>d.nextTick(b,a),c=>d.nextTick(b,c||a))},m}},56196,(a,b,c)=>{"use strict";let d,e=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),{ArrayPrototypeIndexOf:f,NumberIsInteger:g,NumberIsNaN:h,NumberParseInt:i,ObjectDefineProperties:j,ObjectKeys:k,ObjectSetPrototypeOf:l,Promise:m,SafeSet:n,SymbolAsyncDispose:o,SymbolAsyncIterator:p,Symbol:q}=a.r(3494);b.exports=R,R.ReadableState=Q;let{EventEmitter:r}=a.r(27699),{Stream:s,prependListener:t}=a.r(40657),{Buffer:u}=a.r(874),{addAbortSignal:v}=a.r(23187),w=a.r(2311),x=a.r(30202).debuglog("stream",a=>{x=a}),y=a.r(31479),z=a.r(8309),{getHighWaterMark:A,getDefaultHighWaterMark:B}=a.r(44099),{aggregateTwoErrors:C,codes:{ERR_INVALID_ARG_TYPE:D,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_OUT_OF_RANGE:F,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:H},AbortError:I}=a.r(12722),{validateObject:J}=a.r(98730),K=q("kPaused"),{StringDecoder:L}=a.f({string_decoder:{id:()=>1958,module:()=>a.r(1958)},"string_decoder/":{id:()=>1958,module:()=>a.r(1958)}})("string_decoder/"),M=a.r(99060);l(R.prototype,s.prototype),l(R,s);let N=()=>{},{errorOrDestroy:O}=z;function P(a){return{enumerable:!1,get(){return(this.state&a)!=0},set(b){b?this.state|=a:this.state&=~a}}}function Q(b,c,d){"boolean"!=typeof d&&(d=c instanceof a.r(55727)),this.state=6192,b&&b.objectMode&&(this.state|=1),d&&b&&b.readableObjectMode&&(this.state|=1),this.highWaterMark=b?A(this,b,"readableHighWaterMark",d):B(!1),this.buffer=new y,this.length=0,this.pipes=[],this.flowing=null,this[K]=null,b&&!1===b.emitClose&&(this.state&=-2049),b&&!1===b.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=b&&b.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,b&&b.encoding&&(this.decoder=new L(b.encoding),this.encoding=b.encoding)}function R(b){if(!(this instanceof R))return new R(b);let c=this instanceof a.r(55727);this._readableState=new Q(b,this,c),b&&("function"==typeof b.read&&(this._read=b.read),"function"==typeof b.destroy&&(this._destroy=b.destroy),"function"==typeof b.construct&&(this._construct=b.construct),b.signal&&!c&&v(b.signal,this)),s.call(this,b),z.construct(this,()=>{this._readableState.needReadable&&X(this,this._readableState)})}function S(a,b,c,d){let e;x("readableAddChunk",b);let f=a._readableState;if((1&f.state)==0&&("string"==typeof b?(c=c||f.defaultEncoding,f.encoding!==c&&(d&&f.encoding?b=u.from(b,c).toString(f.encoding):(b=u.from(b,c),c=""))):b instanceof u?c="":s._isUint8Array(b)?(b=s._uint8ArrayToBuffer(b),c=""):null!=b&&(e=new D("chunk",["string","Buffer","Uint8Array"],b))),e)O(a,e);else if(null===b)f.state&=-9,function(a,b){if(x("onEofChunk"),!b.ended){if(b.decoder){let a=b.decoder.end();a&&a.length&&(b.buffer.push(a),b.length+=b.objectMode?1:a.length)}b.ended=!0,b.sync?V(a):(b.needReadable=!1,b.emittedReadable=!0,W(a))}}(a,f);else if((1&f.state)!=0||b&&b.length>0)if(d)if((4&f.state)!=0)O(a,new H);else{if(f.destroyed||f.errored)return!1;T(a,f,b,!0)}else if(f.ended)O(a,new G);else{if(f.destroyed||f.errored)return!1;f.state&=-9,f.decoder&&!c?(b=f.decoder.write(b),f.objectMode||0!==b.length?T(a,f,b,!1):X(a,f)):T(a,f,b,!1)}else d||(f.state&=-9,X(a,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function T(a,b,c,d){b.flowing&&0===b.length&&!b.sync&&a.listenerCount("data")>0?((65536&b.state)!=0?b.awaitDrainWriters.clear():b.awaitDrainWriters=null,b.dataEmitted=!0,a.emit("data",c)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),(64&b.state)!=0&&V(a)),X(a,b)}function U(a,b){return a<=0||0===b.length&&b.ended?0:(1&b.state)!=0?1:h(a)?b.flowing&&b.length?b.buffer.first().length:b.length:a<=b.length?a:b.ended?b.length:0}function V(a){let b=a._readableState;x("emitReadable",b.needReadable,b.emittedReadable),b.needReadable=!1,b.emittedReadable||(x("emitReadable",b.flowing),b.emittedReadable=!0,e.nextTick(W,a))}function W(a){let b=a._readableState;x("emitReadable_",b.destroyed,b.length,b.ended),!b.destroyed&&!b.errored&&(b.length||b.ended)&&(a.emit("readable"),b.emittedReadable=!1),b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark,aa(a)}function X(a,b){!b.readingMore&&b.constructed&&(b.readingMore=!0,e.nextTick(Y,a,b))}function Y(a,b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){let c=b.length;if(x("maybeReadMore read 0"),a.read(0),c===b.length)break}b.readingMore=!1}function Z(a){let b=a._readableState;b.readableListening=a.listenerCount("readable")>0,b.resumeScheduled&&!1===b[K]?b.flowing=!0:a.listenerCount("data")>0?a.resume():b.readableListening||(b.flowing=null)}function $(a){x("readable nexttick read 0"),a.read(0)}function _(a,b){x("resume",b.reading),b.reading||a.read(0),b.resumeScheduled=!1,a.emit("resume"),aa(a),b.flowing&&!b.reading&&a.read(0)}function aa(a){let b=a._readableState;for(x("flow",b.flowing);b.flowing&&null!==a.read(););}function ab(a,b){"function"!=typeof a.read&&(a=R.wrap(a,{objectMode:!0}));let c=ac(a,b);return c.stream=a,c}async function*ac(a,b){let c,d=N;function e(b){this===a?(d(),d=N):d=b}a.on("readable",e);let f=w(a,{writable:!1},a=>{c=a?C(c,a):null,d(),d=N});try{for(;;){let b=a.destroyed?null:a.read();if(null!==b)yield b;else if(c)throw c;else{if(null===c)return;await new m(e)}}}catch(a){throw c=C(c,a)}finally{(c||(null==b?void 0:b.destroyOnReturn)!==!1)&&(void 0===c||a._readableState.autoDestroy)?z.destroyer(a,null):(a.off("readable",e),f())}}function ad(a,b){let c;return 0===b.length?null:(b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):c=b.buffer.consume(a,b.decoder),c)}function ae(a){let b=a._readableState;x("endReadable",b.endEmitted),b.endEmitted||(b.ended=!0,e.nextTick(af,b,a))}function af(a,b){if(x("endReadableNT",a.endEmitted,a.length),!a.errored&&!a.closeEmitted&&!a.endEmitted&&0===a.length){if(a.endEmitted=!0,b.emit("end"),b.writable&&!1===b.allowHalfOpen)e.nextTick(ag,b);else if(a.autoDestroy){let a=b._writableState;(!a||a.autoDestroy&&(a.finished||!1===a.writable))&&b.destroy()}}}function ag(a){!a.writable||a.writableEnded||a.destroyed||a.end()}function ah(){return void 0===d&&(d={}),d}j(Q.prototype,{objectMode:P(1),ended:P(2),endEmitted:P(4),reading:P(8),constructed:P(16),sync:P(32),needReadable:P(64),emittedReadable:P(128),readableListening:P(256),resumeScheduled:P(512),errorEmitted:P(1024),emitClose:P(2048),autoDestroy:P(4096),destroyed:P(8192),closed:P(16384),closeEmitted:P(32768),multiAwaitDrain:P(65536),readingMore:P(131072),dataEmitted:P(262144)}),R.prototype.destroy=z.destroy,R.prototype._undestroy=z.undestroy,R.prototype._destroy=function(a,b){b(a)},R.prototype[r.captureRejectionSymbol]=function(a){this.destroy(a)},R.prototype[o]=function(){let a;return this.destroyed||(a=this.readableEnded?null:new I,this.destroy(a)),new m((b,c)=>w(this,d=>d&&d!==a?c(d):b(null)))},R.prototype.push=function(a,b){return S(this,a,b,!1)},R.prototype.unshift=function(a,b){return S(this,a,b,!0)},R.prototype.isPaused=function(){let a=this._readableState;return!0===a[K]||!1===a.flowing},R.prototype.setEncoding=function(a){let b=new L(a);this._readableState.decoder=b,this._readableState.encoding=this._readableState.decoder.encoding;let c=this._readableState.buffer,d="";for(let a of c)d+=b.write(a);return c.clear(),""!==d&&c.push(d),this._readableState.length=d.length,this},R.prototype.read=function(a){let b;x("read",a),void 0===a?a=NaN:g(a)||(a=i(a,10));let c=this._readableState,d=a;if(a>c.highWaterMark&&(c.highWaterMark=function(a){if(a>0x40000000)throw new F("size","<= 1GiB",a);return a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,++a}(a)),0!==a&&(c.state&=-129),0===a&&c.needReadable&&((0!==c.highWaterMark?c.length>=c.highWaterMark:c.length>0)||c.ended))return x("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?ae(this):V(this),null;if(0===(a=U(a,c))&&c.ended)return 0===c.length&&ae(this),null;let e=(64&c.state)!=0;if(x("need readable",e),(0===c.length||c.length-a<c.highWaterMark)&&x("length less than watermark",e=!0),c.ended||c.reading||c.destroyed||c.errored||!c.constructed)x("reading, ended or constructing",e=!1);else if(e){x("do read"),c.state|=40,0===c.length&&(c.state|=64);try{this._read(c.highWaterMark)}catch(a){O(this,a)}c.state&=-33,c.reading||(a=U(d,c))}return null===(b=a>0?ad(a,c):null)?(c.needReadable=c.length<=c.highWaterMark,a=0):(c.length-=a,c.multiAwaitDrain?c.awaitDrainWriters.clear():c.awaitDrainWriters=null),0===c.length&&(c.ended||(c.needReadable=!0),d!==a&&c.ended&&ae(this)),null===b||c.errorEmitted||c.closeEmitted||(c.dataEmitted=!0,this.emit("data",b)),b},R.prototype._read=function(a){throw new E("_read()")},R.prototype.pipe=function(a,b){let c,d=this,f=this._readableState;1!==f.pipes.length||f.multiAwaitDrain||(f.multiAwaitDrain=!0,f.awaitDrainWriters=new n(f.awaitDrainWriters?[f.awaitDrainWriters]:[])),f.pipes.push(a),x("pipe count=%d opts=%j",f.pipes.length,b);let g=b&&!1===b.end||a===e.stdout||a===e.stderr?p:h;function h(){x("onend"),a.end()}f.endEmitted?e.nextTick(g):d.once("end",g),a.on("unpipe",function b(e,g){x("onunpipe"),e===d&&g&&!1===g.hasUnpiped&&(g.hasUnpiped=!0,x("cleanup"),a.removeListener("close",m),a.removeListener("finish",o),c&&a.removeListener("drain",c),a.removeListener("error",l),a.removeListener("unpipe",b),d.removeListener("end",h),d.removeListener("end",p),d.removeListener("data",k),i=!0,c&&f.awaitDrainWriters&&(!a._writableState||a._writableState.needDrain)&&c())});let i=!1;function j(){var b,e;i||(1===f.pipes.length&&f.pipes[0]===a?(x("false write response, pause",0),f.awaitDrainWriters=a,f.multiAwaitDrain=!1):f.pipes.length>1&&f.pipes.includes(a)&&(x("false write response, pause",f.awaitDrainWriters.size),f.awaitDrainWriters.add(a)),d.pause()),c||(b=d,e=a,c=function(){let a=b._readableState;a.awaitDrainWriters===e?(x("pipeOnDrain",1),a.awaitDrainWriters=null):a.multiAwaitDrain&&(x("pipeOnDrain",a.awaitDrainWriters.size),a.awaitDrainWriters.delete(e)),(!a.awaitDrainWriters||0===a.awaitDrainWriters.size)&&b.listenerCount("data")&&b.resume()},a.on("drain",c))}function k(b){x("ondata");let c=a.write(b);x("dest.write",c),!1===c&&j()}function l(b){if(x("onerror",b),p(),a.removeListener("error",l),0===a.listenerCount("error")){let c=a._writableState||a._readableState;c&&!c.errorEmitted?O(a,b):a.emit("error",b)}}function m(){a.removeListener("finish",o),p()}function o(){x("onfinish"),a.removeListener("close",m),p()}function p(){x("unpipe"),d.unpipe(a)}return d.on("data",k),t(a,"error",l),a.once("close",m),a.once("finish",o),a.emit("pipe",d),!0===a.writableNeedDrain?j():f.flowing||(x("pipe resume"),d.resume()),a},R.prototype.unpipe=function(a){let b=this._readableState;if(0===b.pipes.length)return this;if(!a){let a=b.pipes;b.pipes=[],this.pause();for(let b=0;b<a.length;b++)a[b].emit("unpipe",this,{hasUnpiped:!1});return this}let c=f(b.pipes,a);return -1===c||(b.pipes.splice(c,1),0===b.pipes.length&&this.pause(),a.emit("unpipe",this,{hasUnpiped:!1})),this},R.prototype.on=function(a,b){let c=s.prototype.on.call(this,a,b),d=this._readableState;return"data"===a?(d.readableListening=this.listenerCount("readable")>0,!1!==d.flowing&&this.resume()):"readable"!==a||d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.flowing=!1,d.emittedReadable=!1,x("on readable",d.length,d.reading),d.length?V(this):d.reading||e.nextTick($,this)),c},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(a,b){let c=s.prototype.removeListener.call(this,a,b);return"readable"===a&&e.nextTick(Z,this),c},R.prototype.off=R.prototype.removeListener,R.prototype.removeAllListeners=function(a){let b=s.prototype.removeAllListeners.apply(this,arguments);return("readable"===a||void 0===a)&&e.nextTick(Z,this),b},R.prototype.resume=function(){var a,b;let c=this._readableState;return c.flowing||(x("resume"),c.flowing=!c.readableListening,a=this,(b=c).resumeScheduled||(b.resumeScheduled=!0,e.nextTick(_,a,b))),c[K]=!1,this},R.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[K]=!0,this},R.prototype.wrap=function(a){let b=!1;a.on("data",c=>{!this.push(c)&&a.pause&&(b=!0,a.pause())}),a.on("end",()=>{this.push(null)}),a.on("error",a=>{O(this,a)}),a.on("close",()=>{this.destroy()}),a.on("destroy",()=>{this.destroy()}),this._read=()=>{b&&a.resume&&(b=!1,a.resume())};let c=k(a);for(let b=1;b<c.length;b++){let d=c[b];void 0===this[d]&&"function"==typeof a[d]&&(this[d]=a[d].bind(a))}return this},R.prototype[p]=function(){return ab(this)},R.prototype.iterator=function(a){return void 0!==a&&J(a,"options"),ab(this,a)},j(R.prototype,{readable:{__proto__:null,get(){let a=this._readableState;return!!a&&!1!==a.readable&&!a.destroyed&&!a.errorEmitted&&!a.endEmitted},set(a){this._readableState&&(this._readableState.readable=!!a)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(a){this._readableState&&(this._readableState.destroyed=a)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),j(Q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[K]},set(a){this[K]=!!a}}}),R._fromList=ad,R.from=function(a,b){return M(R,a,b)},R.fromWeb=function(a,b){return ah().newStreamReadableFromReadableStream(a,b)},R.toWeb=function(a,b){return ah().newReadableStreamFromStreamReadable(a,b)},R.wrap=function(a,b){var c,d;return new R({objectMode:null==(c=null!=(d=a.readableObjectMode)?d:a.objectMode)||c,...b,destroy(b,c){z.destroyer(a,b),c(b)}}).wrap(a)}},41740,(a,b,c)=>{"use strict";let d=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),e=a.r(874),{isReadable:f,isWritable:g,isIterable:h,isNodeStream:i,isReadableNodeStream:j,isWritableNodeStream:k,isDuplexNodeStream:l,isReadableStream:m,isWritableStream:n}=a.r(60127),o=a.r(2311),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:q,ERR_INVALID_RETURN_VALUE:r}}=a.r(12722),{destroyer:s}=a.r(8309),t=a.r(55727),u=a.r(56196),v=a.r(3036),{createDeferredPromise:w}=a.r(30202),x=a.r(99060),y=globalThis.Blob||e.Blob,z=void 0!==y?function(a){return a instanceof y}:function(a){return!1},A=globalThis.AbortController||a.r(68009).AbortController,{FunctionPrototypeCall:B}=a.r(3494);class C extends t{constructor(a){super(a),(null==a?void 0:a.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==a?void 0:a.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function D(a){let b,c,d,e,h,i=a.readable&&"function"!=typeof a.readable.read?u.wrap(a.readable):a.readable,j=a.writable,k=!!f(i),l=!!g(j);function m(a){let b=e;e=null,b?b(a):a&&h.destroy(a)}return h=new C({readableObjectMode:!!(null!=i&&i.readableObjectMode),writableObjectMode:!!(null!=j&&j.writableObjectMode),readable:k,writable:l}),l&&(o(j,a=>{l=!1,a&&s(i,a),m(a)}),h._write=function(a,c,d){j.write(a,c)?d():b=d},h._final=function(a){j.end(),c=a},j.on("drain",function(){if(b){let a=b;b=null,a()}}),j.on("finish",function(){if(c){let a=c;c=null,a()}})),k&&(o(i,a=>{k=!1,a&&s(i,a),m(a)}),i.on("readable",function(){if(d){let a=d;d=null,a()}}),i.on("end",function(){h.push(null)}),h._read=function(){for(;;){let a=i.read();if(null===a){d=h._read;return}if(!h.push(a))return}}),h._destroy=function(a,f){a||null===e||(a=new p),d=null,b=null,c=null,null===e?f(a):(e=f,s(j,a),s(i,a))},h}b.exports=function a(b,c){if(l(b))return b;if(j(b))return D({readable:b});if(k(b))return D({writable:b});if(i(b))return D({writable:!1,readable:!1});if(m(b))return D({readable:u.fromWeb(b)});if(n(b))return D({writable:v.fromWeb(b)});if("function"==typeof b){let{value:a,write:e,final:f,destroy:g}=function(a){let{promise:b,resolve:c}=w(),e=new A,f=e.signal;return{value:a(async function*(){for(;;){let a=b;b=null;let{chunk:e,done:g,cb:h}=await a;if(d.nextTick(h),g)return;if(f.aborted)throw new p(void 0,{cause:f.reason});({promise:b,resolve:c}=w()),yield e}}(),{signal:f}),write(a,b,d){let e=c;c=null,e({chunk:a,done:!1,cb:d})},final(a){let b=c;c=null,b({done:!0,cb:a})},destroy(a,b){e.abort(),b(a)}}}(b);if(h(a))return x(C,a,{objectMode:!0,write:e,final:f,destroy:g});let i=null==a?void 0:a.then;if("function"==typeof i){let b,c=B(i,a,a=>{if(null!=a)throw new r("nully","body",a)},a=>{s(b,a)});return b=new C({objectMode:!0,readable:!1,write:e,final(a){f(async()=>{try{await c,d.nextTick(a,null)}catch(b){d.nextTick(a,b)}})},destroy:g})}throw new r("Iterable, AsyncIterable or AsyncFunction",c,a)}if(z(b))return a(b.arrayBuffer());if(h(b))return x(C,b,{objectMode:!0,writable:!1});if(m(null==b?void 0:b.readable)&&n(null==b?void 0:b.writable))return C.fromWeb(b);if("object"==typeof(null==b?void 0:b.writable)||"object"==typeof(null==b?void 0:b.readable))return D({readable:null!=b&&b.readable?j(null==b?void 0:b.readable)?null==b?void 0:b.readable:a(b.readable):void 0,writable:null!=b&&b.writable?k(null==b?void 0:b.writable)?null==b?void 0:b.writable:a(b.writable):void 0});let e=null==b?void 0:b.then;if("function"==typeof e){let a;return B(e,b,b=>{null!=b&&a.push(b),a.push(null)},b=>{s(a,b)}),a=new C({objectMode:!0,writable:!1,read(){}})}throw new q(c,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],b)}},55727,(a,b,c)=>{"use strict";let d,e,{ObjectDefineProperties:f,ObjectGetOwnPropertyDescriptor:g,ObjectKeys:h,ObjectSetPrototypeOf:i}=a.r(3494);b.exports=l;let j=a.r(56196),k=a.r(3036);i(l.prototype,j.prototype),i(l,j);{let a=h(k.prototype);for(let b=0;b<a.length;b++){let c=a[b];l.prototype[c]||(l.prototype[c]=k.prototype[c])}}function l(a){if(!(this instanceof l))return new l(a);j.call(this,a),k.call(this,a),a?(this.allowHalfOpen=!1!==a.allowHalfOpen,!1===a.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===a.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function m(){return void 0===d&&(d={}),d}f(l.prototype,{writable:{__proto__:null,...g(k.prototype,"writable")},writableHighWaterMark:{__proto__:null,...g(k.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...g(k.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...g(k.prototype,"writableBuffer")},writableLength:{__proto__:null,...g(k.prototype,"writableLength")},writableFinished:{__proto__:null,...g(k.prototype,"writableFinished")},writableCorked:{__proto__:null,...g(k.prototype,"writableCorked")},writableEnded:{__proto__:null,...g(k.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...g(k.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(a){this._readableState&&this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}}),l.fromWeb=function(a,b){return m().newStreamDuplexFromReadableWritablePair(a,b)},l.toWeb=function(a){return m().newReadableWritablePairFromDuplex(a)},l.from=function(b){return e||(e=a.r(41740)),e(b,"body")}},3036,(a,b,c)=>{"use strict";let d,e=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),{ArrayPrototypeSlice:f,Error:g,FunctionPrototypeSymbolHasInstance:h,ObjectDefineProperty:i,ObjectDefineProperties:j,ObjectSetPrototypeOf:k,StringPrototypeToLowerCase:l,Symbol:m,SymbolHasInstance:n}=a.r(3494);b.exports=J,J.WritableState=H;let{EventEmitter:o}=a.r(27699),p=a.r(40657).Stream,{Buffer:q}=a.r(874),r=a.r(8309),{addAbortSignal:s}=a.r(23187),{getHighWaterMark:t,getDefaultHighWaterMark:u}=a.r(44099),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:y,ERR_STREAM_DESTROYED:z,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:C,ERR_UNKNOWN_ENCODING:D}=a.r(12722).codes,{errorOrDestroy:E}=r;function F(){}k(J.prototype,p.prototype),k(J,p);let G=m("kOnFinished");function H(b,c,d){"boolean"!=typeof d&&(d=c instanceof a.r(55727)),this.objectMode=!!(b&&b.objectMode),d&&(this.objectMode=this.objectMode||!!(b&&b.writableObjectMode)),this.highWaterMark=b?t(this,b,"writableHighWaterMark",d):u(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let e=!!(b&&!1===b.decodeStrings);this.decodeStrings=!e,this.defaultEncoding=b&&b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=N.bind(void 0,c),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!b||!1!==b.emitClose,this.autoDestroy=!b||!1!==b.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function I(a){a.buffered=[],a.bufferedIndex=0,a.allBuffers=!0,a.allNoop=!0}function J(b){let c=this instanceof a.r(55727);if(!c&&!h(J,this))return new J(b);this._writableState=new H(b,this,c),b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev),"function"==typeof b.destroy&&(this._destroy=b.destroy),"function"==typeof b.final&&(this._final=b.final),"function"==typeof b.construct&&(this._construct=b.construct),b.signal&&s(b.signal,this)),p.call(this,b),r.construct(this,()=>{let a=this._writableState;a.writing||R(this,a),T(this,a)})}function K(a,b,c,d){var f,g,h,i,j;let k,l,m,n=a._writableState;if("function"==typeof c)d=c,c=n.defaultEncoding;else{if(c){if("buffer"!==c&&!q.isEncoding(c))throw new D(c)}else c=n.defaultEncoding;"function"!=typeof d&&(d=F)}if(null===b)throw new B;if(!n.objectMode)if("string"==typeof b)!1!==n.decodeStrings&&(b=q.from(b,c),c="buffer");else if(b instanceof q)c="buffer";else if(p._isUint8Array(b))b=p._uint8ArrayToBuffer(b),c="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],b);return(n.ending?m=new C:n.destroyed&&(m=new z("write")),m)?(e.nextTick(d,m),E(a,m,!0),m):(n.pendingcb++,f=a,g=n,h=b,i=c,j=d,k=g.objectMode?1:h.length,g.length+=k,(l=g.length<g.highWaterMark)||(g.needDrain=!0),g.writing||g.corked||g.errored||!g.constructed?(g.buffered.push({chunk:h,encoding:i,callback:j}),g.allBuffers&&"buffer"!==i&&(g.allBuffers=!1),g.allNoop&&j!==F&&(g.allNoop=!1)):(g.writelen=k,g.writecb=j,g.writing=!0,g.sync=!0,f._write(h,i,g.onwrite),g.sync=!1),l&&!g.errored&&!g.destroyed)}function L(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new z("write")):c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function M(a,b,c,d){--b.pendingcb,d(c),Q(b),E(a,c)}function N(a,b){let c=a._writableState,d=c.sync,f=c.writecb;"function"!=typeof f?E(a,new x):(c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,b?(b.stack,c.errored||(c.errored=b),a._readableState&&!a._readableState.errored&&(a._readableState.errored=b),d?e.nextTick(M,a,c,b,f):M(a,c,b,f)):(c.buffered.length>c.bufferedIndex&&R(a,c),d?null!==c.afterWriteTickInfo&&c.afterWriteTickInfo.cb===f?c.afterWriteTickInfo.count++:(c.afterWriteTickInfo={count:1,cb:f,stream:a,state:c},e.nextTick(O,c.afterWriteTickInfo)):P(a,c,1,f)))}function O({stream:a,state:b,count:c,cb:d}){return b.afterWriteTickInfo=null,P(a,b,c,d)}function P(a,b,c,d){for(b.ending||a.destroyed||0!==b.length||!b.needDrain||(b.needDrain=!1,a.emit("drain"));c-- >0;)b.pendingcb--,d();b.destroyed&&Q(b),T(a,b)}function Q(a){var b,c;if(a.writing)return;for(let c=a.bufferedIndex;c<a.buffered.length;++c){let{chunk:d,callback:e}=a.buffered[c],f=a.objectMode?1:d.length;a.length-=f,e(null!=(b=a.errored)?b:new z("write"))}let d=a[G].splice(0);for(let b=0;b<d.length;b++)d[b](null!=(c=a.errored)?c:new z("end"));I(a)}function R(a,b){if(b.corked||b.bufferProcessing||b.destroyed||!b.constructed)return;let{buffered:c,bufferedIndex:d,objectMode:e}=b,g=c.length-d;if(!g)return;let h=d;if(b.bufferProcessing=!0,g>1&&a._writev){b.pendingcb-=g-1;let d=b.allNoop?F:a=>{for(let b=h;b<c.length;++b)c[b].callback(a)},e=b.allNoop&&0===h?c:f(c,h);e.allBuffers=b.allBuffers,L(a,b,!0,b.length,e,"",d),I(b)}else{do{let{chunk:d,encoding:f,callback:g}=c[h];c[h++]=null,L(a,b,!1,e?1:d.length,d,f,g)}while(h<c.length&&!b.writing)h===c.length?I(b):h>256?(c.splice(0,h),b.bufferedIndex=0):b.bufferedIndex=h}b.bufferProcessing=!1}function S(a){return a.ending&&!a.destroyed&&a.constructed&&0===a.length&&!a.errored&&0===a.buffered.length&&!a.finished&&!a.writing&&!a.errorEmitted&&!a.closeEmitted}function T(a,b,c){if(S(b)){if(!b.prefinished&&!b.finalCalled)if("function"!=typeof a._final||b.destroyed)b.prefinished=!0,a.emit("prefinish");else{b.finalCalled=!0;let c=!1;function d(d){if(c)return void E(a,null!=d?d:x());if(c=!0,b.pendingcb--,d){let c=b[G].splice(0);for(let a=0;a<c.length;a++)c[a](d);E(a,d,b.sync)}else S(b)&&(b.prefinished=!0,a.emit("prefinish"),b.pendingcb++,e.nextTick(U,a,b))}b.sync=!0,b.pendingcb++;try{a._final(d)}catch(a){d(a)}b.sync=!1}0===b.pendingcb&&(c?(b.pendingcb++,e.nextTick((a,b)=>{S(b)?U(a,b):b.pendingcb--},a,b)):S(b)&&(b.pendingcb++,U(a,b)))}}function U(a,b){b.pendingcb--,b.finished=!0;let c=b[G].splice(0);for(let a=0;a<c.length;a++)c[a]();if(a.emit("finish"),b.autoDestroy){let b=a._readableState;(!b||b.autoDestroy&&(b.endEmitted||!1===b.readable))&&a.destroy()}}H.prototype.getBuffer=function(){return f(this.buffered,this.bufferedIndex)},i(H.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),i(J,n,{__proto__:null,value:function(a){return!!h(this,a)||this===J&&a&&a._writableState instanceof H}}),J.prototype.pipe=function(){E(this,new y)},J.prototype.write=function(a,b,c){return!0===K(this,a,b,c)},J.prototype.cork=function(){this._writableState.corked++},J.prototype.uncork=function(){let a=this._writableState;a.corked&&(a.corked--,a.writing||R(this,a))},J.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=l(a)),!q.isEncoding(a))throw new D(a);return this._writableState.defaultEncoding=a,this},J.prototype._write=function(a,b,c){if(this._writev)this._writev([{chunk:a,encoding:b}],c);else throw new w("_write()")},J.prototype._writev=null,J.prototype.end=function(a,b,c){let d,f=this._writableState;if("function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!=a){let c=K(this,a,b);c instanceof g&&(d=c)}return f.corked&&(f.corked=1,this.uncork()),d||(f.errored||f.ending?f.finished?d=new A("end"):f.destroyed&&(d=new z("end")):(f.ending=!0,T(this,f,!0),f.ended=!0)),"function"==typeof c&&(d||f.finished?e.nextTick(c,d):f[G].push(c)),this},j(J.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(a){this._writableState&&(this._writableState.destroyed=a)}},writable:{__proto__:null,get(){let a=this._writableState;return!!a&&!1!==a.writable&&!a.destroyed&&!a.errored&&!a.ending&&!a.ended},set(a){this._writableState&&(this._writableState.writable=!!a)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let a=this._writableState;return!!a&&!a.destroyed&&!a.ending&&a.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let V=r.destroy;function W(){return void 0===d&&(d={}),d}J.prototype.destroy=function(a,b){let c=this._writableState;return!c.destroyed&&(c.bufferedIndex<c.buffered.length||c[G].length)&&e.nextTick(Q,c),V.call(this,a,b),this},J.prototype._undestroy=r.undestroy,J.prototype._destroy=function(a,b){b(a)},J.prototype[o.captureRejectionSymbol]=function(a){this.destroy(a)},J.fromWeb=function(a,b){return W().newStreamWritableFromWritableStream(a,b)},J.toWeb=function(a){return W().newWritableStreamFromStreamWritable(a)}},51850,(a,b,c)=>{"use strict";let{ObjectSetPrototypeOf:d,Symbol:e}=a.r(3494);b.exports=j;let{ERR_METHOD_NOT_IMPLEMENTED:f}=a.r(12722).codes,g=a.r(55727),{getHighWaterMark:h}=a.r(44099);d(j.prototype,g.prototype),d(j,g);let i=e("kCallback");function j(a){if(!(this instanceof j))return new j(a);let b=a?h(this,a,"readableHighWaterMark",!0):null;0===b&&(a={...a,highWaterMark:null,readableHighWaterMark:b,writableHighWaterMark:a.writableHighWaterMark||0}),g.call(this,a),this._readableState.sync=!1,this[i]=null,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",l)}function k(a){"function"!=typeof this._flush||this.destroyed?(this.push(null),a&&a()):this._flush((b,c)=>{b?a?a(b):this.destroy(b):(null!=c&&this.push(c),this.push(null),a&&a())})}function l(){this._final!==k&&k.call(this)}j.prototype._final=k,j.prototype._transform=function(a,b,c){throw new f("_transform()")},j.prototype._write=function(a,b,c){let d=this._readableState,e=this._writableState,f=d.length;this._transform(a,b,(a,b)=>{a?c(a):(null!=b&&this.push(b),e.ended||f===d.length||d.length<d.highWaterMark?c():this[i]=c)})},j.prototype._read=function(){if(this[i]){let a=this[i];this[i]=null,a()}}},26846,(a,b,c)=>{"use strict";let{ObjectSetPrototypeOf:d}=a.r(3494);b.exports=f;let e=a.r(51850);function f(a){if(!(this instanceof f))return new f(a);e.call(this,a)}d(f.prototype,e.prototype),d(f,e),f.prototype._transform=function(a,b,c){c(null,a)}},97501,(a,b,c)=>{"use strict";let d,e,f,g=a.f({process:{id:()=>74835,module:()=>a.r(74835)},"process/":{id:()=>74835,module:()=>a.r(74835)}})("process/"),{ArrayIsArray:h,Promise:i,SymbolAsyncIterator:j,SymbolDispose:k}=a.r(3494),l=a.r(2311),{once:m}=a.r(30202),n=a.r(8309),o=a.r(55727),{aggregateTwoErrors:p,codes:{ERR_INVALID_ARG_TYPE:q,ERR_INVALID_RETURN_VALUE:r,ERR_MISSING_ARGS:s,ERR_STREAM_DESTROYED:t,ERR_STREAM_PREMATURE_CLOSE:u},AbortError:v}=a.r(12722),{validateFunction:w,validateAbortSignal:x}=a.r(98730),{isIterable:y,isReadable:z,isReadableNodeStream:A,isNodeStream:B,isTransformStream:C,isWebStream:D,isReadableStream:E,isReadableFinished:F}=a.r(60127),G=globalThis.AbortController||a.r(68009).AbortController;function H(a,b,c){let d=!1;return a.on("close",()=>{d=!0}),{destroy:b=>{d||(d=!0,n.destroyer(a,b||new t("pipe")))},cleanup:l(a,{readable:b,writable:c},a=>{d=!a})}}function I(a){if(y(a))return a;if(A(a))return J(a);throw new q("val",["Readable","Iterable","AsyncIterable"],a)}async function*J(b){e||(e=a.r(56196)),yield*e.prototype[j].call(b)}async function K(a,b,c,{end:d}){let e,f=null,g=a=>{if(a&&(e=a),f){let a=f;f=null,a()}},h=()=>new i((a,b)=>{e?b(e):f=()=>{e?b(e):a()}});b.on("drain",g);let j=l(b,{readable:!1},g);try{for await(let c of(b.writableNeedDrain&&await h(),a))b.write(c)||await h();d&&(b.end(),await h()),c()}catch(a){c(e!==a?p(e,a):a)}finally{j(),b.off("drain",g)}}async function L(a,b,c,{end:d}){C(b)&&(b=b.writable);let e=b.getWriter();try{for await(let b of a)await e.ready,e.write(b).catch(()=>{});await e.ready,d&&await e.close(),c()}catch(a){try{await e.abort(a),c(a)}catch(a){c(a)}}}function M(b,c,e){let i,j,m,n;if(1===b.length&&h(b[0])&&(b=b[0]),b.length<2)throw new s("streams");let p=new G,t=p.signal,w=null==e?void 0:e.signal,J=[];function M(){Q(new v)}x(w,"options.signal"),f=f||a.r(30202).addAbortListener,w&&(i=f(w,M));let N=[],O=0;function P(a){Q(a,0==--O)}function Q(a,b){var d;if(a&&(!j||"ERR_STREAM_PREMATURE_CLOSE"===j.code)&&(j=a),j||b){for(;N.length;)N.shift()(j);null==(d=i)||d[k](),p.abort(),b&&(j||J.forEach(a=>a()),g.nextTick(c,j,m))}}for(let c=0;c<b.length;c++){let f=b[c],h=c<b.length-1,i=c>0,j=h||(null==e?void 0:e.end)!==!1,k=c===b.length-1;if(B(f)){if(j){let{destroy:a,cleanup:b}=H(f,h,i);N.push(a),z(f)&&k&&J.push(b)}function R(a){a&&"AbortError"!==a.name&&"ERR_STREAM_PREMATURE_CLOSE"!==a.code&&P(a)}f.on("error",R),z(f)&&k&&J.push(()=>{f.removeListener("error",R)})}if(0===c)if("function"==typeof f){if(!y(n=f({signal:t})))throw new r("Iterable, AsyncIterable or Stream","source",n)}else n=y(f)||A(f)||C(f)?f:o.from(f);else if("function"==typeof f){var S,T;if(n=f(n=C(n)?I(null==(S=n)?void 0:S.readable):I(n),{signal:t}),h){if(!y(n,!0))throw new r("AsyncIterable",`transform[${c-1}]`,n)}else{d||(d=a.r(26846));let b=new d({objectMode:!0}),c=null==(T=n)?void 0:T.then;if("function"==typeof c)O++,c.call(n,a=>{m=a,null!=a&&b.write(a),j&&b.end(),g.nextTick(P)},a=>{b.destroy(a),g.nextTick(P,a)});else if(y(n,!0))O++,K(n,b,P,{end:j});else if(E(n)||C(n)){let a=n.readable||n;O++,K(a,b,P,{end:j})}else throw new r("AsyncIterable or Promise","destination",n);let{destroy:e,cleanup:f}=H(n=b,!1,!0);N.push(e),k&&J.push(f)}}else if(B(f)){if(A(n)){O+=2;let a=function(a,b,c,{end:d}){let e=!1;if(b.on("close",()=>{e||c(new u)}),a.pipe(b,{end:!1}),d){function f(){e=!0,b.end()}F(a)?g.nextTick(f):a.once("end",f)}else c();return l(a,{readable:!0,writable:!1},b=>{let d=a._readableState;b&&"ERR_STREAM_PREMATURE_CLOSE"===b.code&&d&&d.ended&&!d.errored&&!d.errorEmitted?a.once("end",c).once("error",c):c(b)}),l(b,{readable:!1,writable:!0},c)}(n,f,P,{end:j});z(f)&&k&&J.push(a)}else if(C(n)||E(n)){let a=n.readable||n;O++,K(a,f,P,{end:j})}else if(y(n))O++,K(n,f,P,{end:j});else throw new q("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],n);n=f}else if(D(f)){if(A(n))O++,L(I(n),f,P,{end:j});else if(E(n)||y(n))O++,L(n,f,P,{end:j});else if(C(n))O++,L(n.readable,f,P,{end:j});else throw new q("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],n);n=f}else n=o.from(f)}return(null!=t&&t.aborted||null!=w&&w.aborted)&&g.nextTick(M),n}b.exports={pipelineImpl:M,pipeline:function(...a){return M(a,m((w(a[a.length-1],"streams[stream.length - 1]"),a.pop())))}}},98890,(a,b,c)=>{"use strict";let{pipeline:d}=a.r(97501),e=a.r(55727),{destroyer:f}=a.r(8309),{isNodeStream:g,isReadable:h,isWritable:i,isWebStream:j,isTransformStream:k,isWritableStream:l,isReadableStream:m}=a.r(60127),{AbortError:n,codes:{ERR_INVALID_ARG_VALUE:o,ERR_MISSING_ARGS:p}}=a.r(12722),q=a.r(2311);b.exports=function(...a){let b,c,r,s,t;if(0===a.length)throw new p("streams");if(1===a.length)return e.from(a[0]);let u=[...a];if("function"==typeof a[0]&&(a[0]=e.from(a[0])),"function"==typeof a[a.length-1]){let b=a.length-1;a[b]=e.from(a[b])}for(let b=0;b<a.length;++b)if(g(a[b])||j(a[b])){if(b<a.length-1&&!(h(a[b])||m(a[b])||k(a[b])))throw new o(`streams[${b}]`,u[b],"must be readable");if(b>0&&!(i(a[b])||l(a[b])||k(a[b])))throw new o(`streams[${b}]`,u[b],"must be writable")}let v=a[0],w=d(a,function(a){let b=s;s=null,b?b(a):a?t.destroy(a):y||x||t.destroy()}),x=!!(i(v)||l(v)||k(v)),y=!!(h(w)||m(w)||k(w));if(t=new e({writableObjectMode:!!(null!=v&&v.writableObjectMode),readableObjectMode:!!(null!=w&&w.readableObjectMode),writable:x,readable:y}),x){if(g(v))t._write=function(a,c,d){v.write(a,c)?d():b=d},t._final=function(a){v.end(),c=a},v.on("drain",function(){if(b){let a=b;b=null,a()}});else if(j(v)){let a=(k(v)?v.writable:v).getWriter();t._write=async function(b,c,d){try{await a.ready,a.write(b).catch(()=>{}),d()}catch(a){d(a)}},t._final=async function(b){try{await a.ready,a.close().catch(()=>{}),c=b}catch(a){b(a)}}}q(k(w)?w.readable:w,()=>{if(c){let a=c;c=null,a()}})}if(y){if(g(w))w.on("readable",function(){if(r){let a=r;r=null,a()}}),w.on("end",function(){t.push(null)}),t._read=function(){for(;;){let a=w.read();if(null===a){r=t._read;return}if(!t.push(a))return}};else if(j(w)){let a=(k(w)?w.readable:w).getReader();t._read=async function(){for(;;)try{let{value:b,done:c}=await a.read();if(!t.push(b))return;if(c)return void t.push(null)}catch{return}}}}return t._destroy=function(a,d){a||null===s||(a=new n),r=null,b=null,c=null,null===s?d(a):(s=d,g(w)&&f(w,a))},t}},2158,(a,b,c)=>{"use strict";let d=globalThis.AbortController||a.r(68009).AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:f,ERR_MISSING_ARGS:g,ERR_OUT_OF_RANGE:h},AbortError:i}=a.r(12722),{validateAbortSignal:j,validateInteger:k,validateObject:l}=a.r(98730),m=a.r(3494).Symbol("kWeak"),n=a.r(3494).Symbol("kResistStopPropagation"),{finished:o}=a.r(2311),p=a.r(98890),{addAbortSignalNoValidate:q}=a.r(23187),{isWritable:r,isNodeStream:s}=a.r(60127),{deprecate:t}=a.r(30202),{ArrayPrototypePush:u,Boolean:v,MathFloor:w,Number:x,NumberIsNaN:y,Promise:z,PromiseReject:A,PromiseResolve:B,PromisePrototypeThen:C,Symbol:D}=a.r(3494),E=D("kEmpty"),F=D("kEof");function G(b,c){if("function"!=typeof b)throw new f("fn",["Function","AsyncFunction"],b);null!=c&&l(c,"options"),(null==c?void 0:c.signal)!=null&&j(c.signal,"options.signal");let d=1;(null==c?void 0:c.concurrency)!=null&&(d=w(c.concurrency));let e=d-1;return(null==c?void 0:c.highWaterMark)!=null&&(e=w(c.highWaterMark)),k(d,"options.concurrency",1),k(e,"options.highWaterMark",0),e+=d,(async function*(){let f,g,h=a.r(30202).AbortSignalAny([null==c?void 0:c.signal].filter(v)),j=this,k=[],l={signal:h},m=!1,n=0;function o(){m=!0,p()}function p(){n-=1,q()}function q(){g&&!m&&n<d&&k.length<e&&(g(),g=null)}!async function(){try{for await(let a of j){if(m)return;if(h.aborted)throw new i;try{if((a=b(a,l))===E)continue;a=B(a)}catch(b){a=A(b)}n+=1,C(a,p,o),k.push(a),f&&(f(),f=null),!m&&(k.length>=e||n>=d)&&await new z(a=>{g=a})}k.push(F)}catch(b){let a=A(b);C(a,p,o),k.push(a)}finally{m=!0,f&&(f(),f=null)}}();try{for(;;){for(;k.length>0;){let a=await k[0];if(a===F)return;if(h.aborted)throw new i;a!==E&&(yield a),k.shift(),q()}await new z(a=>{f=a})}}finally{m=!0,g&&(g(),g=null)}}).call(this)}async function H(a,b){for await(let c of L.call(this,a,b))return!0;return!1}async function I(a,b){if("function"!=typeof a)throw new f("fn",["Function","AsyncFunction"],a);return!await H.call(this,async(...b)=>!await a(...b),b)}async function J(a,b){for await(let c of L.call(this,a,b))return c}async function K(a,b){if("function"!=typeof a)throw new f("fn",["Function","AsyncFunction"],a);async function c(b,c){return await a(b,c),E}for await(let a of G.call(this,c,b));}function L(a,b){if("function"!=typeof a)throw new f("fn",["Function","AsyncFunction"],a);async function c(b,c){return await a(b,c)?b:E}return G.call(this,c,b)}class M extends g{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function N(a,b,c){var e,g;if("function"!=typeof a)throw new f("reducer",["Function","AsyncFunction"],a);null!=c&&l(c,"options"),(null==c?void 0:c.signal)!=null&&j(c.signal,"options.signal");let h=arguments.length>1;if(null!=c&&null!=(e=c.signal)&&e.aborted){let a=new i(void 0,{cause:c.signal.reason});throw this.once("error",()=>{}),await o(this.destroy(a)),a}let k=new d,p=k.signal;null!=c&&c.signal&&c.signal.addEventListener("abort",()=>k.abort(),{once:!0,[m]:this,[n]:!0});let q=!1;try{for await(let d of this){if(q=!0,null!=c&&null!=(g=c.signal)&&g.aborted)throw new i;h?b=await a(b,d,{signal:p}):(b=d,h=!0)}if(!q&&!h)throw new M}finally{k.abort()}return b}async function O(a){null!=a&&l(a,"options"),(null==a?void 0:a.signal)!=null&&j(a.signal,"options.signal");let b=[];for await(let d of this){var c;if(null!=a&&null!=(c=a.signal)&&c.aborted)throw new i(void 0,{cause:a.signal.reason});u(b,d)}return b}function P(a){if(y(a=x(a)))return 0;if(a<0)throw new h("number",">= 0",a);return a}b.exports.streamReturningOperators={asIndexedPairs:t(function(a){return null!=a&&l(a,"options"),(null==a?void 0:a.signal)!=null&&j(a.signal,"options.signal"),(async function*(){let b=0;for await(let d of this){var c;if(null!=a&&null!=(c=a.signal)&&c.aborted)throw new i({cause:a.signal.reason});yield[b++,d]}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(a,b){return null!=b&&l(b,"options"),(null==b?void 0:b.signal)!=null&&j(b.signal,"options.signal"),a=P(a),(async function*(){var c,d;if(null!=b&&null!=(c=b.signal)&&c.aborted)throw new i;for await(let c of this){if(null!=b&&null!=(d=b.signal)&&d.aborted)throw new i;a--<=0&&(yield c)}}).call(this)},filter:L,flatMap:function(a,b){let c=G.call(this,a,b);return(async function*(){for await(let a of c)yield*a}).call(this)},map:G,take:function(a,b){return null!=b&&l(b,"options"),(null==b?void 0:b.signal)!=null&&j(b.signal,"options.signal"),a=P(a),(async function*(){var c,d;if(null!=b&&null!=(c=b.signal)&&c.aborted)throw new i;for await(let c of this){if(null!=b&&null!=(d=b.signal)&&d.aborted)throw new i;if(a-- >0&&(yield c),a<=0)return}}).call(this)},compose:function(a,b){if(null!=b&&l(b,"options"),(null==b?void 0:b.signal)!=null&&j(b.signal,"options.signal"),s(a)&&!r(a))throw new e("stream",a,"must be writable");let c=p(this,a);return null!=b&&b.signal&&q(b.signal,c),c}},b.exports.promiseReturningOperators={every:I,forEach:K,reduce:N,toArray:O,some:H,find:J}},40344,(a,b,c)=>{"use strict";let{ArrayPrototypePop:d,Promise:e}=a.r(3494),{isIterable:f,isNodeStream:g,isWebStream:h}=a.r(60127),{pipelineImpl:i}=a.r(97501),{finished:j}=a.r(2311);a.r(74927),b.exports={finished:j,pipeline:function(...a){return new e((b,c)=>{let e,j,k=a[a.length-1];if(k&&"object"==typeof k&&!g(k)&&!f(k)&&!h(k)){let b=d(a);e=b.signal,j=b.end}i(a,(a,d)=>{a?c(a):b(d)},{signal:e,end:j})})}}},74927,(a,b,c)=>{"use strict";let{Buffer:d}=a.r(874),{ObjectDefineProperty:e,ObjectKeys:f,ReflectApply:g}=a.r(3494),{promisify:{custom:h}}=a.r(30202),{streamReturningOperators:i,promiseReturningOperators:j}=a.r(2158),{codes:{ERR_ILLEGAL_CONSTRUCTOR:k}}=a.r(12722),l=a.r(98890),{setDefaultHighWaterMark:m,getDefaultHighWaterMark:n}=a.r(44099),{pipeline:o}=a.r(97501),{destroyer:p}=a.r(8309),q=a.r(2311),r=a.r(40344),s=a.r(60127),t=b.exports=a.r(40657).Stream;for(let b of(t.isDestroyed=s.isDestroyed,t.isDisturbed=s.isDisturbed,t.isErrored=s.isErrored,t.isReadable=s.isReadable,t.isWritable=s.isWritable,t.Readable=a.r(56196),f(i))){let a=i[b];function u(...b){if(new.target)throw k();return t.Readable.from(g(a,this,b))}e(u,"name",{__proto__:null,value:a.name}),e(u,"length",{__proto__:null,value:a.length}),e(t.Readable.prototype,b,{__proto__:null,value:u,enumerable:!1,configurable:!0,writable:!0})}for(let a of f(j)){let b=j[a];function v(...a){if(new.target)throw k();return g(b,this,a)}e(v,"name",{__proto__:null,value:b.name}),e(v,"length",{__proto__:null,value:b.length}),e(t.Readable.prototype,a,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}t.Writable=a.r(3036),t.Duplex=a.r(55727),t.Transform=a.r(51850),t.PassThrough=a.r(26846),t.pipeline=o;let{addAbortSignal:w}=a.r(23187);t.addAbortSignal=w,t.finished=q,t.destroy=p,t.compose=l,t.setDefaultHighWaterMark=m,t.getDefaultHighWaterMark=n,e(t,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>r}),e(o,h,{__proto__:null,enumerable:!0,get:()=>r.pipeline}),e(q,h,{__proto__:null,enumerable:!0,get:()=>r.finished}),t.Stream=t,t._isUint8Array=function(a){return a instanceof Uint8Array},t._uint8ArrayToBuffer=function(a){return d.from(a.buffer,a.byteOffset,a.byteLength)}},54838,(a,b,c)=>{"use strict";let d=a.r(88947);if(d&&"disable"===process.env.READABLE_STREAM){let a=d.promises;b.exports._uint8ArrayToBuffer=d._uint8ArrayToBuffer,b.exports._isUint8Array=d._isUint8Array,b.exports.isDisturbed=d.isDisturbed,b.exports.isErrored=d.isErrored,b.exports.isReadable=d.isReadable,b.exports.Readable=d.Readable,b.exports.Writable=d.Writable,b.exports.Duplex=d.Duplex,b.exports.Transform=d.Transform,b.exports.PassThrough=d.PassThrough,b.exports.addAbortSignal=d.addAbortSignal,b.exports.finished=d.finished,b.exports.destroy=d.destroy,b.exports.pipeline=d.pipeline,b.exports.compose=d.compose,Object.defineProperty(d,"promises",{configurable:!0,enumerable:!0,get:()=>a}),b.exports.Stream=d.Stream}else{let c=a.r(74927),d=a.r(40344),e=c.Readable.destroy;b.exports=c.Readable,b.exports._uint8ArrayToBuffer=c._uint8ArrayToBuffer,b.exports._isUint8Array=c._isUint8Array,b.exports.isDisturbed=c.isDisturbed,b.exports.isErrored=c.isErrored,b.exports.isReadable=c.isReadable,b.exports.Readable=c.Readable,b.exports.Writable=c.Writable,b.exports.Duplex=c.Duplex,b.exports.Transform=c.Transform,b.exports.PassThrough=c.PassThrough,b.exports.addAbortSignal=c.addAbortSignal,b.exports.finished=c.finished,b.exports.destroy=c.destroy,b.exports.destroy=e,b.exports.pipeline=c.pipeline,b.exports.compose=c.compose,Object.defineProperty(c,"promises",{configurable:!0,enumerable:!0,get:()=>d}),b.exports.Stream=c.Stream}b.exports.default=b.exports},6116,(a,b,c)=>{"function"==typeof Object.create?b.exports=function(a,b){b&&(a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(a,b){if(b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}}},17385,(a,b,c)=>{try{var d=a.r(24361);if("function"!=typeof d.inherits)throw"";b.exports=d.inherits}catch(c){b.exports=a.r(6116)}},81004,(a,b,c)=>{"use strict";let{Buffer:d}=a.r(874),e=Symbol.for("BufferList");function f(a){if(!(this instanceof f))return new f(a);f._init.call(this,a)}f._init=function(a){Object.defineProperty(this,e,{value:!0}),this._bufs=[],this.length=0,a&&this.append(a)},f.prototype._new=function(a){return new f(a)},f.prototype._offset=function(a){if(0===a)return[0,0];let b=0;for(let c=0;c<this._bufs.length;c++){let d=b+this._bufs[c].length;if(a<d||c===this._bufs.length-1)return[c,a-b];b=d}},f.prototype._reverseOffset=function(a){let b=a[0],c=a[1];for(let a=0;a<b;a++)c+=this._bufs[a].length;return c},f.prototype.getBuffers=function(){return this._bufs},f.prototype.get=function(a){if(a>this.length||a<0)return;let b=this._offset(a);return this._bufs[b[0]][b[1]]},f.prototype.slice=function(a,b){return"number"==typeof a&&a<0&&(a+=this.length),"number"==typeof b&&b<0&&(b+=this.length),this.copy(null,0,a,b)},f.prototype.copy=function(a,b,c,e){if(("number"!=typeof c||c<0)&&(c=0),("number"!=typeof e||e>this.length)&&(e=this.length),c>=this.length||e<=0)return a||d.alloc(0);let f=!!a,g=this._offset(c),h=e-c,i=h,j=f&&b||0,k=g[1];if(0===c&&e===this.length){if(!f)return 1===this._bufs.length?this._bufs[0]:d.concat(this._bufs,this.length);for(let b=0;b<this._bufs.length;b++)this._bufs[b].copy(a,j),j+=this._bufs[b].length;return a}if(i<=this._bufs[g[0]].length-k)return f?this._bufs[g[0]].copy(a,b,k,k+i):this._bufs[g[0]].slice(k,k+i);f||(a=d.allocUnsafe(h));for(let b=g[0];b<this._bufs.length;b++){let c=this._bufs[b].length-k;if(i>c)this._bufs[b].copy(a,j,k),j+=c;else{this._bufs[b].copy(a,j,k,k+i),j+=c;break}i-=c,k&&(k=0)}return a.length>j?a.slice(0,j):a},f.prototype.shallowSlice=function(a,b){if(a=a||0,b="number"!=typeof b?this.length:b,a<0&&(a+=this.length),b<0&&(b+=this.length),a===b)return this._new();let c=this._offset(a),d=this._offset(b),e=this._bufs.slice(c[0],d[0]+1);return 0===d[1]?e.pop():e[e.length-1]=e[e.length-1].slice(0,d[1]),0!==c[1]&&(e[0]=e[0].slice(c[1])),this._new(e)},f.prototype.toString=function(a,b,c){return this.slice(b,c).toString(a)},f.prototype.consume=function(a){if(Number.isNaN(a=Math.trunc(a))||a<=0)return this;for(;this._bufs.length;)if(a>=this._bufs[0].length)a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}return this},f.prototype.duplicate=function(){let a=this._new();for(let b=0;b<this._bufs.length;b++)a.append(this._bufs[b]);return a},f.prototype.append=function(a){return this._attach(a,f.prototype._appendBuffer)},f.prototype.prepend=function(a){return this._attach(a,f.prototype._prependBuffer,!0)},f.prototype._attach=function(a,b,c){if(null==a)return this;if(a.buffer)b.call(this,d.from(a.buffer,a.byteOffset,a.byteLength));else if(Array.isArray(a)){let[d,e]=c?[a.length-1,-1]:[0,1];for(let f=d;f>=0&&f<a.length;f+=e)this._attach(a[f],b,c)}else if(this._isBufferList(a)){let[d,e]=c?[a._bufs.length-1,-1]:[0,1];for(let f=d;f>=0&&f<a._bufs.length;f+=e)this._attach(a._bufs[f],b,c)}else"number"==typeof a&&(a=a.toString()),b.call(this,d.from(a));return this},f.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},f.prototype._prependBuffer=function(a){this._bufs.unshift(a),this.length+=a.length},f.prototype.indexOf=function(a,b,c){if(void 0===c&&"string"==typeof b&&(c=b,b=void 0),"function"==typeof a||Array.isArray(a))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof a?a=d.from([a]):"string"==typeof a?a=d.from(a,c):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=d.from(a.buffer,a.byteOffset,a.byteLength):d.isBuffer(a)||(a=d.from(a)),isNaN(b=Number(b||0))&&(b=0),b<0&&(b=this.length+b),b<0&&(b=0),0===a.length)return b>this.length?this.length:b;let e=this._offset(b),f=e[0],g=e[1];for(;f<this._bufs.length;f++){let b=this._bufs[f];for(;g<b.length;)if(b.length-g>=a.length){let c=b.indexOf(a,g);if(-1!==c)return this._reverseOffset([f,c]);g=b.length-a.length+1}else{let b=this._reverseOffset([f,g]);if(this._match(b,a))return b;g++}g=0}return -1},f.prototype._match=function(a,b){if(this.length-a<b.length)return!1;for(let c=0;c<b.length;c++)if(this.get(a+c)!==b[c])return!1;return!0};let g={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let a in g)!function(a){null===g[a]?f.prototype[a]=function(b,c){return this.slice(b,b+c)[a](0,c)}:f.prototype[a]=function(b=0){return this.slice(b,b+g[a])[a](0)}}(a);f.prototype._isBufferList=function(a){return a instanceof f||f.isBufferList(a)},f.isBufferList=function(a){return null!=a&&a[e]},b.exports=f},32173,(a,b,c)=>{"use strict";let d=a.r(54838).Duplex,e=a.r(17385),f=a.r(81004);function g(a){if(!(this instanceof g))return new g(a);if("function"==typeof a){this._callback=a;let b=(function(a){this._callback&&(this._callback(a),this._callback=null)}).bind(this);this.on("pipe",function(a){a.on("error",b)}),this.on("unpipe",function(a){a.removeListener("error",b)}),a=null}f._init.call(this,a),d.call(this)}e(g,d),Object.assign(g.prototype,f.prototype),g.prototype._new=function(a){return new g(a)},g.prototype._write=function(a,b,c){this._appendBuffer(a),"function"==typeof c&&c()},g.prototype._read=function(a){if(!this.length)return this.push(null);a=Math.min(a,this.length),this.push(this.slice(0,a)),this.consume(a)},g.prototype.end=function(a){d.prototype.end.call(this,a),this._callback&&(this._callback(null,this.slice()),this._callback=null)},g.prototype._destroy=function(a,b){this._bufs.length=0,this.length=0,b(a)},g.prototype._isBufferList=function(a){return a instanceof g||a instanceof f||g.isBufferList(a)},g.isBufferList=f.isBufferList,b.exports=g,b.exports.BufferListStream=g,b.exports.BufferList=f},47375,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=i(a.r(32173)),e=a.r(88947),f=i(a.r(67589)),g=a.r(85349),h=a.r(57602);function i(a){return a&&a.__esModule?a:{default:a}}class j extends e.Transform{constructor(a){super({readableObjectMode:!0}),this.debug=a,this.currentMessage=void 0,this.bl=new d.default}pause(){return super.pause(),this.currentMessage&&this.currentMessage.pause(),this}resume(){return super.resume(),this.currentMessage&&this.currentMessage.resume(),this}processBufferedData(a){for(;this.bl.length>=g.HEADER_LENGTH;){let b=this.bl.readUInt16BE(2);if(b<g.HEADER_LENGTH)return a(new h.ConnectionError("Unable to process incoming packet"));if(this.bl.length>=b){let c=this.bl.slice(0,b);this.bl.consume(b);let d=new g.Packet(c);this.debug.packet("Received",d),this.debug.data(d);let e=this.currentMessage;if(void 0===e&&(this.currentMessage=e=new f.default({type:d.type(),resetConnection:!1}),this.push(e)),d.isLast()){e.once("end",()=>{this.currentMessage=void 0,this.processBufferedData(a)}),e.end(d.data());return}if(!e.write(d.data()))return void e.once("drain",()=>{this.processBufferedData(a)})}else break}a()}_transform(a,b,c){this.bl.append(a),this.processBufferedData(c)}}c.default=j,b.exports=j},69817,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(32173))&&d.__esModule?d:{default:d},f=a.r(88947),g=a.r(85349);class h extends f.Duplex{constructor(a,{packetSize:b}){super({writableObjectMode:!0}),this.packetSize=b,this.debug=a,this.bl=new e.default,this.on("finish",()=>{this.push(null)})}_write(a,b,c){let d=this.packetSize-g.HEADER_LENGTH,e=0;this.currentMessage=a,this.currentMessage.on("data",b=>{if(!a.ignore)for(this.bl.append(b);this.bl.length>d;){let b=this.bl.slice(0,d);this.bl.consume(d);let c=new g.Packet(a.type);c.packetId(e+=1),c.resetConnection(a.resetConnection),c.addData(b),this.debug.packet("Sent",c),this.debug.data(c),!1===this.push(c.buffer)&&a.pause()}}),this.currentMessage.on("end",()=>{let b=this.bl.slice();this.bl.consume(b.length);let d=new g.Packet(a.type);d.packetId(e+=1),d.resetConnection(a.resetConnection),d.last(!0),d.ignore(a.ignore),d.addData(b),this.debug.packet("Sent",d),this.debug.data(d),this.push(d.buffer),this.currentMessage=void 0,c()})}_read(a){this.currentMessage&&this.currentMessage.resume()}}c.default=h,b.exports=h},86137,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=l(a.r(29376)),e=k(a.r(55004)),f=a.r(27699),g=l(a.r(67589)),h=a.r(85349),i=l(a.r(47375)),j=l(a.r(69817));function k(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(k=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}function l(a){return a&&a.__esModule?a:{default:a}}class m extends f.EventEmitter{constructor(a,b,c){super(),this.socket=a,this.debug=c,this.tlsNegotiationComplete=!1,this.incomingMessageStream=new i.default(this.debug),this.incomingMessageIterator=this.incomingMessageStream[Symbol.asyncIterator](),this.outgoingMessageStream=new j.default(this.debug,{packetSize:b}),this.socket.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(this.socket)}packetSize(...a){if(a.length>0){let b=a[0];this.debug.log("Packet size changed from "+this.outgoingMessageStream.packetSize+" to "+b),this.outgoingMessageStream.packetSize=b}return this.securePair&&this.securePair.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.packetSize}startTls(a,b,c){a.maxVersion&&["TLSv1.2","TLSv1.1","TLSv1"].includes(a.maxVersion)||(a.maxVersion="TLSv1.2");let f=e.createSecureContext(a);return new Promise((a,i)=>{let j=new d.default,k=this.securePair={cleartext:e.connect({socket:j.socket1,servername:b,secureContext:f,rejectUnauthorized:!c}),encrypted:j.socket2},l=()=>{k.encrypted.removeListener("readable",n),k.cleartext.removeListener("error",m),k.cleartext.removeListener("secureConnect",l),k.cleartext.once("error",a=>{this.socket.destroy(a)});let b=k.cleartext.getCipher();b&&this.debug.log("TLS negotiated ("+b.name+", "+b.version+")"),this.emit("secure",k.cleartext),k.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.unpipe(this.socket),this.socket.unpipe(this.incomingMessageStream),this.socket.pipe(k.encrypted),k.encrypted.pipe(this.socket),k.cleartext.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(k.cleartext),this.tlsNegotiationComplete=!0,a()},m=a=>{k.encrypted.removeListener("readable",n),k.cleartext.removeListener("error",m),k.cleartext.removeListener("secureConnect",l),k.cleartext.destroy(),k.encrypted.destroy(),i(a)},n=()=>{let a,b=new g.default({type:h.TYPE.PRELOGIN,resetConnection:!1});for(;a=k.encrypted.read();)b.write(a);this.outgoingMessageStream.write(b),b.end(),this.readMessage().then(async a=>{for await(let b of(k.encrypted.once("readable",n),a))k.encrypted.write(b)}).catch(m)};k.cleartext.once("error",m),k.cleartext.once("secureConnect",l),k.encrypted.once("readable",n)})}sendMessage(a,b,c){let d=new g.default({type:a,resetConnection:c});return d.end(b),this.outgoingMessageStream.write(d),d}async readMessage(){let a=await this.incomingMessageIterator.next();if(a.done)throw Error("unexpected end of message stream");return a.value}}c.default=m,b.exports=m},13560,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.codepageBySortId=c.codepageByLanguageId=c.Flags=c.Collation=void 0;let d=c.codepageByLanguageId={1025:"CP1256",1028:"CP950",1029:"CP1250",1030:"CP1252",1032:"CP1253",1033:"CP1252",1034:"CP1252",1035:"CP1252",1036:"CP1252",1037:"CP1255",1038:"CP1250",1039:"CP1252",1041:"CP932",1042:"CP949",1044:"CP1252",1045:"CP1250",1047:"CP1252",1048:"CP1250",1049:"CP1251",1050:"CP1250",1051:"CP1250",1052:"CP1250",1054:"CP874",1055:"CP1254",1056:"CP1256",1058:"CP1251",1060:"CP1250",1061:"CP1257",1062:"CP1257",1063:"CP1257",1065:"CP1256",1066:"CP1258",1068:"CP1254",1070:"CP1252",1071:"CP1251",1083:"CP1252",1087:"CP1251",1090:"CP1250",1091:"CP1254",1092:"CP1251",1106:"CP1252",1122:"CP1252",1133:"CP1251",1146:"CP1252",1148:"CP1252",1150:"CP1252",1152:"CP1256",1155:"CP1252",1157:"CP1251",1164:"CP1256",2052:"CP936",2074:"CP1250",2092:"CP1251",2107:"CP1252",2143:"CP1252",3076:"CP950",3082:"CP1252",3098:"CP1251",5124:"CP950",5146:"CP1250",8218:"CP1251",1031:"CP1252",1079:"CP1252"},e=c.codepageBySortId={30:"CP437",31:"CP437",32:"CP437",33:"CP437",34:"CP437",40:"CP850",41:"CP850",42:"CP850",43:"CP850",44:"CP850",49:"CP850",51:"CP1252",52:"CP1252",53:"CP1252",54:"CP1252",55:"CP850",56:"CP850",57:"CP850",58:"CP850",59:"CP850",60:"CP850",61:"CP850",80:"CP1250",81:"CP1250",82:"CP1250",83:"CP1250",84:"CP1250",85:"CP1250",86:"CP1250",87:"CP1250",88:"CP1250",89:"CP1250",90:"CP1250",91:"CP1250",92:"CP1250",93:"CP1250",94:"CP1250",95:"CP1250",96:"CP1250",104:"CP1251",105:"CP1251",106:"CP1251",107:"CP1251",108:"CP1251",112:"CP1253",113:"CP1253",114:"CP1253",120:"CP1253",121:"CP1253",122:"CP1253",124:"CP1253",128:"CP1254",129:"CP1254",130:"CP1254",136:"CP1255",137:"CP1255",138:"CP1255",144:"CP1256",145:"CP1256",146:"CP1256",152:"CP1257",153:"CP1257",154:"CP1257",155:"CP1257",156:"CP1257",157:"CP1257",158:"CP1257",159:"CP1257",160:"CP1257",183:"CP1252",184:"CP1252",185:"CP1252",186:"CP1252"},f=c.Flags={IGNORE_CASE:1,IGNORE_ACCENT:2,IGNORE_KANA:4,IGNORE_WIDTH:8,BINARY:16,BINARY2:32,UTF8:64};c.Collation=class{static fromBuffer(a,b=0){let c=(15&a[b+2])<<16;c|=a[b+1]<<8,c|=a[b+0];let d=(15&a[b+3])<<4;return new this(c,d|=(240&a[b+2])>>>4,(240&a[b+3])>>>4,a[b+4])}constructor(a,b,c,g){if(this.buffer=void 0,this.lcid=a,this.flags=b,this.version=c,this.sortId=g,this.flags&f.UTF8)this.codepage="utf-8";else if(this.sortId)this.codepage=e[this.sortId];else{const a=65535&this.lcid;this.codepage=d[a]}}toBuffer(){return this.buffer||(this.buffer=Buffer.alloc(5),this.buffer[0]=255&this.lcid,this.buffer[1]=this.lcid>>>8&255,this.buffer[2]=this.lcid>>>16&15|(15&this.flags)<<4,this.buffer[3]=(240&this.flags)>>>4|(15&this.version)<<4,this.buffer[4]=255&this.sortId),this.buffer}}},94920,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:31,type:"NULL",name:"Null",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},61468,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:38,type:"INTN",name:"IntN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},10584,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(61468))&&d.__esModule?d:{default:d};let f=Buffer.from([1]),g=Buffer.from([0]),h={id:48,type:"INT1",name:"TinyInt",declaration:function(){return"tinyint"},generateTypeInfo:()=>Buffer.from([e.default.id,1]),generateParameterLength:(a,b)=>null==a.value?g:f,*generateParameterData(a,b){if(null==a.value)return;let c=Buffer.alloc(1);c.writeUInt8(Number(a.value),0),yield c},validate:function(a){if(null==a)return null;if("number"!=typeof a&&(a=Number(a)),isNaN(a))throw TypeError("Invalid number.");if(a<0||a>255)throw TypeError("Value must be between 0 and 255, inclusive.");return 0|a}};c.default=h,b.exports=h},54166,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:104,type:"BITN",name:"BitN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},*generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},15441,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(54166))&&d.__esModule?d:{default:d};let f=Buffer.from([1]),g=Buffer.from([0]),h={id:50,type:"BIT",name:"Bit",declaration:function(){return"bit"},generateTypeInfo:()=>Buffer.from([e.default.id,1]),generateParameterLength:(a,b)=>null==a.value?g:f,*generateParameterData(a,b){null!=a.value&&(yield a.value?Buffer.from([1]):Buffer.from([0]))},validate:function(a){return null==a?null:!!a}};c.default=h,b.exports=h},17223,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(61468))&&d.__esModule?d:{default:d};let f=Buffer.from([2]),g=Buffer.from([0]),h={id:52,type:"INT2",name:"SmallInt",declaration:function(){return"smallint"},generateTypeInfo:()=>Buffer.from([e.default.id,2]),generateParameterLength:(a,b)=>null==a.value?g:f,*generateParameterData(a,b){if(null==a.value)return;let c=Buffer.alloc(2);c.writeInt16LE(Number(a.value),0),yield c},validate:function(a){if(null==a)return null;if("number"!=typeof a&&(a=Number(a)),isNaN(a))throw TypeError("Invalid number.");if(a<-32768||a>32767)throw TypeError("Value must be between -32768 and 32767, inclusive.");return 0|a}};c.default=h,b.exports=h},35018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(61468))&&d.__esModule?d:{default:d};let f=Buffer.from([0]),g=Buffer.from([4]),h={id:56,type:"INT4",name:"Int",declaration:function(){return"int"},generateTypeInfo:()=>Buffer.from([e.default.id,4]),generateParameterLength:(a,b)=>null==a.value?f:g,*generateParameterData(a,b){if(null==a.value)return;let c=Buffer.alloc(4);c.writeInt32LE(Number(a.value),0),yield c},validate:function(a){if(null==a)return null;if("number"!=typeof a&&(a=Number(a)),isNaN(a))throw TypeError("Invalid number.");if(a<-0x80000000||a>0x7fffffff)throw TypeError("Value must be between -2147483648 and 2147483647, inclusive.");return 0|a}};c.default=h,b.exports=h},39666,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:111,type:"DATETIMN",name:"DateTimeN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},82243,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(39666))&&d.__esModule?d:{default:d};let f=new Date(1900,0,1),g=new Date(Date.UTC(1900,0,1)),h=Buffer.from([4]),i=Buffer.from([0]),j={id:58,type:"DATETIM4",name:"SmallDateTime",declaration:function(){return"smalldatetime"},generateTypeInfo:()=>Buffer.from([e.default.id,4]),generateParameterLength:(a,b)=>null==a.value?i:h,generateParameterData:function*(a,b){let c,d,e;if(null==a.value)return;let h=Buffer.alloc(4);b.useUTC?(c=Math.floor((a.value.getTime()-g.getTime())/864e5),e=60*a.value.getUTCHours()+a.value.getUTCMinutes()):(d=-(1e3*(60*(a.value.getTimezoneOffset()-f.getTimezoneOffset()))),c=Math.floor((a.value.getTime()-f.getTime()+d)/864e5),e=60*a.value.getHours()+a.value.getMinutes()),h.writeUInt16LE(c,0),h.writeUInt16LE(e,2),yield h},validate:function(a,b,c){let d,e,f;if(null==a)return null;if(a instanceof Date||(a=new Date(Date.parse(a))),c&&c.useUTC?(d=a.getUTCFullYear(),e=a.getUTCMonth(),f=a.getUTCDate()):(d=a.getFullYear(),e=a.getMonth(),f=a.getDate()),d<1900||d>2079||2079===d&&(e>5||5===e&&f>6))throw TypeError("Out of range.");if(isNaN(a))throw TypeError("Invalid date.");return a}};c.default=j,b.exports=j},77894,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:109,type:"FLTN",name:"FloatN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},55931,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(77894))&&d.__esModule?d:{default:d};let f=Buffer.from([0]),g=Buffer.from([4]),h={id:59,type:"FLT4",name:"Real",declaration:function(){return"real"},generateTypeInfo:()=>Buffer.from([e.default.id,4]),generateParameterLength:(a,b)=>null==a.value?f:g,*generateParameterData(a,b){if(null==a.value)return;let c=Buffer.alloc(4);c.writeFloatLE(parseFloat(a.value),0),yield c},validate:function(a){if(null==a)return null;if(isNaN(a=parseFloat(a)))throw TypeError("Invalid number.");return a}};c.default=h,b.exports=h},88753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:110,type:"MONEYN",name:"MoneyN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},68315,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(88753))&&d.__esModule?d:{default:d};let f=Buffer.from([0]),g=Buffer.from([8]),h={id:60,type:"MONEY",name:"Money",declaration:function(){return"money"},generateTypeInfo:function(){return Buffer.from([e.default.id,8])},generateParameterLength:(a,b)=>null==a.value?f:g,*generateParameterData(a,b){if(null==a.value)return;let c=1e4*a.value,d=Buffer.alloc(8);d.writeInt32LE(Math.floor(23283064365386963e-26*c),0),d.writeInt32LE(-1&c,4),yield d},validate:function(a){if(null==a)return null;if(isNaN(a=parseFloat(a)))throw TypeError("Invalid number.");if(a<-922337203685477.6||a>922337203685477.6)throw TypeError("Value must be between -922337203685477.5808 and 922337203685477.5807, inclusive.");return a}};c.default=h,b.exports=h},2465,a=>{"use strict";function b(a,b,c){function d(a){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=a,b&&b.apply(this,arguments),this.toString=function(){return this.name+": "+this.message}}return void 0===c&&(c=Error),d.prototype=Object.create(c.prototype),d.prototype.name=a,d.prototype.constructor=d,d}var c,d,e,f,g,h,i=b("DateTimeException",function(a,b){void 0===b&&(b=null);var c=a||this.name;null!==b&&b instanceof Error&&(c+="\n-------\nCaused by: "+b.stack+"\n-------\n"),this.message=c}),j=b("DateTimeParseException",function(a,b,c,d){void 0===b&&(b=""),void 0===c&&(c=0),void 0===d&&(d=null);var e=a||this.name;e+=": "+b+", at index: "+c,null!==d&&d instanceof Error&&(e+="\n-------\nCaused by: "+d.stack+"\n-------\n"),this.message=e,this.parsedString=function(){return b},this.errorIndex=function(){return c}}),k=b("UnsupportedTemporalTypeException",null,i),l=b("ArithmeticException"),m=b("IllegalArgumentException"),n=b("IllegalStateException"),o=b("NullPointerException");function p(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,q(a,b)}function q(a,b){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function r(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function s(a,b,c){if(!a)if(c)throw new c(b);else throw Error(b)}function t(a,b){if(null==a)throw new o(b+" must not be null");return a}function u(a,b,c){if(!(a instanceof b))throw new m(c+" must be an instance of "+(b.name?b.name:b)+(a&&a.constructor&&a.constructor.name?", but is "+a.constructor.name:""));return a}function v(a){throw TypeError('abstract method "'+a+'" is not implemented')}var w=Object.freeze({__proto__:null,abstractMethodFail:v,assert:s,requireInstance:u,requireNonNull:t}),x=function(){function a(){}return a.intDiv=function(b,c){var d=b/c;return d=a.roundDown(d),a.safeZero(d)},a.intMod=function(b,c){var d=b-a.intDiv(b,c)*c;return d=a.roundDown(d),a.safeZero(d)},a.roundDown=function(a){return a<0?Math.ceil(a):Math.floor(a)},a.floorDiv=function(b,c){var d=Math.floor(b/c);return a.safeZero(d)},a.floorMod=function(b,c){var d=b-a.floorDiv(b,c)*c;return a.safeZero(d)},a.safeAdd=function(b,c){if(a.verifyInt(b),a.verifyInt(c),0===b)return a.safeZero(c);if(0===c)return a.safeZero(b);var d=a.safeToInt(b+c);if(d===b||d===c)throw new l("Invalid addition beyond MAX_SAFE_INTEGER!");return d},a.safeSubtract=function(b,c){return(a.verifyInt(b),a.verifyInt(c),0===b&&0===c)?0:0===b?a.safeZero(-1*c):0===c?a.safeZero(b):a.safeToInt(b-c)},a.safeMultiply=function(b,c){if(a.verifyInt(b),a.verifyInt(c),1===b)return a.safeZero(c);if(1===c)return a.safeZero(b);if(0===b||0===c)return 0;var d=a.safeToInt(b*c);if(d/c!==b||-0x1fffffffffffff===b&&-1===c||-0x1fffffffffffff===c&&-1===b)throw new l("Multiplication overflows: "+b+" * "+c);return d},a.parseInt=function(a){function b(b){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(b){var c=parseInt(b);return a.safeToInt(c)}),a.safeToInt=function(b){return a.verifyInt(b),a.safeZero(b)},a.verifyInt=function(a){if(null==a)throw new l("Invalid value: '"+a+"', using null or undefined as argument");if(isNaN(a))throw new l("Invalid int value, using NaN as argument");if(Number.isInteger){if(!Number.isInteger(Number(a)))throw new l("Invalid value: '"+a+"' is a float")}else if(a%1!=0)throw new l("Invalid value: '"+a+"' is a float");if(a>0x1fffffffffffff||a<-0x1fffffffffffff)throw new l("Calculation overflows an int: "+a)},a.safeZero=function(a){return 0===a?0:+a},a.compareNumbers=function(a,b){return a<b?-1:+(a>b)},a.smi=function(a){return a>>>1&0x40000000|0xbfffffff&a},a.hash=function(b){if(b!=b||b===1/0)return 0;for(var c=b;b>0xffffffff;)b/=0xffffffff,c^=b;return a.smi(c)},a.hashCode=function(){for(var b=17,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];for(var f=0;f<d.length;f++){var g=d[f];b=(b<<5)-b+a.hash(g)}return a.hash(b)},a}();x.MAX_SAFE_INTEGER=0x1fffffffffffff,x.MIN_SAFE_INTEGER=-0x1fffffffffffff;var y=function(){function a(a){this._name=a}var b=a.prototype;return b.equals=function(a){return this===a},b.toString=function(){return this._name},b.toJSON=function(){return this.toString()},a}(),z=function(){function a(){}var b=a.prototype;return b.get=function(a){v("get")},b.units=function(){v("units")},b.addTo=function(a){v("addTo")},b.subtractFrom=function(a){v("subtractFrom")},a}();"undefined"!=typeof Symbol&&Symbol.toPrimitive&&(z.prototype[Symbol.toPrimitive]=function(a){if("number"!==a)return this.toString();throw TypeError("A conversion from TemporalAmount to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var A=function(){function a(){}var b=a.prototype;return b.duration=function(){v("duration")},b.isDurationEstimated=function(){v("isDurationEstimated")},b.isDateBased=function(){v("isDateBased")},b.isTimeBased=function(){v("isTimeBased")},b.isSupportedBy=function(a){v("isSupportedBy")},b.addTo=function(a,b){v("addTo")},b.between=function(a,b){v("between")},a}(),B=function(a){function b(b,c){var d;return(d=a.call(this)||this)._seconds=x.safeToInt(b),d._nanos=x.safeToInt(c),d}p(b,a),b.ofDays=function(a){return b._create(x.safeMultiply(a,a4.SECONDS_PER_DAY),0)},b.ofHours=function(a){return b._create(x.safeMultiply(a,a4.SECONDS_PER_HOUR),0)},b.ofMinutes=function(a){return b._create(x.safeMultiply(a,a4.SECONDS_PER_MINUTE),0)},b.ofSeconds=function(a,c){void 0===c&&(c=0);var d=x.safeAdd(a,x.floorDiv(c,a4.NANOS_PER_SECOND)),e=x.floorMod(c,a4.NANOS_PER_SECOND);return b._create(d,e)},b.ofMillis=function(a){var c=x.intDiv(a,1e3),d=x.intMod(a,1e3);return d<0&&(d+=1e3,c--),b._create(c,1e6*d)},b.ofNanos=function(a){var b=x.intDiv(a,a4.NANOS_PER_SECOND),c=x.intMod(a,a4.NANOS_PER_SECOND);return c<0&&(c+=a4.NANOS_PER_SECOND,b--),this._create(b,c)},b.of=function(a,c){return b.ZERO.plus(a,c)},b.from=function(a){t(a,"amount"),u(a,z);var c=b.ZERO;return a.units().forEach(function(b){c=c.plus(a.get(b),b)}),c},b.between=function(a,b){t(a,"startInclusive"),t(b,"endExclusive");var c=a.until(b,D.SECONDS),d=0;if(a.isSupported(G.NANO_OF_SECOND)&&b.isSupported(G.NANO_OF_SECOND))try{var e=a.getLong(G.NANO_OF_SECOND);if(d=b.getLong(G.NANO_OF_SECOND)-e,c>0&&d<0)d+=a4.NANOS_PER_SECOND;else if(c<0&&d>0)d-=a4.NANOS_PER_SECOND;else if(0===c&&0!==d){var f=b.with(G.NANO_OF_SECOND,e);c=a.until(f,D.SECONDS)}}catch(a){}return this.ofSeconds(c,d)},b.parse=function(a){t(a,"text");var c=RegExp("([-+]?)P(?:([-+]?[0-9]+)D)?(T(?:([-+]?[0-9]+)H)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)(?:[.,]([0-9]{0,9}))?S)?)?","i").exec(a);if(null!==c&&"T"===c[3]==!1){var d="-"===c[1],e=c[2],f=c[4],g=c[5],h=c[6],i=c[7];if(null!=e||null!=f||null!=g||null!=h){var k=b._parseNumber(a,e,a4.SECONDS_PER_DAY,"days"),l=b._parseNumber(a,f,a4.SECONDS_PER_HOUR,"hours"),m=b._parseNumber(a,g,a4.SECONDS_PER_MINUTE,"minutes"),n=b._parseNumber(a,h,1,"seconds"),o=null!=h&&"-"===h.charAt(0),p=b._parseFraction(a,i,o?-1:1);try{return b._create(d,k,l,m,n,p)}catch(b){throw new j("Text cannot be parsed to a Duration: overflow",a,0,b)}}}throw new j("Text cannot be parsed to a Duration",a,0)},b._parseNumber=function(a,b,c,d){if(null==b)return 0;try{return"+"===b[0]&&(b=b.substring(1)),x.safeMultiply(parseFloat(b),c)}catch(b){throw new j("Text cannot be parsed to a Duration: "+d,a,0,b)}},b._parseFraction=function(a,b,c){return null==b||0===b.length?0:parseFloat(b=(b+"000000000").substring(0,9))*c},b._create=function(){return arguments.length<=2?b._createSecondsNanos(arguments[0],arguments[1]):b._createNegateDaysHoursMinutesSecondsNanos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},b._createNegateDaysHoursMinutesSecondsNanos=function(a,c,d,e,f,g){var h=x.safeAdd(c,x.safeAdd(d,x.safeAdd(e,f)));return a?b.ofSeconds(h,g).negated():b.ofSeconds(h,g)},b._createSecondsNanos=function(a,c){return(void 0===a&&(a=0),void 0===c&&(c=0),0===a&&0===c)?b.ZERO:new b(a,c)};var c=b.prototype;return c.get=function(a){if(a===D.SECONDS)return this._seconds;if(a===D.NANOS)return this._nanos;throw new k("Unsupported unit: "+a)},c.units=function(){return[D.SECONDS,D.NANOS]},c.isZero=function(){return 0===this._seconds&&0===this._nanos},c.isNegative=function(){return this._seconds<0},c.seconds=function(){return this._seconds},c.nano=function(){return this._nanos},c.withSeconds=function(a){return b._create(a,this._nanos)},c.withNanos=function(a){return G.NANO_OF_SECOND.checkValidIntValue(a),b._create(this._seconds,a)},c.plusDuration=function(a){return t(a,"duration"),this.plus(a.seconds(),a.nano())},c.plus=function(a,b){return 1==arguments.length?this.plusDuration(a):2==arguments.length&&b instanceof A?this.plusAmountUnit(a,b):this.plusSecondsNanos(a,b)},c.plusAmountUnit=function(a,b){if(t(a,"amountToAdd"),t(b,"unit"),b===D.DAYS)return this.plusSecondsNanos(x.safeMultiply(a,a4.SECONDS_PER_DAY),0);if(b.isDurationEstimated())throw new k("Unit must not have an estimated duration");if(0===a)return this;if(b instanceof D){switch(b){case D.NANOS:return this.plusNanos(a);case D.MICROS:return this.plusSecondsNanos(1e3*x.intDiv(a,1e9),1e3*x.intMod(a,1e9));case D.MILLIS:return this.plusMillis(a);case D.SECONDS:return this.plusSeconds(a)}return this.plusSecondsNanos(x.safeMultiply(b.duration().seconds(),a),0)}var c=b.duration().multipliedBy(a);return this.plusSecondsNanos(c.seconds(),c.nano())},c.plusDays=function(a){return this.plusSecondsNanos(x.safeMultiply(a,a4.SECONDS_PER_DAY),0)},c.plusHours=function(a){return this.plusSecondsNanos(x.safeMultiply(a,a4.SECONDS_PER_HOUR),0)},c.plusMinutes=function(a){return this.plusSecondsNanos(x.safeMultiply(a,a4.SECONDS_PER_MINUTE),0)},c.plusSeconds=function(a){return this.plusSecondsNanos(a,0)},c.plusMillis=function(a){return this.plusSecondsNanos(x.intDiv(a,1e3),1e6*x.intMod(a,1e3))},c.plusNanos=function(a){return this.plusSecondsNanos(0,a)},c.plusSecondsNanos=function(a,c){if(t(a,"secondsToAdd"),t(c,"nanosToAdd"),0===a&&0===c)return this;var d=x.safeAdd(this._seconds,a);d=x.safeAdd(d,x.intDiv(c,a4.NANOS_PER_SECOND)),c=x.intMod(c,a4.NANOS_PER_SECOND);var e=x.safeAdd(this._nanos,c);return b.ofSeconds(d,e)},c.minus=function(a,b){return 1==arguments.length?this.minusDuration(a):this.minusAmountUnit(a,b)},c.minusDuration=function(a){t(a,"duration");var b=a.seconds(),c=a.nano();return -0x1fffffffffffff===b?this.plus(0x1fffffffffffff,-c):this.plus(-b,-c)},c.minusAmountUnit=function(a,b){return t(a,"amountToSubtract"),t(b,"unit"),-0x1fffffffffffff===a?this.plusAmountUnit(0x1fffffffffffff,b):this.plusAmountUnit(-a,b)},c.minusDays=function(a){return -0x1fffffffffffff===a?this.plusDays(0x1fffffffffffff):this.plusDays(-a)},c.minusHours=function(a){return -0x1fffffffffffff===a?this.plusHours(0x1fffffffffffff):this.plusHours(-a)},c.minusMinutes=function(a){return -0x1fffffffffffff===a?this.plusMinutes(0x1fffffffffffff):this.plusMinutes(-a)},c.minusSeconds=function(a){return -0x1fffffffffffff===a?this.plusSeconds(0x1fffffffffffff):this.plusSeconds(-a)},c.minusMillis=function(a){return -0x1fffffffffffff===a?this.plusMillis(0x1fffffffffffff):this.plusMillis(-a)},c.minusNanos=function(a){return -0x1fffffffffffff===a?this.plusNanos(0x1fffffffffffff):this.plusNanos(-a)},c.multipliedBy=function(a){if(0===a)return b.ZERO;if(1===a)return this;var c=x.safeMultiply(this._seconds,a),d=x.safeMultiply(this._nanos,a);return c+=x.intDiv(d,a4.NANOS_PER_SECOND),d=x.intMod(d,a4.NANOS_PER_SECOND),b.ofSeconds(c,d)},c.dividedBy=function(a){if(0===a)throw new l("Cannot divide by zero");if(1===a)return this;var c=x.intDiv(this._seconds,a),d=x.roundDown((this._seconds/a-c)*a4.NANOS_PER_SECOND),e=x.intDiv(this._nanos,a);return e=d+e,b.ofSeconds(c,e)},c.negated=function(){return this.multipliedBy(-1)},c.abs=function(){return this.isNegative()?this.negated():this},c.addTo=function(a){return t(a,"temporal"),0!==this._seconds&&(a=a.plus(this._seconds,D.SECONDS)),0!==this._nanos&&(a=a.plus(this._nanos,D.NANOS)),a},c.subtractFrom=function(a){return t(a,"temporal"),0!==this._seconds&&(a=a.minus(this._seconds,D.SECONDS)),0!==this._nanos&&(a=a.minus(this._nanos,D.NANOS)),a},c.toDays=function(){return x.intDiv(this._seconds,a4.SECONDS_PER_DAY)},c.toHours=function(){return x.intDiv(this._seconds,a4.SECONDS_PER_HOUR)},c.toMinutes=function(){return x.intDiv(this._seconds,a4.SECONDS_PER_MINUTE)},c.toMillis=function(){var a=Math.round(x.safeMultiply(this._seconds,1e3));return x.safeAdd(a,x.intDiv(this._nanos,1e6))},c.toNanos=function(){var a=x.safeMultiply(this._seconds,a4.NANOS_PER_SECOND);return x.safeAdd(a,this._nanos)},c.compareTo=function(a){t(a,"otherDuration"),u(a,b,"otherDuration");var c=x.compareNumbers(this._seconds,a.seconds());return 0!==c?c:this._nanos-a.nano()},c.equals=function(a){return this===a||a instanceof b&&this.seconds()===a.seconds()&&this.nano()===a.nano()},c.toString=function(){if(this===b.ZERO)return"PT0S";var a,c=x.intDiv(this._seconds,a4.SECONDS_PER_HOUR),d=x.intDiv(x.intMod(this._seconds,a4.SECONDS_PER_HOUR),a4.SECONDS_PER_MINUTE),e=x.intMod(this._seconds,a4.SECONDS_PER_MINUTE),f="PT";if(0!==c&&(f+=c+"H"),0!==d&&(f+=d+"M"),0===e&&0===this._nanos&&f.length>2)return f;if(e<0&&this._nanos>0?-1===e?f+="-0":f+=e+1:f+=e,this._nanos>0)for(f+=".",f+=a=(a=e<0?""+(2*a4.NANOS_PER_SECOND-this._nanos):""+(a4.NANOS_PER_SECOND+this._nanos)).slice(1,a.length);"0"===f.charAt(f.length-1);)f=f.slice(0,f.length-1);return f+"S"},c.toJSON=function(){return this.toString()},b}(z),C=function(){},D=function(a){function b(b,c){var d;return(d=a.call(this)||this)._name=b,d._duration=c,d}p(b,a);var c=b.prototype;return c.duration=function(){return this._duration},c.isDurationEstimated=function(){return this.isDateBased()||this===b.FOREVER},c.isDateBased=function(){return this.compareTo(b.DAYS)>=0&&this!==b.FOREVER},c.isTimeBased=function(){return 0>this.compareTo(b.DAYS)},c.isSupportedBy=function(a){if(this===b.FOREVER)return!1;try{return a.plus(1,this),!0}catch(b){try{return a.plus(-1,this),!0}catch(a){return!1}}},c.addTo=function(a,b){return a.plus(b,this)},c.between=function(a,b){return a.until(b,this)},c.toString=function(){return this._name},c.compareTo=function(a){return this.duration().compareTo(a.duration())},b}(A),E=function(){function a(){}var b=a.prototype;return b.isDateBased=function(){v("isDateBased")},b.isTimeBased=function(){v("isTimeBased")},b.baseUnit=function(){v("baseUnit")},b.rangeUnit=function(){v("rangeUnit")},b.range=function(){v("range")},b.rangeRefinedBy=function(a){v("rangeRefinedBy")},b.getFrom=function(a){v("getFrom")},b.adjustInto=function(a,b){v("adjustInto")},b.isSupportedBy=function(a){v("isSupportedBy")},b.displayName=function(){v("displayName")},b.equals=function(a){v("equals")},b.name=function(){v("name")},a}(),F=function(){function a(a,b,c,d){s(!(a>b),"Smallest minimum value '"+a+"' must be less than largest minimum value '"+b+"'",m),s(!(c>d),"Smallest maximum value '"+c+"' must be less than largest maximum value '"+d+"'",m),s(!(b>d),"Minimum value '"+b+"' must be less than maximum value '"+d+"'",m),this._minSmallest=a,this._minLargest=b,this._maxLargest=d,this._maxSmallest=c}var b=a.prototype;return b.isFixed=function(){return this._minSmallest===this._minLargest&&this._maxSmallest===this._maxLargest},b.minimum=function(){return this._minSmallest},b.largestMinimum=function(){return this._minLargest},b.maximum=function(){return this._maxLargest},b.smallestMaximum=function(){return this._maxSmallest},b.isValidValue=function(a){return this.minimum()<=a&&a<=this.maximum()},b.checkValidValue=function(a,b){return this.isValidValue(a)?a:s(!1,null!=b?"Invalid value for "+b+" (valid values "+this.toString()+"): "+a:"Invalid value (valid values "+this.toString()+"): "+a,i)},b.checkValidIntValue=function(a,b){if(!1===this.isValidIntValue(a))throw new i("Invalid int value for "+b+": "+a);return a},b.isValidIntValue=function(a){return this.isIntValue()&&this.isValidValue(a)},b.isIntValue=function(){return this.minimum()>=x.MIN_SAFE_INTEGER&&this.maximum()<=x.MAX_SAFE_INTEGER},b.equals=function(b){return b===this||b instanceof a&&this._minSmallest===b._minSmallest&&this._minLargest===b._minLargest&&this._maxSmallest===b._maxSmallest&&this._maxLargest===b._maxLargest},b.hashCode=function(){return x.hashCode(this._minSmallest,this._minLargest,this._maxSmallest,this._maxLargest)},b.toString=function(){var a=this.minimum()+(this.minimum()!==this.largestMinimum()?"/"+this.largestMinimum():"");return a+=" - ",a+=this.smallestMaximum()+(this.smallestMaximum()!==this.maximum()?"/"+this.maximum():"")},a.of=function(){return 2==arguments.length?new a(arguments[0],arguments[0],arguments[1],arguments[1]):3==arguments.length?new a(arguments[0],arguments[0],arguments[1],arguments[2]):4==arguments.length?new a(arguments[0],arguments[1],arguments[2],arguments[3]):s(!1,"Invalid number of arguments "+arguments.length,m)},a}(),G=function(a){function b(b,c,d,e){var f;return(f=a.call(this)||this)._name=b,f._baseUnit=c,f._rangeUnit=d,f._range=e,f}p(b,a),b.byName=function(a){for(var c in b)if(b[c]&&b[c]instanceof b&&b[c].name()===a)return b[c]};var c=b.prototype;return c.name=function(){return this._name},c.baseUnit=function(){return this._baseUnit},c.rangeUnit=function(){return this._rangeUnit},c.range=function(){return this._range},c.displayName=function(){return this.toString()},c.checkValidValue=function(a){return this.range().checkValidValue(a,this)},c.checkValidIntValue=function(a){return this.range().checkValidIntValue(a,this)},c.isDateBased=function(){return this===b.DAY_OF_WEEK||this===b.ALIGNED_DAY_OF_WEEK_IN_MONTH||this===b.ALIGNED_DAY_OF_WEEK_IN_YEAR||this===b.DAY_OF_MONTH||this===b.DAY_OF_YEAR||this===b.EPOCH_DAY||this===b.ALIGNED_WEEK_OF_MONTH||this===b.ALIGNED_WEEK_OF_YEAR||this===b.MONTH_OF_YEAR||this===b.PROLEPTIC_MONTH||this===b.YEAR_OF_ERA||this===b.YEAR||this===b.ERA},c.isTimeBased=function(){return this===b.NANO_OF_SECOND||this===b.NANO_OF_DAY||this===b.MICRO_OF_SECOND||this===b.MICRO_OF_DAY||this===b.MILLI_OF_SECOND||this===b.MILLI_OF_DAY||this===b.SECOND_OF_MINUTE||this===b.SECOND_OF_DAY||this===b.MINUTE_OF_HOUR||this===b.MINUTE_OF_DAY||this===b.HOUR_OF_AMPM||this===b.CLOCK_HOUR_OF_AMPM||this===b.HOUR_OF_DAY||this===b.CLOCK_HOUR_OF_DAY||this===b.AMPM_OF_DAY},c.rangeRefinedBy=function(a){return a.range(this)},c.getFrom=function(a){return a.getLong(this)},c.toString=function(){return this.name()},c.equals=function(a){return this===a},c.adjustInto=function(a,b){return a.with(this,b)},c.isSupportedBy=function(a){return a.isSupported(this)},b}(E),H=function(){function a(){}return a.zoneId=function(){return a.ZONE_ID},a.chronology=function(){return a.CHRONO},a.precision=function(){return a.PRECISION},a.zone=function(){return a.ZONE},a.offset=function(){return a.OFFSET},a.localDate=function(){return a.LOCAL_DATE},a.localTime=function(){return a.LOCAL_TIME},a}(),I=function(){function a(){}var b=a.prototype;return b.query=function(a){return a===H.zoneId()||a===H.chronology()||a===H.precision()?null:a.queryFrom(this)},b.get=function(a){return this.range(a).checkValidIntValue(this.getLong(a),a)},b.getLong=function(a){v("getLong")},b.range=function(a){if(a instanceof G){if(this.isSupported(a))return a.range();throw new k("Unsupported field: "+a)}return a.rangeRefinedBy(this)},b.isSupported=function(a){v("isSupported")},a}(),J=function(a){function b(){return a.apply(this,arguments)||this}return p(b,a),b.prototype.queryFrom=function(a){v("queryFrom")},b}(y);function K(a,b){var c=function(a){function b(){return a.apply(this,arguments)||this}return p(b,a),b}(J);return c.prototype.queryFrom=b,new c(a)}var L=function(a){function b(b,c){var d;return(d=a.call(this)||this)._ordinal=b,d._name=c,d}p(b,a);var c=b.prototype;return c.ordinal=function(){return this._ordinal},c.name=function(){return this._name},b.values=function(){return d.slice()},b.valueOf=function(a){for(var c=0;c<d.length&&d[c].name()!==a;c++);return b.of(c+1)},b.of=function(a){if(a<1||a>7)throw new i("Invalid value for DayOfWeek: "+a);return d[a-1]},b.from=function(a){if(s(null!=a,"temporal",o),a instanceof b)return a;try{return b.of(a.get(G.DAY_OF_WEEK))}catch(b){if(b instanceof i)throw new i("Unable to obtain DayOfWeek from TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""),b);throw b}},c.value=function(){return this._ordinal+1},c.displayName=function(a,b){throw new m("Pattern using (localized) text not implemented yet!")},c.isSupported=function(a){return a instanceof G?a===G.DAY_OF_WEEK:null!=a&&a.isSupportedBy(this)},c.range=function(a){if(a===G.DAY_OF_WEEK)return a.range();if(a instanceof G)throw new k("Unsupported field: "+a);return a.rangeRefinedBy(this)},c.get=function(a){return a===G.DAY_OF_WEEK?this.value():this.range(a).checkValidIntValue(this.getLong(a),a)},c.getLong=function(a){if(a===G.DAY_OF_WEEK)return this.value();if(a instanceof G)throw new k("Unsupported field: "+a);return a.getFrom(this)},c.plus=function(a){var b=x.floorMod(a,7);return d[x.floorMod(this._ordinal+(b+7),7)]},c.minus=function(a){return this.plus(-1*x.floorMod(a,7))},c.query=function(a){return a===H.precision()?D.DAYS:a===H.localDate()||a===H.localTime()||a===H.chronology()||a===H.zone()||a===H.zoneId()||a===H.offset()?null:(s(null!=a,"query",o),a.queryFrom(this))},c.adjustInto=function(a){return t(a,"temporal"),a.with(G.DAY_OF_WEEK,this.value())},c.equals=function(a){return this===a},c.toString=function(){return this._name},c.compareTo=function(a){return t(a,"other"),u(a,b,"other"),this._ordinal-a._ordinal},c.toJSON=function(){return this.toString()},b}(I),M=function(a){function b(b,c){var d;return(d=a.call(this)||this)._value=x.safeToInt(b),d._name=c,d}p(b,a);var c=b.prototype;return c.value=function(){return this._value},c.ordinal=function(){return this._value-1},c.name=function(){return this._name},c.displayName=function(a,b){throw new m("Pattern using (localized) text not implemented yet!")},c.isSupported=function(a){return null!==a&&(a instanceof G?a===G.MONTH_OF_YEAR:null!=a&&a.isSupportedBy(this))},c.get=function(a){return a===G.MONTH_OF_YEAR?this.value():this.range(a).checkValidIntValue(this.getLong(a),a)},c.getLong=function(a){if(a===G.MONTH_OF_YEAR)return this.value();if(a instanceof G)throw new k("Unsupported field: "+a);return a.getFrom(this)},c.plus=function(a){var c=x.intMod(a,12)+12,d=x.intMod(this.value()+c,12);return d=0===d?12:d,b.of(d)},c.minus=function(a){return this.plus(-1*x.intMod(a,12))},c.length=function(a){switch(this){case b.FEBRUARY:return a?29:28;case b.APRIL:case b.JUNE:case b.SEPTEMBER:case b.NOVEMBER:return 30;default:return 31}},c.minLength=function(){switch(this){case b.FEBRUARY:return 28;case b.APRIL:case b.JUNE:case b.SEPTEMBER:case b.NOVEMBER:return 30;default:return 31}},c.maxLength=function(){switch(this){case b.FEBRUARY:return 29;case b.APRIL:case b.JUNE:case b.SEPTEMBER:case b.NOVEMBER:return 30;default:return 31}},c.firstDayOfYear=function(a){var c=+!!a;switch(this){case b.JANUARY:return 1;case b.FEBRUARY:return 32;case b.MARCH:return 60+c;case b.APRIL:return 91+c;case b.MAY:return 121+c;case b.JUNE:return 152+c;case b.JULY:return 182+c;case b.AUGUST:return 213+c;case b.SEPTEMBER:return 244+c;case b.OCTOBER:return 274+c;case b.NOVEMBER:return 305+c;case b.DECEMBER:default:return 335+c}},c.firstMonthOfQuarter=function(){switch(this){case b.JANUARY:case b.FEBRUARY:case b.MARCH:return b.JANUARY;case b.APRIL:case b.MAY:case b.JUNE:return b.APRIL;case b.JULY:case b.AUGUST:case b.SEPTEMBER:return b.JULY;case b.OCTOBER:case b.NOVEMBER:case b.DECEMBER:default:return b.OCTOBER}},c.query=function(b){return(s(null!=b,"query() parameter must not be null",i),b===H.chronology())?aY.INSTANCE:b===H.precision()?D.MONTHS:a.prototype.query.call(this,b)},c.toString=function(){switch(this){case b.JANUARY:return"JANUARY";case b.FEBRUARY:return"FEBRUARY";case b.MARCH:return"MARCH";case b.APRIL:return"APRIL";case b.MAY:return"MAY";case b.JUNE:return"JUNE";case b.JULY:return"JULY";case b.AUGUST:return"AUGUST";case b.SEPTEMBER:return"SEPTEMBER";case b.OCTOBER:return"OCTOBER";case b.NOVEMBER:return"NOVEMBER";case b.DECEMBER:return"DECEMBER";default:return"unknown Month, value: "+this.value()}},c.toJSON=function(){return this.toString()},c.adjustInto=function(a){return a.with(G.MONTH_OF_YEAR,this.value())},c.compareTo=function(a){return t(a,"other"),u(a,b,"other"),this._value-a._value},c.equals=function(a){return this===a},b.valueOf=function(a){for(var c=0;c<e.length&&e[c].name()!==a;c++);return b.of(c+1)},b.values=function(){return e.slice()},b.of=function(a){return(a<1||a>12)&&s(!1,"Invalid value for MonthOfYear: "+a,i),e[a-1]},b.from=function(a){if(a instanceof b)return a;try{return b.of(a.get(G.MONTH_OF_YEAR))}catch(b){throw new i("Unable to obtain Month from TemporalAccessor: "+a+" of type "+(a&&null!=a.constructor?a.constructor.name:""),b)}},b}(I),N=/([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?/,O=function(a){function b(c,d,e){var f=a.call(this)||this,g=x.safeToInt(c),h=x.safeToInt(d),i=x.safeToInt(e);return 0===g&&0===h&&0===i?(b.ZERO||(f._years=g,f._months=h,f._days=i,b.ZERO=r(f)),b.ZERO||r(f)):(f._years=g,f._months=h,f._days=i,f)}p(b,a),b.ofYears=function(a){return b.create(a,0,0)},b.ofMonths=function(a){return b.create(0,a,0)},b.ofWeeks=function(a){return b.create(0,0,x.safeMultiply(a,7))},b.ofDays=function(a){return b.create(0,0,a)},b.of=function(a,c,d){return b.create(a,c,d)},b.from=function(a){if(a instanceof b)return a;t(a,"amount");for(var c=0,d=0,e=0,f=a.units(),g=0;g<f.length;g++){var h=f[g],j=a.get(h);if(h===D.YEARS)c=x.safeToInt(j);else if(h===D.MONTHS)d=x.safeToInt(j);else if(h===D.DAYS)e=x.safeToInt(j);else throw new i("Unit must be Years, Months or Days, but was "+h)}return b.create(c,d,e)},b.between=function(a,b){return t(a,"startDate"),t(b,"endDate"),u(a,a1,"startDate"),u(b,a1,"endDate"),a.until(b)},b.parse=function(a){t(a,"text");try{return b._parse(a)}catch(b){if(b instanceof l)throw new j("Text cannot be parsed to a Period",a,0,b);throw b}},b._parse=function(a){var c=N.exec(a);if(null!=c){var d="-"===c[1]?-1:1,e=c[2],f=c[3],g=c[4],h=c[5];if(null!=e||null!=f||null!=g||null!=h){var i=b._parseNumber(a,e,d),k=b._parseNumber(a,f,d),l=b._parseNumber(a,g,d),m=b._parseNumber(a,h,d);return m=x.safeAdd(m,x.safeMultiply(l,7)),b.create(i,k,m)}}throw new j("Text cannot be parsed to a Period",a,0)},b._parseNumber=function(a,b,c){if(null==b)return 0;var d=x.parseInt(b);return x.safeMultiply(d,c)},b.create=function(a,c,d){return new b(a,c,d)};var c=b.prototype;return c.units=function(){return[D.YEARS,D.MONTHS,D.DAYS]},c.chronology=function(){return aY.INSTANCE},c.get=function(a){if(a===D.YEARS)return this._years;if(a===D.MONTHS)return this._months;if(a===D.DAYS)return this._days;throw new k("Unsupported unit: "+a)},c.isZero=function(){return this===b.ZERO},c.isNegative=function(){return this._years<0||this._months<0||this._days<0},c.years=function(){return this._years},c.months=function(){return this._months},c.days=function(){return this._days},c.withYears=function(a){return a===this._years?this:b.create(a,this._months,this._days)},c.withMonths=function(a){return a===this._months?this:b.create(this._years,a,this._days)},c.withDays=function(a){return a===this._days?this:b.create(this._years,this._months,a)},c.plus=function(a){var c=b.from(a);return b.create(x.safeAdd(this._years,c._years),x.safeAdd(this._months,c._months),x.safeAdd(this._days,c._days))},c.plusYears=function(a){return 0===a?this:b.create(x.safeToInt(x.safeAdd(this._years,a)),this._months,this._days)},c.plusMonths=function(a){return 0===a?this:b.create(this._years,x.safeToInt(x.safeAdd(this._months,a)),this._days)},c.plusDays=function(a){return 0===a?this:b.create(this._years,this._months,x.safeToInt(x.safeAdd(this._days,a)))},c.minus=function(a){var c=b.from(a);return b.create(x.safeSubtract(this._years,c._years),x.safeSubtract(this._months,c._months),x.safeSubtract(this._days,c._days))},c.minusYears=function(a){return this.plusYears(-1*a)},c.minusMonths=function(a){return this.plusMonths(-1*a)},c.minusDays=function(a){return this.plusDays(-1*a)},c.multipliedBy=function(a){return this===b.ZERO||1===a?this:b.create(x.safeMultiply(this._years,a),x.safeMultiply(this._months,a),x.safeMultiply(this._days,a))},c.negated=function(){return this.multipliedBy(-1)},c.normalized=function(){var a=this.toTotalMonths(),c=x.intDiv(a,12),d=x.intMod(a,12);return c===this._years&&d===this._months?this:b.create(x.safeToInt(c),d,this._days)},c.toTotalMonths=function(){return 12*this._years+this._months},c.addTo=function(a){return t(a,"temporal"),0!==this._years?a=0!==this._months?a.plus(this.toTotalMonths(),D.MONTHS):a.plus(this._years,D.YEARS):0!==this._months&&(a=a.plus(this._months,D.MONTHS)),0!==this._days&&(a=a.plus(this._days,D.DAYS)),a},c.subtractFrom=function(a){return t(a,"temporal"),0!==this._years?a=0!==this._months?a.minus(this.toTotalMonths(),D.MONTHS):a.minus(this._years,D.YEARS):0!==this._months&&(a=a.minus(this._months,D.MONTHS)),0!==this._days&&(a=a.minus(this._days,D.DAYS)),a},c.equals=function(a){return this===a||a instanceof b&&this._years===a._years&&this._months===a._months&&this._days===a._days},c.hashCode=function(){return x.hashCode(this._years,this._months,this._days)},c.toString=function(){if(this===b.ZERO)return"P0D";var a="P";return 0!==this._years&&(a+=this._years+"Y"),0!==this._months&&(a+=this._months+"M"),0!==this._days&&(a+=this._days+"D"),a},c.toJSON=function(){return this.toString()},b}(z),P=function(){function a(a){this._index=a,this._errorIndex=-1}var b=a.prototype;return b.getIndex=function(){return this._index},b.setIndex=function(a){this._index=a},b.getErrorIndex=function(){return this._errorIndex},b.setErrorIndex=function(a){this._errorIndex=a},a}(),Q=function(){function a(){this._map={}}var b=a.prototype;return b.putAll=function(a){for(var b in a._map)this._map[b]=a._map[b];return this},b.containsKey=function(a){return this._map.hasOwnProperty(a.name())&&void 0!==this.get(a)},b.get=function(a){return this._map[a.name()]},b.put=function(a,b){return this.set(a,b)},b.set=function(a,b){return this._map[a.name()]=b,this},b.retainAll=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c].name();b[d]=this._map[d]}return this._map=b,this},b.remove=function(a){var b=a.name(),c=this._map[b];return this._map[b]=void 0,c},b.keySet=function(){return this._map},b.clear=function(){this._map={}},a}(),R=function(a){function b(){return a.apply(this,arguments)||this}return p(b,a),b}(y);R.STRICT=new R("STRICT"),R.SMART=new R("SMART"),R.LENIENT=new R("LENIENT");var S=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.isSupported=function(a){v("isSupported")},c.minus=function(a,b){return arguments.length<2?this._minusAmount(a):this._minusUnit(a,b)},c._minusAmount=function(a){return t(a,"amount"),u(a,z,"amount"),a.subtractFrom(this)},c._minusUnit=function(a,b){return t(a,"amountToSubtract"),t(b,"unit"),u(b,A,"unit"),this._plusUnit(-a,b)},c.plus=function(a,b){return arguments.length<2?this._plusAmount(a):this._plusUnit(a,b)},c._plusAmount=function(a){return t(a,"amount"),u(a,z,"amount"),a.addTo(this)},c._plusUnit=function(a,b){v("_plusUnit")},c.until=function(a,b){v("until")},c.with=function(a,b){return arguments.length<2?this._withAdjuster(a):this._withField(a,b)},c._withAdjuster=function(a){return t(a,"adjuster"),s("function"==typeof a.adjustInto,"adjuster must be a TemporalAdjuster",m),a.adjustInto(this)},c._withField=function(a,b){v("_withField")},b}(I);"undefined"!=typeof Symbol&&Symbol.toPrimitive&&(S.prototype[Symbol.toPrimitive]=function(a){if("number"!==a)return this.toString();throw TypeError("A conversion from Temporal to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")});var T=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.isSupported=function(a){return a instanceof G||a instanceof D?a.isDateBased():null!=a&&a.isSupportedBy(this)},c.query=function(b){return b===H.chronology()?this.chronology():b===H.precision()?D.DAYS:b===H.localDate()?a1.ofEpochDay(this.toEpochDay()):b===H.localTime()||b===H.zone()||b===H.zoneId()||b===H.offset()?null:a.prototype.query.call(this,b)},c.adjustInto=function(a){return a.with(G.EPOCH_DAY,this.toEpochDay())},c.format=function(a){return t(a,"formatter"),u(a,aP,"formatter"),a.format(this)},b}(S),U=function(){function a(){}return a.startsWith=function(a,b){return 0===a.indexOf(b)},a.hashCode=function(a){var b=a.length;if(0===b)return 0;for(var c=0,d=0;d<b;d++)c=(c<<5)-c+a.charCodeAt(d)|0;return x.smi(c)},a}(),V=function(){function a(){}a.systemDefault=function(){throw new i("not supported operation")},a.getAvailableZoneIds=function(){throw new i("not supported operation")},a.of=function(a){throw new i("not supported operation"+a)},a.ofOffset=function(a,b){throw new i("not supported operation"+a+b)},a.from=function(a){throw new i("not supported operation"+a)};var b=a.prototype;return b.id=function(){v("ZoneId.id")},b.rules=function(){v("ZoneId.rules")},b.normalized=function(){var a=this.rules();return a.isFixedOffset()?a.offset(a5.EPOCH):this},b.equals=function(b){return this===b||b instanceof a&&this.id()===b.id()},b.hashCode=function(){return U.hashCode(this.id())},b.toString=function(){return this.id()},b.toJSON=function(){return this.toString()},a}(),W=function(){function a(){}a.of=function(a){return t(a,"offset"),new X(a)};var b=a.prototype;return b.isFixedOffset=function(){v("ZoneRules.isFixedOffset")},b.offset=function(a){return a instanceof a5?this.offsetOfInstant(a):this.offsetOfLocalDateTime(a)},b.offsetOfInstant=function(a){v("ZoneRules.offsetInstant")},b.offsetOfEpochMilli=function(a){v("ZoneRules.offsetOfEpochMilli")},b.offsetOfLocalDateTime=function(a){v("ZoneRules.offsetLocalDateTime")},b.validOffsets=function(a){v("ZoneRules.validOffsets")},b.transition=function(a){v("ZoneRules.transition")},b.standardOffset=function(a){v("ZoneRules.standardOffset")},b.daylightSavings=function(a){v("ZoneRules.daylightSavings")},b.isDaylightSavings=function(a){v("ZoneRules.isDaylightSavings")},b.isValidOffset=function(a,b){v("ZoneRules.isValidOffset")},b.nextTransition=function(a){v("ZoneRules.nextTransition")},b.previousTransition=function(a){v("ZoneRules.previousTransition")},b.transitions=function(){v("ZoneRules.transitions")},b.transitionRules=function(){v("ZoneRules.transitionRules")},b.toString=function(){v("ZoneRules.toString")},b.toJSON=function(){return this.toString()},a}(),X=function(a){function b(b){var c;return(c=a.call(this)||this)._offset=b,c}p(b,a);var c=b.prototype;return c.isFixedOffset=function(){return!0},c.offsetOfInstant=function(){return this._offset},c.offsetOfEpochMilli=function(){return this._offset},c.offsetOfLocalDateTime=function(){return this._offset},c.validOffsets=function(){return[this._offset]},c.transition=function(){return null},c.standardOffset=function(){return this._offset},c.daylightSavings=function(){return B.ZERO},c.isDaylightSavings=function(){return!1},c.isValidOffset=function(a,b){return this._offset.equals(b)},c.nextTransition=function(){return null},c.previousTransition=function(){return null},c.transitions=function(){return[]},c.transitionRules=function(){return[]},c.equals=function(a){return this===a||a instanceof b&&this._offset.equals(a._offset)},c.toString=function(){return"FixedRules:"+this._offset.toString()},b}(W),Y={},Z={},$=function(a){function b(c){var d;return d=a.call(this)||this,b._validateTotalSeconds(c),d._totalSeconds=x.safeToInt(c),d._rules=W.of(r(d)),d._id=b._buildId(c),d}p(b,a);var c=b.prototype;return c.totalSeconds=function(){return this._totalSeconds},c.id=function(){return this._id},b._buildId=function(a){if(0===a)return"Z";var b=Math.abs(a),c=x.intDiv(b,a4.SECONDS_PER_HOUR),d=x.intMod(x.intDiv(b,a4.SECONDS_PER_MINUTE),a4.MINUTES_PER_HOUR),e=(a<0?"-":"+")+(c<10?"0":"")+c+(d<10?":0":":")+d,f=x.intMod(b,a4.SECONDS_PER_MINUTE);return 0!==f&&(e+=(f<10?":0":":")+f),e},b._validateTotalSeconds=function(a){if(Math.abs(a)>b.MAX_SECONDS)throw new i("Zone offset not in valid range: -18:00 to +18:00")},b._validate=function(a,b,c){if(a<-18||a>18)throw new i("Zone offset hours not in valid range: value "+a+" is not in the range -18 to 18");if(a>0){if(b<0||c<0)throw new i("Zone offset minutes and seconds must be positive because hours is positive")}else if(a<0){if(b>0||c>0)throw new i("Zone offset minutes and seconds must be negative because hours is negative")}else if(b>0&&c<0||b<0&&c>0)throw new i("Zone offset minutes and seconds must have the same sign");if(Math.abs(b)>59)throw new i("Zone offset minutes not in valid range: abs(value) "+Math.abs(b)+" is not in the range 0 to 59");if(Math.abs(c)>59)throw new i("Zone offset seconds not in valid range: abs(value) "+Math.abs(c)+" is not in the range 0 to 59");if(18===Math.abs(a)&&(Math.abs(b)>0||Math.abs(c)>0))throw new i("Zone offset not in valid range: -18:00 to +18:00")},b.of=function(a){t(a,"offsetId");var c,d,e,f=Z[a];if(null!=f)return f;switch(a.length){case 2:a=a[0]+"0"+a[1];case 3:c=b._parseNumber(a,1,!1),d=0,e=0;break;case 5:c=b._parseNumber(a,1,!1),d=b._parseNumber(a,3,!1),e=0;break;case 6:c=b._parseNumber(a,1,!1),d=b._parseNumber(a,4,!0),e=0;break;case 7:c=b._parseNumber(a,1,!1),d=b._parseNumber(a,3,!1),e=b._parseNumber(a,5,!1);break;case 9:c=b._parseNumber(a,1,!1),d=b._parseNumber(a,4,!0),e=b._parseNumber(a,7,!0);break;default:throw new i("Invalid ID for ZoneOffset, invalid format: "+a)}var g=a[0];if("+"!==g&&"-"!==g)throw new i("Invalid ID for ZoneOffset, plus/minus not found when expected: "+a);return"-"===g?b.ofHoursMinutesSeconds(-c,-d,-e):b.ofHoursMinutesSeconds(c,d,e)},b._parseNumber=function(a,b,c){if(c&&":"!==a[b-1])throw new i("Invalid ID for ZoneOffset, colon not found when expected: "+a);var d=a[b],e=a[b+1];if(d<"0"||d>"9"||e<"0"||e>"9")throw new i("Invalid ID for ZoneOffset, non numeric characters found: "+a);return(d.charCodeAt(0)-48)*10+(e.charCodeAt(0)-48)},b.ofHours=function(a){return b.ofHoursMinutesSeconds(a,0,0)},b.ofHoursMinutes=function(a,c){return b.ofHoursMinutesSeconds(a,c,0)},b.ofHoursMinutesSeconds=function(a,c,d){b._validate(a,c,d);var e=a*a4.SECONDS_PER_HOUR+c*a4.SECONDS_PER_MINUTE+d;return b.ofTotalSeconds(e)},b.ofTotalMinutes=function(a){var c=a*a4.SECONDS_PER_MINUTE;return b.ofTotalSeconds(c)},b.ofTotalSeconds=function(a){if(a%(15*a4.SECONDS_PER_MINUTE)!=0)return new b(a);var c=Y[a];return null==c&&(c=new b(a),Y[a]=c,Z[c.id()]=c),c},c.rules=function(){return this._rules},c.get=function(a){return this.getLong(a)},c.getLong=function(a){if(a===G.OFFSET_SECONDS)return this._totalSeconds;if(a instanceof G)throw new i("Unsupported field: "+a);return a.getFrom(this)},c.query=function(a){return(t(a,"query"),a===H.offset()||a===H.zone())?this:a===H.localDate()||a===H.localTime()||a===H.precision()||a===H.chronology()||a===H.zoneId()?null:a.queryFrom(this)},c.adjustInto=function(a){return a.with(G.OFFSET_SECONDS,this._totalSeconds)},c.compareTo=function(a){return t(a,"other"),a._totalSeconds-this._totalSeconds},c.equals=function(a){return this===a||a instanceof b&&this._totalSeconds===a._totalSeconds},c.hashCode=function(){return this._totalSeconds},c.toString=function(){return this._id},b}(V),_=function(a){function b(){var b;return(b=a.call(this)||this).fieldValues=new Q,b.chrono=null,b.zone=null,b.date=null,b.time=null,b.leapSecond=!1,b.excessDays=null,b}p(b,a),b.create=function(a,c){var d=new b;return d._addFieldValue(a,c),d};var c=b.prototype;return c.getFieldValue0=function(a){return this.fieldValues.get(a)},c._addFieldValue=function(a,b){t(a,"field");var c=this.getFieldValue0(a);if(null!=c&&c!==b)throw new i("Conflict found: "+a+" "+c+" differs from "+a+" "+b+": "+this);return this._putFieldValue0(a,b)},c._putFieldValue0=function(a,b){return this.fieldValues.put(a,b),this},c.resolve=function(a,b){return null!=b&&this.fieldValues.retainAll(b),this._mergeDate(a),this._mergeTime(a),this._resolveTimeInferZeroes(a),null!=this.excessDays&&!1===this.excessDays.isZero()&&null!=this.date&&null!=this.time&&(this.date=this.date.plus(this.excessDays),this.excessDays=O.ZERO),this._resolveInstant(),this},c._mergeDate=function(a){this._checkDate(aY.INSTANCE.resolveDate(this.fieldValues,a))},c._checkDate=function(a){if(null!=a)for(var b in this._addObject(a),this.fieldValues.keySet()){var c=G.byName(b);if(c&&void 0!==this.fieldValues.get(c)&&c.isDateBased()){var d=void 0;try{d=a.getLong(c)}catch(a){if(a instanceof i)continue;throw a}var e=this.fieldValues.get(c);if(d!==e)throw new i("Conflict found: Field "+c+" "+d+" differs from "+c+" "+e+" derived from "+a)}}},c._mergeTime=function(a){if(this.fieldValues.containsKey(G.CLOCK_HOUR_OF_DAY)){var b=this.fieldValues.remove(G.CLOCK_HOUR_OF_DAY);a!==R.LENIENT&&(a===R.SMART&&0===b||G.CLOCK_HOUR_OF_DAY.checkValidValue(b)),this._addFieldValue(G.HOUR_OF_DAY,24===b?0:b)}if(this.fieldValues.containsKey(G.CLOCK_HOUR_OF_AMPM)){var c=this.fieldValues.remove(G.CLOCK_HOUR_OF_AMPM);a!==R.LENIENT&&(a===R.SMART&&0===c||G.CLOCK_HOUR_OF_AMPM.checkValidValue(c)),this._addFieldValue(G.HOUR_OF_AMPM,12===c?0:c)}if(a!==R.LENIENT&&(this.fieldValues.containsKey(G.AMPM_OF_DAY)&&G.AMPM_OF_DAY.checkValidValue(this.fieldValues.get(G.AMPM_OF_DAY)),this.fieldValues.containsKey(G.HOUR_OF_AMPM)&&G.HOUR_OF_AMPM.checkValidValue(this.fieldValues.get(G.HOUR_OF_AMPM))),this.fieldValues.containsKey(G.AMPM_OF_DAY)&&this.fieldValues.containsKey(G.HOUR_OF_AMPM)){var d=this.fieldValues.remove(G.AMPM_OF_DAY),e=this.fieldValues.remove(G.HOUR_OF_AMPM);this._addFieldValue(G.HOUR_OF_DAY,12*d+e)}if(this.fieldValues.containsKey(G.NANO_OF_DAY)){var f=this.fieldValues.remove(G.NANO_OF_DAY);a!==R.LENIENT&&G.NANO_OF_DAY.checkValidValue(f),this._addFieldValue(G.SECOND_OF_DAY,x.intDiv(f,1e9)),this._addFieldValue(G.NANO_OF_SECOND,x.intMod(f,1e9))}if(this.fieldValues.containsKey(G.MICRO_OF_DAY)){var g=this.fieldValues.remove(G.MICRO_OF_DAY);a!==R.LENIENT&&G.MICRO_OF_DAY.checkValidValue(g),this._addFieldValue(G.SECOND_OF_DAY,x.intDiv(g,1e6)),this._addFieldValue(G.MICRO_OF_SECOND,x.intMod(g,1e6))}if(this.fieldValues.containsKey(G.MILLI_OF_DAY)){var h=this.fieldValues.remove(G.MILLI_OF_DAY);a!==R.LENIENT&&G.MILLI_OF_DAY.checkValidValue(h),this._addFieldValue(G.SECOND_OF_DAY,x.intDiv(h,1e3)),this._addFieldValue(G.MILLI_OF_SECOND,x.intMod(h,1e3))}if(this.fieldValues.containsKey(G.SECOND_OF_DAY)){var i=this.fieldValues.remove(G.SECOND_OF_DAY);a!==R.LENIENT&&G.SECOND_OF_DAY.checkValidValue(i),this._addFieldValue(G.HOUR_OF_DAY,x.intDiv(i,3600)),this._addFieldValue(G.MINUTE_OF_HOUR,x.intMod(x.intDiv(i,60),60)),this._addFieldValue(G.SECOND_OF_MINUTE,x.intMod(i,60))}if(this.fieldValues.containsKey(G.MINUTE_OF_DAY)){var j=this.fieldValues.remove(G.MINUTE_OF_DAY);a!==R.LENIENT&&G.MINUTE_OF_DAY.checkValidValue(j),this._addFieldValue(G.HOUR_OF_DAY,x.intDiv(j,60)),this._addFieldValue(G.MINUTE_OF_HOUR,x.intMod(j,60))}if(a!==R.LENIENT&&(this.fieldValues.containsKey(G.MILLI_OF_SECOND)&&G.MILLI_OF_SECOND.checkValidValue(this.fieldValues.get(G.MILLI_OF_SECOND)),this.fieldValues.containsKey(G.MICRO_OF_SECOND)&&G.MICRO_OF_SECOND.checkValidValue(this.fieldValues.get(G.MICRO_OF_SECOND))),this.fieldValues.containsKey(G.MILLI_OF_SECOND)&&this.fieldValues.containsKey(G.MICRO_OF_SECOND)){var k=this.fieldValues.remove(G.MILLI_OF_SECOND),l=this.fieldValues.get(G.MICRO_OF_SECOND);this._putFieldValue0(G.MICRO_OF_SECOND,1e3*k+x.intMod(l,1e3))}if(this.fieldValues.containsKey(G.MICRO_OF_SECOND)&&this.fieldValues.containsKey(G.NANO_OF_SECOND)){var m=this.fieldValues.get(G.NANO_OF_SECOND);this._putFieldValue0(G.MICRO_OF_SECOND,x.intDiv(m,1e3)),this.fieldValues.remove(G.MICRO_OF_SECOND)}if(this.fieldValues.containsKey(G.MILLI_OF_SECOND)&&this.fieldValues.containsKey(G.NANO_OF_SECOND)){var n=this.fieldValues.get(G.NANO_OF_SECOND);this._putFieldValue0(G.MILLI_OF_SECOND,x.intDiv(n,1e6)),this.fieldValues.remove(G.MILLI_OF_SECOND)}if(this.fieldValues.containsKey(G.MICRO_OF_SECOND)){var o=this.fieldValues.remove(G.MICRO_OF_SECOND);this._putFieldValue0(G.NANO_OF_SECOND,1e3*o)}else if(this.fieldValues.containsKey(G.MILLI_OF_SECOND)){var p=this.fieldValues.remove(G.MILLI_OF_SECOND);this._putFieldValue0(G.NANO_OF_SECOND,1e6*p)}},c._resolveTimeInferZeroes=function(a){var b=this.fieldValues.get(G.HOUR_OF_DAY),c=this.fieldValues.get(G.MINUTE_OF_HOUR),d=this.fieldValues.get(G.SECOND_OF_MINUTE),e=this.fieldValues.get(G.NANO_OF_SECOND);if(null!=b&&(null!=c||null==d&&null==e)&&(null==c||null!=d||null==e)){if(a!==R.LENIENT){if(null!=b){a===R.SMART&&24===b&&(null==c||0===c)&&(null==d||0===d)&&(null==e||0===e)&&(b=0,this.excessDays=O.ofDays(1));var f=G.HOUR_OF_DAY.checkValidIntValue(b);if(null!=c){var g=G.MINUTE_OF_HOUR.checkValidIntValue(c);if(null!=d){var h=G.SECOND_OF_MINUTE.checkValidIntValue(d);if(null!=e){var i=G.NANO_OF_SECOND.checkValidIntValue(e);this._addObject(a4.of(f,g,h,i))}else this._addObject(a4.of(f,g,h))}else null==e&&this._addObject(a4.of(f,g))}else null==d&&null==e&&this._addObject(a4.of(f,0))}}else if(null!=b){var j=b;if(null!=c)if(null!=d){null==e&&(e=0);var k=x.safeMultiply(j,36e11);k=x.safeAdd(k,x.safeMultiply(c,6e10)),k=x.safeAdd(k,x.safeMultiply(d,1e9)),k=x.safeAdd(k,e);var l=x.floorDiv(k,864e11),m=x.floorMod(k,864e11);this._addObject(a4.ofNanoOfDay(m)),this.excessDays=O.ofDays(l)}else{var n=x.safeMultiply(j,3600);n=x.safeAdd(n,x.safeMultiply(c,60));var o=x.floorDiv(n,86400),p=x.floorMod(n,86400);this._addObject(a4.ofSecondOfDay(p)),this.excessDays=O.ofDays(o)}else{var q=x.safeToInt(x.floorDiv(j,24));j=x.floorMod(j,24),this._addObject(a4.of(j,0)),this.excessDays=O.ofDays(q)}}this.fieldValues.remove(G.HOUR_OF_DAY),this.fieldValues.remove(G.MINUTE_OF_HOUR),this.fieldValues.remove(G.SECOND_OF_MINUTE),this.fieldValues.remove(G.NANO_OF_SECOND)}},c._addObject=function(a){a instanceof T?this.date=a:a instanceof a4&&(this.time=a)},c._resolveInstant=function(){if(null!=this.date&&null!=this.time){var a=this.fieldValues.get(G.OFFSET_SECONDS);if(null!=a){var b=$.ofTotalSeconds(a),c=this.date.atTime(this.time).atZone(b).getLong(G.INSTANT_SECONDS);this.fieldValues.put(G.INSTANT_SECONDS,c)}else if(null!=this.zone){var d=this.date.atTime(this.time).atZone(this.zone).getLong(G.INSTANT_SECONDS);this.fieldValues.put(G.INSTANT_SECONDS,d)}}},c.build=function(a){return a.queryFrom(this)},c.isSupported=function(a){return null!=a&&(this.fieldValues.containsKey(a)&&void 0!==this.fieldValues.get(a)||null!=this.date&&this.date.isSupported(a)||null!=this.time&&this.time.isSupported(a))},c.getLong=function(a){t(a,"field");var b=this.getFieldValue0(a);if(null==b){if(null!=this.date&&this.date.isSupported(a))return this.date.getLong(a);if(null!=this.time&&this.time.isSupported(a))return this.time.getLong(a);throw new i("Field not found: "+a)}return b},c.query=function(a){if(a===H.zoneId())return this.zone;if(a===H.chronology())return this.chrono;if(a===H.localDate())return null!=this.date?a1.from(this.date):null;if(a===H.localTime())return this.time;if(a===H.zone()||a===H.offset());else if(a===H.precision())return null;return a.queryFrom(this)},b}(I),aa=function(){function a(){if(1==arguments.length)if(arguments[0]instanceof a)return void this._constructorSelf.apply(this,arguments);else this._constructorFormatter.apply(this,arguments);else this._constructorParam.apply(this,arguments);this._caseSensitive=!0,this._strict=!0,this._parsed=[new ab(this)]}var b=a.prototype;return b._constructorParam=function(a,b,c){this._locale=a,this._symbols=b,this._overrideChronology=c},b._constructorFormatter=function(a){this._locale=a.locale(),this._symbols=a.decimalStyle(),this._overrideChronology=a.chronology()},b._constructorSelf=function(a){this._locale=a._locale,this._symbols=a._symbols,this._overrideChronology=a._overrideChronology,this._overrideZone=a._overrideZone,this._caseSensitive=a._caseSensitive,this._strict=a._strict,this._parsed=[new ab(this)]},b.copy=function(){return new a(this)},b.symbols=function(){return this._symbols},b.isStrict=function(){return this._strict},b.setStrict=function(a){this._strict=a},b.locale=function(){return this._locale},b.setLocale=function(a){this._locale=a},b.startOptional=function(){this._parsed.push(this.currentParsed().copy())},b.endOptional=function(a){a?this._parsed.splice(this._parsed.length-2,1):this._parsed.splice(this._parsed.length-1,1)},b.isCaseSensitive=function(){return this._caseSensitive},b.setCaseSensitive=function(a){this._caseSensitive=a},b.subSequenceEquals=function(a,b,c,d,e){if(b+e>a.length||d+e>c.length)return!1;this.isCaseSensitive()||(a=a.toLowerCase(),c=c.toLowerCase());for(var f=0;f<e;f++)if(a[b+f]!==c[d+f])return!1;return!0},b.charEquals=function(a,b){return this.isCaseSensitive()?a===b:this.charEqualsIgnoreCase(a,b)},b.charEqualsIgnoreCase=function(a,b){return a===b||a.toLowerCase()===b.toLowerCase()},b.setParsedField=function(a,b,c,d){var e=this.currentParsed().fieldValues,f=e.get(a);return e.set(a,b),null!=f&&f!==b?~c:d},b.setParsedZone=function(a){t(a,"zone"),this.currentParsed().zone=a},b.getParsed=function(a){return this.currentParsed().fieldValues.get(a)},b.toParsed=function(){return this.currentParsed()},b.currentParsed=function(){return this._parsed[this._parsed.length-1]},b.setParsedLeapSecond=function(){this.currentParsed().leapSecond=!0},b.getEffectiveChronology=function(){var a=this.currentParsed().chrono;return null==a&&null==(a=this._overrideChronology)&&(a=aY.INSTANCE),a},a}(),ab=function(a){function b(b){var c;return(c=a.call(this)||this).chrono=null,c.zone=null,c.fieldValues=new Q,c.leapSecond=!1,c.dateTimeParseContext=b,c}p(b,a);var c=b.prototype;return c.copy=function(){var a=new b;return a.chrono=this.chrono,a.zone=this.zone,a.fieldValues.putAll(this.fieldValues),a.leapSecond=this.leapSecond,a.dateTimeParseContext=this.dateTimeParseContext,a},c.toString=function(){return this.fieldValues+", "+this.chrono+", "+this.zone},c.isSupported=function(a){return this.fieldValues.containsKey(a)},c.get=function(a){var b=this.fieldValues.get(a);return s(null!=b),b},c.query=function(b){return b===H.chronology()?this.chrono:b===H.zoneId()||b===H.zone()?this.zone:a.prototype.query.call(this,b)},c.toBuilder=function(){var a=new _;return a.fieldValues.putAll(this.fieldValues),a.chrono=this.dateTimeParseContext.getEffectiveChronology(),null!=this.zone?a.zone=this.zone:a.zone=this.overrideZone,a.leapSecond=this.leapSecond,a.excessDays=this.excessDays,a},b}(S),ac=function(){function a(b,c,d){2==arguments.length&&arguments[1]instanceof aP?(this._temporal=a.adjust(b,c),this._locale=c.locale(),this._symbols=c.decimalStyle()):(this._temporal=b,this._locale=c,this._symbols=d),this._optional=0}a.adjust=function(a,b){return a};var b=a.prototype;return b.symbols=function(){return this._symbols},b.startOptional=function(){this._optional++},b.endOptional=function(){this._optional--},b.getValueQuery=function(a){var b=this._temporal.query(a);if(null==b&&0===this._optional)throw new i("Unable to extract value: "+this._temporal);return b},b.getValue=function(a){try{return this._temporal.getLong(a)}catch(a){if(a instanceof i&&this._optional>0)return null;throw a}},b.temporal=function(){return this._temporal},b.locale=function(){return this._locale},b.setDateTime=function(a){this._temporal=a},b.setLocale=function(a){this._locale=a},a}(),ad={},ae=[0,90,181,273,0,91,182,274],af=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.isDateBased=function(){return!0},c.isTimeBased=function(){return!1},c._isIso=function(){return!0},b._getWeekRangeByLocalDate=function(a){var c=b._getWeekBasedYear(a);return F.of(1,b._getWeekRangeByYear(c))},b._getWeekRangeByYear=function(a){var b=a1.of(a,1,1);return b.dayOfWeek()===L.THURSDAY||b.dayOfWeek()===L.WEDNESDAY&&b.isLeapYear()?53:52},b._getWeek=function(a){var c=a.dayOfWeek().ordinal(),d=a.dayOfYear()-1,e=d+(3-c),f=x.intDiv(e,7),g=e-7*f-3;if(g<-3&&(g+=7),d<g)return b._getWeekRangeByLocalDate(a.withDayOfYear(180).minusYears(1)).maximum();var h=x.intDiv(d-g,7)+1;return 53===h&&!1===(-3===g||-2===g&&a.isLeapYear())&&(h=1),h},b._getWeekBasedYear=function(a){var b=a.year(),c=a.dayOfYear();if(c<=3)c-a.dayOfWeek().ordinal()<-2&&b--;else if(c>=363){var d=a.dayOfWeek().ordinal();(c=c-363-!!a.isLeapYear())-d>=0&&b++}return b},c.displayName=function(){return this.toString()},c.resolve=function(){return null},c.name=function(){return this.toString()},b}(E),ag=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.toString=function(){return"DayOfQuarter"},c.baseUnit=function(){return D.DAYS},c.rangeUnit=function(){return aq},c.range=function(){return F.of(1,90,92)},c.isSupportedBy=function(a){return a.isSupported(G.DAY_OF_YEAR)&&a.isSupported(G.MONTH_OF_YEAR)&&a.isSupported(G.YEAR)&&this._isIso(a)},c.rangeRefinedBy=function(a){if(!1===a.isSupported(this))throw new k("Unsupported field: DayOfQuarter");var b=a.getLong(am);if(1===b){var c=a.getLong(G.YEAR);return aY.isLeapYear(c)?F.of(1,91):F.of(1,90)}return 2===b?F.of(1,91):3===b||4===b?F.of(1,92):this.range()},c.getFrom=function(a){if(!1===a.isSupported(this))throw new k("Unsupported field: DayOfQuarter");var b=a.get(G.DAY_OF_YEAR),c=a.get(G.MONTH_OF_YEAR),d=a.getLong(G.YEAR);return b-ae[x.intDiv(c-1,3)+4*!!aY.isLeapYear(d)]},c.adjustInto=function(a,b){var c=this.getFrom(a);return this.range().checkValidValue(b,this),a.with(G.DAY_OF_YEAR,a.getLong(G.DAY_OF_YEAR)+(b-c))},c.resolve=function(a,b,c){var d,e=a.get(G.YEAR),f=a.get(am);if(null==e||null==f)return null;var g=G.YEAR.checkValidIntValue(e),h=a.get(al);if(c===R.LENIENT)d=(d=(d=a1.of(g,1,1)).plusMonths(x.safeMultiply(x.safeSubtract(f,1),3))).plusDays(x.safeSubtract(h,1));else{var i=am.range().checkValidIntValue(f,am);if(c===R.STRICT){var j=92;1===i?j=aY.isLeapYear(g)?91:90:2===i&&(j=91),F.of(1,j).checkValidValue(h,this)}else this.range().checkValidValue(h,this);d=a1.of(g,(i-1)*3+1,1).plusDays(h-1)}return a.remove(this),a.remove(G.YEAR),a.remove(am),d},b}(af),ah=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.toString=function(){return"QuarterOfYear"},c.baseUnit=function(){return aq},c.rangeUnit=function(){return D.YEARS},c.range=function(){return F.of(1,4)},c.isSupportedBy=function(a){return a.isSupported(G.MONTH_OF_YEAR)&&this._isIso(a)},c.rangeRefinedBy=function(a){return this.range()},c.getFrom=function(a){if(!1===a.isSupported(this))throw new k("Unsupported field: QuarterOfYear");var b=a.getLong(G.MONTH_OF_YEAR);return x.intDiv(b+2,3)},c.adjustInto=function(a,b){var c=this.getFrom(a);return this.range().checkValidValue(b,this),a.with(G.MONTH_OF_YEAR,a.getLong(G.MONTH_OF_YEAR)+(b-c)*3)},b}(af),ai=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.toString=function(){return"WeekOfWeekBasedYear"},c.baseUnit=function(){return D.WEEKS},c.rangeUnit=function(){return ap},c.range=function(){return F.of(1,52,53)},c.isSupportedBy=function(a){return a.isSupported(G.EPOCH_DAY)&&this._isIso(a)},c.rangeRefinedBy=function(a){if(!1===a.isSupported(this))throw new k("Unsupported field: WeekOfWeekBasedYear");return af._getWeekRangeByLocalDate(a1.from(a))},c.getFrom=function(a){if(!1===a.isSupported(this))throw new k("Unsupported field: WeekOfWeekBasedYear");return af._getWeek(a1.from(a))},c.adjustInto=function(a,b){return this.range().checkValidValue(b,this),a.plus(x.safeSubtract(b,this.getFrom(a)),D.WEEKS)},c.resolve=function(a,b,c){var d,e=a.get(ao),f=a.get(G.DAY_OF_WEEK);if(null==e||null==f)return null;var g=ao.range().checkValidIntValue(e,ao),h=a.get(an);if(c===R.LENIENT){var i=f,j=0;i>7?(j=x.intDiv(i-1,7),i=x.intMod(i-1,7)+1):i<1&&(j=x.intDiv(i,7)-1,i=x.intMod(i,7)+7),d=a1.of(g,1,4).plusWeeks(h-1).plusWeeks(j).with(G.DAY_OF_WEEK,i)}else{var k=G.DAY_OF_WEEK.checkValidIntValue(f);if(c===R.STRICT){var l=a1.of(g,1,4);af._getWeekRangeByLocalDate(l).checkValidValue(h,this)}else this.range().checkValidValue(h,this);d=a1.of(g,1,4).plusWeeks(h-1).with(G.DAY_OF_WEEK,k)}return a.remove(this),a.remove(ao),a.remove(G.DAY_OF_WEEK),d},c.displayName=function(){return"Week"},b}(af),aj=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.toString=function(){return"WeekBasedYear"},c.baseUnit=function(){return ap},c.rangeUnit=function(){return D.FOREVER},c.range=function(){return G.YEAR.range()},c.isSupportedBy=function(a){return a.isSupported(G.EPOCH_DAY)&&this._isIso(a)},c.rangeRefinedBy=function(a){return G.YEAR.range()},c.getFrom=function(a){if(!1===a.isSupported(this))throw new k("Unsupported field: WeekBasedYear");return af._getWeekBasedYear(a1.from(a))},c.adjustInto=function(a,b){if(!1===this.isSupportedBy(a))throw new k("Unsupported field: WeekBasedYear");var c=this.range().checkValidIntValue(b,ao),d=a1.from(a),e=d.get(G.DAY_OF_WEEK),f=af._getWeek(d);53===f&&52===af._getWeekRangeByYear(c)&&(f=52);var g=a1.of(c,1,4),h=e-g.get(G.DAY_OF_WEEK)+(f-1)*7;return g=g.plusDays(h),a.with(g)},b}(af),ak=function(a){function b(b,c){var d;return(d=a.call(this)||this)._name=b,d._duration=c,d}p(b,a);var c=b.prototype;return c.duration=function(){return this._duration},c.isDurationEstimated=function(){return!0},c.isDateBased=function(){return!0},c.isTimeBased=function(){return!1},c.isSupportedBy=function(a){return a.isSupported(G.EPOCH_DAY)},c.addTo=function(a,b){switch(this){case ap:var c=x.safeAdd(a.get(ao),b);return a.with(ao,c);case aq:return a.plus(x.intDiv(b,256),D.YEARS).plus(3*x.intMod(b,256),D.MONTHS);default:throw new n("Unreachable")}},c.between=function(a,b){switch(this){case ap:return x.safeSubtract(b.getLong(ao),a.getLong(ao));case aq:return x.intDiv(a.until(b,D.MONTHS),3);default:throw new n("Unreachable")}},c.toString=function(){return this._name},b}(A),al=null,am=null,an=null,ao=null,ap=null,aq=null,ar=function(){function a(a,b,c,d){this._zeroDigit=a,this._zeroDigitCharCode=a.charCodeAt(0),this._positiveSign=b,this._negativeSign=c,this._decimalSeparator=d}var b=a.prototype;return b.positiveSign=function(){return this._positiveSign},b.withPositiveSign=function(b){return b===this._positiveSign?this:new a(this._zeroDigit,b,this._negativeSign,this._decimalSeparator)},b.negativeSign=function(){return this._negativeSign},b.withNegativeSign=function(b){return b===this._negativeSign?this:new a(this._zeroDigit,this._positiveSign,b,this._decimalSeparator)},b.zeroDigit=function(){return this._zeroDigit},b.withZeroDigit=function(b){return b===this._zeroDigit?this:new a(b,this._positiveSign,this._negativeSign,this._decimalSeparator)},b.decimalSeparator=function(){return this._decimalSeparator},b.withDecimalSeparator=function(b){return b===this._decimalSeparator?this:new a(this._zeroDigit,this._positiveSign,this._negativeSign,b)},b.convertToDigit=function(a){var b=a.charCodeAt(0)-this._zeroDigitCharCode;return b>=0&&b<=9?b:-1},b.convertNumberToI18N=function(a){if("0"===this._zeroDigit)return a;for(var b=this._zeroDigitCharCode-48,c="",d=0;d<a.length;d++)c+=String.fromCharCode(a.charCodeAt(d)+b);return c},b.equals=function(b){return this===b||b instanceof a&&this._zeroDigit===b._zeroDigit&&this._positiveSign===b._positiveSign&&this._negativeSign===b._negativeSign&&this._decimalSeparator===b._decimalSeparator},b.hashCode=function(){return this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator},b.toString=function(){return"DecimalStyle["+this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator+"]"},a.of=function(){throw Error("not yet supported")},a.availableLocales=function(){throw Error("not yet supported")},a}();ar.STANDARD=new ar("0","+","-",".");var as=function(a){function b(){return a.apply(this,arguments)||this}return p(b,a),b.prototype.parse=function(a,c,d){switch(this){case b.NORMAL:return!a||!c;case b.ALWAYS:case b.EXCEEDS_PAD:return!0;default:return!c&&!d}},b}(y);as.NORMAL=new as("NORMAL"),as.NEVER=new as("NEVER"),as.ALWAYS=new as("ALWAYS"),as.EXCEEDS_PAD=new as("EXCEEDS_PAD"),as.NOT_NEGATIVE=new as("NOT_NEGATIVE");var at=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.isStandalone=function(){switch(this){case b.FULL_STANDALONE:case b.SHORT_STANDALONE:case b.NARROW_STANDALONE:return!0;default:return!1}},c.asStandalone=function(){switch(this){case b.FULL:return b.FULL_STANDALONE;case b.SHORT:return b.SHORT_STANDALONE;case b.NARROW:return b.NARROW_STANDALONE;default:return this}},c.asNormal=function(){switch(this){case b.FULL_STANDALONE:return b.FULL;case b.SHORT_STANDALONE:return b.SHORT;case b.NARROW_STANDALONE:return b.NARROW;default:return this}},b}(y);at.FULL=new at("FULL"),at.FULL_STANDALONE=new at("FULL_STANDALONE"),at.SHORT=new at("SHORT"),at.SHORT_STANDALONE=new at("SHORT_STANDALONE"),at.NARROW=new at("NARROW"),at.NARROW_STANDALONE=new at("NARROW_STANDALONE");var au=function(){function a(a){if(a.length>1)throw new m('invalid literal, too long: "'+a+'"');this._literal=a}var b=a.prototype;return b.print=function(a,b){return b.append(this._literal),!0},b.parse=function(a,b,c){if(c===b.length)return~c;var d=b.charAt(c);return!1===a.charEquals(this._literal,d)?~c:c+this._literal.length},b.toString=function(){return"'"===this._literal?"''":"'"+this._literal+"'"},a}(),av=function(){function a(a,b){this._printerParsers=a,this._optional=b}var b=a.prototype;return b.withOptional=function(b){return b===this._optional?this:new a(this._printerParsers,b)},b.print=function(a,b){var c=b.length();this._optional&&a.startOptional();try{for(var d=0;d<this._printerParsers.length;d++){var e=this._printerParsers[d];if(!1===e.print(a,b))return b.setLength(c),!0}}finally{this._optional&&a.endOptional()}return!0},b.parse=function(a,b,c){if(this._optional){a.startOptional();for(var d=c,e=0;e<this._printerParsers.length;e++)if((d=this._printerParsers[e].parse(a,b,d))<0)return a.endOptional(!1),c;return a.endOptional(!0),d}for(var f=0;f<this._printerParsers.length&&!((c=this._printerParsers[f].parse(a,b,c))<0);f++);return c},b.toString=function(){var a="";if(null!=this._printerParsers){a+=this._optional?"[":"(";for(var b=0;b<this._printerParsers.length;b++)a+=this._printerParsers[b].toString();a+=this._optional?"]":")"}return a},a}(),aw=function(){function a(a,b,c,d){if(t(a,"field"),!1===a.range().isFixed())throw new m("Field must have a fixed set of values: "+a);if(b<0||b>9)throw new m("Minimum width must be from 0 to 9 inclusive but was "+b);if(c<1||c>9)throw new m("Maximum width must be from 1 to 9 inclusive but was "+c);if(c<b)throw new m("Maximum width must exceed or equal the minimum width but "+c+" < "+b);this.field=a,this.minWidth=b,this.maxWidth=c,this.decimalPoint=d}var b=a.prototype;return b.print=function(a,b){var c=a.getValue(this.field);if(null===c)return!1;var d=a.symbols();if(0===c){if(this.minWidth>0){this.decimalPoint&&b.append(d.decimalSeparator());for(var e=0;e<this.minWidth;e++)b.append(d.zeroDigit())}}else{var f=this.convertToFraction(c,d.zeroDigit()),g=Math.min(Math.max(f.length,this.minWidth),this.maxWidth);if(+(f=f.substr(0,g))>0)for(;f.length>this.minWidth&&"0"===f[f.length-1];)f=f.substr(0,f.length-1);var h=f;h=d.convertNumberToI18N(h),this.decimalPoint&&b.append(d.decimalSeparator()),b.append(h)}return!0},b.parse=function(a,b,c){var d=a.isStrict()?this.minWidth:0,e=a.isStrict()?this.maxWidth:9,f=b.length;if(c===f)return d>0?~c:c;if(this.decimalPoint){if(b[c]!==a.symbols().decimalSeparator())return d>0?~c:c;c++}var g=c+d;if(g>f)return~c;for(var h=Math.min(c+e,f),i=0,j=c;j<h;){var k=b.charAt(j++),l=a.symbols().convertToDigit(k);if(l<0){if(j<g)return~c;j--;break}i=10*i+l}var m=Math.pow(10,j-c),n=this.convertFromFraction(i,m);return a.setParsedField(this.field,n,c,j)},b.convertToFraction=function(a,b){var c=this.field.range();c.checkValidValue(a,this.field);for(var d=c.minimum(),e=c.maximum()-d+1,f=a-d,g=""+x.intDiv(1e9*f,e);g.length<9;)g=b+g;return g},b.convertFromFraction=function(a,b){var c=this.field.range(),d=c.minimum(),e=c.maximum()-d+1;return x.intDiv(a*e,b)},b.toString=function(){var a=this.decimalPoint?",DecimalPoint":"";return"Fraction("+this.field+","+this.minWidth+","+this.maxWidth+a+")"},a}(),ax=[0,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],ay=function(){function a(a,b,c,d,e){void 0===e&&(e=0),this._field=a,this._minWidth=b,this._maxWidth=c,this._signStyle=d,this._subsequentWidth=e}var b=a.prototype;return b.field=function(){return this._field},b.minWidth=function(){return this._minWidth},b.maxWidth=function(){return this._maxWidth},b.signStyle=function(){return this._signStyle},b.withFixedWidth=function(){return -1===this._subsequentWidth?this:new a(this._field,this._minWidth,this._maxWidth,this._signStyle,-1)},b.withSubsequentWidth=function(b){return new a(this._field,this._minWidth,this._maxWidth,this._signStyle,this._subsequentWidth+b)},b._isFixedWidth=function(){return -1===this._subsequentWidth||this._subsequentWidth>0&&this._minWidth===this._maxWidth&&this._signStyle===as.NOT_NEGATIVE},b.print=function(a,b){var c=a.getValue(this._field);if(null==c)return!1;var d=this._getValue(a,c),e=a.symbols(),f=""+Math.abs(d);if(f.length>this._maxWidth)throw new i("Field "+this._field+" cannot be printed as the value "+d+" exceeds the maximum print width of "+this._maxWidth);if(f=e.convertNumberToI18N(f),d>=0)switch(this._signStyle){case as.EXCEEDS_PAD:this._minWidth<15&&d>=ax[this._minWidth]&&b.append(e.positiveSign());break;case as.ALWAYS:b.append(e.positiveSign())}else switch(this._signStyle){case as.NORMAL:case as.EXCEEDS_PAD:case as.ALWAYS:b.append(e.negativeSign());break;case as.NOT_NEGATIVE:throw new i("Field "+this._field+" cannot be printed as the value "+d+" cannot be negative according to the SignStyle")}for(var g=0;g<this._minWidth-f.length;g++)b.append(e.zeroDigit());return b.append(f),!0},b.parse=function(a,b,c){var d=b.length;if(c===d)return~c;s(c>=0&&c<d);var e=b.charAt(c),f=!1,g=!1;if(e===a.symbols().positiveSign()){if(!1===this._signStyle.parse(!0,a.isStrict(),this._minWidth===this._maxWidth))return~c;g=!0,c++}else if(e===a.symbols().negativeSign()){if(!1===this._signStyle.parse(!1,a.isStrict(),this._minWidth===this._maxWidth))return~c;f=!0,c++}else if(this._signStyle===as.ALWAYS&&a.isStrict())return~c;var h=a.isStrict()||this._isFixedWidth()?this._minWidth:1,i=c+h;if(i>d)return~c;for(var j=(a.isStrict()||this._isFixedWidth()?this._maxWidth:9)+Math.max(this._subsequentWidth,0),k=0,m=c,n=0;n<2;n++){for(var o=Math.min(m+j,d);m<o;){var p=b.charAt(m++),q=a.symbols().convertToDigit(p);if(q<0){if(--m<i)return~c;break}if(m-c>15)throw new l("number text exceeds length");k=10*k+q}if(this._subsequentWidth>0&&0===n)j=Math.max(h,m-c-this._subsequentWidth),m=c,k=0;else break}if(f){if(0===k&&a.isStrict())return~(c-1);0!==k&&(k=-k)}else if(this._signStyle===as.EXCEEDS_PAD&&a.isStrict()){var r=m-c;if(g){if(r<=this._minWidth)return~(c-1)}else if(r>this._minWidth)return~c}return this._setValue(a,k,c,m)},b._getValue=function(a,b){return b},b._setValue=function(a,b,c,d){return a.setParsedField(this._field,b,c,d)},b.toString=function(){return 1===this._minWidth&&15===this._maxWidth&&this._signStyle===as.NORMAL?"Value("+this._field+")":this._minWidth===this._maxWidth&&this._signStyle===as.NOT_NEGATIVE?"Value("+this._field+","+this._minWidth+")":"Value("+this._field+","+this._minWidth+","+this._maxWidth+","+this._signStyle+")"},a}(),az=function(a){function b(b,c,d,e,f){var g;if(g=a.call(this,b,c,d,as.NOT_NEGATIVE)||this,c<1||c>10)throw new m("The width must be from 1 to 10 inclusive but was "+c);if(d<1||d>10)throw new m("The maxWidth must be from 1 to 10 inclusive but was "+d);if(d<c)throw new m("The maxWidth must be greater than the width");if(null===f){if(!1===b.range().isValidValue(e))throw new m("The base value must be within the range of the field");if(e+ax[c]>x.MAX_SAFE_INTEGER)throw new i("Unable to add printer-parser as the range exceeds the capacity of an int")}return g._baseValue=e,g._baseDate=f,g}p(b,a);var c=b.prototype;return c._getValue=function(a,b){var c=Math.abs(b),d=this._baseValue;return(null!==this._baseDate&&(a.temporal(),d=aY.INSTANCE.date(this._baseDate).get(this._field)),b>=d&&b<d+ax[this._minWidth])?c%ax[this._minWidth]:c%ax[this._maxWidth]},c._setValue=function(a,b,c,d){var e=this._baseValue;if(null!=this._baseDate&&(e=a.getEffectiveChronology().date(this._baseDate).get(this._field)),d-c===this._minWidth&&b>=0){var f=ax[this._minWidth],g=e%f,h=e-g;(b=e>0?h+b:h-b)<e&&(b+=f)}return a.setParsedField(this._field,b,c,d)},c.withFixedWidth=function(){return -1===this._subsequentWidth?this:new b(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate)},c.withSubsequentWidth=function(a){return new b(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,this._subsequentWidth+a)},c.isFixedWidth=function(b){return!1!==b.isStrict()&&a.prototype.isFixedWidth.call(this,b)},c.toString=function(){return"ReducedValue("+this._field+","+this._minWidth+","+this._maxWidth+","+(null!=this._baseDate?this._baseDate:this._baseValue)+")"},b}(ay),aA=["+HH","+HHmm","+HH:mm","+HHMM","+HH:MM","+HHMMss","+HH:MM:ss","+HHMMSS","+HH:MM:SS"],aB=function(){function a(a,b){t(a,"noOffsetText"),t(b,"pattern"),this.noOffsetText=a,this.type=this._checkPattern(b)}var b=a.prototype;return b._checkPattern=function(a){for(var b=0;b<aA.length;b++)if(aA[b]===a)return b;throw new m("Invalid zone offset pattern: "+a)},b.print=function(a,b){var c=a.getValue(G.OFFSET_SECONDS);if(null==c)return!1;var d=x.safeToInt(c);if(0===d)b.append(this.noOffsetText);else{var e=Math.abs(x.intMod(x.intDiv(d,3600),100)),f=Math.abs(x.intMod(x.intDiv(d,60),60)),g=Math.abs(x.intMod(d,60)),h=b.length(),i=e;b.append(d<0?"-":"+").appendChar(x.intDiv(e,10)+"0").appendChar(x.intMod(e,10)+"0"),(this.type>=3||this.type>=1&&f>0)&&(b.append(this.type%2==0?":":"").appendChar(x.intDiv(f,10)+"0").appendChar(f%10+"0"),i+=f,(this.type>=7||this.type>=5&&g>0)&&(b.append(this.type%2==0?":":"").appendChar(x.intDiv(g,10)+"0").appendChar(g%10+"0"),i+=g)),0===i&&(b.setLength(h),b.append(this.noOffsetText))}return!0},b.parse=function(a,b,c){var d=b.length,e=this.noOffsetText.length;if(0===e){if(c===d)return a.setParsedField(G.OFFSET_SECONDS,0,c,c)}else{if(c===d)return~c;if(a.subSequenceEquals(b,c,this.noOffsetText,0,e))return a.setParsedField(G.OFFSET_SECONDS,0,c,c+e)}var f=b[c];if("+"===f||"-"===f){var g=[0,0,0,0];if(g[0]=c+1,!1===(this._parseNumber(g,1,b,!0)||this._parseNumber(g,2,b,this.type>=3)||this._parseNumber(g,3,b,!1))){var h=x.safeZero(("-"===f?-1:1)*(3600*g[1]+60*g[2]+g[3]));return a.setParsedField(G.OFFSET_SECONDS,h,c,g[0])}}return 0===e?a.setParsedField(G.OFFSET_SECONDS,0,c,c+e):~c},b._parseNumber=function(a,b,c,d){if((this.type+3)/2<b)return!1;var e=a[0];if(this.type%2==0&&b>1){if(e+1>c.length||":"!==c[e])return d;e++}if(e+2>c.length)return d;var f=c[e++],g=c[e++];if(f<"0"||f>"9"||g<"0"||g>"9")return d;var h=(f.charCodeAt(0)-48)*10+(g.charCodeAt(0)-48);return h<0||h>59?d:(a[b]=h,a[0]=e,!1)},b.toString=function(){var a=this.noOffsetText.replace("'","''");return"Offset("+aA[this.type]+",'"+a+"')"},a}();aB.INSTANCE_ID=new aB("Z","+HH:MM:ss"),aB.PATTERNS=aA;var aC=function(){function a(a,b,c){this._printerParser=a,this._padWidth=b,this._padChar=c}var b=a.prototype;return b.print=function(a,b){var c=b.length();if(!1===this._printerParser.print(a,b))return!1;var d=b.length()-c;if(d>this._padWidth)throw new i("Cannot print as output of "+d+" characters exceeds pad width of "+this._padWidth);for(var e=0;e<this._padWidth-d;e++)b.insert(c,this._padChar);return!0},b.parse=function(a,b,c){var d=a.isStrict(),e=a.isCaseSensitive();if(s(!(c>b.length)),s(c>=0),c===b.length)return~c;var f=c+this._padWidth;if(f>b.length){if(d)return~c;f=b.length}for(var g=c;g<f&&(e?b[g]===this._padChar:a.charEquals(b[g],this._padChar));)g++;b=b.substring(0,f);var h=this._printerParser.parse(a,b,g);return h!==f&&d?~(c+g):h},b.toString=function(){return"Pad("+this._printerParser+","+this._padWidth+(" "===this._padChar?")":",'"+this._padChar+"')")},a}(),aD=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.print=function(){return!0},c.parse=function(a,c,d){switch(this){case b.SENSITIVE:a.setCaseSensitive(!0);break;case b.INSENSITIVE:a.setCaseSensitive(!1);break;case b.STRICT:a.setStrict(!0);break;case b.LENIENT:a.setStrict(!1)}return d},c.toString=function(){switch(this){case b.SENSITIVE:return"ParseCaseSensitive(true)";case b.INSENSITIVE:return"ParseCaseSensitive(false)";case b.STRICT:return"ParseStrict(true)";case b.LENIENT:return"ParseStrict(false)"}},b}(y);aD.SENSITIVE=new aD("SENSITIVE"),aD.INSENSITIVE=new aD("INSENSITIVE"),aD.STRICT=new aD("STRICT"),aD.LENIENT=new aD("LENIENT");var aE=function(){function a(a){this._literal=a}var b=a.prototype;return b.print=function(a,b){return b.append(this._literal),!0},b.parse=function(a,b,c){return(s(!(c>b.length||c<0)),!1===a.subSequenceEquals(b,c,this._literal,0,this._literal.length))?~c:c+this._literal.length},b.toString=function(){return"'"+this._literal.replace("'","''")+"'"},a}(),aF=function(){function a(){}return a.getRules=function(a){throw new i("unsupported ZoneId:"+a)},a.getAvailableZoneIds=function(){return[]},a}(),aG=function(a){function b(b,c){var d;return(d=a.call(this)||this)._id=b,d._rules=c,d}p(b,a),b.ofId=function(a){var c=aF.getRules(a);return new b(a,c)};var c=b.prototype;return c.id=function(){return this._id},c.rules=function(){return this._rules},b}(V),aH=function(){function a(a,b){this.query=a,this.description=b}var b=a.prototype;return b.print=function(a,b){var c=a.getValueQuery(this.query);return null!=c&&(b.append(c.id()),!0)},b.parse=function(a,b,c){var d=b.length;if(c>d||c===d)return~c;var e=b.charAt(c);if("+"===e||"-"===e){var f=a.copy(),g=aB.INSTANCE_ID.parse(f,b,c);if(g<0)return g;var h=f.getParsed(G.OFFSET_SECONDS),i=$.ofTotalSeconds(h);return a.setParsedZone(i),g}if(d>=c+2){var j=b.charAt(c+1);if(a.charEquals(e,"U")&&a.charEquals(j,"T"))return d>=c+3&&a.charEquals(b.charAt(c+2),"C")?this._parsePrefixedOffset(a,b,c,c+3):this._parsePrefixedOffset(a,b,c,c+2);if(a.charEquals(e,"G")&&d>=c+3&&a.charEquals(j,"M")&&a.charEquals(b.charAt(c+2),"T"))return this._parsePrefixedOffset(a,b,c,c+3)}if("SYSTEM"===b.substr(c,6))return a.setParsedZone(V.systemDefault()),c+6;if(a.charEquals(e,"Z"))return a.setParsedZone($.UTC),c+1;var k=aF.getAvailableZoneIds();aK.size!==k.length&&(aK=aI.createTreeMap(k));for(var l=d-c,m=aK.treeMap,n=null,o=0;null!=m;){var p=b.substr(c,Math.min(m.length,l));null!=(m=m.get(p))&&m.isLeaf&&(n=p,o=m.length)}return null!=n?(a.setParsedZone(aG.ofId(n)),c+o):~c},b._parsePrefixedOffset=function(a,b,c,d){var e=b.substring(c,d).toUpperCase(),f=a.copy();if(d<b.length&&a.charEquals(b.charAt(d),"Z"))return a.setParsedZone(V.ofOffset(e,$.UTC)),d;var g=aB.INSTANCE_ID.parse(f,b,d);if(g<0)return a.setParsedZone(V.ofOffset(e,$.UTC)),d;var h=f.getParsed(G.OFFSET_SECONDS),i=$.ofTotalSeconds(h);return a.setParsedZone(V.ofOffset(e,i)),g},b.toString=function(){return this.description},a}(),aI=function(){function a(a,b){this.size=a,this.treeMap=b}return a.createTreeMap=function(b){for(var c=b.sort(function(a,b){return a.length-b.length}),d=new aJ(c[0].length,!1),e=0;e<c.length;e++)d.add(c[e]);return new a(c.length,d)},a}(),aJ=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=!1),this.length=a,this.isLeaf=b,this._treeMap={}}var b=a.prototype;return b.add=function(b){var c=b.length;if(c===this.length)this._treeMap[b]=new a(c,!0);else if(c>this.length){var d=b.substr(0,this.length),e=this._treeMap[d];null==e&&(e=new a(c,!1),this._treeMap[d]=e),e.add(b)}},b.get=function(a){return this._treeMap[a]},a}(),aK=new aI([]),aL=function(){function a(){this._active=this,this._parent=null,this._printerParsers=[],this._optional=!1,this._padNextWidth=0,this._padNextChar=null,this._valueParserIndex=-1}a._of=function(b,c){t(b,"parent"),t(c,"optional");var d=new a;return d._parent=b,d._optional=c,d};var b=a.prototype;return b.parseCaseSensitive=function(){return this._appendInternalPrinterParser(aD.SENSITIVE),this},b.parseCaseInsensitive=function(){return this._appendInternalPrinterParser(aD.INSENSITIVE),this},b.parseStrict=function(){return this._appendInternalPrinterParser(aD.STRICT),this},b.parseLenient=function(){return this._appendInternalPrinterParser(aD.LENIENT),this},b.parseDefaulting=function(a,b){return t(a),this._appendInternal(new aN(a,b)),this},b.appendValue=function(){return 1==arguments.length?this._appendValue1.apply(this,arguments):2==arguments.length?this._appendValue2.apply(this,arguments):this._appendValue4.apply(this,arguments)},b._appendValue1=function(a){return t(a),this._appendValuePrinterParser(new ay(a,1,15,as.NORMAL)),this},b._appendValue2=function(a,b){if(t(a),b<1||b>15)throw new m("The width must be from 1 to 15 inclusive but was "+b);var c=new ay(a,b,b,as.NOT_NEGATIVE);return this._appendValuePrinterParser(c),this},b._appendValue4=function(a,b,c,d){if(t(a),t(d),b===c&&d===as.NOT_NEGATIVE)return this._appendValue2(a,c);if(b<1||b>15)throw new m("The minimum width must be from 1 to 15 inclusive but was "+b);if(c<1||c>15)throw new m("The minimum width must be from 1 to 15 inclusive but was "+c);if(c<b)throw new m("The maximum width must exceed or equal the minimum width but "+c+" < "+b);var e=new ay(a,b,c,d);return this._appendValuePrinterParser(e),this},b.appendValueReduced=function(){return 4==arguments.length&&arguments[3]instanceof T?this._appendValueReducedFieldWidthMaxWidthBaseDate.apply(this,arguments):this._appendValueReducedFieldWidthMaxWidthBaseValue.apply(this,arguments)},b._appendValueReducedFieldWidthMaxWidthBaseValue=function(a,b,c,d){t(a,"field");var e=new az(a,b,c,d,null);return this._appendValuePrinterParser(e),this},b._appendValueReducedFieldWidthMaxWidthBaseDate=function(a,b,c,d){t(a,"field"),t(d,"baseDate"),u(d,T,"baseDate");var e=new az(a,b,c,0,d);return this._appendValuePrinterParser(e),this},b._appendValuePrinterParser=function(a){if(s(null!=a),this._active._valueParserIndex>=0&&this._active._printerParsers[this._active._valueParserIndex]instanceof ay){var b=this._active._valueParserIndex,c=this._active._printerParsers[b];a.minWidth()===a.maxWidth()&&a.signStyle()===as.NOT_NEGATIVE?(c=c.withSubsequentWidth(a.maxWidth()),this._appendInternal(a.withFixedWidth()),this._active._valueParserIndex=b):(c=c.withFixedWidth(),this._active._valueParserIndex=this._appendInternal(a)),this._active._printerParsers[b]=c}else this._active._valueParserIndex=this._appendInternal(a);return this},b.appendFraction=function(a,b,c,d){return this._appendInternal(new aw(a,b,c,d)),this},b.appendInstant=function(a){if(void 0===a&&(a=-2),a<-2||a>9)throw new m("Invalid fractional digits: "+a);return this._appendInternal(new aM(a)),this},b.appendOffsetId=function(){return this._appendInternal(aB.INSTANCE_ID),this},b.appendOffset=function(a,b){return this._appendInternalPrinterParser(new aB(b,a)),this},b.appendZoneId=function(){return this._appendInternal(new aH(H.zoneId(),"ZoneId()")),this},b.appendPattern=function(a){return t(a,"pattern"),this._parsePattern(a),this},b.appendZoneText=function(){throw new m("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},b.appendText=function(){throw new m("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},b.appendLocalizedOffset=function(){throw new m("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},b.appendWeekField=function(){throw new m("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},b._parsePattern=function(a){for(var b={G:G.ERA,y:G.YEAR_OF_ERA,u:G.YEAR,Q:ad.QUARTER_OF_YEAR,q:ad.QUARTER_OF_YEAR,M:G.MONTH_OF_YEAR,L:G.MONTH_OF_YEAR,D:G.DAY_OF_YEAR,d:G.DAY_OF_MONTH,F:G.ALIGNED_DAY_OF_WEEK_IN_MONTH,E:G.DAY_OF_WEEK,c:G.DAY_OF_WEEK,e:G.DAY_OF_WEEK,a:G.AMPM_OF_DAY,H:G.HOUR_OF_DAY,k:G.CLOCK_HOUR_OF_DAY,K:G.HOUR_OF_AMPM,h:G.CLOCK_HOUR_OF_AMPM,m:G.MINUTE_OF_HOUR,s:G.SECOND_OF_MINUTE,S:G.NANO_OF_SECOND,A:G.MILLI_OF_DAY,n:G.NANO_OF_SECOND,N:G.NANO_OF_DAY},c=0;c<a.length;c++){var d=a.charAt(c);if(d>="A"&&d<="Z"||d>="a"&&d<="z"){for(var e=c++;c<a.length&&a.charAt(c)===d;c++);var f=c-e;if("p"===d){var g=0;if(c<a.length&&((d=a.charAt(c))>="A"&&d<="Z"||d>="a"&&d<="z")){for(g=f,e=c++;c<a.length&&a.charAt(c)===d;c++);f=c-e}if(0===g)throw new m("Pad letter 'p' must be followed by valid pad pattern: "+a);this.padNext(g)}var h=b[d];if(null!=h)this._parseField(d,f,h);else if("z"===d)if(f>4)throw new m("Too many pattern letters: "+d);else 4===f?this.appendZoneText(at.FULL):this.appendZoneText(at.SHORT);else if("V"===d){if(2!==f)throw new m("Pattern letter count must be 2: "+d);this.appendZoneId()}else if("Z"===d)if(f<4)this.appendOffset("+HHMM","+0000");else if(4===f)this.appendLocalizedOffset(at.FULL);else if(5===f)this.appendOffset("+HH:MM:ss","Z");else throw new m("Too many pattern letters: "+d);else if("O"===d)if(1===f)this.appendLocalizedOffset(at.SHORT);else if(4===f)this.appendLocalizedOffset(at.FULL);else throw new m("Pattern letter count must be 1 or 4: "+d);else if("X"===d){if(f>5)throw new m("Too many pattern letters: "+d);this.appendOffset(aB.PATTERNS[f+ +(1!==f)],"Z")}else if("x"===d){if(f>5)throw new m("Too many pattern letters: "+d);var i=1===f?"+00":f%2==0?"+0000":"+00:00";this.appendOffset(aB.PATTERNS[f+ +(1!==f)],i)}else if("W"===d){if(f>1)throw new m("Too many pattern letters: "+d);this.appendWeekField("W",f)}else if("w"===d){if(f>2)throw new m("Too many pattern letters: "+d);this.appendWeekField("w",f)}else if("Y"===d)this.appendWeekField("Y",f);else throw new m("Unknown pattern letter: "+d);c--}else if("'"===d){for(var j=c++;c<a.length;c++)if("'"===a.charAt(c))if(c+1<a.length&&"'"===a.charAt(c+1))c++;else break;if(c>=a.length)throw new m("Pattern ends with an incomplete string literal: "+a);var k=a.substring(j+1,c);0===k.length?this.appendLiteral("'"):this.appendLiteral(k.replace("''","'"))}else if("["===d)this.optionalStart();else if("]"===d){if(null===this._active._parent)throw new m("Pattern invalid as it contains ] without previous [");this.optionalEnd()}else if("{"===d||"}"===d||"#"===d)throw new m("Pattern includes reserved character: '"+d+"'");else this.appendLiteral(d)}},b._parseField=function(a,b,c){switch(a){case"u":case"y":2===b?this.appendValueReduced(c,2,2,az.BASE_DATE):b<4?this.appendValue(c,b,15,as.NORMAL):this.appendValue(c,b,15,as.EXCEEDS_PAD);break;case"M":case"Q":switch(b){case 1:this.appendValue(c);break;case 2:this.appendValue(c,2);break;case 3:this.appendText(c,at.SHORT);break;case 4:this.appendText(c,at.FULL);break;case 5:this.appendText(c,at.NARROW);break;default:throw new m("Too many pattern letters: "+a)}break;case"L":case"q":switch(b){case 1:this.appendValue(c);break;case 2:this.appendValue(c,2);break;case 3:this.appendText(c,at.SHORT_STANDALONE);break;case 4:this.appendText(c,at.FULL_STANDALONE);break;case 5:this.appendText(c,at.NARROW_STANDALONE);break;default:throw new m("Too many pattern letters: "+a)}break;case"e":switch(b){case 1:case 2:this.appendWeekField("e",b);break;case 3:this.appendText(c,at.SHORT);break;case 4:this.appendText(c,at.FULL);break;case 5:this.appendText(c,at.NARROW);break;default:throw new m("Too many pattern letters: "+a)}break;case"c":switch(b){case 1:this.appendWeekField("c",b);break;case 2:throw new m("Invalid number of pattern letters: "+a);case 3:this.appendText(c,at.SHORT_STANDALONE);break;case 4:this.appendText(c,at.FULL_STANDALONE);break;case 5:this.appendText(c,at.NARROW_STANDALONE);break;default:throw new m("Too many pattern letters: "+a)}break;case"a":if(1===b)this.appendText(c,at.SHORT);else throw new m("Too many pattern letters: "+a);break;case"E":case"G":switch(b){case 1:case 2:case 3:this.appendText(c,at.SHORT);break;case 4:this.appendText(c,at.FULL);break;case 5:this.appendText(c,at.NARROW);break;default:throw new m("Too many pattern letters: "+a)}break;case"S":this.appendFraction(G.NANO_OF_SECOND,b,b,!1);break;case"F":if(1===b)this.appendValue(c);else throw new m("Too many pattern letters: "+a);break;case"d":case"h":case"H":case"k":case"K":case"m":case"s":if(1===b)this.appendValue(c);else if(2===b)this.appendValue(c,b);else throw new m("Too many pattern letters: "+a);break;case"D":if(1===b)this.appendValue(c);else if(b<=3)this.appendValue(c,b);else throw new m("Too many pattern letters: "+a);break;default:1===b?this.appendValue(c):this.appendValue(c,b)}},b.padNext=function(){return 1==arguments.length?this._padNext1.apply(this,arguments):this._padNext2.apply(this,arguments)},b._padNext1=function(a){return this._padNext2(a," ")},b._padNext2=function(a,b){if(a<1)throw new m("The pad width must be at least one but was "+a);return this._active._padNextWidth=a,this._active._padNextChar=b,this._active._valueParserIndex=-1,this},b.optionalStart=function(){return this._active._valueParserIndex=-1,this._active=a._of(this._active,!0),this},b.optionalEnd=function(){if(null==this._active._parent)throw new n("Cannot call optionalEnd() as there was no previous call to optionalStart()");if(this._active._printerParsers.length>0){var a=new av(this._active._printerParsers,this._active._optional);this._active=this._active._parent,this._appendInternal(a)}else this._active=this._active._parent;return this},b._appendInternal=function(a){return s(null!=a),this._active._padNextWidth>0&&(null!=a&&(a=new aC(a,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(a),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},b.appendLiteral=function(a){return s(null!=a),a.length>0&&(1===a.length?this._appendInternalPrinterParser(new au(a.charAt(0))):this._appendInternalPrinterParser(new aE(a))),this},b._appendInternalPrinterParser=function(a){return s(null!=a),this._active._padNextWidth>0&&(null!=a&&(a=new aC(a,this._active._padNextWidth,this._active._padNextChar)),this._active._padNextWidth=0,this._active._padNextChar=0),this._active._printerParsers.push(a),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},b.append=function(a){return t(a,"formatter"),this._appendInternal(a._toPrinterParser(!1)),this},b.toFormatter=function(a){for(void 0===a&&(a=R.SMART);null!=this._active._parent;)this.optionalEnd();return new aP(new av(this._printerParsers,!1),null,ar.STANDARD,a,null,null,null)},a}(),aM=function(){function a(a){this.fractionalDigits=a}var b=a.prototype;return b.print=function(a,b){var c=a.getValue(G.INSTANT_SECONDS),d=0;if(a.temporal().isSupported(G.NANO_OF_SECOND)&&(d=a.temporal().getLong(G.NANO_OF_SECOND)),null==c)return!1;var e=G.NANO_OF_SECOND.checkValidIntValue(d);if(c>=-0xe79747c00){var f=c-31556952e4+0xe79747c00,g=x.floorDiv(f,31556952e4)+1,h=x.floorMod(f,31556952e4),i=a3.ofEpochSecond(h-0xe79747c00,0,$.UTC);g>0&&b.append("+").append(g),b.append(i.toString()),0===i.second()&&b.append(":00")}else{var j=c+0xe79747c00,k=x.intDiv(j,31556952e4),l=x.intMod(j,31556952e4),m=a3.ofEpochSecond(l-0xe79747c00,0,$.UTC),n=b.length();b.append(m.toString()),0===m.second()&&b.append(":00"),k<0&&(-1e4===m.year()?b.replace(n,n+2,""+(k-1)):0===l?b.insert(n,k):b.insert(n+1,Math.abs(k)))}if(-2===this.fractionalDigits)0!==e&&(b.append("."),0===x.intMod(e,1e6)?b.append((""+(x.intDiv(e,1e6)+1e3)).substring(1)):0===x.intMod(e,1e3)?b.append((""+(x.intDiv(e,1e3)+1e6)).substring(1)):b.append((""+(e+1e9)).substring(1)));else if(this.fractionalDigits>0||-1===this.fractionalDigits&&e>0){b.append(".");for(var o=1e8,p=0;-1===this.fractionalDigits&&e>0||p<this.fractionalDigits;p++){var q=x.intDiv(e,o);b.append(q),e-=q*o,o=x.intDiv(o,10)}}return b.append("Z"),!0},b.parse=function(a,b,c){var d,e=a.copy(),f=this.fractionalDigits<0?0:this.fractionalDigits,g=this.fractionalDigits<0?9:this.fractionalDigits,h=new aL().append(aP.ISO_LOCAL_DATE).appendLiteral("T").appendValue(G.HOUR_OF_DAY,2).appendLiteral(":").appendValue(G.MINUTE_OF_HOUR,2).appendLiteral(":").appendValue(G.SECOND_OF_MINUTE,2).appendFraction(G.NANO_OF_SECOND,f,g,!0).appendLiteral("Z").toFormatter()._toPrinterParser(!1).parse(e,b,c);if(h<0)return h;var i=e.getParsed(G.YEAR),j=e.getParsed(G.MONTH_OF_YEAR),k=e.getParsed(G.DAY_OF_MONTH),l=e.getParsed(G.HOUR_OF_DAY),m=e.getParsed(G.MINUTE_OF_HOUR),n=e.getParsed(G.SECOND_OF_MINUTE),o=e.getParsed(G.NANO_OF_SECOND),p=null!=n?n:0,q=null!=o?o:0,r=x.intMod(i,1e4),s=0;24===l&&0===m&&0===p&&0===q?(l=0,s=1):23===l&&59===m&&60===p&&(a.setParsedLeapSecond(),p=59);try{d=a3.of(r,j,k,l,m,p,0).plusDays(s).toEpochSecond($.UTC)+x.safeMultiply(x.intDiv(i,1e4),31556952e4)}catch(a){return~c}var t=h;return t=a.setParsedField(G.INSTANT_SECONDS,d,c,t),a.setParsedField(G.NANO_OF_SECOND,q,c,t)},b.toString=function(){return"Instant()"},a}(),aN=function(){function a(a,b){this._field=a,this._value=b}var b=a.prototype;return b.print=function(){return!0},b.parse=function(a,b,c){return null==a.getParsed(this._field)&&a.setParsedField(this._field,this._value,c,c),c},a}(),aO=function(){function a(){this._str=""}var b=a.prototype;return b.append=function(a){return this._str+=a,this},b.appendChar=function(a){return this._str+=a[0],this},b.insert=function(a,b){return this._str=this._str.slice(0,a)+b+this._str.slice(a),this},b.replace=function(a,b,c){return this._str=this._str.slice(0,a)+c+this._str.slice(b),this},b.length=function(){return this._str.length},b.setLength=function(a){return this._str=this._str.slice(0,a),this},b.toString=function(){return this._str},a}(),aP=function(){function a(a,b,c,d,e,f,g){void 0===f&&(f=aY.INSTANCE),s(null!=a),s(null!=c),s(null!=d),this._printerParser=a,this._locale=b,this._decimalStyle=c,this._resolverStyle=d,this._resolverFields=e,this._chrono=f,this._zone=g}a.parsedExcessDays=function(){return a.PARSED_EXCESS_DAYS},a.parsedLeapSecond=function(){return a.PARSED_LEAP_SECOND},a.ofPattern=function(a){return new aL().appendPattern(a).toFormatter()};var b=a.prototype;return b.locale=function(){return this._locale},b.decimalStyle=function(){return this._decimalStyle},b.chronology=function(){return this._chrono},b.withChronology=function(b){return null!=this._chrono&&this._chrono.equals(b)?this:new a(this._printerParser,this._locale,this._decimalStyle,this._resolverStyle,this._resolverFields,b,this._zone)},b.withLocale=function(){return this},b.withResolverStyle=function(b){return(t(b,"resolverStyle"),b.equals(this._resolverStyle))?this:new a(this._printerParser,this._locale,this._decimalStyle,b,this._resolverFields,this._chrono,this._zone)},b.format=function(a){var b=new aO(32);return this._formatTo(a,b),b.toString()},b._formatTo=function(a,b){t(a,"temporal"),t(b,"appendable");var c=new ac(a,this);this._printerParser.print(c,b)},b.parse=function(a,b){return 1==arguments.length?this.parse1(a):this.parse2(a,b)},b.parse1=function(a){t(a,"text");try{return this._parseToBuilder(a,null).resolve(this._resolverStyle,this._resolverFields)}catch(b){if(b instanceof j)throw b;throw this._createError(a,b)}},b.parse2=function(a,b){t(a,"text"),t(b,"type");try{return this._parseToBuilder(a,null).resolve(this._resolverStyle,this._resolverFields).build(b)}catch(b){if(b instanceof j)throw b;throw this._createError(a,b)}},b._createError=function(a,b){return new j("Text '"+(a.length>64?a.substring(0,64)+"...":a)+"' could not be parsed: "+b.message,a,0,b)},b._parseToBuilder=function(a,b){var c=null!=b?b:new P(0),d=this._parseUnresolved0(a,c);if(null==d||c.getErrorIndex()>=0||null==b&&c.getIndex()<a.length){var e="";if(e=a.length>64?a.substr(0,64).toString()+"...":a,c.getErrorIndex()>=0)throw new j("Text '"+e+"' could not be parsed at index "+c.getErrorIndex(),a,c.getErrorIndex());throw new j("Text '"+e+"' could not be parsed, unparsed text found at index "+c.getIndex(),a,c.getIndex())}return d.toBuilder()},b.parseUnresolved=function(a,b){return this._parseUnresolved0(a,b)},b._parseUnresolved0=function(a,b){s(null!=a,"text",o),s(null!=b,"position",o);var c=new aa(this),d=b.getIndex();return(d=this._printerParser.parse(c,a,d))<0?(b.setErrorIndex(~d),null):(b.setIndex(d),c.toParsed())},b._toPrinterParser=function(a){return this._printerParser.withOptional(a)},b.toString=function(){var a=this._printerParser.toString();return 0===a.indexOf("[")?a:a.substring(1,a.length-1)},a}(),aQ=function(a){function b(b,c){var d;return(d=a.call(this)||this)._month=x.safeToInt(b),d._day=x.safeToInt(c),d}p(b,a),b.now=function(a){return 0==arguments.length?b.now0():1==arguments.length&&a instanceof V?b.nowZoneId(a):b.nowClock(a)},b.now0=function(){return this.nowClock(a6.systemDefaultZone())},b.nowZoneId=function(a){return t(a,"zone"),this.nowClock(a6.system(a))},b.nowClock=function(a){t(a,"clock");var c=a1.now(a);return b.of(c.month(),c.dayOfMonth())},b.of=function(a,c){return 2==arguments.length&&a instanceof M?b.ofMonthNumber(a,c):b.ofNumberNumber(a,c)},b.ofMonthNumber=function(a,c){if(t(a,"month"),G.DAY_OF_MONTH.checkValidValue(c),c>a.maxLength())throw new i("Illegal value for DayOfMonth field, value "+c+" is not valid for month "+a.toString());return new b(a.value(),c)},b.ofNumberNumber=function(a,c){return t(a,"month"),t(c,"dayOfMonth"),b.of(M.of(a),c)},b.from=function(a){if(t(a,"temporal"),u(a,I,"temporal"),a instanceof b)return a;try{return b.of(a.get(G.MONTH_OF_YEAR),a.get(G.DAY_OF_MONTH))}catch(b){throw new i("Unable to obtain MonthDay from TemporalAccessor: "+a+", type "+(a&&null!=a.constructor?a.constructor.name:""))}},b.parse=function(a,c){return 1==arguments.length?b.parseString(a):b.parseStringFormatter(a,c)},b.parseString=function(a){return b.parseStringFormatter(a,f)},b.parseStringFormatter=function(a,c){return t(a,"text"),t(c,"formatter"),u(c,aP,"formatter"),c.parse(a,b.FROM)};var c=b.prototype;return c.monthValue=function(){return this._month},c.month=function(){return M.of(this._month)},c.dayOfMonth=function(){return this._day},c.isSupported=function(a){return a instanceof G?a===G.MONTH_OF_YEAR||a===G.DAY_OF_MONTH:null!=a&&a.isSupportedBy(this)},c.range=function(b){return b===G.MONTH_OF_YEAR?b.range():b===G.DAY_OF_MONTH?F.of(1,this.month().minLength(),this.month().maxLength()):a.prototype.range.call(this,b)},c.get=function(a){return this.range(a).checkValidIntValue(this.getLong(a),a)},c.getLong=function(a){if(t(a,"field"),a instanceof G){switch(a){case G.DAY_OF_MONTH:return this._day;case G.MONTH_OF_YEAR:return this._month}throw new k("Unsupported field: "+a)}return a.getFrom(this)},c.isValidYear=function(a){return!1==(29===this._day&&2===this._month&&!1===aS.isLeap(a))},c.withMonth=function(a){return this.with(M.of(a))},c.with=function(a){if(t(a,"month"),a.value()===this._month)return this;var c=Math.min(this._day,a.maxLength());return new b(a.value(),c)},c.withDayOfMonth=function(a){return a===this._day?this:b.of(this._month,a)},c.query=function(b){return(t(b,"query"),u(b,J,"query"),b===H.chronology())?aY.INSTANCE:a.prototype.query.call(this,b)},c.adjustInto=function(a){return t(a,"temporal"),(a=a.with(G.MONTH_OF_YEAR,this._month)).with(G.DAY_OF_MONTH,Math.min(a.range(G.DAY_OF_MONTH).maximum(),this._day))},c.atYear=function(a){return a1.of(a,this._month,this.isValidYear(a)?this._day:28)},c.compareTo=function(a){t(a,"other"),u(a,b,"other");var c=this._month-a.monthValue();return 0===c&&(c=this._day-a.dayOfMonth()),c},c.isAfter=function(a){return t(a,"other"),u(a,b,"other"),this.compareTo(a)>0},c.isBefore=function(a){return t(a,"other"),u(a,b,"other"),0>this.compareTo(a)},c.equals=function(a){return this===a||a instanceof b&&this.monthValue()===a.monthValue()&&this.dayOfMonth()===a.dayOfMonth()},c.toString=function(){return"--"+(this._month<10?"0":"")+this._month+(this._day<10?"-0":"-")+this._day},c.toJSON=function(){return this.toString()},c.format=function(a){return t(a,"formatter"),u(a,aP,"formatter"),a.format(this)},b}(I),aR=function(a){function b(b,c){var d;return(d=a.call(this)||this)._year=x.safeToInt(b),d._month=x.safeToInt(c),d}p(b,a),b.now=function(a){return 0==arguments.length?b.now0():1==arguments.length&&a instanceof V?b.nowZoneId(a):b.nowClock(a)},b.now0=function(){return b.nowClock(a6.systemDefaultZone())},b.nowZoneId=function(a){return b.nowClock(a6.system(a))},b.nowClock=function(a){var c=a1.now(a);return b.of(c.year(),c.month())},b.of=function(a,c){return 2==arguments.length&&c instanceof M?b.ofNumberMonth(a,c):b.ofNumberNumber(a,c)},b.ofNumberMonth=function(a,c){return t(c,"month"),u(c,M,"month"),b.ofNumberNumber(a,c.value())},b.ofNumberNumber=function(a,c){return t(a,"year"),t(c,"month"),G.YEAR.checkValidValue(a),G.MONTH_OF_YEAR.checkValidValue(c),new b(a,c)},b.from=function(a){if(t(a,"temporal"),a instanceof b)return a;try{return b.of(a.get(G.YEAR),a.get(G.MONTH_OF_YEAR))}catch(b){throw new i("Unable to obtain YearMonth from TemporalAccessor: "+a+", type "+(a&&null!=a.constructor?a.constructor.name:""))}},b.parse=function(a,c){return 1==arguments.length?b.parseString(a):b.parseStringFormatter(a,c)},b.parseString=function(a){return b.parseStringFormatter(a,g)},b.parseStringFormatter=function(a,c){return t(c,"formatter"),c.parse(a,b.FROM)};var c=b.prototype;return c.isSupported=function(a){return 1==arguments.length&&a instanceof E?this.isSupportedField(a):this.isSupportedUnit(a)},c.isSupportedField=function(a){return a instanceof G?a===G.YEAR||a===G.MONTH_OF_YEAR||a===G.PROLEPTIC_MONTH||a===G.YEAR_OF_ERA||a===G.ERA:null!=a&&a.isSupportedBy(this)},c.isSupportedUnit=function(a){return a instanceof D?a===D.MONTHS||a===D.YEARS||a===D.DECADES||a===D.CENTURIES||a===D.MILLENNIA||a===D.ERAS:null!=a&&a.isSupportedBy(this)},c.range=function(b){return b===G.YEAR_OF_ERA?0>=this.year()?F.of(1,aS.MAX_VALUE+1):F.of(1,aS.MAX_VALUE):a.prototype.range.call(this,b)},c.get=function(a){return t(a,"field"),u(a,E,"field"),this.range(a).checkValidIntValue(this.getLong(a),a)},c.getLong=function(a){if(t(a,"field"),u(a,E,"field"),a instanceof G){switch(a){case G.MONTH_OF_YEAR:return this._month;case G.PROLEPTIC_MONTH:return this._getProlepticMonth();case G.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case G.YEAR:return this._year;case G.ERA:return this._year<1?0:1}throw new k("Unsupported field: "+a)}return a.getFrom(this)},c._getProlepticMonth=function(){return x.safeAdd(x.safeMultiply(this._year,12),this._month-1)},c.year=function(){return this._year},c.monthValue=function(){return this._month},c.month=function(){return M.of(this._month)},c.isLeapYear=function(){return aY.isLeapYear(this._year)},c.isValidDay=function(a){return a>=1&&a<=this.lengthOfMonth()},c.lengthOfMonth=function(){return this.month().length(this.isLeapYear())},c.lengthOfYear=function(){return this.isLeapYear()?366:365},c.with=function(a,b){return 1==arguments.length?this._withAdjuster(a):this._withField(a,b)},c._withField=function(a,b){if(t(a,"field"),u(a,E,"field"),a instanceof G){switch(a.checkValidValue(b),a){case G.MONTH_OF_YEAR:return this.withMonth(b);case G.PROLEPTIC_MONTH:return this.plusMonths(b-this.getLong(G.PROLEPTIC_MONTH));case G.YEAR_OF_ERA:return this.withYear(this._year<1?1-b:b);case G.YEAR:return this.withYear(b);case G.ERA:return this.getLong(G.ERA)===b?this:this.withYear(1-this._year)}throw new k("Unsupported field: "+a)}return a.adjustInto(this,b)},c.withYear=function(a){return G.YEAR.checkValidValue(a),new b(a,this._month)},c.withMonth=function(a){return G.MONTH_OF_YEAR.checkValidValue(a),new b(this._year,a)},c._plusUnit=function(a,b){if(t(b,"unit"),u(b,A,"unit"),b instanceof D){switch(b){case D.MONTHS:return this.plusMonths(a);case D.YEARS:return this.plusYears(a);case D.DECADES:return this.plusYears(x.safeMultiply(a,10));case D.CENTURIES:return this.plusYears(x.safeMultiply(a,100));case D.MILLENNIA:return this.plusYears(x.safeMultiply(a,1e3));case D.ERAS:return this.with(G.ERA,x.safeAdd(this.getLong(G.ERA),a))}throw new k("Unsupported unit: "+b)}return b.addTo(this,a)},c.plusYears=function(a){if(0===a)return this;var b=G.YEAR.checkValidIntValue(this._year+a);return this.withYear(b)},c.plusMonths=function(a){if(0===a)return this;var c=12*this._year+(this._month-1)+a;return new b(G.YEAR.checkValidIntValue(x.floorDiv(c,12)),x.floorMod(c,12)+1)},c.minusYears=function(a){return a===x.MIN_SAFE_INTEGER?this.plusYears(x.MIN_SAFE_INTEGER).plusYears(1):this.plusYears(-a)},c.minusMonths=function(a){return a===x.MIN_SAFE_INTEGER?this.plusMonths(Math.MAX_SAFE_INTEGER).plusMonths(1):this.plusMonths(-a)},c.query=function(b){return(t(b,"query"),u(b,J,"query"),b===H.chronology())?aY.INSTANCE:b===H.precision()?D.MONTHS:b===H.localDate()||b===H.localTime()||b===H.zone()||b===H.zoneId()||b===H.offset()?null:a.prototype.query.call(this,b)},c.adjustInto=function(a){return t(a,"temporal"),u(a,S,"temporal"),a.with(G.PROLEPTIC_MONTH,this._getProlepticMonth())},c.until=function(a,c){t(a,"endExclusive"),t(c,"unit"),u(a,S,"endExclusive"),u(c,A,"unit");var d=b.from(a);if(c instanceof D){var e=d._getProlepticMonth()-this._getProlepticMonth();switch(c){case D.MONTHS:return e;case D.YEARS:return x.intDiv(e,12);case D.DECADES:return x.intDiv(e,120);case D.CENTURIES:return x.intDiv(e,1200);case D.MILLENNIA:return x.intDiv(e,12e3);case D.ERAS:return d.getLong(G.ERA)-this.getLong(G.ERA)}throw new k("Unsupported unit: "+c)}return c.between(this,d)},c.atDay=function(a){return t(a,"dayOfMonth"),a1.of(this._year,this._month,a)},c.atEndOfMonth=function(){return a1.of(this._year,this._month,this.lengthOfMonth())},c.compareTo=function(a){t(a,"other"),u(a,b,"other");var c=this._year-a.year();return 0===c&&(c=this._month-a.monthValue()),c},c.isAfter=function(a){return this.compareTo(a)>0},c.isBefore=function(a){return 0>this.compareTo(a)},c.equals=function(a){return this===a||a instanceof b&&this.year()===a.year()&&this.monthValue()===a.monthValue()},c.toString=function(){return g.format(this)},c.toJSON=function(){return this.toString()},c.format=function(a){return t(a,"formatter"),a.format(this)},b}(S),aS=function(a){function b(b){var c;return(c=a.call(this)||this)._year=x.safeToInt(b),c}p(b,a);var c=b.prototype;return c.value=function(){return this._year},b.now=function(a){return(void 0===a&&(a=void 0),void 0===a)?b.now0():a instanceof V?b.nowZoneId(a):b.nowClock(a)},b.now0=function(){return b.nowClock(a6.systemDefaultZone())},b.nowZoneId=function(a){return t(a,"zone"),u(a,V,"zone"),b.nowClock(a6.system(a))},b.nowClock=function(a){t(a,"clock"),u(a,a6,"clock");var c=a1.now(a);return b.of(c.year())},b.of=function(a){return t(a,"isoYear"),G.YEAR.checkValidValue(a),new b(a)},b.from=function(a){if(t(a,"temporal"),u(a,I,"temporal"),a instanceof b)return a;try{return b.of(a.get(G.YEAR))}catch(b){throw new i("Unable to obtain Year from TemporalAccessor: "+a+", type "+(a&&null!=a.constructor?a.constructor.name:""))}},b.parse=function(a,c){return arguments.length<=1?b.parseText(a):b.parseTextFormatter(a,c)},b.parseText=function(a){return t(a,"text"),b.parse(a,h)},b.parseTextFormatter=function(a,c){return void 0===c&&(c=h),t(a,"text"),t(c,"formatter"),u(c,aP,"formatter"),c.parse(a,b.FROM)},b.isLeap=function(a){return 0===x.intMod(a,4)&&(0!==x.intMod(a,100)||0===x.intMod(a,400))},c.isSupported=function(a){return 1==arguments.length&&a instanceof E?this.isSupportedField(a):this.isSupportedUnit(a)},c.isSupportedField=function(a){return a instanceof G?a===G.YEAR||a===G.YEAR_OF_ERA||a===G.ERA:null!=a&&a.isSupportedBy(this)},c.isSupportedUnit=function(a){return a instanceof D?a===D.YEARS||a===D.DECADES||a===D.CENTURIES||a===D.MILLENNIA||a===D.ERAS:null!=a&&a.isSupportedBy(this)},c.range=function(b){if(this.isSupported(b))return b.range();if(b instanceof G)throw new k("Unsupported field: "+b);return a.prototype.range.call(this,b)},c.get=function(a){return this.range(a).checkValidIntValue(this.getLong(a),a)},c.getLong=function(a){if(t(a,"field"),a instanceof G){switch(a){case G.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case G.YEAR:return this._year;case G.ERA:return this._year<1?0:1}throw new k("Unsupported field: "+a)}return a.getFrom(this)},c.isLeap=function(){return b.isLeap(this._year)},c._withField=function(a,c){if(t(a,"field"),u(a,E,"field"),a instanceof G){switch(a.checkValidValue(c),a){case G.YEAR_OF_ERA:return b.of(this._year<1?1-c:c);case G.YEAR:return b.of(c);case G.ERA:return this.getLong(G.ERA)===c?this:b.of(1-this._year)}throw new k("Unsupported field: "+a)}return a.adjustInto(this,c)},c._plusUnit=function(a,b){if(t(a,"amountToAdd"),t(b,"unit"),u(b,A,"unit"),b instanceof D){switch(b){case D.YEARS:return this.plusYears(a);case D.DECADES:return this.plusYears(x.safeMultiply(a,10));case D.CENTURIES:return this.plusYears(x.safeMultiply(a,100));case D.MILLENNIA:return this.plusYears(x.safeMultiply(a,1e3));case D.ERAS:return this.with(G.ERA,x.safeAdd(this.getLong(G.ERA),a))}throw new k("Unsupported unit: "+b)}return b.addTo(this,a)},c.plusYears=function(a){return 0===a?this:b.of(G.YEAR.checkValidIntValue(x.safeAdd(this._year,a)))},c.minusYears=function(a){return a===x.MIN_SAFE_INTEGER?this.plusYears(x.MAX_SAFE_INTEGER).plusYears(1):this.plusYears(-a)},c.adjustInto=function(a){return t(a,"temporal"),a.with(G.YEAR,this._year)},c.isValidMonthDay=function(a){return null!=a&&a.isValidYear(this._year)},c.length=function(){return this.isLeap()?366:365},c.atDay=function(a){return a1.ofYearDay(this._year,a)},c.atMonth=function(a){return 1==arguments.length&&a instanceof M?this.atMonthMonth(a):this.atMonthNumber(a)},c.atMonthMonth=function(a){return t(a,"month"),u(a,M,"month"),aR.of(this._year,a)},c.atMonthNumber=function(a){return t(a,"month"),aR.of(this._year,a)},c.atMonthDay=function(a){return t(a,"monthDay"),u(a,aQ,"monthDay"),a.atYear(this._year)},c.query=function(b){return(t(b,"query()"),u(b,J,"query()"),b===H.chronology())?aY.INSTANCE:b===H.precision()?D.YEARS:b===H.localDate()||b===H.localTime()||b===H.zone()||b===H.zoneId()||b===H.offset()?null:a.prototype.query.call(this,b)},c.compareTo=function(a){return t(a,"other"),u(a,b,"other"),this._year-a._year},c.isAfter=function(a){return t(a,"other"),u(a,b,"other"),this._year>a._year},c.isBefore=function(a){return t(a,"other"),u(a,b,"other"),this._year<a._year},c.format=function(a){return t(a,"formatter"),u(a,aP,"formatter"),a.format(this)},c.equals=function(a){return this===a||a instanceof b&&this.value()===a.value()},c.toString=function(){return""+this._year},c.toJSON=function(){return this.toString()},c.until=function(a,c){var d=b.from(a);if(c instanceof D){var e=d.value()-this.value();switch(c){case D.YEARS:return e;case D.DECADES:return x.intDiv(e,10);case D.CENTURIES:return x.intDiv(e,100);case D.MILLENNIA:return x.intDiv(e,1e3);case D.ERAS:return d.getLong(G.ERA)-this.getLong(G.ERA)}throw new k("Unsupported unit: "+c)}return c.between(this,d)},b}(S),aT=function(){function a(){}return a.prototype.adjustInto=function(a){v("adjustInto")},a}(),aU=function(){function a(){}return a.firstDayOfMonth=function(){return aV.FIRST_DAY_OF_MONTH},a.lastDayOfMonth=function(){return aV.LAST_DAY_OF_MONTH},a.firstDayOfNextMonth=function(){return aV.FIRST_DAY_OF_NEXT_MONTH},a.firstDayOfYear=function(){return aV.FIRST_DAY_OF_YEAR},a.lastDayOfYear=function(){return aV.LAST_DAY_OF_YEAR},a.firstDayOfNextYear=function(){return aV.FIRST_DAY_OF_NEXT_YEAR},a.firstInMonth=function(a){return t(a,"dayOfWeek"),new aW(1,a)},a.lastInMonth=function(a){return t(a,"dayOfWeek"),new aW(-1,a)},a.dayOfWeekInMonth=function(a,b){return t(b,"dayOfWeek"),new aW(a,b)},a.next=function(a){return new aX(2,a)},a.nextOrSame=function(a){return new aX(0,a)},a.previous=function(a){return new aX(3,a)},a.previousOrSame=function(a){return new aX(1,a)},a}(),aV=function(a){function b(b){var c;return(c=a.call(this)||this)._ordinal=b,c}return p(b,a),b.prototype.adjustInto=function(a){switch(this._ordinal){case 0:return a.with(G.DAY_OF_MONTH,1);case 1:return a.with(G.DAY_OF_MONTH,a.range(G.DAY_OF_MONTH).maximum());case 2:return a.with(G.DAY_OF_MONTH,1).plus(1,D.MONTHS);case 3:return a.with(G.DAY_OF_YEAR,1);case 4:return a.with(G.DAY_OF_YEAR,a.range(G.DAY_OF_YEAR).maximum());case 5:return a.with(G.DAY_OF_YEAR,1).plus(1,D.YEARS)}throw new n("Unreachable")},b}(aT);aV.FIRST_DAY_OF_MONTH=new aV(0),aV.LAST_DAY_OF_MONTH=new aV(1),aV.FIRST_DAY_OF_NEXT_MONTH=new aV(2),aV.FIRST_DAY_OF_YEAR=new aV(3),aV.LAST_DAY_OF_YEAR=new aV(4),aV.FIRST_DAY_OF_NEXT_YEAR=new aV(5);var aW=function(a){function b(b,c){var d;return(d=a.call(this)||this)._ordinal=b,d._dowValue=c.value(),d}return p(b,a),b.prototype.adjustInto=function(a){if(this._ordinal>=0){var b=a.with(G.DAY_OF_MONTH,1),c=b.get(G.DAY_OF_WEEK),d=x.intMod(this._dowValue-c+7,7);return d+=(this._ordinal-1)*7,b.plus(d,D.DAYS)}var e=a.with(G.DAY_OF_MONTH,a.range(G.DAY_OF_MONTH).maximum()),f=e.get(G.DAY_OF_WEEK),g=this._dowValue-f;return g=(0===g?0:g>0?g-7:g)-(-this._ordinal-1)*7,e.plus(g,D.DAYS)},b}(aT),aX=function(a){function b(b,c){var d;return d=a.call(this)||this,t(c,"dayOfWeek"),d._relative=b,d._dowValue=c.value(),d}return p(b,a),b.prototype.adjustInto=function(a){var b=a.get(G.DAY_OF_WEEK);if(this._relative<2&&b===this._dowValue)return a;if((1&this._relative)==0){var c=b-this._dowValue;return a.plus(c>=0?7-c:-c,D.DAYS)}var d=this._dowValue-b;return a.minus(d>=0?7-d:-d,D.DAYS)},b}(aT),aY=function(a){function b(){return a.apply(this,arguments)||this}p(b,a),b.isLeapYear=function(a){return(3&a)==0&&(a%100!=0||a%400==0)};var c=b.prototype;return c._updateResolveMap=function(a,b,c){t(a,"fieldValues"),t(b,"field");var d=a.get(b);if(null!=d&&d!==c)throw new i("Invalid state, field: "+b+" "+d+" conflicts with "+b+" "+c);a.put(b,c)},c.resolveDate=function(a,b){if(a.containsKey(G.EPOCH_DAY))return a1.ofEpochDay(a.remove(G.EPOCH_DAY));var c=a.remove(G.PROLEPTIC_MONTH);null!=c&&(b!==R.LENIENT&&G.PROLEPTIC_MONTH.checkValidValue(c),this._updateResolveMap(a,G.MONTH_OF_YEAR,x.floorMod(c,12)+1),this._updateResolveMap(a,G.YEAR,x.floorDiv(c,12)));var d=a.remove(G.YEAR_OF_ERA);if(null!=d){b!==R.LENIENT&&G.YEAR_OF_ERA.checkValidValue(d);var e=a.remove(G.ERA);if(null==e){var f=a.get(G.YEAR);b===R.STRICT?null!=f?this._updateResolveMap(a,G.YEAR,f>0?d:x.safeSubtract(1,d)):a.put(G.YEAR_OF_ERA,d):this._updateResolveMap(a,G.YEAR,null==f||f>0?d:x.safeSubtract(1,d))}else if(1===e)this._updateResolveMap(a,G.YEAR,d);else if(0===e)this._updateResolveMap(a,G.YEAR,x.safeSubtract(1,d));else throw new i("Invalid value for era: "+e)}else a.containsKey(G.ERA)&&G.ERA.checkValidValue(a.get(G.ERA));if(a.containsKey(G.YEAR)){if(a.containsKey(G.MONTH_OF_YEAR)&&a.containsKey(G.DAY_OF_MONTH)){var g=G.YEAR.checkValidIntValue(a.remove(G.YEAR)),h=a.remove(G.MONTH_OF_YEAR),j=a.remove(G.DAY_OF_MONTH);if(b===R.LENIENT){var k=h-1,l=j-1;return a1.of(g,1,1).plusMonths(k).plusDays(l)}return b===R.SMART?(G.DAY_OF_MONTH.checkValidValue(j),4===h||6===h||9===h||11===h?j=Math.min(j,30):2===h&&(j=Math.min(j,M.FEBRUARY.length(aS.isLeap(g)))),a1.of(g,h,j)):a1.of(g,h,j)}if(a.containsKey(G.DAY_OF_YEAR)){var m=G.YEAR.checkValidIntValue(a.remove(G.YEAR));if(b===R.LENIENT){var n=x.safeSubtract(a.remove(G.DAY_OF_YEAR),1);return a1.ofYearDay(m,1).plusDays(n)}var o=G.DAY_OF_YEAR.checkValidIntValue(a.remove(G.DAY_OF_YEAR));return a1.ofYearDay(m,o)}if(a.containsKey(G.ALIGNED_WEEK_OF_YEAR)){if(a.containsKey(G.ALIGNED_DAY_OF_WEEK_IN_YEAR)){var p=G.YEAR.checkValidIntValue(a.remove(G.YEAR));if(b===R.LENIENT){var q=x.safeSubtract(a.remove(G.ALIGNED_WEEK_OF_YEAR),1),r=x.safeSubtract(a.remove(G.ALIGNED_DAY_OF_WEEK_IN_YEAR),1);return a1.of(p,1,1).plusWeeks(q).plusDays(r)}var s=G.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(a.remove(G.ALIGNED_WEEK_OF_YEAR)),t=G.ALIGNED_DAY_OF_WEEK_IN_YEAR.checkValidIntValue(a.remove(G.ALIGNED_DAY_OF_WEEK_IN_YEAR)),u=a1.of(p,1,1).plusDays((s-1)*7+(t-1));if(b===R.STRICT&&u.get(G.YEAR)!==p)throw new i("Strict mode rejected date parsed to a different year");return u}if(a.containsKey(G.DAY_OF_WEEK)){var v=G.YEAR.checkValidIntValue(a.remove(G.YEAR));if(b===R.LENIENT){var w=x.safeSubtract(a.remove(G.ALIGNED_WEEK_OF_YEAR),1),y=x.safeSubtract(a.remove(G.DAY_OF_WEEK),1);return a1.of(v,1,1).plusWeeks(w).plusDays(y)}var z=G.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(a.remove(G.ALIGNED_WEEK_OF_YEAR)),A=G.DAY_OF_WEEK.checkValidIntValue(a.remove(G.DAY_OF_WEEK)),B=a1.of(v,1,1).plusWeeks(z-1).with(aU.nextOrSame(L.of(A)));if(b===R.STRICT&&B.get(G.YEAR)!==v)throw new i("Strict mode rejected date parsed to a different month");return B}}}return null},c.date=function(a){return a1.from(a)},b}(y),aZ=function(a){function b(b,c){var d;return d=a.call(this)||this,t(b,"time"),u(b,a4,"time"),t(c,"offset"),u(c,$,"offset"),d._time=b,d._offset=c,d}p(b,a),b.from=function(a){if(t(a,"temporal"),a instanceof b)return a;if(a instanceof a0)return a.toOffsetTime();try{var c=a4.from(a),d=$.from(a);return new b(c,d)}catch(b){throw new i("Unable to obtain OffsetTime TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""))}},b.now=function(a){return 0==arguments.length?b._now(a6.systemDefaultZone()):a instanceof a6?b._now(a):b._now(a6.system(a))},b._now=function(a){t(a,"clock");var c=a.instant();return b.ofInstant(c,a.zone().rules().offset(c))},b.of=function(){return arguments.length<=2?b.ofTimeAndOffset.apply(this,arguments):b.ofNumbers.apply(this,arguments)},b.ofNumbers=function(a,c,d,e,f){return new b(a4.of(a,c,d,e),f)},b.ofTimeAndOffset=function(a,c){return new b(a,c)},b.ofInstant=function(a,c){t(a,"instant"),u(a,a5,"instant"),t(c,"zone"),u(c,V,"zone");var d=c.rules().offset(a),e=a.epochSecond()%a4.SECONDS_PER_DAY;return(e=(e+d.totalSeconds())%a4.SECONDS_PER_DAY)<0&&(e+=a4.SECONDS_PER_DAY),new b(a4.ofSecondOfDay(e,a.nano()),d)},b.parse=function(a,c){return void 0===c&&(c=aP.ISO_OFFSET_TIME),t(c,"formatter"),c.parse(a,b.FROM)};var c=b.prototype;return c.adjustInto=function(a){return a.with(G.NANO_OF_DAY,this._time.toNanoOfDay()).with(G.OFFSET_SECONDS,this.offset().totalSeconds())},c.atDate=function(a){return a0.of(a,this._time,this._offset)},c.format=function(a){return t(a,"formatter"),a.format(this,b.FROM)},c.get=function(b){return a.prototype.get.call(this,b)},c.getLong=function(a){return a instanceof G?a===G.OFFSET_SECONDS?this._offset.totalSeconds():this._time.getLong(a):a.getFrom(this)},c.hour=function(){return this._time.hour()},c.minute=function(){return this._time.minute()},c.second=function(){return this._time.second()},c.nano=function(){return this._time.nano()},c.offset=function(){return this._offset},c.isAfter=function(a){return t(a,"other"),this._toEpochNano()>a._toEpochNano()},c.isBefore=function(a){return t(a,"other"),this._toEpochNano()<a._toEpochNano()},c.isEqual=function(a){return t(a,"other"),this._toEpochNano()===a._toEpochNano()},c.isSupported=function(a){return a instanceof G?a.isTimeBased()||a===G.OFFSET_SECONDS:a instanceof D?a.isTimeBased():null!=a&&a.isSupportedBy(this)},c.minusHours=function(a){return this._withLocalTimeOffset(this._time.minusHours(a),this._offset)},c.minusMinutes=function(a){return this._withLocalTimeOffset(this._time.minusMinutes(a),this._offset)},c.minusSeconds=function(a){return this._withLocalTimeOffset(this._time.minusSeconds(a),this._offset)},c.minusNanos=function(a){return this._withLocalTimeOffset(this._time.minusNanos(a),this._offset)},c._minusAmount=function(a){return t(a),a.subtractFrom(this)},c._minusUnit=function(a,b){return this.plus(-1*a,b)},c._plusAmount=function(a){return t(a),a.addTo(this)},c._plusUnit=function(a,b){return b instanceof D?this._withLocalTimeOffset(this._time.plus(a,b),this._offset):b.addTo(this,a)},c.plusHours=function(a){return this._withLocalTimeOffset(this._time.plusHours(a),this._offset)},c.plusMinutes=function(a){return this._withLocalTimeOffset(this._time.plusMinutes(a),this._offset)},c.plusSeconds=function(a){return this._withLocalTimeOffset(this._time.plusSeconds(a),this._offset)},c.plusNanos=function(a){return this._withLocalTimeOffset(this._time.plusNanos(a),this._offset)},c.query=function(b){return(t(b,"query"),b===H.precision())?D.NANOS:b===H.offset()||b===H.zone()?this.offset():b===H.localTime()?this._time:b===H.chronology()||b===H.localDate()||b===H.zoneId()?null:a.prototype.query.call(this,b)},c.range=function(a){return a instanceof G?a===G.OFFSET_SECONDS?a.range():this._time.range(a):a.rangeRefinedBy(this)},c.toLocalTime=function(){return this._time},c.truncatedTo=function(a){return this._withLocalTimeOffset(this._time.truncatedTo(a),this._offset)},c.until=function(a,c){t(a,"endExclusive"),t(c,"unit");var d=b.from(a);if(c instanceof D){var e=d._toEpochNano()-this._toEpochNano();switch(c){case D.NANOS:return e;case D.MICROS:return x.intDiv(e,1e3);case D.MILLIS:return x.intDiv(e,1e6);case D.SECONDS:return x.intDiv(e,a4.NANOS_PER_SECOND);case D.MINUTES:return x.intDiv(e,a4.NANOS_PER_MINUTE);case D.HOURS:return x.intDiv(e,a4.NANOS_PER_HOUR);case D.HALF_DAYS:return x.intDiv(e,12*a4.NANOS_PER_HOUR)}throw new k("Unsupported unit: "+c)}return c.between(this,d)},c.withHour=function(a){return this._withLocalTimeOffset(this._time.withHour(a),this._offset)},c.withMinute=function(a){return this._withLocalTimeOffset(this._time.withMinute(a),this._offset)},c.withSecond=function(a){return this._withLocalTimeOffset(this._time.withSecond(a),this._offset)},c.withNano=function(a){return this._withLocalTimeOffset(this._time.withNano(a),this._offset)},c.withOffsetSameInstant=function(a){if(t(a,"offset"),a.equals(this._offset))return this;var c=a.totalSeconds()-this._offset.totalSeconds();return new b(this._time.plusSeconds(c),a)},c.withOffsetSameLocal=function(a){return null!=a&&a.equals(this._offset)?this:new b(this._time,a)},c._toEpochNano=function(){return this._time.toNanoOfDay()-this._offset.totalSeconds()*a4.NANOS_PER_SECOND},c._withAdjuster=function(a){return(t(a,"adjuster"),a instanceof a4)?this._withLocalTimeOffset(a,this._offset):a instanceof $?this._withLocalTimeOffset(this._time,a):a instanceof b?a:a.adjustInto(this)},c._withField=function(a,b){return(t(a,"field"),a instanceof G)?a===G.OFFSET_SECONDS?this._withLocalTimeOffset(this._time,$.ofTotalSeconds(a.checkValidIntValue(b))):this._withLocalTimeOffset(this._time.with(a,b),this._offset):a.adjustInto(this,b)},c._withLocalTimeOffset=function(a,c){return this._time===a&&this._offset.equals(c)?this:new b(a,c)},c.compareTo=function(a){if(t(a,"other"),u(a,b,"other"),this._offset.equals(a._offset))return this._time.compareTo(a._time);var c=x.compareNumbers(this._toEpochNano(),a._toEpochNano());return 0===c?this._time.compareTo(a._time):c},c.equals=function(a){return this===a||a instanceof b&&this._time.equals(a._time)&&this._offset.equals(a._offset)},c.hashCode=function(){return this._time.hashCode()^this._offset.hashCode()},c.toString=function(){return this._time.toString()+this._offset.toString()},c.toJSON=function(){return this.toString()},b}(S),a$=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.query=function(b){if(b===H.zoneId()||b===H.zone())return this.zone();if(b===H.chronology())return this.toLocalDate().chronology();if(b===H.precision())return D.NANOS;if(b===H.offset())return this.offset();if(b===H.localDate())return a1.ofEpochDay(this.toLocalDate().toEpochDay());else if(b===H.localTime())return this.toLocalTime();return a.prototype.query.call(this,b)},c.format=function(a){return t(a,"formatter"),a.format(this)},c.toInstant=function(){return a5.ofEpochSecond(this.toEpochSecond(),this.toLocalTime().nano())},c.toEpochSecond=function(){var a=86400*this.toLocalDate().toEpochDay()+this.toLocalTime().toSecondOfDay();return a-this.offset().totalSeconds()},c.compareTo=function(a){t(a,"other");var b,c,d=x.compareNumbers(this.toEpochSecond(),a.toEpochSecond());return 0===d&&0==(d=this.toLocalTime().nano()-a.toLocalTime().nano())&&0===(d=this.toLocalDateTime().compareTo(a.toLocalDateTime()))&&(b=this.zone().id(),d=b<(c=a.zone().id())?-1:+(b>c)),d},c.isAfter=function(a){t(a,"other");var b=this.toEpochSecond(),c=a.toEpochSecond();return b>c||b===c&&this.toLocalTime().nano()>a.toLocalTime().nano()},c.isBefore=function(a){t(a,"other");var b=this.toEpochSecond(),c=a.toEpochSecond();return b<c||b===c&&this.toLocalTime().nano()<a.toLocalTime().nano()},c.isEqual=function(a){return t(a,"other"),this.toEpochSecond()===a.toEpochSecond()&&this.toLocalTime().nano()===a.toLocalTime().nano()},c.equals=function(a){return this===a||a instanceof b&&0===this.compareTo(a)},b}(S),a_=function(a){function b(b,c,d){var e;return t(b,"dateTime"),t(c,"offset"),t(d,"zone"),(e=a.call(this)||this)._dateTime=b,e._offset=c,e._zone=d,e}p(b,a),b.now=function(a){var c;return c=a instanceof V?a6.system(a):null==a?a6.systemDefaultZone():a,b.ofInstant(c.instant(),c.zone())},b.of=function(){return arguments.length<=2?b.of2.apply(this,arguments):3==arguments.length&&arguments[0]instanceof a1?b.of3.apply(this,arguments):b.of8.apply(this,arguments)},b.of3=function(a,c,d){return b.of2(a3.of(a,c),d)},b.of2=function(a,c){return b.ofLocal(a,c,null)},b.of8=function(a,c,d,e,f,g,h,i){var j=a3.of(a,c,d,e,f,g,h);return b.ofLocal(j,i,null)},b.ofLocal=function(a,c,d){if(t(a,"localDateTime"),t(c,"zone"),c instanceof $)return new b(a,c,c);var e=null,f=c.rules(),g=f.validOffsets(a);if(1===g.length)e=g[0];else if(0===g.length){var h=f.transition(a);a=a.plusSeconds(h.duration().seconds()),e=h.offsetAfter()}else e=null!=d&&g.some(function(a){return a.equals(d)})?d:t(g[0],"offset");return new b(a,e,c)},b.ofInstant=function(){return 2==arguments.length?b.ofInstant2.apply(this,arguments):b.ofInstant3.apply(this,arguments)},b.ofInstant2=function(a,c){return t(a,"instant"),t(c,"zone"),b._create(a.epochSecond(),a.nano(),c)},b.ofInstant3=function(a,c,d){return t(a,"localDateTime"),t(c,"offset"),t(d,"zone"),b._create(a.toEpochSecond(c),a.nano(),d)},b._create=function(a,c,d){var e=d.rules(),f=a5.ofEpochSecond(a,c),g=e.offset(f);return new b(a3.ofEpochSecond(a,c,g),g,d)},b.ofStrict=function(a,c,d){t(a,"localDateTime"),t(c,"offset"),t(d,"zone");var e=d.rules();if(!1===e.isValidOffset(a,c)){var f=e.transition(a);if(null!=f&&f.isGap())throw new i("LocalDateTime "+a+" does not exist in zone "+d+" due to a gap in the local time-line, typically caused by daylight savings");throw new i('ZoneOffset "'+c+'" is not valid for LocalDateTime "'+a+'" in zone "'+d+'"')}return new b(a,c,d)},b.ofLenient=function(a,c,d){if(t(a,"localDateTime"),t(c,"offset"),t(d,"zone"),d instanceof $&&!1===c.equals(d))throw new m("ZoneId must match ZoneOffset");return new b(a,c,d)},b.from=function(a){if(t(a,"temporal"),a instanceof b)return a;var c=V.from(a);if(a.isSupported(G.INSTANT_SECONDS)){var d=b._from(a,c);if(null!=d)return d}var e=a3.from(a);return b.of2(e,c)},b._from=function(a,c){try{return b.__from(a,c)}catch(a){if(!(a instanceof i))throw a}},b.__from=function(a,c){var d=a.getLong(G.INSTANT_SECONDS),e=a.get(G.NANO_OF_SECOND);return b._create(d,e,c)},b.parse=function(a,c){return void 0===c&&(c=aP.ISO_ZONED_DATE_TIME),t(c,"formatter"),c.parse(a,b.FROM)};var c=b.prototype;return c._resolveLocal=function(a){return t(a,"newDateTime"),b.ofLocal(a,this._zone,this._offset)},c._resolveInstant=function(a){return b.ofInstant3(a,this._offset,this._zone)},c._resolveOffset=function(a){return!1===a.equals(this._offset)&&this._zone.rules().isValidOffset(this._dateTime,a)?new b(this._dateTime,a,this._zone):this},c.isSupported=function(a){return a instanceof G||(a instanceof D?a.isDateBased()||a.isTimeBased():null!=a&&a.isSupportedBy(this))},c.range=function(a){return a instanceof G?a===G.INSTANT_SECONDS||a===G.OFFSET_SECONDS?a.range():this._dateTime.range(a):a.rangeRefinedBy(this)},c.get=function(a){return this.getLong(a)},c.getLong=function(a){if(a instanceof G){switch(a){case G.INSTANT_SECONDS:return this.toEpochSecond();case G.OFFSET_SECONDS:return this._offset.totalSeconds()}return this._dateTime.getLong(a)}return t(a,"field"),a.getFrom(this)},c.offset=function(){return this._offset},c.withEarlierOffsetAtOverlap=function(){var a=this._zone.rules().transition(this._dateTime);if(null!=a&&a.isOverlap()){var c=a.offsetBefore();if(!1===c.equals(this._offset))return new b(this._dateTime,c,this._zone)}return this},c.withLaterOffsetAtOverlap=function(){var a=this._zone.rules().transition(this.toLocalDateTime());if(null!=a){var c=a.offsetAfter();if(!1===c.equals(this._offset))return new b(this._dateTime,c,this._zone)}return this},c.zone=function(){return this._zone},c.withZoneSameLocal=function(a){return t(a,"zone"),this._zone.equals(a)?this:b.ofLocal(this._dateTime,a,this._offset)},c.withZoneSameInstant=function(a){return t(a,"zone"),this._zone.equals(a)?this:b._create(this._dateTime.toEpochSecond(this._offset),this._dateTime.nano(),a)},c.withFixedOffsetZone=function(){return this._zone.equals(this._offset)?this:new b(this._dateTime,this._offset,this._offset)},c.year=function(){return this._dateTime.year()},c.monthValue=function(){return this._dateTime.monthValue()},c.month=function(){return this._dateTime.month()},c.dayOfMonth=function(){return this._dateTime.dayOfMonth()},c.dayOfYear=function(){return this._dateTime.dayOfYear()},c.dayOfWeek=function(){return this._dateTime.dayOfWeek()},c.hour=function(){return this._dateTime.hour()},c.minute=function(){return this._dateTime.minute()},c.second=function(){return this._dateTime.second()},c.nano=function(){return this._dateTime.nano()},c._withAdjuster=function(c){if(c instanceof a1)return this._resolveLocal(a3.of(c,this._dateTime.toLocalTime()));if(c instanceof a4)return this._resolveLocal(a3.of(this._dateTime.toLocalDate(),c));if(c instanceof a3)return this._resolveLocal(c);if(c instanceof a5)return b._create(c.epochSecond(),c.nano(),this._zone);if(c instanceof $)return this._resolveOffset(c);return a.prototype._withAdjuster.call(this,c)},c._withField=function(a,c){if(a instanceof G){switch(a){case G.INSTANT_SECONDS:return b._create(c,this.nano(),this._zone);case G.OFFSET_SECONDS:var d=$.ofTotalSeconds(a.checkValidIntValue(c));return this._resolveOffset(d)}return this._resolveLocal(this._dateTime.with(a,c))}return a.adjustInto(this,c)},c.withYear=function(a){return this._resolveLocal(this._dateTime.withYear(a))},c.withMonth=function(a){return this._resolveLocal(this._dateTime.withMonth(a))},c.withDayOfMonth=function(a){return this._resolveLocal(this._dateTime.withDayOfMonth(a))},c.withDayOfYear=function(a){return this._resolveLocal(this._dateTime.withDayOfYear(a))},c.withHour=function(a){return this._resolveLocal(this._dateTime.withHour(a))},c.withMinute=function(a){return this._resolveLocal(this._dateTime.withMinute(a))},c.withSecond=function(a){return this._resolveLocal(this._dateTime.withSecond(a))},c.withNano=function(a){return this._resolveLocal(this._dateTime.withNano(a))},c.truncatedTo=function(a){return this._resolveLocal(this._dateTime.truncatedTo(a))},c._plusUnit=function(a,b){if(b instanceof D)if(b.isDateBased())return this._resolveLocal(this._dateTime.plus(a,b));else return this._resolveInstant(this._dateTime.plus(a,b));return t(b,"unit"),b.addTo(this,a)},c.plusYears=function(a){return this._resolveLocal(this._dateTime.plusYears(a))},c.plusMonths=function(a){return this._resolveLocal(this._dateTime.plusMonths(a))},c.plusWeeks=function(a){return this._resolveLocal(this._dateTime.plusWeeks(a))},c.plusDays=function(a){return this._resolveLocal(this._dateTime.plusDays(a))},c.plusHours=function(a){return this._resolveInstant(this._dateTime.plusHours(a))},c.plusMinutes=function(a){return this._resolveInstant(this._dateTime.plusMinutes(a))},c.plusSeconds=function(a){return this._resolveInstant(this._dateTime.plusSeconds(a))},c.plusNanos=function(a){return this._resolveInstant(this._dateTime.plusNanos(a))},c._minusUnit=function(a,b){return this._plusUnit(-1*a,b)},c.minusYears=function(a){return this.plusYears(-1*a)},c.minusMonths=function(a){return this.plusMonths(-1*a)},c.minusWeeks=function(a){return this.plusWeeks(-1*a)},c.minusDays=function(a){return this.plusDays(-1*a)},c.minusHours=function(a){return this.plusHours(-1*a)},c.minusMinutes=function(a){return this.plusMinutes(-1*a)},c.minusSeconds=function(a){return this.plusSeconds(-1*a)},c.minusNanos=function(a){return this.plusNanos(-1*a)},c.query=function(b){return b===H.localDate()?this.toLocalDate():(t(b,"query"),a.prototype.query.call(this,b))},c.until=function(a,c){var d=b.from(a);if(c instanceof D){if(d=d.withZoneSameInstant(this._zone),c.isDateBased())return this._dateTime.until(d._dateTime,c);var e=this._offset.totalSeconds()-d._offset.totalSeconds(),f=d._dateTime.plusSeconds(e);return this._dateTime.until(f,c)}return c.between(this,d)},c.toLocalDateTime=function(){return this._dateTime},c.toLocalDate=function(){return this._dateTime.toLocalDate()},c.toLocalTime=function(){return this._dateTime.toLocalTime()},c.toOffsetDateTime=function(){return a0.of(this._dateTime,this._offset)},c.equals=function(a){return this===a||a instanceof b&&this._dateTime.equals(a._dateTime)&&this._offset.equals(a._offset)&&this._zone.equals(a._zone)},c.hashCode=function(){return x.hashCode(this._dateTime.hashCode(),this._offset.hashCode(),this._zone.hashCode())},c.toString=function(){var a=this._dateTime.toString()+this._offset.toString();return this._offset!==this._zone&&(a+="["+this._zone.toString()+"]"),a},c.toJSON=function(){return this.toString()},c.format=function(b){return a.prototype.format.call(this,b)},b}(a$),a0=function(a){function b(b,c){var d;return d=a.call(this)||this,t(b,"dateTime"),u(b,a3,"dateTime"),t(c,"offset"),u(c,$,"offset"),d._dateTime=b,d._offset=c,d}p(b,a),b.from=function(a){if(t(a,"temporal"),a instanceof b)return a;try{var c=$.from(a);try{var d=a3.from(a);return b.of(d,c)}catch(d){var e=a5.from(a);return b.ofInstant(e,c)}}catch(b){throw new i("Unable to obtain OffsetDateTime TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""))}},b.now=function(a){if(0==arguments.length)return b.now(a6.systemDefaultZone());if(t(a,"clockOrZone"),a instanceof V)return b.now(a6.system(a));if(a instanceof a6){var c=a.instant();return b.ofInstant(c,a.zone().rules().offset(c))}throw new m("clockOrZone must be an instance of ZoneId or Clock")},b.of=function(){return arguments.length<=2?b.ofDateTime.apply(this,arguments):3==arguments.length?b.ofDateAndTime.apply(this,arguments):b.ofNumbers.apply(this,arguments)},b.ofDateTime=function(a,c){return new b(a,c)},b.ofDateAndTime=function(a,c,d){return new b(a3.of(a,c),d)},b.ofNumbers=function(a,c,d,e,f,g,h,i){return void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=0),new b(a3.of(a,c,d,e,f,g,h),i)},b.ofInstant=function(a,c){t(a,"instant"),t(c,"zone");var d=c.rules().offset(a);return new b(a3.ofEpochSecond(a.epochSecond(),a.nano(),d),d)},b.parse=function(a,c){return void 0===c&&(c=aP.ISO_OFFSET_DATE_TIME),t(c,"formatter"),c.parse(a,b.FROM)};var c=b.prototype;return c.adjustInto=function(a){return a.with(G.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(G.NANO_OF_DAY,this.toLocalTime().toNanoOfDay()).with(G.OFFSET_SECONDS,this.offset().totalSeconds())},c.until=function(a,c){var d=b.from(a);return c instanceof D?(d=d.withOffsetSameInstant(this._offset),this._dateTime.until(d._dateTime,c)):c.between(this,d)},c.atZoneSameInstant=function(a){return a_.ofInstant(this._dateTime,this._offset,a)},c.atZoneSimilarLocal=function(a){return a_.ofLocal(this._dateTime,a,this._offset)},c.query=function(b){if(t(b,"query"),b===H.chronology())return aY.INSTANCE;if(b===H.precision())return D.NANOS;if(b===H.offset()||b===H.zone())return this.offset();if(b===H.localDate())return this.toLocalDate();if(b===H.localTime())return this.toLocalTime();else if(b===H.zoneId())return null;return a.prototype.query.call(this,b)},c.get=function(b){if(b instanceof G){switch(b){case G.INSTANT_SECONDS:throw new i("Field too large for an int: "+b);case G.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.get(b)}return a.prototype.get.call(this,b)},c.getLong=function(a){if(a instanceof G){switch(a){case G.INSTANT_SECONDS:return this.toEpochSecond();case G.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.getLong(a)}return a.getFrom(this)},c.offset=function(){return this._offset},c.year=function(){return this._dateTime.year()},c.monthValue=function(){return this._dateTime.monthValue()},c.month=function(){return this._dateTime.month()},c.dayOfMonth=function(){return this._dateTime.dayOfMonth()},c.dayOfYear=function(){return this._dateTime.dayOfYear()},c.dayOfWeek=function(){return this._dateTime.dayOfWeek()},c.hour=function(){return this._dateTime.hour()},c.minute=function(){return this._dateTime.minute()},c.second=function(){return this._dateTime.second()},c.nano=function(){return this._dateTime.nano()},c.toLocalDateTime=function(){return this._dateTime},c.toLocalDate=function(){return this._dateTime.toLocalDate()},c.toLocalTime=function(){return this._dateTime.toLocalTime()},c.toOffsetTime=function(){return aZ.of(this._dateTime.toLocalTime(),this._offset)},c.toZonedDateTime=function(){return a_.of(this._dateTime,this._offset)},c.toInstant=function(){return this._dateTime.toInstant(this._offset)},c.toEpochSecond=function(){return this._dateTime.toEpochSecond(this._offset)},c.isSupported=function(a){return a instanceof G||a instanceof D?a.isDateBased()||a.isTimeBased():null!=a&&a.isSupportedBy(this)},c.range=function(a){return a instanceof G?a===G.INSTANT_SECONDS||a===G.OFFSET_SECONDS?a.range():this._dateTime.range(a):a.rangeRefinedBy(this)},c._withAdjuster=function(a){return(t(a),a instanceof a1||a instanceof a4||a instanceof a3)?this._withDateTimeOffset(this._dateTime.with(a),this._offset):a instanceof a5?b.ofInstant(a,this._offset):a instanceof $?this._withDateTimeOffset(this._dateTime,a):a instanceof b?a:a.adjustInto(this)},c._withField=function(a,c){if(t(a),a instanceof G){switch(a){case G.INSTANT_SECONDS:return b.ofInstant(a5.ofEpochSecond(c,this.nano()),this._offset);case G.OFFSET_SECONDS:return this._withDateTimeOffset(this._dateTime,$.ofTotalSeconds(a.checkValidIntValue(c)))}return this._withDateTimeOffset(this._dateTime.with(a,c),this._offset)}return a.adjustInto(this,c)},c._withDateTimeOffset=function(a,c){return this._dateTime===a&&this._offset.equals(c)?this:new b(a,c)},c.withYear=function(a){return this._withDateTimeOffset(this._dateTime.withYear(a),this._offset)},c.withMonth=function(a){return this._withDateTimeOffset(this._dateTime.withMonth(a),this._offset)},c.withDayOfMonth=function(a){return this._withDateTimeOffset(this._dateTime.withDayOfMonth(a),this._offset)},c.withDayOfYear=function(a){return this._withDateTimeOffset(this._dateTime.withDayOfYear(a),this._offset)},c.withHour=function(a){return this._withDateTimeOffset(this._dateTime.withHour(a),this._offset)},c.withMinute=function(a){return this._withDateTimeOffset(this._dateTime.withMinute(a),this._offset)},c.withSecond=function(a){return this._withDateTimeOffset(this._dateTime.withSecond(a),this._offset)},c.withNano=function(a){return this._withDateTimeOffset(this._dateTime.withNano(a),this._offset)},c.withOffsetSameLocal=function(a){return t(a,"offset"),this._withDateTimeOffset(this._dateTime,a)},c.withOffsetSameInstant=function(a){if(t(a,"offset"),a.equals(this._offset))return this;var c=a.totalSeconds()-this._offset.totalSeconds();return new b(this._dateTime.plusSeconds(c),a)},c.truncatedTo=function(a){return this._withDateTimeOffset(this._dateTime.truncatedTo(a),this._offset)},c._plusAmount=function(a){return t(a,"amount"),a.addTo(this)},c._plusUnit=function(a,b){return b instanceof D?this._withDateTimeOffset(this._dateTime.plus(a,b),this._offset):b.addTo(this,a)},c.plusYears=function(a){return this._withDateTimeOffset(this._dateTime.plusYears(a),this._offset)},c.plusMonths=function(a){return this._withDateTimeOffset(this._dateTime.plusMonths(a),this._offset)},c.plusWeeks=function(a){return this._withDateTimeOffset(this._dateTime.plusWeeks(a),this._offset)},c.plusDays=function(a){return this._withDateTimeOffset(this._dateTime.plusDays(a),this._offset)},c.plusHours=function(a){return this._withDateTimeOffset(this._dateTime.plusHours(a),this._offset)},c.plusMinutes=function(a){return this._withDateTimeOffset(this._dateTime.plusMinutes(a),this._offset)},c.plusSeconds=function(a){return this._withDateTimeOffset(this._dateTime.plusSeconds(a),this._offset)},c.plusNanos=function(a){return this._withDateTimeOffset(this._dateTime.plusNanos(a),this._offset)},c._minusAmount=function(a){return t(a),a.subtractFrom(this)},c._minusUnit=function(a,b){return this.plus(-1*a,b)},c.minusYears=function(a){return this._withDateTimeOffset(this._dateTime.minusYears(a),this._offset)},c.minusMonths=function(a){return this._withDateTimeOffset(this._dateTime.minusMonths(a),this._offset)},c.minusWeeks=function(a){return this._withDateTimeOffset(this._dateTime.minusWeeks(a),this._offset)},c.minusDays=function(a){return this._withDateTimeOffset(this._dateTime.minusDays(a),this._offset)},c.minusHours=function(a){return this._withDateTimeOffset(this._dateTime.minusHours(a),this._offset)},c.minusMinutes=function(a){return this._withDateTimeOffset(this._dateTime.minusMinutes(a),this._offset)},c.minusSeconds=function(a){return this._withDateTimeOffset(this._dateTime.minusSeconds(a),this._offset)},c.minusNanos=function(a){return this._withDateTimeOffset(this._dateTime.minusNanos(a),this._offset)},c.compareTo=function(a){if(t(a,"other"),u(a,b,"other"),this.offset().equals(a.offset()))return this.toLocalDateTime().compareTo(a.toLocalDateTime());var c=x.compareNumbers(this.toEpochSecond(),a.toEpochSecond());return 0===c&&0==(c=this.toLocalTime().nano()-a.toLocalTime().nano())&&(c=this.toLocalDateTime().compareTo(a.toLocalDateTime())),c},c.isAfter=function(a){t(a,"other");var b=this.toEpochSecond(),c=a.toEpochSecond();return b>c||b===c&&this.toLocalTime().nano()>a.toLocalTime().nano()},c.isBefore=function(a){t(a,"other");var b=this.toEpochSecond(),c=a.toEpochSecond();return b<c||b===c&&this.toLocalTime().nano()<a.toLocalTime().nano()},c.isEqual=function(a){return t(a,"other"),this.toEpochSecond()===a.toEpochSecond()&&this.toLocalTime().nano()===a.toLocalTime().nano()},c.equals=function(a){return this===a||a instanceof b&&this._dateTime.equals(a._dateTime)&&this._offset.equals(a._offset)},c.hashCode=function(){return this._dateTime.hashCode()^this._offset.hashCode()},c.toString=function(){return this._dateTime.toString()+this._offset.toString()},c.toJSON=function(){return this.toString()},c.format=function(a){return t(a,"formatter"),a.format(this)},b}(S),a1=function(a){function b(c,d,e){var f;return f=a.call(this)||this,t(c,"year"),t(d,"month"),t(e,"dayOfMonth"),d instanceof M&&(d=d.value()),f._year=x.safeToInt(c),f._month=x.safeToInt(d),f._day=x.safeToInt(e),b._validate(f._year,f._month,f._day),f}p(b,a),b.now=function(a){var c;return c=null==a?a6.systemDefaultZone():a instanceof V?a6.system(a):a,b.ofInstant(c.instant(),c.zone())},b.ofInstant=function(a,c){void 0===c&&(c=V.systemDefault()),t(a,"instant");var d=c.rules().offset(a),e=a.epochSecond()+d.totalSeconds(),f=x.floorDiv(e,a4.SECONDS_PER_DAY);return b.ofEpochDay(f)},b.of=function(a,c,d){return new b(a,c,d)},b.ofYearDay=function(a,c){G.YEAR.checkValidValue(a);var d=aY.isLeapYear(a);366===c&&!1===d&&s(!1,"Invalid date 'DayOfYear 366' as '"+a+"' is not a leap year",i);var e=M.of(Math.floor((c-1)/31+1));c>e.firstDayOfYear(d)+e.length(d)-1&&(e=e.plus(1));var f=c-e.firstDayOfYear(d)+1;return new b(a,e.value(),f)},b.ofEpochDay=function(a){void 0===a&&(a=0),c=0,(g=a+719528-60)<0&&(c=400*(d=x.intDiv(g+1,146097)-1),g+=-(146097*d)),f=x.intDiv(400*g+591,146097),(e=g-(365*f+x.intDiv(f,4)-x.intDiv(f,100)+x.intDiv(f,400)))<0&&(e=g-(365*--f+x.intDiv(f,4)-x.intDiv(f,100)+x.intDiv(f,400))),f+=c;var c,d,e,f,g,h=e,i=x.intDiv(5*h+2,153),j=h-x.intDiv(306*i+5,10)+1;return new b(f+=x.intDiv(i,10),(i+2)%12+1,j)},b.from=function(a){t(a,"temporal");var b=a.query(H.localDate());if(null==b)throw new i("Unable to obtain LocalDate from TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""));return b},b.parse=function(a,c){return void 0===c&&(c=aP.ISO_LOCAL_DATE),s(null!=c,"formatter",o),c.parse(a,b.FROM)},b._resolvePreviousValid=function(a,c,d){switch(c){case 2:d=Math.min(d,aY.isLeapYear(a)?29:28);break;case 4:case 6:case 9:case 11:d=Math.min(d,30)}return b.of(a,c,d)},b._validate=function(a,b,c){var d;if(G.YEAR.checkValidValue(a),G.MONTH_OF_YEAR.checkValidValue(b),G.DAY_OF_MONTH.checkValidValue(c),c>28){switch(d=31,b){case 2:d=aY.isLeapYear(a)?29:28;break;case 4:case 6:case 9:case 11:d=30}c>d&&(29===c?s(!1,"Invalid date 'February 29' as '"+a+"' is not a leap year",i):s(!1,"Invalid date '"+a+"' '"+b+"' '"+c+"'",i))}};var c=b.prototype;return c.isSupported=function(b){return a.prototype.isSupported.call(this,b)},c.range=function(a){if(a instanceof G){if(a.isDateBased()){switch(a){case G.DAY_OF_MONTH:return F.of(1,this.lengthOfMonth());case G.DAY_OF_YEAR:return F.of(1,this.lengthOfYear());case G.ALIGNED_WEEK_OF_MONTH:return F.of(1,this.month()===M.FEBRUARY&&!1===this.isLeapYear()?4:5);case G.YEAR_OF_ERA:return this._year<=0?F.of(1,aS.MAX_VALUE+1):F.of(1,aS.MAX_VALUE)}return a.range()}throw new k("Unsupported field: "+a)}return a.rangeRefinedBy(this)},c.get=function(a){return this.getLong(a)},c.getLong=function(a){return(s(null!=a,"",o),a instanceof G)?this._get0(a):a.getFrom(this)},c._get0=function(a){switch(a){case G.DAY_OF_WEEK:return this.dayOfWeek().value();case G.ALIGNED_DAY_OF_WEEK_IN_MONTH:return x.intMod(this._day-1,7)+1;case G.ALIGNED_DAY_OF_WEEK_IN_YEAR:return x.intMod(this.dayOfYear()-1,7)+1;case G.DAY_OF_MONTH:return this._day;case G.DAY_OF_YEAR:return this.dayOfYear();case G.EPOCH_DAY:return this.toEpochDay();case G.ALIGNED_WEEK_OF_MONTH:return x.intDiv(this._day-1,7)+1;case G.ALIGNED_WEEK_OF_YEAR:return x.intDiv(this.dayOfYear()-1,7)+1;case G.MONTH_OF_YEAR:return this._month;case G.PROLEPTIC_MONTH:return this._prolepticMonth();case G.YEAR_OF_ERA:return this._year>=1?this._year:1-this._year;case G.YEAR:return this._year;case G.ERA:return+(this._year>=1)}throw new k("Unsupported field: "+a)},c._prolepticMonth=function(){return 12*this._year+(this._month-1)},c.chronology=function(){return aY.INSTANCE},c.year=function(){return this._year},c.monthValue=function(){return this._month},c.month=function(){return M.of(this._month)},c.dayOfMonth=function(){return this._day},c.dayOfYear=function(){return this.month().firstDayOfYear(this.isLeapYear())+this._day-1},c.dayOfWeek=function(){var a=x.floorMod(this.toEpochDay()+3,7);return L.of(a+1)},c.isLeapYear=function(){return aY.isLeapYear(this._year)},c.lengthOfMonth=function(){switch(this._month){case 2:return this.isLeapYear()?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},c.lengthOfYear=function(){return this.isLeapYear()?366:365},c._withAdjuster=function(c){return(t(c,"adjuster"),c instanceof b)?c:a.prototype._withAdjuster.call(this,c)},c._withField=function(a,c){if(s(null!=a,"field",o),a instanceof G){switch(a.checkValidValue(c),a){case G.DAY_OF_WEEK:return this.plusDays(c-this.dayOfWeek().value());case G.ALIGNED_DAY_OF_WEEK_IN_MONTH:return this.plusDays(c-this.getLong(G.ALIGNED_DAY_OF_WEEK_IN_MONTH));case G.ALIGNED_DAY_OF_WEEK_IN_YEAR:return this.plusDays(c-this.getLong(G.ALIGNED_DAY_OF_WEEK_IN_YEAR));case G.DAY_OF_MONTH:return this.withDayOfMonth(c);case G.DAY_OF_YEAR:return this.withDayOfYear(c);case G.EPOCH_DAY:return b.ofEpochDay(c);case G.ALIGNED_WEEK_OF_MONTH:return this.plusWeeks(c-this.getLong(G.ALIGNED_WEEK_OF_MONTH));case G.ALIGNED_WEEK_OF_YEAR:return this.plusWeeks(c-this.getLong(G.ALIGNED_WEEK_OF_YEAR));case G.MONTH_OF_YEAR:return this.withMonth(c);case G.PROLEPTIC_MONTH:return this.plusMonths(c-this.getLong(G.PROLEPTIC_MONTH));case G.YEAR_OF_ERA:return this.withYear(this._year>=1?c:1-c);case G.YEAR:return this.withYear(c);case G.ERA:return this.getLong(G.ERA)===c?this:this.withYear(1-this._year)}throw new k("Unsupported field: "+a)}return a.adjustInto(this,c)},c.withYear=function(a){return this._year===a?this:(G.YEAR.checkValidValue(a),b._resolvePreviousValid(a,this._month,this._day))},c.withMonth=function(a){var c=a instanceof M?a.value():a;return this._month===c?this:(G.MONTH_OF_YEAR.checkValidValue(c),b._resolvePreviousValid(this._year,c,this._day))},c.withDayOfMonth=function(a){return this._day===a?this:b.of(this._year,this._month,a)},c.withDayOfYear=function(a){return this.dayOfYear()===a?this:b.ofYearDay(this._year,a)},c._plusUnit=function(a,b){if(t(a,"amountToAdd"),t(b,"unit"),b instanceof D){switch(b){case D.DAYS:return this.plusDays(a);case D.WEEKS:return this.plusWeeks(a);case D.MONTHS:return this.plusMonths(a);case D.YEARS:return this.plusYears(a);case D.DECADES:return this.plusYears(x.safeMultiply(a,10));case D.CENTURIES:return this.plusYears(x.safeMultiply(a,100));case D.MILLENNIA:return this.plusYears(x.safeMultiply(a,1e3));case D.ERAS:return this.with(G.ERA,x.safeAdd(this.getLong(G.ERA),a))}throw new k("Unsupported unit: "+b)}return b.addTo(this,a)},c.plusYears=function(a){if(0===a)return this;var c=G.YEAR.checkValidIntValue(this._year+a);return b._resolvePreviousValid(c,this._month,this._day)},c.plusMonths=function(a){if(0===a)return this;var c=12*this._year+(this._month-1)+a,d=G.YEAR.checkValidIntValue(x.floorDiv(c,12)),e=x.floorMod(c,12)+1;return b._resolvePreviousValid(d,e,this._day)},c.plusWeeks=function(a){return this.plusDays(x.safeMultiply(a,7))},c.plusDays=function(a){if(0===a)return this;var c=x.safeAdd(this.toEpochDay(),a);return b.ofEpochDay(c)},c._minusUnit=function(a,b){return t(a,"amountToSubtract"),t(b,"unit"),this._plusUnit(-1*a,b)},c.minusYears=function(a){return this.plusYears(-1*a)},c.minusMonths=function(a){return this.plusMonths(-1*a)},c.minusWeeks=function(a){return this.plusWeeks(-1*a)},c.minusDays=function(a){return this.plusDays(-1*a)},c.query=function(b){return(t(b,"query"),b===H.localDate())?this:a.prototype.query.call(this,b)},c.adjustInto=function(b){return a.prototype.adjustInto.call(this,b)},c.until=function(a,b){return arguments.length<2?this.until1(a):this.until2(a,b)},c.until2=function(a,c){var d=b.from(a);if(c instanceof D){switch(c){case D.DAYS:return this.daysUntil(d);case D.WEEKS:return x.intDiv(this.daysUntil(d),7);case D.MONTHS:return this._monthsUntil(d);case D.YEARS:return x.intDiv(this._monthsUntil(d),12);case D.DECADES:return x.intDiv(this._monthsUntil(d),120);case D.CENTURIES:return x.intDiv(this._monthsUntil(d),1200);case D.MILLENNIA:return x.intDiv(this._monthsUntil(d),12e3);case D.ERAS:return d.getLong(G.ERA)-this.getLong(G.ERA)}throw new k("Unsupported unit: "+c)}return c.between(this,d)},c.daysUntil=function(a){return a.toEpochDay()-this.toEpochDay()},c._monthsUntil=function(a){var b=32*this._prolepticMonth()+this.dayOfMonth(),c=32*a._prolepticMonth()+a.dayOfMonth();return x.intDiv(c-b,32)},c.until1=function(a){var c=b.from(a),d=c._prolepticMonth()-this._prolepticMonth(),e=c._day-this._day;if(d>0&&e<0){d--;var f=this.plusMonths(d);e=c.toEpochDay()-f.toEpochDay()}else d<0&&e>0&&(d++,e-=c.lengthOfMonth());var g=x.intDiv(d,12),h=x.intMod(d,12);return O.of(g,h,e)},c.atTime=function(){return 1==arguments.length?this.atTime1.apply(this,arguments):this.atTime4.apply(this,arguments)},c.atTime1=function(a){if(t(a,"time"),a instanceof a4)return a3.of(this,a);if(a instanceof aZ)return this._atTimeOffsetTime(a);throw new m("time must be an instance of LocalTime or OffsetTime"+(a&&a.constructor&&a.constructor.name?", but is "+a.constructor.name:""))},c.atTime4=function(a,b,c,d){return void 0===c&&(c=0),void 0===d&&(d=0),this.atTime1(a4.of(a,b,c,d))},c._atTimeOffsetTime=function(a){return a0.of(a3.of(this,a.toLocalTime()),a.offset())},c.atStartOfDay=function(a){return null!=a?this._atStartOfDayWithZone(a):a3.of(this,a4.MIDNIGHT)},c._atStartOfDayWithZone=function(a){t(a,"zone");var b=this.atTime(a4.MIDNIGHT);if(a instanceof $==!1){var c=a.rules().transition(b);null!=c&&c.isGap()&&(b=c.dateTimeAfter())}return a_.of(b,a)},c.toEpochDay=function(){var a,b=this._year,c=this._month;return a=0+365*b,b>=0?a+=x.intDiv(b+3,4)-x.intDiv(b+99,100)+x.intDiv(b+399,400):a-=x.intDiv(b,-4)-x.intDiv(b,-100)+x.intDiv(b,-400),a+=x.intDiv(367*c-362,12),a+=this.dayOfMonth()-1,c>2&&(a--,!aY.isLeapYear(b)&&a--),a-719528},c.compareTo=function(a){return t(a,"other"),u(a,b,"other"),this._compareTo0(a)},c._compareTo0=function(a){var b=this._year-a._year;return 0===b&&0==(b=this._month-a._month)&&(b=this._day-a._day),b},c.isAfter=function(a){return this.compareTo(a)>0},c.isBefore=function(a){return 0>this.compareTo(a)},c.isEqual=function(a){return 0===this.compareTo(a)},c.equals=function(a){return this===a||a instanceof b&&0===this._compareTo0(a)},c.hashCode=function(){var a=this._year,b=this._month,c=this._day;return x.hash(0xfffff800&a^(a<<11)+(b<<6)+c)},c.toString=function(){var a=this._year,b=this._month,c=this._day;return(1e3>Math.abs(a)?a<0?"-"+(""+(a-1e4)).slice(-4):(""+(a+1e4)).slice(-4):a>9999?"+"+a:""+a)+(b<10?"-0"+b:"-"+b)+(c<10?"-0"+c:"-"+c)},c.toJSON=function(){return this.toString()},c.format=function(b){return t(b,"formatter"),u(b,aP,"formatter"),a.prototype.format.call(this,b)},b}(T),a2=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.chronology=function(){return this.toLocalDate().chronology()},c.query=function(b){if(b===H.chronology())return this.chronology();if(b===H.precision())return D.NANOS;if(b===H.localDate())return a1.ofEpochDay(this.toLocalDate().toEpochDay());if(b===H.localTime())return this.toLocalTime();if(b===H.zone()||b===H.zoneId()||b===H.offset())return null;return a.prototype.query.call(this,b)},c.adjustInto=function(a){return a.with(G.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(G.NANO_OF_DAY,this.toLocalTime().toNanoOfDay())},c.toInstant=function(a){return u(a,$,"zoneId"),a5.ofEpochSecond(this.toEpochSecond(a),this.toLocalTime().nano())},c.toEpochSecond=function(a){t(a,"offset");var b=86400*this.toLocalDate().toEpochDay()+this.toLocalTime().toSecondOfDay();return b-=a.totalSeconds(),x.safeToInt(b)},b}(S),a3=function(a){function b(b,c){var d;return d=a.call(this)||this,u(b,a1,"date"),u(c,a4,"time"),d._date=b,d._time=c,d}p(b,a),b.now=function(a){return null==a?b._now(a6.systemDefaultZone()):a instanceof a6?b._now(a):b._now(a6.system(a))},b._now=function(a){return t(a,"clock"),b.ofInstant(a.instant(),a.zone())},b._ofEpochMillis=function(a,c){var d=x.floorDiv(a,1e3)+c.totalSeconds(),e=x.floorDiv(d,a4.SECONDS_PER_DAY),f=x.floorMod(d,a4.SECONDS_PER_DAY),g=1e6*x.floorMod(a,1e3);return new b(a1.ofEpochDay(e),a4.ofSecondOfDay(f,g))},b.of=function(){return arguments.length<=2?b.ofDateAndTime.apply(this,arguments):b.ofNumbers.apply(this,arguments)},b.ofNumbers=function(a,c,d,e,f,g,h){return void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=0),new b(a1.of(a,c,d),a4.of(e,f,g,h))},b.ofDateAndTime=function(a,c){return t(a,"date"),t(c,"time"),new b(a,c)},b.ofInstant=function(a,c){void 0===c&&(c=V.systemDefault()),t(a,"instant"),u(a,a5,"instant"),t(c,"zone");var d=c.rules().offset(a);return b.ofEpochSecond(a.epochSecond(),a.nano(),d)},b.ofEpochSecond=function(a,c,d){void 0===a&&(a=0),void 0===c&&(c=0),2==arguments.length&&c instanceof $&&(d=c,c=0),t(d,"offset");var e=a+d.totalSeconds(),f=x.floorDiv(e,a4.SECONDS_PER_DAY),g=x.floorMod(e,a4.SECONDS_PER_DAY);return new b(a1.ofEpochDay(f),a4.ofSecondOfDay(g,c))},b.from=function(a){if(t(a,"temporal"),a instanceof b)return a;if(a instanceof a_)return a.toLocalDateTime();try{var c=a1.from(a),d=a4.from(a);return new b(c,d)}catch(b){throw new i("Unable to obtain LocalDateTime TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""))}},b.parse=function(a,c){return void 0===c&&(c=aP.ISO_LOCAL_DATE_TIME),t(c,"formatter"),c.parse(a,b.FROM)};var c=b.prototype;return c._withDateTime=function(a,c){return this._date.equals(a)&&this._time.equals(c)?this:new b(a,c)},c.isSupported=function(a){return a instanceof G||a instanceof D?a.isDateBased()||a.isTimeBased():null!=a&&a.isSupportedBy(this)},c.range=function(a){return a instanceof G?a.isTimeBased()?this._time.range(a):this._date.range(a):a.rangeRefinedBy(this)},c.get=function(b){return b instanceof G?b.isTimeBased()?this._time.get(b):this._date.get(b):a.prototype.get.call(this,b)},c.getLong=function(a){return(t(a,"field"),a instanceof G)?a.isTimeBased()?this._time.getLong(a):this._date.getLong(a):a.getFrom(this)},c.year=function(){return this._date.year()},c.monthValue=function(){return this._date.monthValue()},c.month=function(){return this._date.month()},c.dayOfMonth=function(){return this._date.dayOfMonth()},c.dayOfYear=function(){return this._date.dayOfYear()},c.dayOfWeek=function(){return this._date.dayOfWeek()},c.hour=function(){return this._time.hour()},c.minute=function(){return this._time.minute()},c.second=function(){return this._time.second()},c.nano=function(){return this._time.nano()},c._withAdjuster=function(c){return(t(c,"adjuster"),c instanceof a1)?this._withDateTime(c,this._time):c instanceof a4?this._withDateTime(this._date,c):c instanceof b?c:a.prototype._withAdjuster.call(this,c)},c._withField=function(a,b){if(t(a,"field"),a instanceof G)if(a.isTimeBased())return this._withDateTime(this._date,this._time.with(a,b));else return this._withDateTime(this._date.with(a,b),this._time);return a.adjustInto(this,b)},c.withYear=function(a){return this._withDateTime(this._date.withYear(a),this._time)},c.withMonth=function(a){return this._withDateTime(this._date.withMonth(a),this._time)},c.withDayOfMonth=function(a){return this._withDateTime(this._date.withDayOfMonth(a),this._time)},c.withDayOfYear=function(a){return this._withDateTime(this._date.withDayOfYear(a),this._time)},c.withHour=function(a){var b=this._time.withHour(a);return this._withDateTime(this._date,b)},c.withMinute=function(a){var b=this._time.withMinute(a);return this._withDateTime(this._date,b)},c.withSecond=function(a){var b=this._time.withSecond(a);return this._withDateTime(this._date,b)},c.withNano=function(a){var b=this._time.withNano(a);return this._withDateTime(this._date,b)},c.truncatedTo=function(a){return this._withDateTime(this._date,this._time.truncatedTo(a))},c._plusUnit=function(a,b){if(t(b,"unit"),b instanceof D){switch(b){case D.NANOS:return this.plusNanos(a);case D.MICROS:return this.plusDays(x.intDiv(a,a4.MICROS_PER_DAY)).plusNanos(1e3*x.intMod(a,a4.MICROS_PER_DAY));case D.MILLIS:return this.plusDays(x.intDiv(a,a4.MILLIS_PER_DAY)).plusNanos(1e6*x.intMod(a,a4.MILLIS_PER_DAY));case D.SECONDS:return this.plusSeconds(a);case D.MINUTES:return this.plusMinutes(a);case D.HOURS:return this.plusHours(a);case D.HALF_DAYS:return this.plusDays(x.intDiv(a,256)).plusHours(12*x.intMod(a,256))}return this._withDateTime(this._date.plus(a,b),this._time)}return b.addTo(this,a)},c.plusYears=function(a){var b=this._date.plusYears(a);return this._withDateTime(b,this._time)},c.plusMonths=function(a){var b=this._date.plusMonths(a);return this._withDateTime(b,this._time)},c.plusWeeks=function(a){var b=this._date.plusWeeks(a);return this._withDateTime(b,this._time)},c.plusDays=function(a){var b=this._date.plusDays(a);return this._withDateTime(b,this._time)},c.plusHours=function(a){return this._plusWithOverflow(this._date,a,0,0,0,1)},c.plusMinutes=function(a){return this._plusWithOverflow(this._date,0,a,0,0,1)},c.plusSeconds=function(a){return this._plusWithOverflow(this._date,0,0,a,0,1)},c.plusNanos=function(a){return this._plusWithOverflow(this._date,0,0,0,a,1)},c._minusUnit=function(a,b){return t(b,"unit"),this._plusUnit(-1*a,b)},c.minusYears=function(a){return this.plusYears(-1*a)},c.minusMonths=function(a){return this.plusMonths(-1*a)},c.minusWeeks=function(a){return this.plusWeeks(-1*a)},c.minusDays=function(a){return this.plusDays(-1*a)},c.minusHours=function(a){return this._plusWithOverflow(this._date,a,0,0,0,-1)},c.minusMinutes=function(a){return this._plusWithOverflow(this._date,0,a,0,0,-1)},c.minusSeconds=function(a){return this._plusWithOverflow(this._date,0,0,a,0,-1)},c.minusNanos=function(a){return this._plusWithOverflow(this._date,0,0,0,a,-1)},c._plusWithOverflow=function(a,b,c,d,e,f){if(0===b&&0===c&&0===d&&0===e)return this._withDateTime(a,this._time);var g=x.intDiv(e,a4.NANOS_PER_DAY)+x.intDiv(d,a4.SECONDS_PER_DAY)+x.intDiv(c,a4.MINUTES_PER_DAY)+x.intDiv(b,a4.HOURS_PER_DAY);g*=f;var h=x.intMod(e,a4.NANOS_PER_DAY)+x.intMod(d,a4.SECONDS_PER_DAY)*a4.NANOS_PER_SECOND+x.intMod(c,a4.MINUTES_PER_DAY)*a4.NANOS_PER_MINUTE+x.intMod(b,a4.HOURS_PER_DAY)*a4.NANOS_PER_HOUR,i=this._time.toNanoOfDay();h=h*f+i,g+=x.floorDiv(h,a4.NANOS_PER_DAY);var j=x.floorMod(h,a4.NANOS_PER_DAY),k=j===i?this._time:a4.ofNanoOfDay(j);return this._withDateTime(a.plusDays(g),k)},c.query=function(b){return(t(b,"query"),b===H.localDate())?this.toLocalDate():a.prototype.query.call(this,b)},c.adjustInto=function(b){return a.prototype.adjustInto.call(this,b)},c.until=function(a,c){t(a,"endExclusive"),t(c,"unit");var d=b.from(a);if(c instanceof D){if(c.isTimeBased()){var e=this._date.daysUntil(d._date),f=d._time.toNanoOfDay()-this._time.toNanoOfDay();e>0&&f<0?(e--,f+=a4.NANOS_PER_DAY):e<0&&f>0&&(e++,f-=a4.NANOS_PER_DAY);var g=e;switch(c){case D.NANOS:return g=x.safeMultiply(g,a4.NANOS_PER_DAY),x.safeAdd(g,f);case D.MICROS:return g=x.safeMultiply(g,a4.MICROS_PER_DAY),x.safeAdd(g,x.intDiv(f,1e3));case D.MILLIS:return g=x.safeMultiply(g,a4.MILLIS_PER_DAY),x.safeAdd(g,x.intDiv(f,1e6));case D.SECONDS:return g=x.safeMultiply(g,a4.SECONDS_PER_DAY),x.safeAdd(g,x.intDiv(f,a4.NANOS_PER_SECOND));case D.MINUTES:return g=x.safeMultiply(g,a4.MINUTES_PER_DAY),x.safeAdd(g,x.intDiv(f,a4.NANOS_PER_MINUTE));case D.HOURS:return g=x.safeMultiply(g,a4.HOURS_PER_DAY),x.safeAdd(g,x.intDiv(f,a4.NANOS_PER_HOUR));case D.HALF_DAYS:return g=x.safeMultiply(g,2),x.safeAdd(g,x.intDiv(f,12*a4.NANOS_PER_HOUR))}throw new k("Unsupported unit: "+c)}var h=d._date,i=d._time;return h.isAfter(this._date)&&i.isBefore(this._time)?h=h.minusDays(1):h.isBefore(this._date)&&i.isAfter(this._time)&&(h=h.plusDays(1)),this._date.until(h,c)}return c.between(this,d)},c.atOffset=function(a){return a0.of(this,a)},c.atZone=function(a){return a_.of(this,a)},c.toLocalDate=function(){return this._date},c.toLocalTime=function(){return this._time},c.compareTo=function(a){return t(a,"other"),u(a,b,"other"),this._compareTo0(a)},c._compareTo0=function(a){var b=this._date.compareTo(a.toLocalDate());return 0===b&&(b=this._time.compareTo(a.toLocalTime())),b},c.isAfter=function(a){return this.compareTo(a)>0},c.isBefore=function(a){return 0>this.compareTo(a)},c.isEqual=function(a){return 0===this.compareTo(a)},c.equals=function(a){return this===a||a instanceof b&&this._date.equals(a._date)&&this._time.equals(a._time)},c.hashCode=function(){return this._date.hashCode()^this._time.hashCode()},c.toString=function(){return this._date.toString()+"T"+this._time.toString()},c.toJSON=function(){return this.toString()},c.format=function(a){return t(a,"formatter"),a.format(this)},b}(a2),a4=function(a){function b(c,d,e,f){void 0===c&&(c=0),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=0);var g=a.call(this)||this,h=x.safeToInt(c),i=x.safeToInt(d),j=x.safeToInt(e),k=x.safeToInt(f);return(b._validate(h,i,j,k),0===i&&0===j&&0===k)?(b.HOURS[h]||(g._hour=h,g._minute=i,g._second=j,g._nano=k,b.HOURS[h]=r(g)),b.HOURS[h]||r(g)):(g._hour=h,g._minute=i,g._second=j,g._nano=k,g)}p(b,a),b.now=function(a){return null==a?b._now(a6.systemDefaultZone()):a instanceof a6?b._now(a):b._now(a6.system(a))},b._now=function(a){return void 0===a&&(a=a6.systemDefaultZone()),t(a,"clock"),b.ofInstant(a.instant(),a.zone())},b.ofInstant=function(a,c){void 0===c&&(c=V.systemDefault());var d=c.rules().offset(a),e=x.intMod(a.epochSecond(),b.SECONDS_PER_DAY);return(e=x.intMod(e+d.totalSeconds(),b.SECONDS_PER_DAY))<0&&(e+=b.SECONDS_PER_DAY),b.ofSecondOfDay(e,a.nano())},b.of=function(a,c,d,e){return new b(a,c,d,e)},b.ofSecondOfDay=function(a,c){void 0===a&&(a=0),void 0===c&&(c=0),G.SECOND_OF_DAY.checkValidValue(a),G.NANO_OF_SECOND.checkValidValue(c);var d=x.intDiv(a,b.SECONDS_PER_HOUR);a-=d*b.SECONDS_PER_HOUR;var e=x.intDiv(a,b.SECONDS_PER_MINUTE);return a-=e*b.SECONDS_PER_MINUTE,new b(d,e,a,c)},b.ofNanoOfDay=function(a){void 0===a&&(a=0),G.NANO_OF_DAY.checkValidValue(a);var c=x.intDiv(a,b.NANOS_PER_HOUR);a-=c*b.NANOS_PER_HOUR;var d=x.intDiv(a,b.NANOS_PER_MINUTE);a-=d*b.NANOS_PER_MINUTE;var e=x.intDiv(a,b.NANOS_PER_SECOND);return a-=e*b.NANOS_PER_SECOND,new b(c,d,e,a)},b.from=function(a){t(a,"temporal");var b=a.query(H.localTime());if(null==b)throw new i("Unable to obtain LocalTime TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""));return b},b.parse=function(a,c){return void 0===c&&(c=aP.ISO_LOCAL_TIME),t(c,"formatter"),c.parse(a,b.FROM)},b._validate=function(a,b,c,d){G.HOUR_OF_DAY.checkValidValue(a),G.MINUTE_OF_HOUR.checkValidValue(b),G.SECOND_OF_MINUTE.checkValidValue(c),G.NANO_OF_SECOND.checkValidValue(d)};var c=b.prototype;return c.isSupported=function(a){return a instanceof G||a instanceof D?a.isTimeBased():null!=a&&a.isSupportedBy(this)},c.range=function(b){return t(b),a.prototype.range.call(this,b)},c.get=function(a){return this.getLong(a)},c.getLong=function(a){return(t(a,"field"),a instanceof G)?this._get0(a):a.getFrom(this)},c._get0=function(a){switch(a){case G.NANO_OF_SECOND:return this._nano;case G.NANO_OF_DAY:return this.toNanoOfDay();case G.MICRO_OF_SECOND:return x.intDiv(this._nano,1e3);case G.MICRO_OF_DAY:return x.intDiv(this.toNanoOfDay(),1e3);case G.MILLI_OF_SECOND:return x.intDiv(this._nano,1e6);case G.MILLI_OF_DAY:return x.intDiv(this.toNanoOfDay(),1e6);case G.SECOND_OF_MINUTE:return this._second;case G.SECOND_OF_DAY:return this.toSecondOfDay();case G.MINUTE_OF_HOUR:return this._minute;case G.MINUTE_OF_DAY:return 60*this._hour+this._minute;case G.HOUR_OF_AMPM:return x.intMod(this._hour,12);case G.CLOCK_HOUR_OF_AMPM:var b=x.intMod(this._hour,12);return b%12==0?12:b;case G.HOUR_OF_DAY:return this._hour;case G.CLOCK_HOUR_OF_DAY:return 0===this._hour?24:this._hour;case G.AMPM_OF_DAY:return x.intDiv(this._hour,12)}throw new k("Unsupported field: "+a)},c.hour=function(){return this._hour},c.minute=function(){return this._minute},c.second=function(){return this._second},c.nano=function(){return this._nano},c._withAdjuster=function(c){return(t(c,"adjuster"),c instanceof b)?c:a.prototype._withAdjuster.call(this,c)},c._withField=function(a,c){if(t(a,"field"),u(a,E,"field"),a instanceof G){switch(a.checkValidValue(c),a){case G.NANO_OF_SECOND:return this.withNano(c);case G.NANO_OF_DAY:return b.ofNanoOfDay(c);case G.MICRO_OF_SECOND:return this.withNano(1e3*c);case G.MICRO_OF_DAY:return b.ofNanoOfDay(1e3*c);case G.MILLI_OF_SECOND:return this.withNano(1e6*c);case G.MILLI_OF_DAY:return b.ofNanoOfDay(1e6*c);case G.SECOND_OF_MINUTE:return this.withSecond(c);case G.SECOND_OF_DAY:return this.plusSeconds(c-this.toSecondOfDay());case G.MINUTE_OF_HOUR:return this.withMinute(c);case G.MINUTE_OF_DAY:return this.plusMinutes(c-(60*this._hour+this._minute));case G.HOUR_OF_AMPM:return this.plusHours(c-x.intMod(this._hour,12));case G.CLOCK_HOUR_OF_AMPM:return this.plusHours((12===c?0:c)-x.intMod(this._hour,12));case G.HOUR_OF_DAY:return this.withHour(c);case G.CLOCK_HOUR_OF_DAY:return this.withHour(24===c?0:c);case G.AMPM_OF_DAY:return this.plusHours((c-x.intDiv(this._hour,12))*12)}throw new k("Unsupported field: "+a)}return a.adjustInto(this,c)},c.withHour=function(a){return(void 0===a&&(a=0),this._hour===a)?this:new b(a,this._minute,this._second,this._nano)},c.withMinute=function(a){return(void 0===a&&(a=0),this._minute===a)?this:new b(this._hour,a,this._second,this._nano)},c.withSecond=function(a){return(void 0===a&&(a=0),this._second===a)?this:new b(this._hour,this._minute,a,this._nano)},c.withNano=function(a){return(void 0===a&&(a=0),this._nano===a)?this:new b(this._hour,this._minute,this._second,a)},c.truncatedTo=function(a){if(t(a,"unit"),a===D.NANOS)return this;var c=a.duration();if(c.seconds()>b.SECONDS_PER_DAY)throw new i("Unit is too large to be used for truncation");var d=c.toNanos();if(0!==x.intMod(b.NANOS_PER_DAY,d))throw new i("Unit must divide into a standard day without remainder");var e=this.toNanoOfDay();return b.ofNanoOfDay(x.intDiv(e,d)*d)},c._plusUnit=function(a,c){if(t(c,"unit"),c instanceof D){switch(c){case D.NANOS:return this.plusNanos(a);case D.MICROS:return this.plusNanos(1e3*x.intMod(a,b.MICROS_PER_DAY));case D.MILLIS:return this.plusNanos(1e6*x.intMod(a,b.MILLIS_PER_DAY));case D.SECONDS:return this.plusSeconds(a);case D.MINUTES:return this.plusMinutes(a);case D.HOURS:return this.plusHours(a);case D.HALF_DAYS:return this.plusHours(12*x.intMod(a,2))}throw new k("Unsupported unit: "+c)}return c.addTo(this,a)},c.plusHours=function(a){if(0===a)return this;var c=x.intMod(x.intMod(a,b.HOURS_PER_DAY)+this._hour+b.HOURS_PER_DAY,b.HOURS_PER_DAY);return new b(c,this._minute,this._second,this._nano)},c.plusMinutes=function(a){if(0===a)return this;var c=this._hour*b.MINUTES_PER_HOUR+this._minute,d=x.intMod(x.intMod(a,b.MINUTES_PER_DAY)+c+b.MINUTES_PER_DAY,b.MINUTES_PER_DAY);if(c===d)return this;var e=x.intDiv(d,b.MINUTES_PER_HOUR),f=x.intMod(d,b.MINUTES_PER_HOUR);return new b(e,f,this._second,this._nano)},c.plusSeconds=function(a){if(0===a)return this;var c=this._hour*b.SECONDS_PER_HOUR+this._minute*b.SECONDS_PER_MINUTE+this._second,d=x.intMod(x.intMod(a,b.SECONDS_PER_DAY)+c+b.SECONDS_PER_DAY,b.SECONDS_PER_DAY);if(c===d)return this;var e=x.intDiv(d,b.SECONDS_PER_HOUR),f=x.intMod(x.intDiv(d,b.SECONDS_PER_MINUTE),b.MINUTES_PER_HOUR),g=x.intMod(d,b.SECONDS_PER_MINUTE);return new b(e,f,g,this._nano)},c.plusNanos=function(a){if(0===a)return this;var c=this.toNanoOfDay(),d=x.intMod(x.intMod(a,b.NANOS_PER_DAY)+c+b.NANOS_PER_DAY,b.NANOS_PER_DAY);if(c===d)return this;var e=x.intDiv(d,b.NANOS_PER_HOUR),f=x.intMod(x.intDiv(d,b.NANOS_PER_MINUTE),b.MINUTES_PER_HOUR),g=x.intMod(x.intDiv(d,b.NANOS_PER_SECOND),b.SECONDS_PER_MINUTE),h=x.intMod(d,b.NANOS_PER_SECOND);return new b(e,f,g,h)},c._minusUnit=function(a,b){return t(b,"unit"),this._plusUnit(-1*a,b)},c.minusHours=function(a){return this.plusHours(-1*x.intMod(a,b.HOURS_PER_DAY))},c.minusMinutes=function(a){return this.plusMinutes(-1*x.intMod(a,b.MINUTES_PER_DAY))},c.minusSeconds=function(a){return this.plusSeconds(-1*x.intMod(a,b.SECONDS_PER_DAY))},c.minusNanos=function(a){return this.plusNanos(-1*x.intMod(a,b.NANOS_PER_DAY))},c.query=function(a){return(t(a,"query"),a===H.precision())?D.NANOS:a===H.localTime()?this:a===H.chronology()||a===H.zoneId()||a===H.zone()||a===H.offset()||a===H.localDate()?null:a.queryFrom(this)},c.adjustInto=function(a){return a.with(b.NANO_OF_DAY,this.toNanoOfDay())},c.until=function(a,c){t(a,"endExclusive"),t(c,"unit");var d=b.from(a);if(c instanceof D){var e=d.toNanoOfDay()-this.toNanoOfDay();switch(c){case D.NANOS:return e;case D.MICROS:return x.intDiv(e,1e3);case D.MILLIS:return x.intDiv(e,1e6);case D.SECONDS:return x.intDiv(e,b.NANOS_PER_SECOND);case D.MINUTES:return x.intDiv(e,b.NANOS_PER_MINUTE);case D.HOURS:return x.intDiv(e,b.NANOS_PER_HOUR);case D.HALF_DAYS:return x.intDiv(e,12*b.NANOS_PER_HOUR)}throw new k("Unsupported unit: "+c)}return c.between(this,d)},c.atDate=function(a){return a3.of(a,this)},c.atOffset=function(a){return aZ.of(this,a)},c.toSecondOfDay=function(){var a=this._hour*b.SECONDS_PER_HOUR;return a+=this._minute*b.SECONDS_PER_MINUTE,a+=this._second},c.toNanoOfDay=function(){var a=this._hour*b.NANOS_PER_HOUR;return a+=this._minute*b.NANOS_PER_MINUTE,a+=this._second*b.NANOS_PER_SECOND,a+=this._nano},c.compareTo=function(a){t(a,"other"),u(a,b,"other");var c=x.compareNumbers(this._hour,a._hour);return 0===c&&0===(c=x.compareNumbers(this._minute,a._minute))&&0===(c=x.compareNumbers(this._second,a._second))&&(c=x.compareNumbers(this._nano,a._nano)),c},c.isAfter=function(a){return this.compareTo(a)>0},c.isBefore=function(a){return 0>this.compareTo(a)},c.equals=function(a){return this===a||a instanceof b&&this._hour===a._hour&&this._minute===a._minute&&this._second===a._second&&this._nano===a._nano},c.hashCode=function(){var a=this.toNanoOfDay();return x.hash(a)},c.toString=function(){var a="",b=this._hour,c=this._minute,d=this._second,e=this._nano;return a+=b<10?"0":"",a+=b,a+=c<10?":0":":",a+=c,(d>0||e>0)&&(a+=d<10?":0":":",a+=d,e>0&&(a+=".",0===x.intMod(e,1e6)?a+=(""+(x.intDiv(e,1e6)+1e3)).substring(1):0===x.intMod(e,1e3)?a+=(""+(x.intDiv(e,1e3)+1e6)).substring(1):a+=(""+(e+1e9)).substring(1))),a},c.toJSON=function(){return this.toString()},c.format=function(a){return t(a,"formatter"),a.format(this)},b}(S);a4.HOURS_PER_DAY=24,a4.MINUTES_PER_HOUR=60,a4.MINUTES_PER_DAY=a4.MINUTES_PER_HOUR*a4.HOURS_PER_DAY,a4.SECONDS_PER_MINUTE=60,a4.SECONDS_PER_HOUR=a4.SECONDS_PER_MINUTE*a4.MINUTES_PER_HOUR,a4.SECONDS_PER_DAY=a4.SECONDS_PER_HOUR*a4.HOURS_PER_DAY,a4.MILLIS_PER_DAY=1e3*a4.SECONDS_PER_DAY,a4.MICROS_PER_DAY=1e6*a4.SECONDS_PER_DAY,a4.NANOS_PER_SECOND=1e9,a4.NANOS_PER_MINUTE=a4.NANOS_PER_SECOND*a4.SECONDS_PER_MINUTE,a4.NANOS_PER_HOUR=a4.NANOS_PER_MINUTE*a4.MINUTES_PER_HOUR,a4.NANOS_PER_DAY=a4.NANOS_PER_HOUR*a4.HOURS_PER_DAY;var a5=function(a){function b(c,d){var e;return e=a.call(this)||this,b._validate(c,d),e._seconds=x.safeToInt(c),e._nanos=x.safeToInt(d),e}p(b,a),b.now=function(a){return void 0===a&&(a=a6.systemUTC()),a.instant()},b.ofEpochSecond=function(a,c){void 0===c&&(c=0);var d=a+x.floorDiv(c,a4.NANOS_PER_SECOND),e=x.floorMod(c,a4.NANOS_PER_SECOND);return b._create(d,e)},b.ofEpochMilli=function(a){var c=x.floorDiv(a,1e3),d=x.floorMod(a,1e3);return b._create(c,1e6*d)},b.ofEpochMicro=function(a){var c=x.floorDiv(a,1e6),d=x.floorMod(a,1e6);return b._create(c,1e3*d)},b.from=function(a){try{var c=a.getLong(G.INSTANT_SECONDS),d=a.get(G.NANO_OF_SECOND);return b.ofEpochSecond(c,d)}catch(b){throw new i("Unable to obtain Instant from TemporalAccessor: "+a+", type "+typeof a,b)}},b.parse=function(a){return aP.ISO_INSTANT.parse(a,b.FROM)},b._create=function(a,c){return 0===a&&0===c?b.EPOCH:new b(a,c)},b._validate=function(a,c){if(a<b.MIN_SECONDS||a>b.MAX_SECONDS||c<0||c>a4.NANOS_PER_SECOND)throw new i("Instant exceeds minimum or maximum instant")};var c=b.prototype;return c.isSupported=function(a){return a instanceof G?a===G.INSTANT_SECONDS||a===G.NANO_OF_SECOND||a===G.MICRO_OF_SECOND||a===G.MILLI_OF_SECOND:a instanceof D?a.isTimeBased()||a===D.DAYS:null!=a&&a.isSupportedBy(this)},c.range=function(b){return a.prototype.range.call(this,b)},c.get=function(a){return this.getLong(a)},c.getLong=function(a){if(a instanceof G){switch(a){case G.NANO_OF_SECOND:return this._nanos;case G.MICRO_OF_SECOND:return x.intDiv(this._nanos,1e3);case G.MILLI_OF_SECOND:return x.intDiv(this._nanos,1e6);case G.INSTANT_SECONDS:return this._seconds}throw new k("Unsupported field: "+a)}return a.getFrom(this)},c.epochSecond=function(){return this._seconds},c.nano=function(){return this._nanos},c._withField=function(a,c){if(t(a,"field"),a instanceof G){switch(a.checkValidValue(c),a){case G.MILLI_OF_SECOND:var d=1e6*c;return d!==this._nanos?b._create(this._seconds,d):this;case G.MICRO_OF_SECOND:var e=1e3*c;return e!==this._nanos?b._create(this._seconds,e):this;case G.NANO_OF_SECOND:return c!==this._nanos?b._create(this._seconds,c):this;case G.INSTANT_SECONDS:return c!==this._seconds?b._create(c,this._nanos):this}throw new k("Unsupported field: "+a)}return a.adjustInto(this,c)},c.truncatedTo=function(a){if(t(a,"unit"),a===D.NANOS)return this;var b=a.duration();if(b.seconds()>a4.SECONDS_PER_DAY)throw new i("Unit is too large to be used for truncation");var c=b.toNanos();if(0!==x.intMod(a4.NANOS_PER_DAY,c))throw new i("Unit must divide into a standard day without remainder");var d=x.intMod(this._seconds,a4.SECONDS_PER_DAY)*a4.NANOS_PER_SECOND+this._nanos,e=x.intDiv(d,c)*c;return this.plusNanos(e-d)},c._plusUnit=function(a,b){if(t(a,"amountToAdd"),t(b,"unit"),u(b,A),b instanceof D){switch(b){case D.NANOS:return this.plusNanos(a);case D.MICROS:return this.plusMicros(a);case D.MILLIS:return this.plusMillis(a);case D.SECONDS:return this.plusSeconds(a);case D.MINUTES:return this.plusSeconds(x.safeMultiply(a,a4.SECONDS_PER_MINUTE));case D.HOURS:return this.plusSeconds(x.safeMultiply(a,a4.SECONDS_PER_HOUR));case D.HALF_DAYS:return this.plusSeconds(x.safeMultiply(a,a4.SECONDS_PER_DAY/2));case D.DAYS:return this.plusSeconds(x.safeMultiply(a,a4.SECONDS_PER_DAY))}throw new k("Unsupported unit: "+b)}return b.addTo(this,a)},c.plusSeconds=function(a){return this._plus(a,0)},c.plusMillis=function(a){return this._plus(x.intDiv(a,1e3),1e6*x.intMod(a,1e3))},c.plusNanos=function(a){return this._plus(0,a)},c.plusMicros=function(a){return this._plus(x.intDiv(a,1e6),1e3*x.intMod(a,1e6))},c._plus=function(a,c){if(0===a&&0===c)return this;var d=this._seconds+a;d+=x.intDiv(c,a4.NANOS_PER_SECOND);var e=this._nanos+c%a4.NANOS_PER_SECOND;return b.ofEpochSecond(d,e)},c._minusUnit=function(a,b){return this._plusUnit(-1*a,b)},c.minusSeconds=function(a){return this.plusSeconds(-1*a)},c.minusMillis=function(a){return this.plusMillis(-1*a)},c.minusNanos=function(a){return this.plusNanos(-1*a)},c.minusMicros=function(a){return this.plusMicros(-1*a)},c.query=function(a){return(t(a,"query"),a===H.precision())?D.NANOS:a===H.localDate()||a===H.localTime()||a===H.chronology()||a===H.zoneId()||a===H.zone()||a===H.offset()?null:a.queryFrom(this)},c.adjustInto=function(a){return t(a,"temporal"),a.with(G.INSTANT_SECONDS,this._seconds).with(G.NANO_OF_SECOND,this._nanos)},c.until=function(a,c){t(a,"endExclusive"),t(c,"unit");var d=b.from(a);if(c instanceof D){switch(c){case D.NANOS:return this._nanosUntil(d);case D.MICROS:return this._microsUntil(d);case D.MILLIS:return x.safeSubtract(d.toEpochMilli(),this.toEpochMilli());case D.SECONDS:return this._secondsUntil(d);case D.MINUTES:return x.intDiv(this._secondsUntil(d),a4.SECONDS_PER_MINUTE);case D.HOURS:return x.intDiv(this._secondsUntil(d),a4.SECONDS_PER_HOUR);case D.HALF_DAYS:return x.intDiv(this._secondsUntil(d),12*a4.SECONDS_PER_HOUR);case D.DAYS:return x.intDiv(this._secondsUntil(d),a4.SECONDS_PER_DAY)}throw new k("Unsupported unit: "+c)}return c.between(this,d)},c._microsUntil=function(a){var b=x.safeSubtract(a.epochSecond(),this.epochSecond()),c=x.safeMultiply(b,1e6);return x.safeAdd(c,x.intDiv(a.nano()-this.nano(),1e3))},c._nanosUntil=function(a){var b=x.safeSubtract(a.epochSecond(),this.epochSecond()),c=x.safeMultiply(b,a4.NANOS_PER_SECOND);return x.safeAdd(c,a.nano()-this.nano())},c._secondsUntil=function(a){var b=x.safeSubtract(a.epochSecond(),this.epochSecond()),c=a.nano()-this.nano();return b>0&&c<0?b--:b<0&&c>0&&b++,b},c.atOffset=function(a){return a0.ofInstant(this,a)},c.atZone=function(a){return a_.ofInstant(this,a)},c.toEpochMilli=function(){return x.safeMultiply(this._seconds,1e3)+x.intDiv(this._nanos,1e6)},c.compareTo=function(a){t(a,"otherInstant"),u(a,b,"otherInstant");var c=x.compareNumbers(this._seconds,a._seconds);return 0!==c?c:this._nanos-a._nanos},c.isAfter=function(a){return this.compareTo(a)>0},c.isBefore=function(a){return 0>this.compareTo(a)},c.equals=function(a){return this===a||a instanceof b&&this.epochSecond()===a.epochSecond()&&this.nano()===a.nano()},c.hashCode=function(){return x.hashCode(this._seconds,this._nanos)},c.toString=function(){return aP.ISO_INSTANT.format(this)},c.toJSON=function(){return this.toString()},b}(S),a6=function(){function a(){}a.systemUTC=function(){return new a7($.UTC)},a.systemDefaultZone=function(){return new a7(V.systemDefault())},a.system=function(a){return new a7(a)},a.fixed=function(a,b){return new a8(a,b)},a.offset=function(a,b){return new a9(a,b)};var b=a.prototype;return b.millis=function(){v("Clock.millis")},b.instant=function(){v("Clock.instant")},b.zone=function(){v("Clock.zone")},b.withZone=function(){v("Clock.withZone")},a}(),a7=function(a){function b(b){var c;return t(b,"zone"),(c=a.call(this)||this)._zone=b,c}p(b,a);var c=b.prototype;return c.zone=function(){return this._zone},c.millis=function(){return new Date().getTime()},c.instant=function(){return a5.ofEpochMilli(this.millis())},c.equals=function(a){return a instanceof b&&this._zone.equals(a._zone)},c.withZone=function(a){return a.equals(this._zone)?this:new b(a)},c.toString=function(){return"SystemClock["+this._zone.toString()+"]"},b}(a6),a8=function(a){function b(b,c){var d;return(d=a.call(this)||this)._instant=b,d._zoneId=c,d}p(b,a);var c=b.prototype;return c.instant=function(){return this._instant},c.millis=function(){return this._instant.toEpochMilli()},c.zone=function(){return this._zoneId},c.toString=function(){return"FixedClock[]"},c.equals=function(a){return a instanceof b&&this._instant.equals(a._instant)&&this._zoneId.equals(a._zoneId)},c.withZone=function(a){return a.equals(this._zoneId)?this:new b(this._instant,a)},b}(a6),a9=function(a){function b(b,c){var d;return(d=a.call(this)||this)._baseClock=b,d._offset=c,d}p(b,a);var c=b.prototype;return c.zone=function(){return this._baseClock.zone()},c.withZone=function(a){return a.equals(this._baseClock.zone())?this:new b(this._baseClock.withZone(a),this._offset)},c.millis=function(){return this._baseClock.millis()+this._offset.toMillis()},c.instant=function(){return this._baseClock.instant().plus(this._offset)},c.equals=function(a){return a instanceof b&&this._baseClock.equals(a._baseClock)&&this._offset.equals(a._offset)},c.toString=function(){return"OffsetClock["+this._baseClock+","+this._offset+"]"},b}(a6),ba=function(){function a(a,b,c){if(t(a,"transition"),t(b,"offsetBefore"),t(c,"offsetAfter"),b.equals(c))throw new m("Offsets must not be equal");if(0!==a.nano())throw new m("Nano-of-second must be zero");a instanceof a3?this._transition=a:this._transition=a3.ofEpochSecond(a,0,b),this._offsetBefore=b,this._offsetAfter=c}a.of=function(b,c,d){return new a(b,c,d)};var b=a.prototype;return b.instant=function(){return this._transition.toInstant(this._offsetBefore)},b.toEpochSecond=function(){return this._transition.toEpochSecond(this._offsetBefore)},b.dateTimeBefore=function(){return this._transition},b.dateTimeAfter=function(){return this._transition.plusSeconds(this.durationSeconds())},b.offsetBefore=function(){return this._offsetBefore},b.offsetAfter=function(){return this._offsetAfter},b.duration=function(){return B.ofSeconds(this.durationSeconds())},b.durationSeconds=function(){return this._offsetAfter.totalSeconds()-this._offsetBefore.totalSeconds()},b.isGap=function(){return this._offsetAfter.totalSeconds()>this._offsetBefore.totalSeconds()},b.isOverlap=function(){return this._offsetAfter.totalSeconds()<this._offsetBefore.totalSeconds()},b.isValidOffset=function(a){return!this.isGap()&&(this._offsetBefore.equals(a)||this._offsetAfter.equals(a))},b.validOffsets=function(){return this.isGap()?[]:[this._offsetBefore,this._offsetAfter]},b.compareTo=function(a){return this.instant().compareTo(a.instant())},b.equals=function(b){return b===this||b instanceof a&&this._transition.equals(b._transition)&&this._offsetBefore.equals(b.offsetBefore())&&this._offsetAfter.equals(b.offsetAfter())},b.hashCode=function(){return this._transition.hashCode()^this._offsetBefore.hashCode()^this._offsetAfter.hashCode()>>>16},b.toString=function(){return"Transition["+(this.isGap()?"Gap":"Overlap")+" at "+this._transition.toString()+this._offsetBefore.toString()+" to "+this._offsetAfter+"]"},a}(),bb=function(a){function b(){return a.apply(this,arguments)||this}p(b,a);var c=b.prototype;return c.isFixedOffset=function(){return!1},c.offsetOfInstant=function(a){var b=new Date(a.toEpochMilli()).getTimezoneOffset();return $.ofTotalMinutes(-1*b)},c.offsetOfEpochMilli=function(a){var b=new Date(a).getTimezoneOffset();return $.ofTotalMinutes(-1*b)},c.offsetOfLocalDateTime=function(a){var b=1e3*a.toEpochSecond($.UTC),c=new Date(b).getTimezoneOffset(),d=new Date(b+6e4*c).getTimezoneOffset();return $.ofTotalMinutes(-1*d)},c.validOffsets=function(a){return[this.offsetOfLocalDateTime(a)]},c.transition=function(){return null},c.standardOffset=function(a){return this.offsetOfInstant(a)},c.daylightSavings=function(){this._throwNotSupported()},c.isDaylightSavings=function(){this._throwNotSupported()},c.isValidOffset=function(a,b){return this.offsetOfLocalDateTime(a).equals(b)},c.nextTransition=function(){this._throwNotSupported()},c.previousTransition=function(){this._throwNotSupported()},c.transitions=function(){this._throwNotSupported()},c.transitionRules=function(){this._throwNotSupported()},c._throwNotSupported=function(){throw new i("not supported operation")},c.equals=function(a){return this===a||a instanceof b},c.toString=function(){return"SYSTEM"},b}(W),bc=function(a){function b(){var b;return(b=a.call(this)||this)._rules=new bb,b}p(b,a);var c=b.prototype;return c.rules=function(){return this._rules},c.equals=function(a){return this===a},c.id=function(){return"SYSTEM"},b}(V),bd=function(){function a(){}return a.systemDefault=function(){return be},a.getAvailableZoneIds=function(){return aF.getAvailableZoneIds()},a.of=function(a){if(t(a,"zoneId"),"Z"===a)return $.UTC;if(1===a.length)throw new i("Invalid zone: "+a);if(U.startsWith(a,"+")||U.startsWith(a,"-"))return $.of(a);if("UTC"===a||"GMT"===a||"GMT0"===a||"UT"===a)return new aG(a,$.UTC.rules());if(U.startsWith(a,"UTC+")||U.startsWith(a,"GMT+")||U.startsWith(a,"UTC-")||U.startsWith(a,"GMT-")){var b=$.of(a.substring(3));return 0===b.totalSeconds()?new aG(a.substring(0,3),b.rules()):new aG(a.substring(0,3)+b.id(),b.rules())}if(U.startsWith(a,"UT+")||U.startsWith(a,"UT-")){var c=$.of(a.substring(2));return 0===c.totalSeconds()?new aG("UT",c.rules()):new aG("UT"+c.id(),c.rules())}return"SYSTEM"===a?V.systemDefault():aG.ofId(a)},a.ofOffset=function(a,b){if(t(a,"prefix"),t(b,"offset"),0===a.length)return b;if("GMT"===a||"UTC"===a||"UT"===a)return 0===b.totalSeconds()?new aG(a,b.rules()):new aG(a+b.id(),b.rules());throw new m("Invalid prefix, must be GMT, UTC or UT: "+a)},a.from=function(a){t(a,"temporal");var b=a.query(H.zone());if(null==b)throw new i("Unable to obtain ZoneId from TemporalAccessor: "+a+", type "+(null!=a.constructor?a.constructor.name:""));return b},a}(),be=null,bf=!1;1;bf=!0,C.MIN_VALUE=-999999,C.MAX_VALUE=999999,B.ZERO=new B(0,0),D.NANOS=new D("Nanos",B.ofNanos(1)),D.MICROS=new D("Micros",B.ofNanos(1e3)),D.MILLIS=new D("Millis",B.ofNanos(1e6)),D.SECONDS=new D("Seconds",B.ofSeconds(1)),D.MINUTES=new D("Minutes",B.ofSeconds(60)),D.HOURS=new D("Hours",B.ofSeconds(3600)),D.HALF_DAYS=new D("HalfDays",B.ofSeconds(43200)),D.DAYS=new D("Days",B.ofSeconds(86400)),D.WEEKS=new D("Weeks",B.ofSeconds(604800)),D.MONTHS=new D("Months",B.ofSeconds(2629746)),D.YEARS=new D("Years",B.ofSeconds(0x1e18558)),D.DECADES=new D("Decades",B.ofSeconds(0x12cf3570)),D.CENTURIES=new D("Centuries",B.ofSeconds(0xbc181660)),D.MILLENNIA=new D("Millennia",B.ofSeconds(31556952e3)),D.ERAS=new D("Eras",B.ofSeconds(0x1e18558*(C.MAX_VALUE+1))),D.FOREVER=new D("Forever",B.ofSeconds(x.MAX_SAFE_INTEGER,0x3b9ac9ff)),G.NANO_OF_SECOND=new G("NanoOfSecond",D.NANOS,D.SECONDS,F.of(0,0x3b9ac9ff)),G.NANO_OF_DAY=new G("NanoOfDay",D.NANOS,D.DAYS,F.of(0,0x4e94914effff)),G.MICRO_OF_SECOND=new G("MicroOfSecond",D.MICROS,D.SECONDS,F.of(0,999999)),G.MICRO_OF_DAY=new G("MicroOfDay",D.MICROS,D.DAYS,F.of(0,0x141dd75fff)),G.MILLI_OF_SECOND=new G("MilliOfSecond",D.MILLIS,D.SECONDS,F.of(0,999)),G.MILLI_OF_DAY=new G("MilliOfDay",D.MILLIS,D.DAYS,F.of(0,0x5265bff)),G.SECOND_OF_MINUTE=new G("SecondOfMinute",D.SECONDS,D.MINUTES,F.of(0,59)),G.SECOND_OF_DAY=new G("SecondOfDay",D.SECONDS,D.DAYS,F.of(0,86399)),G.MINUTE_OF_HOUR=new G("MinuteOfHour",D.MINUTES,D.HOURS,F.of(0,59)),G.MINUTE_OF_DAY=new G("MinuteOfDay",D.MINUTES,D.DAYS,F.of(0,1439)),G.HOUR_OF_AMPM=new G("HourOfAmPm",D.HOURS,D.HALF_DAYS,F.of(0,11)),G.CLOCK_HOUR_OF_AMPM=new G("ClockHourOfAmPm",D.HOURS,D.HALF_DAYS,F.of(1,12)),G.HOUR_OF_DAY=new G("HourOfDay",D.HOURS,D.DAYS,F.of(0,23)),G.CLOCK_HOUR_OF_DAY=new G("ClockHourOfDay",D.HOURS,D.DAYS,F.of(1,24)),G.AMPM_OF_DAY=new G("AmPmOfDay",D.HALF_DAYS,D.DAYS,F.of(0,1)),G.DAY_OF_WEEK=new G("DayOfWeek",D.DAYS,D.WEEKS,F.of(1,7)),G.ALIGNED_DAY_OF_WEEK_IN_MONTH=new G("AlignedDayOfWeekInMonth",D.DAYS,D.WEEKS,F.of(1,7)),G.ALIGNED_DAY_OF_WEEK_IN_YEAR=new G("AlignedDayOfWeekInYear",D.DAYS,D.WEEKS,F.of(1,7)),G.DAY_OF_MONTH=new G("DayOfMonth",D.DAYS,D.MONTHS,F.of(1,28,31),"day"),G.DAY_OF_YEAR=new G("DayOfYear",D.DAYS,D.YEARS,F.of(1,365,366)),G.EPOCH_DAY=new G("EpochDay",D.DAYS,D.FOREVER,F.of(-0x15d021be,0x15ba2ddb)),G.ALIGNED_WEEK_OF_MONTH=new G("AlignedWeekOfMonth",D.WEEKS,D.MONTHS,F.of(1,4,5)),G.ALIGNED_WEEK_OF_YEAR=new G("AlignedWeekOfYear",D.WEEKS,D.YEARS,F.of(1,53)),G.MONTH_OF_YEAR=new G("MonthOfYear",D.MONTHS,D.YEARS,F.of(1,12),"month"),G.PROLEPTIC_MONTH=new G("ProlepticMonth",D.MONTHS,D.FOREVER,F.of(12*C.MIN_VALUE,12*C.MAX_VALUE+11)),G.YEAR_OF_ERA=new G("YearOfEra",D.YEARS,D.FOREVER,F.of(1,C.MAX_VALUE,C.MAX_VALUE+1)),G.YEAR=new G("Year",D.YEARS,D.FOREVER,F.of(C.MIN_VALUE,C.MAX_VALUE),"year"),G.ERA=new G("Era",D.ERAS,D.FOREVER,F.of(0,1)),G.INSTANT_SECONDS=new G("InstantSeconds",D.SECONDS,D.FOREVER,F.of(-0x1fffffffffffff,0x1fffffffffffff)),G.OFFSET_SECONDS=new G("OffsetSeconds",D.SECONDS,D.FOREVER,F.of(-64800,64800)),a4.HOURS=[];for(var bg=0;bg<24;bg++)a4.of(bg,0,0,0);a4.MIN=a4.HOURS[0],a4.MAX=new a4(23,59,59,0x3b9ac9ff),a4.MIDNIGHT=a4.HOURS[0],a4.NOON=a4.HOURS[12],a4.FROM=K("LocalTime.FROM",function(a){return a4.from(a)}),al=new ag,am=new ah,an=new ai,ao=new aj,ap=new ak("WeekBasedYears",B.ofSeconds(0x1e18558)),aq=new ak("QuarterYears",B.ofSeconds(7889238)),ad.DAY_OF_QUARTER=al,ad.QUARTER_OF_YEAR=am,ad.WEEK_OF_WEEK_BASED_YEAR=an,ad.WEEK_BASED_YEAR=ao,ad.WEEK_BASED_YEARS=ap,ad.QUARTER_YEARS=aq,a1.prototype.isoWeekOfWeekyear=function(){return this.get(ad.WEEK_OF_WEEK_BASED_YEAR)},a1.prototype.isoWeekyear=function(){return this.get(ad.WEEK_BASED_YEAR)},H.ZONE_ID=K("ZONE_ID",function(a){return a.query(H.ZONE_ID)}),H.CHRONO=K("CHRONO",function(a){return a.query(H.CHRONO)}),H.PRECISION=K("PRECISION",function(a){return a.query(H.PRECISION)}),H.OFFSET=K("OFFSET",function(a){return a.isSupported(G.OFFSET_SECONDS)?$.ofTotalSeconds(a.get(G.OFFSET_SECONDS)):null}),H.ZONE=K("ZONE",function(a){var b=a.query(H.ZONE_ID);return null!=b?b:a.query(H.OFFSET)}),H.LOCAL_DATE=K("LOCAL_DATE",function(a){return a.isSupported(G.EPOCH_DAY)?a1.ofEpochDay(a.getLong(G.EPOCH_DAY)):null}),H.LOCAL_TIME=K("LOCAL_TIME",function(a){return a.isSupported(G.NANO_OF_DAY)?a4.ofNanoOfDay(a.getLong(G.NANO_OF_DAY)):null}),L.MONDAY=new L(0,"MONDAY"),L.TUESDAY=new L(1,"TUESDAY"),L.WEDNESDAY=new L(2,"WEDNESDAY"),L.THURSDAY=new L(3,"THURSDAY"),L.FRIDAY=new L(4,"FRIDAY"),L.SATURDAY=new L(5,"SATURDAY"),L.SUNDAY=new L(6,"SUNDAY"),L.FROM=K("DayOfWeek.FROM",function(a){return L.from(a)}),d=[L.MONDAY,L.TUESDAY,L.WEDNESDAY,L.THURSDAY,L.FRIDAY,L.SATURDAY,L.SUNDAY],a5.MIN_SECONDS=-0x1cc1e65e8200,a5.MAX_SECONDS=0x1ca4f5580eff,a5.EPOCH=new a5(0,0),a5.MIN=a5.ofEpochSecond(a5.MIN_SECONDS,0),a5.MAX=a5.ofEpochSecond(a5.MAX_SECONDS,0x3b9ac9ff),a5.FROM=K("Instant.FROM",function(a){return a5.from(a)}),a1.MIN=a1.of(C.MIN_VALUE,1,1),a1.MAX=a1.of(C.MAX_VALUE,12,31),a1.EPOCH_0=a1.ofEpochDay(0),a1.FROM=K("LocalDate.FROM",function(a){return a1.from(a)}),a3.MIN=a3.of(a1.MIN,a4.MIN),a3.MAX=a3.of(a1.MAX,a4.MAX),a3.FROM=K("LocalDateTime.FROM",function(a){return a3.from(a)}),aS.MIN_VALUE=C.MIN_VALUE,aS.MAX_VALUE=C.MAX_VALUE,h=new aL().appendValue(G.YEAR,4,10,as.EXCEEDS_PAD).toFormatter(),aS.FROM=K("Year.FROM",function(a){return aS.from(a)}),M.JANUARY=new M(1,"JANUARY"),M.FEBRUARY=new M(2,"FEBRUARY"),M.MARCH=new M(3,"MARCH"),M.APRIL=new M(4,"APRIL"),M.MAY=new M(5,"MAY"),M.JUNE=new M(6,"JUNE"),M.JULY=new M(7,"JULY"),M.AUGUST=new M(8,"AUGUST"),M.SEPTEMBER=new M(9,"SEPTEMBER"),M.OCTOBER=new M(10,"OCTOBER"),M.NOVEMBER=new M(11,"NOVEMBER"),M.DECEMBER=new M(12,"DECEMBER"),e=[M.JANUARY,M.FEBRUARY,M.MARCH,M.APRIL,M.MAY,M.JUNE,M.JULY,M.AUGUST,M.SEPTEMBER,M.OCTOBER,M.NOVEMBER,M.DECEMBER],g=new aL().appendValue(G.YEAR,4,10,as.EXCEEDS_PAD).appendLiteral("-").appendValue(G.MONTH_OF_YEAR,2).toFormatter(),aR.FROM=K("YearMonth.FROM",function(a){return aR.from(a)}),f=new aL().appendLiteral("--").appendValue(G.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(G.DAY_OF_MONTH,2).toFormatter(),aQ.FROM=K("MonthDay.FROM",function(a){return aQ.from(a)}),O.ofDays(0),$.MAX_SECONDS=18*a4.SECONDS_PER_HOUR,$.UTC=$.ofTotalSeconds(0),$.MIN=$.ofTotalSeconds(-$.MAX_SECONDS),$.MAX=$.ofTotalSeconds($.MAX_SECONDS),a_.FROM=K("ZonedDateTime.FROM",function(a){return a_.from(a)}),be=new bc,V.systemDefault=bd.systemDefault,V.getAvailableZoneIds=bd.getAvailableZoneIds,V.of=bd.of,V.ofOffset=bd.ofOffset,V.from=bd.from,$.from=bd.from,V.SYSTEM=be,V.UTC=$.ofTotalSeconds(0),aY.INSTANCE=new aY("IsoChronology"),aP.ISO_LOCAL_DATE=new aL().appendValue(G.YEAR,4,10,as.EXCEEDS_PAD).appendLiteral("-").appendValue(G.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(G.DAY_OF_MONTH,2).toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_LOCAL_TIME=new aL().appendValue(G.HOUR_OF_DAY,2).appendLiteral(":").appendValue(G.MINUTE_OF_HOUR,2).optionalStart().appendLiteral(":").appendValue(G.SECOND_OF_MINUTE,2).optionalStart().appendFraction(G.NANO_OF_SECOND,0,9,!0).toFormatter(R.STRICT),aP.ISO_LOCAL_DATE_TIME=new aL().parseCaseInsensitive().append(aP.ISO_LOCAL_DATE).appendLiteral("T").append(aP.ISO_LOCAL_TIME).toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_INSTANT=new aL().parseCaseInsensitive().appendInstant().toFormatter(R.STRICT),aP.ISO_OFFSET_DATE_TIME=new aL().parseCaseInsensitive().append(aP.ISO_LOCAL_DATE_TIME).appendOffsetId().toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_ZONED_DATE_TIME=new aL().append(aP.ISO_OFFSET_DATE_TIME).optionalStart().appendLiteral("[").parseCaseSensitive().appendZoneId().appendLiteral("]").toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.BASIC_ISO_DATE=new aL().appendValue(G.YEAR,4,10,as.EXCEEDS_PAD).appendValue(G.MONTH_OF_YEAR,2).appendValue(G.DAY_OF_MONTH,2).toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_OFFSET_DATE=new aL().parseCaseInsensitive().append(aP.ISO_LOCAL_DATE).appendOffsetId().toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_OFFSET_TIME=new aL().parseCaseInsensitive().append(aP.ISO_LOCAL_TIME).appendOffsetId().toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_ORDINAL_DATE=new aL().appendValue(G.YEAR,4,10,as.EXCEEDS_PAD).appendLiteral("-").appendValue(G.DAY_OF_YEAR).toFormatter(R.STRICT),aP.ISO_WEEK_DATE=new aL().appendValue(G.YEAR,4,10,as.EXCEEDS_PAD).appendLiteral("-W").appendValue(G.ALIGNED_WEEK_OF_YEAR).appendLiteral("-").appendValue(G.DAY_OF_WEEK).toFormatter(R.STRICT),aP.ISO_DATE=new aL().parseCaseInsensitive().append(aP.ISO_LOCAL_DATE).optionalStart().appendOffsetId().optionalEnd().toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.ISO_TIME=new aL().parseCaseInsensitive().append(aP.ISO_LOCAL_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(R.STRICT),aP.ISO_DATE_TIME=new aL().append(aP.ISO_LOCAL_DATE_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(R.STRICT).withChronology(aY.INSTANCE),aP.PARSED_EXCESS_DAYS=K("PARSED_EXCESS_DAYS",function(a){return a instanceof _?a.excessDays:O.ZERO}),aP.PARSED_LEAP_SECOND=K("PARSED_LEAP_SECOND",function(a){return a instanceof _&&a.leapSecond}),az.BASE_DATE=a1.of(2e3,1,1),aL.CompositePrinterParser=av,aL.PadPrinterParserDecorator=aC,aL.SettingsParser=aD,aL.CharLiteralPrinterParser=aE,aL.StringLiteralPrinterParser=aE,aL.CharLiteralPrinterParser=au,aL.NumberPrinterParser=ay,aL.ReducedPrinterParser=az,aL.FractionPrinterParser=aw,aL.OffsetIdPrinterParser=aB,aL.ZoneIdPrinterParser=aH,a0.MIN=a3.MIN.atOffset($.MAX),a0.MAX=a3.MAX.atOffset($.MIN),a0.FROM=K("OffsetDateTime.FROM",function(a){return a0.from(a)}),aZ.MIN=aZ.ofNumbers(0,0,0,0,$.MAX),aZ.MAX=aZ.ofNumbers(23,59,59,0x3b9ac9ff,$.MIN),aZ.FROM=K("OffsetTime.FROM",function(a){return aZ.from(a)});var bh=function(){function a(a,b){var c;if(a instanceof a5){this.instant=a;return}if(a instanceof a1)b=null==b?V.systemDefault():b,c=a.atStartOfDay(b);else if(a instanceof a3)b=null==b?V.systemDefault():b,c=a.atZone(b);else if(a instanceof a_)c=null==b?a:a.withZoneSameInstant(b);else throw new m("unsupported instance for convert operation:"+a);this.instant=c.toInstant()}var b=a.prototype;return b.toDate=function(){return new Date(this.instant.toEpochMilli())},b.toEpochMilli=function(){return this.instant.toEpochMilli()},a}();function bi(a,b){return new bh(a,b)}function bj(a,b){if(void 0===b&&(b=V.systemDefault()),t(a,"date"),t(b,"zone"),a instanceof Date)return a5.ofEpochMilli(a.getTime()).atZone(b);if("function"==typeof a.toDate&&a.toDate()instanceof Date)return a5.ofEpochMilli(a.toDate().getTime()).atZone(b);throw new m("date must be a javascript Date or a moment instance")}var bk={assert:w,DateTimeBuilder:_,DateTimeParseContext:aa,DateTimePrintContext:ac,MathUtil:x,StringUtil:U,StringBuilder:aO},bl={_:bk,convert:bi,nativeJs:bj,ArithmeticException:l,DateTimeException:i,DateTimeParseException:j,IllegalArgumentException:m,IllegalStateException:n,UnsupportedTemporalTypeException:k,NullPointerException:o,Clock:a6,DayOfWeek:L,Duration:B,Instant:a5,LocalDate:a1,LocalTime:a4,LocalDateTime:a3,OffsetTime:aZ,OffsetDateTime:a0,Month:M,MonthDay:aQ,ParsePosition:P,Period:O,Year:aS,YearConstants:C,YearMonth:aR,ZonedDateTime:a_,ZoneOffset:$,ZoneId:V,ZoneRegion:aG,ZoneOffsetTransition:ba,ZoneRules:W,ZoneRulesProvider:aF,ChronoLocalDate:T,ChronoLocalDateTime:a2,ChronoZonedDateTime:a$,IsoChronology:aY,ChronoField:G,ChronoUnit:D,IsoFields:ad,Temporal:S,TemporalAccessor:I,TemporalAdjuster:aT,TemporalAdjusters:aU,TemporalAmount:z,TemporalField:E,TemporalQueries:H,TemporalQuery:J,TemporalUnit:A,ValueRange:F,DateTimeFormatter:aP,DateTimeFormatterBuilder:aL,DecimalStyle:ar,ResolverStyle:R,SignStyle:as,TextStyle:at},bm=(c=[],function(a){return~c.indexOf(a)||(a(bl),c.push(a)),bl});bl.use=bm,a.s(["ArithmeticException",()=>l,"ChronoField",()=>G,"ChronoLocalDate",()=>T,"ChronoLocalDateTime",()=>a2,"ChronoUnit",()=>D,"ChronoZonedDateTime",()=>a$,"Clock",()=>a6,"DateTimeException",()=>i,"DateTimeFormatter",()=>aP,"DateTimeFormatterBuilder",()=>aL,"DateTimeParseException",()=>j,"DayOfWeek",()=>L,"DecimalStyle",()=>ar,"Duration",()=>B,"IllegalArgumentException",()=>m,"IllegalStateException",()=>n,"Instant",()=>a5,"IsoChronology",()=>aY,"IsoFields",()=>ad,"LocalDate",()=>a1,"LocalDateTime",()=>a3,"LocalTime",()=>a4,"Month",()=>M,"MonthDay",()=>aQ,"NullPointerException",()=>o,"OffsetDateTime",()=>a0,"OffsetTime",()=>aZ,"ParsePosition",()=>P,"Period",()=>O,"ResolverStyle",()=>R,"SignStyle",()=>as,"Temporal",()=>S,"TemporalAccessor",()=>I,"TemporalAdjuster",()=>aT,"TemporalAdjusters",()=>aU,"TemporalAmount",()=>z,"TemporalField",()=>E,"TemporalQueries",()=>H,"TemporalQuery",()=>J,"TemporalUnit",()=>A,"TextStyle",()=>at,"UnsupportedTemporalTypeException",()=>k,"ValueRange",()=>F,"Year",()=>aS,"YearConstants",()=>C,"YearMonth",()=>aR,"ZoneId",()=>V,"ZoneOffset",()=>$,"ZoneOffsetTransition",()=>ba,"ZoneRegion",()=>aG,"ZoneRules",()=>W,"ZoneRulesProvider",()=>aF,"ZonedDateTime",()=>a_,"_",()=>bk,"convert",()=>bi,"nativeJs",()=>bj,"use",()=>bm])},64670,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(39666))&&d.__esModule?d:{default:d},f=a.r(2465);let g=f.LocalDate.ofYearDay(1900,1),h=Buffer.from([0]),i=Buffer.from([8]),j={id:61,type:"DATETIME",name:"DateTime",declaration:function(){return"datetime"},generateTypeInfo:()=>Buffer.from([e.default.id,8]),generateParameterLength:(a,b)=>null==a.value?h:i,generateParameterData:function*(a,b){let c,d,e;if(null==a.value)return;let h=a.value;c=b.useUTC?f.LocalDate.of(h.getUTCFullYear(),h.getUTCMonth()+1,h.getUTCDate()):f.LocalDate.of(h.getFullYear(),h.getMonth()+1,h.getDate());let i=g.until(c,f.ChronoUnit.DAYS);if(b.useUTC){let a=60*h.getUTCHours()*60;a+=60*h.getUTCMinutes(),a+=h.getUTCSeconds(),d=1e3*a+h.getUTCMilliseconds()}else{let a=60*h.getHours()*60;a+=60*h.getMinutes(),a+=h.getSeconds(),d=1e3*a+h.getMilliseconds()}2592e4===(e=Math.round(e=d/(3+1/3)))&&(i+=1,e=0);let j=Buffer.alloc(8);j.writeInt32LE(i,0),j.writeUInt32LE(e,4),yield j},validate:function(a,b,c){let d;if(null==a)return null;if(a instanceof Date||(a=new Date(Date.parse(a))),(d=c&&c.useUTC?a.getUTCFullYear():a.getFullYear())<1753||d>9999)throw TypeError("Out of range.");if(isNaN(a))throw TypeError("Invalid date.");return a}};c.default=j,b.exports=j},87896,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(77894))&&d.__esModule?d:{default:d};let f=Buffer.from([0]),g={id:62,type:"FLT8",name:"Float",declaration:function(){return"float"},generateTypeInfo:()=>Buffer.from([e.default.id,8]),generateParameterLength:(a,b)=>null==a.value?f:Buffer.from([8]),*generateParameterData(a,b){if(null==a.value)return;let c=Buffer.alloc(8);c.writeDoubleLE(parseFloat(a.value),0),yield c},validate:function(a){if(null==a)return null;if(isNaN(a=parseFloat(a)))throw TypeError("Invalid number.");return a}};c.default=g,b.exports=g},83143,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:106,type:"DECIMALN",name:"DecimalN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},36674,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=f(a.r(83143)),e=f(a.r(35952));function f(a){return a&&a.__esModule?a:{default:a}}let g=Buffer.from([0]),h={id:55,type:"DECIMAL",name:"Decimal",declaration:function(a){return"decimal("+this.resolvePrecision(a)+", "+this.resolveScale(a)+")"},resolvePrecision:function(a){return null!=a.precision?a.precision:null===a.value?1:18},resolveScale:function(a){return null!=a.scale?a.scale:0},generateTypeInfo(a,b){let c;return c=a.precision<=9?5:a.precision<=19?9:a.precision<=28?13:17,Buffer.from([d.default.id,c,a.precision,a.scale])},generateParameterLength(a,b){if(null==a.value)return g;let c=a.precision;return c<=9?Buffer.from([5]):c<=19?Buffer.from([9]):c<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(a,b){if(null==a.value)return;let c=a.value<0?0:1,d=Math.round(Math.abs(a.value*Math.pow(10,a.scale))),f=a.precision;if(f<=9){let a=Buffer.alloc(5);a.writeUInt8(c,0),a.writeUInt32LE(d,1),yield a}else if(f<=19){let a=new e.default(9);a.writeUInt8(c),a.writeUInt64LE(d),yield a.data}else if(f<=28){let a=new e.default(13);a.writeUInt8(c),a.writeUInt64LE(d),a.writeUInt32LE(0),yield a.data}else{let a=new e.default(17);a.writeUInt8(c),a.writeUInt64LE(d),a.writeUInt32LE(0),a.writeUInt32LE(0),yield a.data}},validate:function(a){if(null==a)return null;if(isNaN(a=parseFloat(a)))throw TypeError("Invalid number.");return a}};c.default=h,b.exports=h},33158,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:108,type:"NUMERICN",name:"NumericN",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},98535,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=f(a.r(33158)),e=f(a.r(35952));function f(a){return a&&a.__esModule?a:{default:a}}let g=Buffer.from([0]),h={id:63,type:"NUMERIC",name:"Numeric",declaration:function(a){return"numeric("+this.resolvePrecision(a)+", "+this.resolveScale(a)+")"},resolvePrecision:function(a){return null!=a.precision?a.precision:null===a.value?1:18},resolveScale:function(a){return null!=a.scale?a.scale:0},generateTypeInfo(a){let b;return b=a.precision<=9?5:a.precision<=19?9:a.precision<=28?13:17,Buffer.from([d.default.id,b,a.precision,a.scale])},generateParameterLength(a,b){if(null==a.value)return g;let c=a.precision;return c<=9?Buffer.from([5]):c<=19?Buffer.from([9]):c<=28?Buffer.from([13]):Buffer.from([17])},*generateParameterData(a,b){if(null==a.value)return;let c=a.value<0?0:1,d=Math.round(Math.abs(a.value*Math.pow(10,a.scale)));if(a.precision<=9){let a=Buffer.alloc(5);a.writeUInt8(c,0),a.writeUInt32LE(d,1),yield a}else if(a.precision<=19){let a=new e.default(10);a.writeUInt8(c),a.writeUInt64LE(d),yield a.data}else if(a.precision<=28){let a=new e.default(14);a.writeUInt8(c),a.writeUInt64LE(d),a.writeUInt32LE(0),yield a.data}else{let a=new e.default(18);a.writeUInt8(c),a.writeUInt64LE(d),a.writeUInt32LE(0),a.writeUInt32LE(0),yield a.data}},validate:function(a){if(null==a)return null;if(isNaN(a=parseFloat(a)))throw TypeError("Invalid number.");return a}};c.default=h,b.exports=h},26256,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(88753))&&d.__esModule?d:{default:d};let f=Buffer.from([4]),g=Buffer.from([0]),h={id:122,type:"MONEY4",name:"SmallMoney",declaration:function(){return"smallmoney"},generateTypeInfo:function(){return Buffer.from([e.default.id,4])},generateParameterLength:(a,b)=>null==a.value?g:f,*generateParameterData(a,b){if(null==a.value)return;let c=Buffer.alloc(4);c.writeInt32LE(1e4*a.value,0),yield c},validate:function(a){if(null==a)return null;if(isNaN(a=parseFloat(a)))throw TypeError("Invalid number.");if(a<-214748.3648||a>214748.3647)throw TypeError("Value must be between -214748.3648 and 214748.3647.");return a}};c.default=h,b.exports=h},5875,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=f(a.r(61468)),e=f(a.r(35952));function f(a){return a&&a.__esModule?a:{default:a}}let g=Buffer.from([8]),h=Buffer.from([0]),i=-0x8000000000000000n,j={id:127,type:"INT8",name:"BigInt",declaration:function(){return"bigint"},generateTypeInfo:()=>Buffer.from([d.default.id,8]),generateParameterLength:(a,b)=>null==a.value?h:g,*generateParameterData(a,b){if(null==a.value)return;let c=new e.default(8);c.writeBigInt64LE("bigint"==typeof a.value?a.value:globalThis.BigInt(a.value)),yield c.data},validate:function(a){if(null==a)return null;if("bigint"!=typeof a&&(a=globalThis.BigInt(a)),a<i||a>0x7fffffffffffffffn)throw TypeError(`Value must be between ${i} and ${0x7fffffffffffffffn}, inclusive.`);return a}};c.default=j,b.exports=j},53979,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([255,255,255,255]),e={id:34,type:"IMAGE",name:"Image",hasTableName:!0,declaration:function(){return"image"},resolveLength:function(a){return null!=a.value?a.value.length:-1},generateTypeInfo(a){let b=Buffer.alloc(5);return b.writeUInt8(this.id,0),b.writeInt32LE(a.length,1),b},generateParameterLength(a,b){if(null==a.value)return d;let c=Buffer.alloc(4);return c.writeInt32LE(a.value.length,0),c},*generateParameterData(a,b){null!=a.value&&(yield a.value)},validate:function(a){if(null==a)return null;if(!Buffer.isBuffer(a))throw TypeError("Invalid buffer.");return a}};c.default=e,b.exports=e},79587,(a,b,c)=>{"use strict";var d,e=a.r(874),f=e.Buffer,g={};for(d in e)e.hasOwnProperty(d)&&"SlowBuffer"!==d&&"Buffer"!==d&&(g[d]=e[d]);var h=g.Buffer={};for(d in f)f.hasOwnProperty(d)&&"allocUnsafe"!==d&&"allocUnsafeSlow"!==d&&(h[d]=f[d]);if(g.Buffer.prototype=f.prototype,h.from&&h.from!==Uint8Array.from||(h.from=function(a,b,c){if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type '+typeof a);if(a&&void 0===a.length)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);return f(a,b,c)}),h.alloc||(h.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError('The "size" argument must be of type number. Received type '+typeof a);if(a<0||a>=2*0x40000000)throw RangeError('The value "'+a+'" is invalid for option "size"');var d=f(a);return b&&0!==b.length?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d}),!g.kStringMaxLength)try{g.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(a){}!g.constants&&(g.constants={MAX_LENGTH:g.kMaxLength},g.kStringMaxLength&&(g.constants.MAX_STRING_LENGTH=g.kStringMaxLength)),b.exports=g},41736,(a,b,c)=>{"use strict";function d(a,b){this.encoder=a,this.addBOM=!0}function e(a,b){this.decoder=a,this.pass=!1,this.options=b||{}}c.PrependBOM=d,d.prototype.write=function(a){return this.addBOM&&(a="\uFEFF"+a,this.addBOM=!1),this.encoder.write(a)},d.prototype.end=function(){return this.encoder.end()},c.StripBOM=e,e.prototype.write=function(a){var b=this.decoder.write(a);return this.pass||!b||("\uFEFF"===b[0]&&(b=b.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),b},e.prototype.end=function(){return this.decoder.end()}},83058,(a,b,c)=>{"use strict";var d=void 0===Object.hasOwn?Function.call.bind(Object.prototype.hasOwnProperty):Object.hasOwn;b.exports=function(a,b){for(var c in b)d(b,c)&&(a[c]=b[c])}},1997,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;function e(a,b){this.enc=a.encodingName,this.bomAware=a.bomAware,"base64"===this.enc?this.encoder=i:"utf8"===this.enc?this.encoder=l:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=j,""!==d.from("eda0bdedb2a9","hex").toString()&&(this.decoder=k,this.defaultCharUnicode=b.defaultCharUnicode))}b.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:e},e.prototype.encoder=h,e.prototype.decoder=g;var f=a.r(99348).StringDecoder;function g(a,b){this.decoder=new f(b.enc)}function h(a,b){this.enc=b.enc}function i(a,b){this.prevStr=""}function j(a,b){}function k(a,b){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=b.defaultCharUnicode}function l(a,b){this.highSurrogate=""}g.prototype.write=function(a){return d.isBuffer(a)||(a=d.from(a)),this.decoder.write(a)},g.prototype.end=function(){return this.decoder.end()},h.prototype.write=function(a){return d.from(a,this.enc)},h.prototype.end=function(){},i.prototype.write=function(a){var b=(a=this.prevStr+a).length-a.length%4;return this.prevStr=a.slice(b),a=a.slice(0,b),d.from(a,"base64")},i.prototype.end=function(){return d.from(this.prevStr,"base64")},j.prototype.write=function(a){for(var b=d.alloc(3*a.length),c=0,e=0;e<a.length;e++){var f=a.charCodeAt(e);f<128?b[c++]=f:(f<2048?b[c++]=192+(f>>>6):(b[c++]=224+(f>>>12),b[c++]=128+(f>>>6&63)),b[c++]=128+(63&f))}return b.slice(0,c)},j.prototype.end=function(){},k.prototype.write=function(a){for(var b=this.acc,c=this.contBytes,d=this.accBytes,e="",f=0;f<a.length;f++){var g=a[f];(192&g)!=128?(c>0&&(e+=this.defaultCharUnicode,c=0),g<128?e+=String.fromCharCode(g):g<224?(b=31&g,c=1,d=1):g<240?(b=15&g,c=2,d=1):e+=this.defaultCharUnicode):c>0?(b=b<<6|63&g,c--,d++,0===c&&(2===d&&b<128&&b>0||3===d&&b<2048?e+=this.defaultCharUnicode:e+=String.fromCharCode(b))):e+=this.defaultCharUnicode}return this.acc=b,this.contBytes=c,this.accBytes=d,e},k.prototype.end=function(){var a=0;return this.contBytes>0&&(a+=this.defaultCharUnicode),a},l.prototype.write=function(a){if(this.highSurrogate&&(a=this.highSurrogate+a,this.highSurrogate=""),a.length>0){var b=a.charCodeAt(a.length-1);b>=55296&&b<56320&&(this.highSurrogate=a[a.length-1],a=a.slice(0,a.length-1))}return d.from(a,this.enc)},l.prototype.end=function(){if(this.highSurrogate){var a=this.highSurrogate;return this.highSurrogate="",d.from(a,this.enc)}}},76544,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;function e(a,b){this.iconv=b,this.bomAware=!0,this.isLE=a.isLE}function f(a,b){this.isLE=b.isLE,this.highSurrogate=0}function g(a,b){this.isLE=b.isLE,this.badChar=b.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}function h(a,b,c,d){if((c<0||c>1114111)&&(c=d),c>=65536){var e=55296|(c-=65536)>>10;a[b++]=255&e,a[b++]=e>>8;var c=56320|1023&c}return a[b++]=255&c,a[b++]=c>>8,b}function i(a,b){this.iconv=b}function j(a,b){void 0===(a=a||{}).addBOM&&(a.addBOM=!0),this.encoder=b.iconv.getEncoder(a.defaultEncoding||"utf-32le",a)}function k(a,b){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=a||{},this.iconv=b.iconv}function l(a,b){var c=[],d=0,e=0,f=0,g=0,h=0;c:for(var i=0;i<a.length;i++)for(var j=a[i],k=0;k<j.length;k++)if(c.push(j[k]),4===c.length){if(0===d){if(255===c[0]&&254===c[1]&&0===c[2]&&0===c[3])return"utf-32le";if(0===c[0]&&0===c[1]&&254===c[2]&&255===c[3])return"utf-32be"}if((0!==c[0]||c[1]>16)&&f++,(0!==c[3]||c[2]>16)&&e++,0===c[0]&&0===c[1]&&(0!==c[2]||0!==c[3])&&h++,(0!==c[0]||0!==c[1])&&0===c[2]&&0===c[3]&&g++,c.length=0,++d>=100)break c}return h-f>g-e?"utf-32be":h-f<g-e?"utf-32le":b||"utf-32le"}c._utf32=e,c.utf32le={type:"_utf32",isLE:!0},c.utf32be={type:"_utf32",isLE:!1},c.ucs4le="utf32le",c.ucs4be="utf32be",e.prototype.encoder=f,e.prototype.decoder=g,f.prototype.write=function(a){for(var b=d.from(a,"ucs2"),c=d.alloc(2*b.length),e=this.isLE?c.writeUInt32LE:c.writeUInt32BE,f=0,g=0;g<b.length;g+=2){var h=b.readUInt16LE(g),i=h>=55296&&h<56320,j=h>=56320&&h<57344;if(this.highSurrogate)if(i||!j)e.call(c,this.highSurrogate,f),f+=4;else{var k=(this.highSurrogate-55296<<10|h-56320)+65536;e.call(c,k,f),f+=4,this.highSurrogate=0;continue}i?this.highSurrogate=h:(e.call(c,h,f),f+=4,this.highSurrogate=0)}return f<c.length&&(c=c.slice(0,f)),c},f.prototype.end=function(){if(this.highSurrogate){var a=d.alloc(4);return this.isLE?a.writeUInt32LE(this.highSurrogate,0):a.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,a}},g.prototype.write=function(a){if(0===a.length)return"";var b=0,c=0,e=d.alloc(a.length+4),f=0,g=this.isLE,i=this.overflow,j=this.badChar;if(i.length>0){for(;b<a.length&&i.length<4;b++)i.push(a[b]);4===i.length&&(c=g?i[b]|i[b+1]<<8|i[b+2]<<16|i[b+3]<<24:i[b+3]|i[b+2]<<8|i[b+1]<<16|i[b]<<24,i.length=0,f=h(e,f,c,j))}for(;b<a.length-3;b+=4)f=h(e,f,c=g?a[b]|a[b+1]<<8|a[b+2]<<16|a[b+3]<<24:a[b+3]|a[b+2]<<8|a[b+1]<<16|a[b]<<24,j);for(;b<a.length;b++)i.push(a[b]);return e.slice(0,f).toString("ucs2")},g.prototype.end=function(){this.overflow.length=0},c.utf32=i,c.ucs4="utf32",i.prototype.encoder=j,i.prototype.decoder=k,j.prototype.write=function(a){return this.encoder.write(a)},j.prototype.end=function(){return this.encoder.end()},k.prototype.write=function(a){if(!this.decoder){if(this.initialBufs.push(a),this.initialBufsLen+=a.length,this.initialBufsLen<32)return"";var b=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(b,this.options);for(var c="",d=0;d<this.initialBufs.length;d++)c+=this.decoder.write(this.initialBufs[d]);return this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.write(a)},k.prototype.end=function(){if(!this.decoder){var a=l(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(a,this.options);for(var b="",c=0;c<this.initialBufs.length;c++)b+=this.decoder.write(this.initialBufs[c]);var d=this.decoder.end();return d&&(b+=d),this.initialBufs.length=this.initialBufsLen=0,b}return this.decoder.end()}},53947,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;function e(){}function f(){}function g(){this.overflowByte=-1}function h(a,b){this.iconv=b}function i(a,b){void 0===(a=a||{}).addBOM&&(a.addBOM=!0),this.encoder=b.iconv.getEncoder("utf-16le",a)}function j(a,b){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=a||{},this.iconv=b.iconv}function k(a,b){var c=[],d=0,e=0,f=0;c:for(var g=0;g<a.length;g++)for(var h=a[g],i=0;i<h.length;i++)if(c.push(h[i]),2===c.length){if(0===d){if(255===c[0]&&254===c[1])return"utf-16le";if(254===c[0]&&255===c[1])return"utf-16be"}if(0===c[0]&&0!==c[1]&&f++,0!==c[0]&&0===c[1]&&e++,c.length=0,++d>=100)break c}return f>e?"utf-16be":f<e?"utf-16le":b||"utf-16le"}c.utf16be=e,e.prototype.encoder=f,e.prototype.decoder=g,e.prototype.bomAware=!0,f.prototype.write=function(a){for(var b=d.from(a,"ucs2"),c=0;c<b.length;c+=2){var e=b[c];b[c]=b[c+1],b[c+1]=e}return b},f.prototype.end=function(){},g.prototype.write=function(a){if(0==a.length)return"";var b=d.alloc(a.length+1),c=0,e=0;for(-1!==this.overflowByte&&(b[0]=a[0],b[1]=this.overflowByte,c=1,e=2);c<a.length-1;c+=2,e+=2)b[e]=a[c+1],b[e+1]=a[c];return this.overflowByte=c==a.length-1?a[a.length-1]:-1,b.slice(0,e).toString("ucs2")},g.prototype.end=function(){this.overflowByte=-1},c.utf16=h,h.prototype.encoder=i,h.prototype.decoder=j,i.prototype.write=function(a){return this.encoder.write(a)},i.prototype.end=function(){return this.encoder.end()},j.prototype.write=function(a){if(!this.decoder){if(this.initialBufs.push(a),this.initialBufsLen+=a.length,this.initialBufsLen<16)return"";var b=k(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(b,this.options);for(var c="",d=0;d<this.initialBufs.length;d++)c+=this.decoder.write(this.initialBufs[d]);return this.initialBufs.length=this.initialBufsLen=0,c}return this.decoder.write(a)},j.prototype.end=function(){if(!this.decoder){var a=k(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(a,this.options);for(var b="",c=0;c<this.initialBufs.length;c++)b+=this.decoder.write(this.initialBufs[c]);var d=this.decoder.end();return d&&(b+=d),this.initialBufs.length=this.initialBufsLen=0,b}return this.decoder.end()}},16452,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;function e(a,b){this.iconv=b}c.utf7=e,c.unicode11utf7="utf7",e.prototype.encoder=g,e.prototype.decoder=h,e.prototype.bomAware=!0;var f=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function g(a,b){this.iconv=b.iconv}function h(a,b){this.iconv=b.iconv,this.inBase64=!1,this.base64Accum=""}g.prototype.write=function(a){return d.from(a.replace(f,(function(a){return"+"+("+"===a?"":this.iconv.encode(a,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}).bind(this)))},g.prototype.end=function(){};for(var i=/[A-Za-z0-9\/+]/,j=[],k=0;k<256;k++)j[k]=i.test(String.fromCharCode(k));function l(a,b){this.iconv=b}function m(a,b){this.iconv=b.iconv,this.inBase64=!1,this.base64Accum=d.alloc(6),this.base64AccumIdx=0}function n(a,b){this.iconv=b.iconv,this.inBase64=!1,this.base64Accum=""}h.prototype.write=function(a){for(var b="",c=0,e=this.inBase64,f=this.base64Accum,g=0;g<a.length;g++)if(e){if(!j[a[g]]){if(g==c&&45==a[g])b+="+";else{var h=f+this.iconv.decode(a.slice(c,g),"ascii");b+=this.iconv.decode(d.from(h,"base64"),"utf16-be")}45!=a[g]&&g--,c=g+1,e=!1,f=""}}else 43==a[g]&&(b+=this.iconv.decode(a.slice(c,g),"ascii"),c=g+1,e=!0);if(e){var h=f+this.iconv.decode(a.slice(c),"ascii"),i=h.length-h.length%8;f=h.slice(i),h=h.slice(0,i),b+=this.iconv.decode(d.from(h,"base64"),"utf16-be")}else b+=this.iconv.decode(a.slice(c),"ascii");return this.inBase64=e,this.base64Accum=f,b},h.prototype.end=function(){var a="";return this.inBase64&&this.base64Accum.length>0&&(a=this.iconv.decode(d.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",a},c.utf7imap=l,l.prototype.encoder=m,l.prototype.decoder=n,l.prototype.bomAware=!0,m.prototype.write=function(a){for(var b=this.inBase64,c=this.base64Accum,e=this.base64AccumIdx,f=d.alloc(5*a.length+10),g=0,h=0;h<a.length;h++){var i=a.charCodeAt(h);i>=32&&i<=126?(b&&(e>0&&(g+=f.write(c.slice(0,e).toString("base64").replace(/\//g,",").replace(/=+$/,""),g),e=0),f[g++]=45,b=!1),b||(f[g++]=i,38===i&&(f[g++]=45))):(b||(f[g++]=38,b=!0),b&&(c[e++]=i>>8,c[e++]=255&i,e==c.length&&(g+=f.write(c.toString("base64").replace(/\//g,","),g),e=0)))}return this.inBase64=b,this.base64AccumIdx=e,f.slice(0,g)},m.prototype.end=function(){var a=d.alloc(10),b=0;return this.inBase64&&(this.base64AccumIdx>0&&(b+=a.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),b),this.base64AccumIdx=0),a[b++]=45,this.inBase64=!1),a.slice(0,b)};var o=j.slice();o[44]=!0,n.prototype.write=function(a){for(var b="",c=0,e=this.inBase64,f=this.base64Accum,g=0;g<a.length;g++)if(e){if(!o[a[g]]){if(g==c&&45==a[g])b+="&";else{var h=f+this.iconv.decode(a.slice(c,g),"ascii").replace(/,/g,"/");b+=this.iconv.decode(d.from(h,"base64"),"utf16-be")}45!=a[g]&&g--,c=g+1,e=!1,f=""}}else 38==a[g]&&(b+=this.iconv.decode(a.slice(c,g),"ascii"),c=g+1,e=!0);if(e){var h=f+this.iconv.decode(a.slice(c),"ascii").replace(/,/g,"/"),i=h.length-h.length%8;f=h.slice(i),h=h.slice(0,i),b+=this.iconv.decode(d.from(h,"base64"),"utf16-be")}else b+=this.iconv.decode(a.slice(c),"ascii");return this.inBase64=e,this.base64Accum=f,b},n.prototype.end=function(){var a="";return this.inBase64&&this.base64Accum.length>0&&(a=this.iconv.decode(d.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",a}},51601,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;function e(a,b){if(!a)throw Error("SBCS codec is called without the data.");if(!a.chars||128!==a.chars.length&&256!==a.chars.length)throw Error("Encoding '"+a.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===a.chars.length){for(var c="",e=0;e<128;e++)c+=String.fromCharCode(e);a.chars=c+a.chars}this.decodeBuf=d.from(a.chars,"ucs2");for(var f=d.alloc(65536,b.defaultCharSingleByte.charCodeAt(0)),e=0;e<a.chars.length;e++)f[a.chars.charCodeAt(e)]=e;this.encodeBuf=f}function f(a,b){this.encodeBuf=b.encodeBuf}function g(a,b){this.decodeBuf=b.decodeBuf}c._sbcs=e,e.prototype.encoder=f,e.prototype.decoder=g,f.prototype.write=function(a){for(var b=d.alloc(a.length),c=0;c<a.length;c++)b[c]=this.encodeBuf[a.charCodeAt(c)];return b},f.prototype.end=function(){},g.prototype.write=function(a){for(var b=this.decodeBuf,c=d.alloc(2*a.length),e=0,f=0,g=0;g<a.length;g++)e=2*a[g],c[f=2*g]=b[e],c[f+1]=b[e+1];return c.toString("ucs2")},g.prototype.end=function(){}},48500,(a,b,c)=>{"use strict";b.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},33107,(a,b,c)=>{"use strict";b.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\x01\x02\x03\x04\x05\x06\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\x03\x07\b	\n\v\f\r\x0e\x0f\x10\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\x01\x03\x04\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x15\x16\x17\x18\x1a\x1b\x1c\x1d\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\x01\x02\x03\x04\x05\x06\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\x01\x02\x03\x04\x05\x06\x07\b	\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},10843,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;c._dbcs=g;for(var e=Array(256),f=0;f<256;f++)e[f]=-1;function g(a,b){if(this.encodingName=a.encodingName,!a)throw Error("DBCS codec is called without the data.");if(!a.table)throw Error("Encoding '"+this.encodingName+"' has no data.");var c=a.table();this.decodeTables=[],this.decodeTables[0]=e.slice(0),this.decodeTableSeq=[];for(var d=0;d<c.length;d++)this._addDecodeChunk(c[d]);if("function"==typeof a.gb18030){this.gb18030=a.gb18030();var f=this.decodeTables.length;this.decodeTables.push(e.slice(0));var g=this.decodeTables.length;this.decodeTables.push(e.slice(0));for(var h=this.decodeTables[0],d=129;d<=254;d++)for(var i=this.decodeTables[-1e3-h[d]],j=48;j<=57;j++){if(-1===i[j])i[j]=-1e3-f;else if(i[j]>-1e3)throw Error("gb18030 decode tables conflict at byte 2");for(var k=this.decodeTables[-1e3-i[j]],l=129;l<=254;l++){if(-1===k[l])k[l]=-1e3-g;else if(k[l]===-1e3-g)continue;else if(k[l]>-1e3)throw Error("gb18030 decode tables conflict at byte 3");for(var m=this.decodeTables[-1e3-k[l]],n=48;n<=57;n++)-1===m[n]&&(m[n]=-2)}}}this.defaultCharUnicode=b.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var o={};if(a.encodeSkipVals)for(var d=0;d<a.encodeSkipVals.length;d++){var p=a.encodeSkipVals[d];if("number"==typeof p)o[p]=!0;else for(var j=p.from;j<=p.to;j++)o[j]=!0}if(this._fillEncodeTable(0,0,o),a.encodeAdd)for(var q in a.encodeAdd)Object.prototype.hasOwnProperty.call(a.encodeAdd,q)&&this._setEncodeChar(q.charCodeAt(0),a.encodeAdd[q]);this.defCharSB=this.encodeTable[0][b.defaultCharSingleByte.charCodeAt(0)],-1===this.defCharSB&&(this.defCharSB=this.encodeTable[0]["?"]),-1===this.defCharSB&&(this.defCharSB=63)}function h(a,b){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=b.encodeTable,this.encodeTableSeq=b.encodeTableSeq,this.defaultCharSingleByte=b.defCharSB,this.gb18030=b.gb18030}function i(a,b){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=b.decodeTables,this.decodeTableSeq=b.decodeTableSeq,this.defaultCharUnicode=b.defaultCharUnicode,this.gb18030=b.gb18030}function j(a,b){if(a[0]>b)return -1;for(var c=0,d=a.length;c<d-1;){var e=c+(d-c+1>>1);a[e]<=b?c=e:d=e}return c}g.prototype.encoder=h,g.prototype.decoder=i,g.prototype._getDecodeTrieNode=function(a){for(var b=[];a>0;a>>>=8)b.push(255&a);0==b.length&&b.push(0);for(var c=this.decodeTables[0],d=b.length-1;d>0;d--){var f=c[b[d]];if(-1==f)c[b[d]]=-1e3-this.decodeTables.length,this.decodeTables.push(c=e.slice(0));else if(f<=-1e3)c=this.decodeTables[-1e3-f];else throw Error("Overwrite byte in "+this.encodingName+", addr: "+a.toString(16))}return c},g.prototype._addDecodeChunk=function(a){var b=parseInt(a[0],16),c=this._getDecodeTrieNode(b);b&=255;for(var d=1;d<a.length;d++){var e=a[d];if("string"==typeof e)for(var f=0;f<e.length;){var g=e.charCodeAt(f++);if(g>=55296&&g<56320){var h=e.charCodeAt(f++);if(h>=56320&&h<57344)c[b++]=65536+(g-55296)*1024+(h-56320);else throw Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+a[0])}else if(g>4080&&g<=4095){for(var i=4095-g+2,j=[],k=0;k<i;k++)j.push(e.charCodeAt(f++));c[b++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(j)}else c[b++]=g}else if("number"==typeof e)for(var l=c[b-1]+1,f=0;f<e;f++)c[b++]=l++;else throw Error("Incorrect type '"+typeof e+"' given in "+this.encodingName+" at chunk "+a[0])}if(b>255)throw Error("Incorrect chunk in "+this.encodingName+" at addr "+a[0]+": too long"+b)},g.prototype._getEncodeBucket=function(a){var b=a>>8;return void 0===this.encodeTable[b]&&(this.encodeTable[b]=e.slice(0)),this.encodeTable[b]},g.prototype._setEncodeChar=function(a,b){var c=this._getEncodeBucket(a),d=255&a;c[d]<=-10?this.encodeTableSeq[-10-c[d]][-1]=b:-1==c[d]&&(c[d]=b)},g.prototype._setEncodeSequence=function(a,b){var c,d=a[0],e=this._getEncodeBucket(d),f=255&d;e[f]<=-10?c=this.encodeTableSeq[-10-e[f]]:(c={},-1!==e[f]&&(c[-1]=e[f]),e[f]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(c));for(var g=1;g<a.length-1;g++){var h=c[d];"object"==typeof h?c=h:(c=c[d]={},void 0!==h&&(c[-1]=h))}c[d=a[a.length-1]]=b},g.prototype._fillEncodeTable=function(a,b,c){for(var d=this.decodeTables[a],e=!1,f={},g=0;g<256;g++){var h=d[g],i=b+g;if(!c[i])if(h>=0)this._setEncodeChar(h,i),e=!0;else if(h<=-1e3){var j=-1e3-h;if(!f[j]){var k=i<<8>>>0;this._fillEncodeTable(j,k,c)?e=!0:f[j]=!0}}else h<=-10&&(this._setEncodeSequence(this.decodeTableSeq[-10-h],i),e=!0)}return e},h.prototype.write=function(a){for(var b=d.alloc(a.length*(this.gb18030?4:3)),c=this.leadSurrogate,e=this.seqObj,f=-1,g=0,h=0;;){if(-1===f){if(g==a.length)break;var i=a.charCodeAt(g++)}else{var i=f;f=-1}if(i>=55296&&i<57344)if(i<56320)if(-1===c){c=i;continue}else c=i,i=-1;else -1!==c?(i=65536+(c-55296)*1024+(i-56320),c=-1):i=-1;else -1!==c&&(f=i,i=-1,c=-1);var k=-1;if(void 0!==e&&-1!=i){var l=e[i];if("object"==typeof l){e=l;continue}"number"==typeof l?k=l:void 0==l&&void 0!==(l=e[-1])&&(k=l,f=i),e=void 0}else if(i>=0){var m=this.encodeTable[i>>8];if(void 0!==m&&(k=m[255&i]),k<=-10){e=this.encodeTableSeq[-10-k];continue}if(-1==k&&this.gb18030){var n=j(this.gb18030.uChars,i);if(-1!=n){var k=this.gb18030.gbChars[n]+(i-this.gb18030.uChars[n]);b[h++]=129+Math.floor(k/12600),k%=12600,b[h++]=48+Math.floor(k/1260),k%=1260,b[h++]=129+Math.floor(k/10),k%=10,b[h++]=48+k;continue}}}-1===k&&(k=this.defaultCharSingleByte),k<256?b[h++]=k:(k<65536?b[h++]=k>>8:k<0x1000000?(b[h++]=k>>16,b[h++]=k>>8&255):(b[h++]=k>>>24,b[h++]=k>>>16&255,b[h++]=k>>>8&255),b[h++]=255&k)}return this.seqObj=e,this.leadSurrogate=c,b.slice(0,h)},h.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var a=d.alloc(10),b=0;if(this.seqObj){var c=this.seqObj[-1];void 0!==c&&(c<256?a[b++]=c:(a[b++]=c>>8,a[b++]=255&c)),this.seqObj=void 0}return -1!==this.leadSurrogate&&(a[b++]=this.defaultCharSingleByte,this.leadSurrogate=-1),a.slice(0,b)}},h.prototype.findIdx=j,i.prototype.write=function(a){for(var b,c=d.alloc(2*a.length),e=this.nodeIdx,f=this.prevBytes,g=this.prevBytes.length,h=-this.prevBytes.length,i=0,k=0;i<a.length;i++){var l=i>=0?a[i]:f[i+g],b=this.decodeTables[e][l];if(b>=0);else if(-1===b)b=this.defaultCharUnicode.charCodeAt(0),i=h;else if(-2===b){if(i>=3)var m=(a[i-3]-129)*12600+(a[i-2]-48)*1260+(a[i-1]-129)*10+(l-48);else var m=(f[i-3+g]-129)*12600+((i-2>=0?a[i-2]:f[i-2+g])-48)*1260+((i-1>=0?a[i-1]:f[i-1+g])-129)*10+(l-48);var n=j(this.gb18030.gbChars,m);b=this.gb18030.uChars[n]+m-this.gb18030.gbChars[n]}else if(b<=-1e3){e=-1e3-b;continue}else if(b<=-10){for(var o=this.decodeTableSeq[-10-b],p=0;p<o.length-1;p++)b=o[p],c[k++]=255&b,c[k++]=b>>8;b=o[o.length-1]}else throw Error("iconv-lite internal error: invalid decoding table value "+b+" at "+e+"/"+l);if(b>=65536){var q=55296|(b-=65536)>>10;c[k++]=255&q,c[k++]=q>>8,b=56320|1023&b}c[k++]=255&b,c[k++]=b>>8,e=0,h=i+1}return this.nodeIdx=e,this.prevBytes=h>=0?Array.prototype.slice.call(a,h):f.slice(h+g).concat(Array.prototype.slice.call(a)),c.slice(0,k).toString("ucs2")},i.prototype.end=function(){for(var a="";this.prevBytes.length>0;){a+=this.defaultCharUnicode;var b=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,b.length>0&&(a+=this.write(b))}return this.prevBytes=[],this.nodeIdx=0,a}},12338,a=>{a.v(JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]'))},42029,a=>{a.v(JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]'))},47289,a=>{a.v(JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]'))},27822,a=>{a.v([["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]])},29500,a=>{a.v({uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]})},74076,a=>{a.v(JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]'))},57375,a=>{a.v(JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]'))},93189,a=>{a.v(JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]'))},69005,(a,b,c)=>{"use strict";b.exports={shiftjis:{type:"_dbcs",table:function(){return a.r(12338)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return a.r(42029)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return a.r(47289)}},gbk:{type:"_dbcs",table:function(){return a.r(47289).concat(a.r(27822))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return a.r(47289).concat(a.r(27822))},gb18030:function(){return a.r(29500)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return a.r(74076)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return a.r(57375)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return a.r(57375).concat(a.r(93189))},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},71944,(a,b,c)=>{"use strict";for(var d=a.r(83058),e=[a.r(1997),a.r(76544),a.r(53947),a.r(16452),a.r(51601),a.r(48500),a.r(33107),a.r(10843),a.r(69005)],f=0;f<e.length;f++){var b=e[f];d(c,b)}},95444,(a,b,c)=>{"use strict";var d=a.r(79587).Buffer;b.exports=function(a){var b=a.Transform;function c(a,c){this.conv=a,(c=c||{}).decodeStrings=!1,b.call(this,c)}function e(a,c){this.conv=a,(c=c||{}).encoding=this.encoding="utf8",b.call(this,c)}return c.prototype=Object.create(b.prototype,{constructor:{value:c}}),c.prototype._transform=function(a,b,c){if("string"!=typeof a)return c(Error("Iconv encoding stream needs strings as its input."));try{var d=this.conv.write(a);d&&d.length&&this.push(d),c()}catch(a){c(a)}},c.prototype._flush=function(a){try{var b=this.conv.end();b&&b.length&&this.push(b),a()}catch(b){a(b)}},c.prototype.collect=function(a){var b=[];return this.on("error",a),this.on("data",function(a){b.push(a)}),this.on("end",function(){a(null,d.concat(b))}),this},e.prototype=Object.create(b.prototype,{constructor:{value:e}}),e.prototype._transform=function(a,b,c){if(!d.isBuffer(a)&&!(a instanceof Uint8Array))return c(Error("Iconv decoding stream needs buffers as its input."));try{var e=this.conv.write(a);e&&e.length&&this.push(e,this.encoding),c()}catch(a){c(a)}},e.prototype._flush=function(a){try{var b=this.conv.end();b&&b.length&&this.push(b,this.encoding),a()}catch(b){a(b)}},e.prototype.collect=function(a){var b="";return this.on("error",a),this.on("data",function(a){b+=a}),this.on("end",function(){a(null,b)}),this},{IconvLiteEncoderStream:c,IconvLiteDecoderStream:e}}},94584,(a,b,c)=>{"use strict";var d,e=a.r(79587).Buffer,f=a.r(41736),g=a.r(83058),h=b.exports;h.encodings=null,h.defaultCharUnicode="",h.defaultCharSingleByte="?",h.encode=function(a,b,c){a=""+(a||"");var d=h.getEncoder(b,c),f=d.write(a),g=d.end();return g&&g.length>0?e.concat([f,g]):f},h.decode=function(a,b,c){"string"==typeof a&&(h.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),h.skipDecodeWarning=!0),a=e.from(""+(a||""),"binary"));var d=h.getDecoder(b,c),f=d.write(a),g=d.end();return g?f+g:f},h.encodingExists=function(a){try{return h.getCodec(a),!0}catch(a){return!1}},h.toEncoding=h.encode,h.fromEncoding=h.decode,h._codecDataCache={__proto__:null},h.getCodec=function(b){if(!h.encodings){var c=a.r(71944);h.encodings={__proto__:null},g(h.encodings,c)}for(var d=h._canonicalizeEncoding(b),e={};;){var f=h._codecDataCache[d];if(f)return f;var i=h.encodings[d];switch(typeof i){case"string":d=i;break;case"object":for(var j in i)e[j]=i[j];e.encodingName||(e.encodingName=d),d=i.type;break;case"function":return e.encodingName||(e.encodingName=d),f=new i(e,h),h._codecDataCache[e.encodingName]=f,f;default:throw Error("Encoding not recognized: '"+b+"' (searched as: '"+d+"')")}}},h._canonicalizeEncoding=function(a){return(""+a).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},h.getEncoder=function(a,b){var c=h.getCodec(a),d=new c.encoder(b,c);return c.bomAware&&b&&b.addBOM&&(d=new f.PrependBOM(d,b)),d},h.getDecoder=function(a,b){var c=h.getCodec(a),d=new c.decoder(b,c);return c.bomAware&&!(b&&!1===b.stripBOM)&&(d=new f.StripBOM(d,b)),d},h.enableStreamingAPI=function(b){if(!h.supportsStreams){var c=a.r(95444)(b);h.IconvLiteEncoderStream=c.IconvLiteEncoderStream,h.IconvLiteDecoderStream=c.IconvLiteDecoderStream,h.encodeStream=function(a,b){return new h.IconvLiteEncoderStream(h.getEncoder(a,b),b)},h.decodeStream=function(a,b){return new h.IconvLiteDecoderStream(h.getDecoder(a,b),b)},h.supportsStreams=!0}};try{d=a.r(88947)}catch(a){}d&&d.Transform?h.enableStreamingAPI(d):h.encodeStream=h.decodeStream=function(){throw Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}},45965,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(94584))&&d.__esModule?d:{default:d};let f=Buffer.from([255,255,255,255]),g={id:35,type:"TEXT",name:"Text",hasTableName:!0,declaration:function(){return"text"},resolveLength:function(a){let b=a.value;return null!=b?b.length:-1},generateTypeInfo(a,b){let c=Buffer.alloc(10);return c.writeUInt8(this.id,0),c.writeInt32LE(a.length,1),a.collation&&a.collation.toBuffer().copy(c,5,0,5),c},generateParameterLength(a,b){let c=a.value;if(null==c)return f;let d=Buffer.alloc(4);return d.writeInt32LE(c.length,0),d},generateParameterData:function*(a,b){let c=a.value;null!=c&&(yield c)},validate:function(a,b){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");if(!b)throw Error("No collation was set by the server for the current connection.");if(!b.codepage)throw Error("The collation set by the server has no associated encoding.");return e.default.encode(a,b.codepage)}};c.default=g,b.exports=g},44990,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.bufferToLowerCaseGuid=function(a){return e[a[3]]+e[a[2]]+e[a[1]]+e[a[0]]+"-"+e[a[5]]+e[a[4]]+"-"+e[a[7]]+e[a[6]]+"-"+e[a[8]]+e[a[9]]+"-"+e[a[10]]+e[a[11]]+e[a[12]]+e[a[13]]+e[a[14]]+e[a[15]]},c.bufferToUpperCaseGuid=function(a){return d[a[3]]+d[a[2]]+d[a[1]]+d[a[0]]+"-"+d[a[5]]+d[a[4]]+"-"+d[a[7]]+d[a[6]]+"-"+d[a[8]]+d[a[9]]+"-"+d[a[10]]+d[a[11]]+d[a[12]]+d[a[13]]+d[a[14]]+d[a[15]]},c.guidToArray=function(a){return[f[a.charCodeAt(6)][a.charCodeAt(7)],f[a.charCodeAt(4)][a.charCodeAt(5)],f[a.charCodeAt(2)][a.charCodeAt(3)],f[a.charCodeAt(0)][a.charCodeAt(1)],f[a.charCodeAt(11)][a.charCodeAt(12)],f[a.charCodeAt(9)][a.charCodeAt(10)],f[a.charCodeAt(16)][a.charCodeAt(17)],f[a.charCodeAt(14)][a.charCodeAt(15)],f[a.charCodeAt(19)][a.charCodeAt(20)],f[a.charCodeAt(21)][a.charCodeAt(22)],f[a.charCodeAt(24)][a.charCodeAt(25)],f[a.charCodeAt(26)][a.charCodeAt(27)],f[a.charCodeAt(28)][a.charCodeAt(29)],f[a.charCodeAt(30)][a.charCodeAt(31)],f[a.charCodeAt(32)][a.charCodeAt(33)],f[a.charCodeAt(34)][a.charCodeAt(35)]]};let d=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],f={},g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"].map(a=>a.charCodeAt(0));for(let a=0;a<g.length;a++){let b=f[g[a]]={};for(let c=0;c<g.length;c++){let d=parseInt(String.fromCharCode(g[a],g[c]),16);b[g[c]]=d}}},42821,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(44990);let e=Buffer.from([0]),f=Buffer.from([16]),g={id:36,type:"GUIDN",name:"UniqueIdentifier",declaration:function(){return"uniqueidentifier"},resolveLength:function(){return 16},generateTypeInfo(){return Buffer.from([this.id,16])},generateParameterLength:(a,b)=>null==a.value?e:f,generateParameterData:function*(a,b){null!=a.value&&(yield Buffer.from((0,d.guidToArray)(a.value)))},validate:function(a){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(a))throw TypeError("Invalid GUID.");return a}};c.default=g,b.exports=g},50663,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([255,255,255,255]),e={id:99,type:"NTEXT",name:"NText",hasTableName:!0,declaration:function(){return"ntext"},resolveLength:function(a){let b=a.value;return null!=b?b.length:-1},generateTypeInfo(a,b){let c=Buffer.alloc(10);return c.writeUInt8(this.id,0),c.writeInt32LE(a.length,1),a.collation&&a.collation.toBuffer().copy(c,5,0,5),c},generateParameterLength(a,b){if(null==a.value)return d;let c=Buffer.alloc(4);return c.writeInt32LE(Buffer.byteLength(a.value,"ucs2"),0),c},generateParameterData:function*(a,b){null!=a.value&&(yield Buffer.from(a.value.toString(),"ucs2"))},validate:function(a){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");return a}};c.default=e,b.exports=e},97964,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([254,255,255,255,255,255,255,255]),e=Buffer.from([0,0,0,0]),f=Buffer.from([255,255]),g=Buffer.from([255,255,255,255,255,255,255,255]),h={id:165,type:"BIGVARBIN",name:"VarBinary",maximumLength:8e3,declaration:function(a){let b,c=a.value;return(b=a.length?a.length:null!=c?c.length||1:null!==c||a.output?this.maximumLength:1)<=this.maximumLength?"varbinary("+b+")":"varbinary(max)"},resolveLength:function(a){let b=a.value;return null!=a.length?a.length:null!=b?b.length:this.maximumLength},generateTypeInfo:function(a){let b=Buffer.alloc(3);return b.writeUInt8(this.id,0),a.length<=this.maximumLength?b.writeUInt16LE(a.length,1):b.writeUInt16LE(65535,1),b},generateParameterLength(a,b){if(null==a.value)if(a.length<=this.maximumLength)return f;else return g;let c=a.value;Buffer.isBuffer(c)||(c=c.toString());let e=Buffer.byteLength(c,"ucs2");if(!(a.length<=this.maximumLength))return d;{let a=Buffer.alloc(2);return a.writeUInt16LE(e,0),a}},*generateParameterData(a,b){if(null==a.value)return;let c=a.value;if(a.length<=this.maximumLength)Buffer.isBuffer(c)?yield c:yield Buffer.from(c.toString(),"ucs2");else{Buffer.isBuffer(c)||(c=c.toString());let a=Buffer.byteLength(c,"ucs2");if(a>0){let b=Buffer.alloc(4);b.writeUInt32LE(a,0),yield b,Buffer.isBuffer(c)?yield c:yield Buffer.from(c,"ucs2")}yield e}},validate:function(a){if(null==a)return null;if(!Buffer.isBuffer(a))throw TypeError("Invalid buffer.");return a}};c.default=h,b.exports=h},50281,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(94584))&&d.__esModule?d:{default:d};let f=Buffer.from([254,255,255,255,255,255,255,255]),g=Buffer.from([0,0,0,0]),h=Buffer.from([255,255]),i=Buffer.from([255,255,255,255,255,255,255,255]),j={id:167,type:"BIGVARCHR",name:"VarChar",maximumLength:8e3,declaration:function(a){let b,c=a.value;return(b=a.length?a.length:null!=c?c.length||1:null!==c||a.output?this.maximumLength:1)<=this.maximumLength?"varchar("+b+")":"varchar(max)"},resolveLength:function(a){let b=a.value;return null!=a.length?a.length:null!=b?b.length||1:this.maximumLength},generateTypeInfo(a){let b=Buffer.alloc(8);return b.writeUInt8(this.id,0),a.length<=this.maximumLength?b.writeUInt16LE(a.length,1):b.writeUInt16LE(65535,1),a.collation&&a.collation.toBuffer().copy(b,3,0,5),b},generateParameterLength(a,b){let c=a.value;if(null==c)if(a.length<=this.maximumLength)return h;else return i;if(!(a.length<=this.maximumLength))return f;{let a=Buffer.alloc(2);return a.writeUInt16LE(c.length,0),a}},*generateParameterData(a,b){let c=a.value;if(null!=c)if(a.length<=this.maximumLength)yield c;else{if(c.length>0){let a=Buffer.alloc(4);a.writeUInt32LE(c.length,0),yield a,yield c}yield g}},validate:function(a,b){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");if(!b)throw Error("No collation was set by the server for the current connection.");if(!b.codepage)throw Error("The collation set by the server has no associated encoding.");return e.default.encode(a,b.codepage)}};c.default=j,b.exports=j},50040,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([255,255]),e={id:173,type:"BIGBinary",name:"Binary",maximumLength:8e3,declaration:function(a){let b=a.value;return"binary("+(a.length?a.length:null!=b?b.length||1:null!==b||a.output?this.maximumLength:1)+")"},resolveLength:function(a){let b=a.value;return null!=b?b.length:this.maximumLength},generateTypeInfo(a){let b=Buffer.alloc(3);return b.writeUInt8(this.id,0),b.writeUInt16LE(a.length,1),b},generateParameterLength(a,b){if(null==a.value)return d;let c=Buffer.alloc(2);return c.writeUInt16LE(a.length,0),c},*generateParameterData(a,b){null!=a.value&&(yield a.value.slice(0,void 0!==a.length?Math.min(a.length,this.maximumLength):this.maximumLength))},validate:function(a){if(null==a)return null;if(!Buffer.isBuffer(a))throw TypeError("Invalid buffer.");return a}};c.default=e,b.exports=e},65875,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(94584))&&d.__esModule?d:{default:d};let f=Buffer.from([255,255]),g={id:175,type:"BIGCHAR",name:"Char",maximumLength:8e3,declaration:function(a){let b,c=a.value;return(b=a.length?a.length:null!=c?c.length||1:null!==c||a.output?this.maximumLength:1)<this.maximumLength?"char("+b+")":"char("+this.maximumLength+")"},resolveLength:function(a){let b=a.value;return null!=a.length?a.length:null!=b?b.length||1:this.maximumLength},generateTypeInfo(a){let b=Buffer.alloc(8);return b.writeUInt8(this.id,0),b.writeUInt16LE(a.length,1),a.collation&&a.collation.toBuffer().copy(b,3,0,5),b},generateParameterLength(a,b){let c=a.value;if(null==c)return f;let d=Buffer.alloc(2);return d.writeUInt16LE(c.length,0),d},*generateParameterData(a,b){null!=a.value&&(yield Buffer.from(a.value,"ascii"))},validate:function(a,b){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");if(!b)throw Error("No collation was set by the server for the current connection.");if(!b.codepage)throw Error("The collation set by the server has no associated encoding.");return e.default.encode(a,b.codepage)}};c.default=g,b.exports=g},75913,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([254,255,255,255,255,255,255,255]),e=Buffer.from([0,0,0,0]),f=Buffer.from([255,255]),g=Buffer.from([255,255,255,255,255,255,255,255]),h={id:231,type:"NVARCHAR",name:"NVarChar",maximumLength:4e3,declaration:function(a){let b,c=a.value;return(b=a.length?a.length:null!=c?c.toString().length||1:null!==c||a.output?this.maximumLength:1)<=this.maximumLength?"nvarchar("+b+")":"nvarchar(max)"},resolveLength:function(a){let b=a.value;return null!=a.length?a.length:null==b?this.maximumLength:Buffer.isBuffer(b)?b.length/2||1:b.toString().length||1},generateTypeInfo(a){let b=Buffer.alloc(8);return b.writeUInt8(this.id,0),a.length<=this.maximumLength?b.writeUInt16LE(2*a.length,1):b.writeUInt16LE(65535,1),a.collation&&a.collation.toBuffer().copy(b,3,0,5),b},generateParameterLength(a,b){if(null==a.value)if(a.length<=this.maximumLength)return f;else return g;let c=a.value;if(!(a.length<=this.maximumLength))return d;{let a;c instanceof Buffer?a=c.length:(c=c.toString(),a=Buffer.byteLength(c,"ucs2"));let b=Buffer.alloc(2);return b.writeUInt16LE(a,0),b}},*generateParameterData(a,b){if(null==a.value)return;let c=a.value;if(a.length<=this.maximumLength)c instanceof Buffer?yield c:(c=c.toString(),yield Buffer.from(c,"ucs2"));else{if(c instanceof Buffer){let a=c.length;if(a>0){let b=Buffer.alloc(4);b.writeUInt32LE(a,0),yield b,yield c}}else{c=c.toString();let a=Buffer.byteLength(c,"ucs2");if(a>0){let b=Buffer.alloc(4);b.writeUInt32LE(a,0),yield b,yield Buffer.from(c,"ucs2")}}yield e}},validate:function(a){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");return a}};c.default=h,b.exports=h},48936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d=Buffer.from([255,255]),e={id:239,type:"NCHAR",name:"NChar",maximumLength:4e3,declaration:function(a){let b,c=a.value;return(b=a.length?a.length:null!=a.value?c.toString().length||1:null!==a.value||a.output?this.maximumLength:1)<this.maximumLength?"nchar("+b+")":"nchar("+this.maximumLength+")"},resolveLength:function(a){let b=a.value;return null!=a.length?a.length:null==a.value?this.maximumLength:Buffer.isBuffer(a.value)?a.value.length/2||1:b.toString().length||1},generateTypeInfo:function(a){let b=Buffer.alloc(8);return b.writeUInt8(this.id,0),b.writeUInt16LE(2*a.length,1),a.collation&&a.collation.toBuffer().copy(b,3,0,5),b},generateParameterLength(a,b){if(null==a.value)return d;let{value:c}=a;if(c instanceof Buffer){let a=c.length,b=Buffer.alloc(2);return b.writeUInt16LE(a,0),b}{let a=Buffer.byteLength(c.toString(),"ucs2"),b=Buffer.alloc(2);return b.writeUInt16LE(a,0),b}},*generateParameterData(a,b){if(null==a.value)return;let c=a.value;c instanceof Buffer?yield c:yield Buffer.from(c,"ucs2")},validate:function(a){if(null==a)return null;if("string"!=typeof a)throw TypeError("Invalid string.");return a}};c.default=e,b.exports=e},58602,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:241,type:"XML",name:"Xml",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},59776,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=(d=a.r(35952))&&d.__esModule?d:{default:d};let f=Buffer.from([0]),g={id:41,type:"TIMEN",name:"Time",declaration:function(a){return"time("+this.resolveScale(a)+")"},resolveScale:function(a){return null!=a.scale?a.scale:7*(null!==a.value)},generateTypeInfo(a){return Buffer.from([this.id,a.scale])},generateParameterLength(a,b){if(null==a.value)return f;switch(a.scale){case 0:case 1:case 2:return Buffer.from([3]);case 3:case 4:return Buffer.from([4]);case 5:case 6:case 7:return Buffer.from([5]);default:throw Error("invalid scale")}},*generateParameterData(a,b){let c;if(null==a.value)return;let d=new e.default(16),f=a.value;switch(c=Math.round(c=(b.useUTC?((60*f.getUTCHours()+f.getUTCMinutes())*60+f.getUTCSeconds())*1e3+f.getUTCMilliseconds():((60*f.getHours()+f.getMinutes())*60+f.getSeconds())*1e3+f.getMilliseconds())*Math.pow(10,a.scale-3)+(null!=a.value.nanosecondDelta?a.value.nanosecondDelta:0)*Math.pow(10,a.scale)),a.scale){case 0:case 1:case 2:d.writeUInt24LE(c);break;case 3:case 4:d.writeUInt32LE(c);break;case 5:case 6:case 7:d.writeUInt40LE(c)}yield d.data},validate:function(a){if(null==a)return null;if(a instanceof Date||(a=new Date(Date.parse(a))),isNaN(a))throw TypeError("Invalid time.");return a}};c.default=g,b.exports=g},65681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(2465);let e=a.g.Date,f=d.LocalDate.ofYearDay(1,1),g=Buffer.from([0]),h=Buffer.from([3]),i={id:40,type:"DATEN",name:"Date",declaration:function(){return"date"},generateTypeInfo:function(){return Buffer.from([this.id])},generateParameterLength:(a,b)=>null==a.value?g:h,*generateParameterData(a,b){let c;if(null==a.value)return;let e=a.value;c=b.useUTC?d.LocalDate.of(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()):d.LocalDate.of(e.getFullYear(),e.getMonth()+1,e.getDate());let g=f.until(c,d.ChronoUnit.DAYS),h=Buffer.alloc(3);h.writeUIntLE(g,0,3),yield h},validate:function(a,b,c){let d;if(null==a)return null;if(a instanceof e||(a=new e(e.parse(a))),(d=c&&c.useUTC?a.getUTCFullYear():a.getFullYear())<1||d>9999)throw TypeError("Out of range.");if(isNaN(a))throw TypeError("Invalid date.");return a}};c.default=i,b.exports=i},72848,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=a.r(2465),f=(d=a.r(35952))&&d.__esModule?d:{default:d};let g=e.LocalDate.ofYearDay(1,1),h=Buffer.from([0]),i={id:42,type:"DATETIME2N",name:"DateTime2",declaration:function(a){return"datetime2("+this.resolveScale(a)+")"},resolveScale:function(a){return null!=a.scale?a.scale:7*(null!==a.value)},generateTypeInfo(a,b){return Buffer.from([this.id,a.scale])},generateParameterLength(a,b){if(null==a.value)return h;switch(a.scale){case 0:case 1:case 2:return Buffer.from([6]);case 3:case 4:return Buffer.from([7]);case 5:case 6:case 7:return Buffer.from([8]);default:throw Error("invalid scale")}},*generateParameterData(a,b){let c,d;if(null==a.value)return;let h=a.value,i=a.scale,j=new f.default(16);switch(c=Math.round(c=(b.useUTC?((60*h.getUTCHours()+h.getUTCMinutes())*60+h.getUTCSeconds())*1e3+h.getUTCMilliseconds():((60*h.getHours()+h.getMinutes())*60+h.getSeconds())*1e3+h.getMilliseconds())*Math.pow(10,i-3)+(null!=h.nanosecondDelta?h.nanosecondDelta:0)*Math.pow(10,i)),i){case 0:case 1:case 2:j.writeUInt24LE(c);break;case 3:case 4:j.writeUInt32LE(c);break;case 5:case 6:case 7:j.writeUInt40LE(c)}d=b.useUTC?e.LocalDate.of(h.getUTCFullYear(),h.getUTCMonth()+1,h.getUTCDate()):e.LocalDate.of(h.getFullYear(),h.getMonth()+1,h.getDate());let k=g.until(d,e.ChronoUnit.DAYS);j.writeUInt24LE(k),yield j.data},validate:function(a,b,c){let d;if(null==a)return null;if(a instanceof Date||(a=new Date(Date.parse(a))),(d=c&&c.useUTC?a.getUTCFullYear():a.getFullYear())<1||d>9999)throw TypeError("Out of range.");if(isNaN(a))throw TypeError("Invalid date.");return a}};c.default=i,b.exports=i},8498,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=a.r(2465),f=(d=a.r(35952))&&d.__esModule?d:{default:d};let g=e.LocalDate.ofYearDay(1,1),h=Buffer.from([0]),i={id:43,type:"DATETIMEOFFSETN",name:"DateTimeOffset",declaration:function(a){return"datetimeoffset("+this.resolveScale(a)+")"},resolveScale:function(a){return null!=a.scale?a.scale:7*(null!==a.value)},generateTypeInfo(a){return Buffer.from([this.id,a.scale])},generateParameterLength(a,b){if(null==a.value)return h;switch(a.scale){case 0:case 1:case 2:return Buffer.from([8]);case 3:case 4:return Buffer.from([9]);case 5:case 6:case 7:return Buffer.from([10]);default:throw Error("invalid scale")}},*generateParameterData(a,b){let c;if(null==a.value)return;let d=a.value,h=a.scale,i=new f.default(16);switch(c=Math.round(c=(((60*d.getUTCHours()+d.getUTCMinutes())*60+d.getUTCSeconds())*1e3+d.getMilliseconds())*Math.pow(10,h-3)+(null!=d.nanosecondDelta?d.nanosecondDelta:0)*Math.pow(10,h)),h){case 0:case 1:case 2:i.writeUInt24LE(c);break;case 3:case 4:i.writeUInt32LE(c);break;case 5:case 6:case 7:i.writeUInt40LE(c)}let j=e.LocalDate.of(d.getUTCFullYear(),d.getUTCMonth()+1,d.getUTCDate()),k=g.until(j,e.ChronoUnit.DAYS);i.writeUInt24LE(k);let l=-d.getTimezoneOffset();i.writeInt16LE(l),yield i.data},validate:function(a,b,c){let d;if(null==a)return null;if(a instanceof Date||(a=new Date(Date.parse(a))),(d=c&&c.useUTC?a.getUTCFullYear():a.getFullYear())<1||d>9999)throw TypeError("Out of range.");if(isNaN(a))throw TypeError("Invalid date.");return a}};c.default=i,b.exports=i},23908,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:240,type:"UDTTYPE",name:"UDT",declaration(){throw Error("not implemented")},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},78539,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d,e=a.r(57602),f=(d=a.r(35952))&&d.__esModule?d:{default:d};let g=Buffer.from([1]),h=Buffer.from([0]),i=Buffer.from([255,255]),j={id:243,type:"TVPTYPE",name:"TVP",declaration:function(a){return a.value.name+" readonly"},generateTypeInfo(a){let b=a.value?.schema??"",c=a.value?.name??"",d=2+Buffer.byteLength("","ucs2")+1+Buffer.byteLength(b,"ucs2")+1+Buffer.byteLength(c,"ucs2"),e=new f.default(d,"ucs2");return e.writeUInt8(this.id),e.writeBVarchar(""),e.writeBVarchar(b),e.writeBVarchar(c),e.data},generateParameterLength(a,b){if(null==a.value)return i;let{columns:c}=a.value,d=Buffer.alloc(2);return d.writeUInt16LE(c.length,0),d},*generateParameterData(a,b){if(null==a.value){yield h,yield h;return}let{columns:c,rows:d}=a.value;for(let a=0,b=c.length;a<b;a++){let b=c[a],d=Buffer.alloc(6);d.writeUInt32LE(0,0),d.writeUInt16LE(0,4),yield d,yield b.type.generateTypeInfo(b),yield Buffer.from([0])}yield h;for(let f=0,h=d.length;f<h;f++){yield g;let h=d[f];for(let d=0,g=h.length;d<g;d++){let g,i=c[d],j=h[d];try{g=i.type.validate(j,a.collation)}catch(a){throw new e.InputError(`TVP column '${i.name}' has invalid data at row index ${f}`,{cause:a})}let k={value:g,length:i.length,scale:i.scale,precision:i.precision};yield i.type.generateParameterLength(k,b),yield*i.type.generateParameterData(k,b)}}yield h},validate:function(a){if(null==a)return null;if("object"!=typeof a||!Array.isArray(a.columns)||!Array.isArray(a.rows))throw TypeError("Invalid table.");return a}};c.default=j,b.exports=j},76026,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={id:98,type:"SSVARIANTTYPE",name:"Variant",declaration:function(){return"sql_variant"},generateTypeInfo(){throw Error("not implemented")},generateParameterLength(){throw Error("not implemented")},generateParameterData(){throw Error("not implemented")},validate(){throw Error("not implemented")}};c.default=d,b.exports=d},31156,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.typeByName=c.TYPES=c.TYPE=void 0;var d=Q(a.r(94920)),e=Q(a.r(10584)),f=Q(a.r(15441)),g=Q(a.r(17223)),h=Q(a.r(35018)),i=Q(a.r(82243)),j=Q(a.r(55931)),k=Q(a.r(68315)),l=Q(a.r(64670)),m=Q(a.r(87896)),n=Q(a.r(36674)),o=Q(a.r(98535)),p=Q(a.r(26256)),q=Q(a.r(5875)),r=Q(a.r(53979)),s=Q(a.r(45965)),t=Q(a.r(42821)),u=Q(a.r(61468)),v=Q(a.r(50663)),w=Q(a.r(54166)),x=Q(a.r(83143)),y=Q(a.r(33158)),z=Q(a.r(77894)),A=Q(a.r(88753)),B=Q(a.r(39666)),C=Q(a.r(97964)),D=Q(a.r(50281)),E=Q(a.r(50040)),F=Q(a.r(65875)),G=Q(a.r(75913)),H=Q(a.r(48936)),I=Q(a.r(58602)),J=Q(a.r(59776)),K=Q(a.r(65681)),L=Q(a.r(72848)),M=Q(a.r(8498)),N=Q(a.r(23908)),O=Q(a.r(78539)),P=Q(a.r(76026));function Q(a){return a&&a.__esModule?a:{default:a}}c.TYPE={[d.default.id]:d.default,[e.default.id]:e.default,[f.default.id]:f.default,[g.default.id]:g.default,[h.default.id]:h.default,[i.default.id]:i.default,[j.default.id]:j.default,[k.default.id]:k.default,[l.default.id]:l.default,[m.default.id]:m.default,[n.default.id]:n.default,[o.default.id]:o.default,[p.default.id]:p.default,[q.default.id]:q.default,[r.default.id]:r.default,[s.default.id]:s.default,[t.default.id]:t.default,[u.default.id]:u.default,[v.default.id]:v.default,[w.default.id]:w.default,[x.default.id]:x.default,[y.default.id]:y.default,[z.default.id]:z.default,[A.default.id]:A.default,[B.default.id]:B.default,[C.default.id]:C.default,[D.default.id]:D.default,[E.default.id]:E.default,[F.default.id]:F.default,[G.default.id]:G.default,[H.default.id]:H.default,[I.default.id]:I.default,[J.default.id]:J.default,[K.default.id]:K.default,[L.default.id]:L.default,[M.default.id]:M.default,[N.default.id]:N.default,[O.default.id]:O.default,[P.default.id]:P.default};let R=c.TYPES={TinyInt:e.default,Bit:f.default,SmallInt:g.default,Int:h.default,SmallDateTime:i.default,Real:j.default,Money:k.default,DateTime:l.default,Float:m.default,Decimal:n.default,Numeric:o.default,SmallMoney:p.default,BigInt:q.default,Image:r.default,Text:s.default,UniqueIdentifier:t.default,NText:v.default,VarBinary:C.default,VarChar:D.default,Binary:E.default,Char:F.default,NVarChar:G.default,NChar:H.default,Xml:I.default,Time:J.default,Date:K.default,DateTime2:L.default,DateTimeOffset:M.default,UDT:N.default,TVP:O.default,Variant:P.default};c.typeByName=R},44370,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Result=c.NotEnoughDataError=void 0,c.readBVarByte=function(a,b){let c;if(b*=1,{offset:b,value:c}=f(a,b),a.length<b+c)throw new e(b+c);return new d(a.slice(b,b+c),b+c)},c.readBVarChar=function(a,b){let c;b*=1,{offset:b,value:c}=f(a,b);let g=2*c;if(a.length<b+g)throw new e(b+g);return new d(a.toString("ucs2",b,b+g),b+g)},c.readBigInt64LE=function(a,b){if(b*=1,a.length<b+8)throw new e(b+8);return new d(a.readBigInt64LE(b),b+8)},c.readBigUInt64LE=function(a,b){if(b*=1,a.length<b+8)throw new e(b+8);return new d(a.readBigUInt64LE(b),b+8)},c.readDoubleLE=function(a,b){if(b*=1,a.length<b+8)throw new e(b+8);return new d(a.readDoubleLE(b),b+8)},c.readFloatLE=function(a,b){if(b*=1,a.length<b+4)throw new e(b+4);return new d(a.readFloatLE(b),b+4)},c.readInt16LE=function(a,b){if(b*=1,a.length<b+2)throw new e(b+2);return new d(a.readInt16LE(b),b+2)},c.readInt32LE=function(a,b){if(b*=1,a.length<b+4)throw new e(b+4);return new d(a.readInt32LE(b),b+4)},c.readUInt16LE=g,c.readUInt24LE=function(a,b){if(b*=1,a.length<b+3)throw new e(b+3);return new d(a.readUIntLE(b,3),b+3)},c.readUInt32BE=function(a,b){if(b*=1,a.length<b+4)throw new e(b+4);return new d(a.readUInt32BE(b),b+4)},c.readUInt32LE=function(a,b){if(b*=1,a.length<b+4)throw new e(b+4);return new d(a.readUInt32LE(b),b+4)},c.readUInt40LE=function(a,b){if(b*=1,a.length<b+5)throw new e(b+5);return new d(a.readUIntLE(b,5),b+5)},c.readUInt8=f,c.readUNumeric128LE=function(a,b){if(b*=1,a.length<b+16)throw new e(b+16);return new d(a.readUInt32LE(b)+0x100000000*a.readUInt32LE(b+4)+0xffffffffffffffff*a.readUInt32LE(b+8)+7922816251426434e13*a.readUInt32LE(b+12),b+16)},c.readUNumeric64LE=function(a,b){if(b*=1,a.length<b+8)throw new e(b+8);let c=a.readUInt32LE(b);return new d(0x100000000*a.readUInt32LE(b+4)+c,b+8)},c.readUNumeric96LE=function(a,b){if(b*=1,a.length<b+12)throw new e(b+12);return new d(a.readUInt32LE(b)+0x100000000*a.readUInt32LE(b+4)+0xffffffffffffffff*a.readUInt32LE(b+8),b+12)},c.readUsVarByte=function(a,b){let c;if(b*=1,{offset:b,value:c}=g(a,b),a.length<b+c)throw new e(b+c);return new d(a.slice(b,b+c),b+c)},c.readUsVarChar=function(a,b){let c;b*=1,{offset:b,value:c}=g(a,b);let f=2*c;if(a.length<b+f)throw new e(b+f);return new d(a.toString("ucs2",b,b+f),b+f)};class d{constructor(a,b){this.value=a,this.offset=b}}c.Result=d;class e extends Error{byteCount;constructor(a){super(),this.byteCount=a}}function f(a,b){if(b*=1,a.length<b+1)throw new e(b+1);return new d(a.readUInt8(b),b+1)}function g(a,b){if(b*=1,a.length<b+2)throw new e(b+2);return new d(a.readUInt16LE(b),b+2)}c.NotEnoughDataError=e},6715,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0,c.readCollation=h,c.readMetadata=i;var d=a.r(13560),e=a.r(31156),f=a.r(52977),g=a.r(44370);function h(a,b){if(b*=1,a.length<b+5)throw new g.NotEnoughDataError(b+5);let c=d.Collation.fromBuffer(a.slice(b,b+5));return new g.Result(c,b+5)}function i(a,b,c){var d,i;let j,k,l;({offset:b,value:j}=(c.tdsVersion<"7_2"?g.readUInt16LE:g.readUInt32LE)(a,b)),({offset:b,value:k}=(0,g.readUInt16LE)(a,b)),{offset:b,value:l}=(0,g.readUInt8)(a,b);let m=e.TYPE[l];if(!m)throw Error((0,f.sprintf)("Unrecognised data type 0x%02X",l));switch(m.name){case"Null":case"TinyInt":case"SmallInt":case"Int":case"BigInt":case"Real":case"Float":case"SmallMoney":case"Money":case"Bit":case"SmallDateTime":case"DateTime":case"Date":return new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:void 0},b);case"IntN":case"FloatN":case"MoneyN":case"BitN":case"UniqueIdentifier":case"DateTimeN":{let c;return{offset:b,value:c}=(0,g.readUInt8)(a,b),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"Variant":{let c;return{offset:b,value:c}=(0,g.readUInt32LE)(a,b),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"VarChar":case"Char":case"NVarChar":case"NChar":{let c,d;return{offset:b,value:c}=(0,g.readUInt16LE)(a,b),{offset:b,value:d}=h(a,b),new g.Result({userType:j,flags:k,type:m,collation:d,precision:void 0,scale:void 0,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"Text":case"NText":{let c,d;return{offset:b,value:c}=(0,g.readUInt32LE)(a,b),{offset:b,value:d}=h(a,b),new g.Result({userType:j,flags:k,type:m,collation:d,precision:void 0,scale:void 0,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"VarBinary":case"Binary":{let c;return{offset:b,value:c}=(0,g.readUInt16LE)(a,b),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"Image":{let c;return{offset:b,value:c}=(0,g.readUInt32LE)(a,b),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"Xml":{let c,e,f,h,i;return d=+b,{offset:d,value:e}=(0,g.readUInt8)(a,d),{offset:b,value:c}=1!==e?new g.Result(void 0,d):({offset:d,value:f}=(0,g.readBVarChar)(a,d),{offset:d,value:h}=(0,g.readBVarChar)(a,d),{offset:d,value:i}=(0,g.readUsVarChar)(a,d),new g.Result({dbname:f,owningSchema:h,xmlSchemaCollection:i},d)),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:c,udtInfo:void 0},b)}case"Time":case"DateTime2":case"DateTimeOffset":{let c;return{offset:b,value:c}=(0,g.readUInt8)(a,b),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:c,dataLength:void 0,schema:void 0,udtInfo:void 0},b)}case"NumericN":case"DecimalN":{let c,d,e;return{offset:b,value:c}=(0,g.readUInt8)(a,b),{offset:b,value:d}=(0,g.readUInt8)(a,b),{offset:b,value:e}=(0,g.readUInt8)(a,b),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:d,scale:e,dataLength:c,schema:void 0,udtInfo:void 0},b)}case"UDT":{let c,d,e,f,h,l;return{offset:b,value:c}=(i=b,{offset:i,value:d}=(0,g.readUInt16LE)(a,i),{offset:i,value:e}=(0,g.readBVarChar)(a,i),{offset:i,value:f}=(0,g.readBVarChar)(a,i),{offset:i,value:h}=(0,g.readBVarChar)(a,i),{offset:i,value:l}=(0,g.readUsVarChar)(a,i),new g.Result({maxByteSize:d,dbname:e,owningSchema:f,typeName:h,assemblyName:l},i)),new g.Result({userType:j,flags:k,type:m,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:c},b)}default:throw Error((0,f.sprintf)("Unrecognised type %s",m.name))}}function j(a,b,c){(async()=>{for(;;){let d;try{d=i(a.buffer,a.position,b)}catch(b){if(b instanceof g.NotEnoughDataError){await a.waitForChunk();continue}throw b}return a.position=d.offset,c(d.value)}})()}c.default=j,b.exports=j,b.exports.readCollation=h,b.exports.readMetadata=i},25484,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(6715),e=a.r(92467),f=a.r(44370);async function g(a){let b;for(;;){let c;try{({offset:c,value:b}=(0,f.readUInt16LE)(a.buffer,a.position))}catch(b){if(b instanceof f.NotEnoughDataError){await a.waitForChunk();continue}throw b}a.position=c;break}let c=[];for(let e=0;e<b;e++)for(;;){let b,g;try{({offset:g,value:b}=function(a,b,c,e){var g;let h,i,j,k;return{offset:b,value:h}=(0,d.readMetadata)(a,b,c),{offset:b,value:i}=function(a,b,c,d){let e;if(!c.type.hasTableName)return new f.Result(void 0,b);if(d.tdsVersion<"7_2")return(0,f.readUsVarChar)(a,b);({offset:b,value:e}=(0,f.readUInt8)(a,b));let g=[];for(let c=0;c<e;c++){let c;({offset:b,value:c}=(0,f.readUsVarChar)(a,b)),g.push(c)}return new f.Result(g,b)}(a,b,h,c),{offset:b,value:j}=(g=b,({offset:g,value:k}=(0,f.readBVarChar)(a,g),c.columnNameReplacer)?new f.Result(c.columnNameReplacer(k,e,h),g):c.camelCaseColumns?new f.Result(k.replace(/^[A-Z]/,function(a){return a.toLowerCase()}),g):new f.Result(k,g)),new f.Result({userType:h.userType,flags:h.flags,type:h.type,collation:h.collation,precision:h.precision,scale:h.scale,udtInfo:h.udtInfo,dataLength:h.dataLength,schema:h.schema,colName:j,tableName:i},b)}(a.buffer,a.position,a.options,e))}catch(b){if(b instanceof f.NotEnoughDataError){await a.waitForChunk();continue}throw b}a.position=g,c.push(b);break}return new e.ColMetadataToken(c)}c.default=g,b.exports=g},86438,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.doneInProcParser=function(a,b,c){let g;return{offset:b,value:g}=f(a,b,c),new e.Result(new d.DoneInProcToken(g),b)},c.doneParser=function(a,b,c){let g;return{offset:b,value:g}=f(a,b,c),new e.Result(new d.DoneToken(g),b)},c.doneProcParser=function(a,b,c){let g;return{offset:b,value:g}=f(a,b,c),new e.Result(new d.DoneProcToken(g),b)};var d=a.r(92467),e=a.r(44370);function f(a,b,c){let d,f,g;return{offset:b,value:d}=(0,e.readUInt16LE)(a,b),{offset:b,value:f}=(0,e.readUInt16LE)(a,b),{offset:b,value:g}=(c.tdsVersion<"7_2"?e.readUInt32LE:e.readBigUInt64LE)(a,b),new e.Result({more:!!(1&d),sqlError:!!(2&d),attention:!!(32&d),serverError:!!(256&d),rowCount:16&d?Number(g):void 0,curCmd:f},b)}},95211,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(13560),e=a.r(92467),f=a.r(44370);let g={1:{name:"DATABASE",event:"databaseChange"},2:{name:"LANGUAGE",event:"languageChange"},3:{name:"CHARSET",event:"charsetChange"},4:{name:"PACKET_SIZE",event:"packetSizeChange"},7:{name:"SQL_COLLATION",event:"sqlCollationChange"},8:{name:"BEGIN_TXN",event:"beginTransaction"},9:{name:"COMMIT_TXN",event:"commitTransaction"},10:{name:"ROLLBACK_TXN",event:"rollbackTransaction"},13:{name:"DATABASE_MIRRORING_PARTNER",event:"partnerNode"},17:{name:"TXN_ENDED"},18:{name:"RESET_CONNECTION",event:"resetConnection"},20:{name:"ROUTING_CHANGE",event:"routingChange"}};function h(a,b,c){let h,i;if({offset:b,value:h}=(0,f.readUInt16LE)(a,b),a.length<b+h)throw new f.NotEnoughDataError(b+h);({offset:b,value:i}=(0,f.readUInt8)(a,b));let j=g[i];return j?function(a,b,c,g){switch(g.name){case"DATABASE":case"LANGUAGE":case"CHARSET":case"PACKET_SIZE":case"DATABASE_MIRRORING_PARTNER":{let c,d;switch({offset:b,value:c}=(0,f.readBVarChar)(a,b),{offset:b,value:d}=(0,f.readBVarChar)(a,b),g.name){case"PACKET_SIZE":return new f.Result(new e.PacketSizeEnvChangeToken(parseInt(c),parseInt(d)),b);case"DATABASE":return new f.Result(new e.DatabaseEnvChangeToken(c,d),b);case"LANGUAGE":return new f.Result(new e.LanguageEnvChangeToken(c,d),b);case"CHARSET":return new f.Result(new e.CharsetEnvChangeToken(c,d),b);case"DATABASE_MIRRORING_PARTNER":return new f.Result(new e.DatabaseMirroringPartnerEnvChangeToken(c,d),b)}throw Error("unreachable")}case"SQL_COLLATION":case"BEGIN_TXN":case"COMMIT_TXN":case"ROLLBACK_TXN":case"RESET_CONNECTION":{let c,h;switch({offset:b,value:c}=(0,f.readBVarByte)(a,b),{offset:b,value:h}=(0,f.readBVarByte)(a,b),g.name){case"SQL_COLLATION":{let a=c.length?d.Collation.fromBuffer(c):void 0,g=h.length?d.Collation.fromBuffer(h):void 0;return new f.Result(new e.CollationChangeToken(a,g),b)}case"BEGIN_TXN":return new f.Result(new e.BeginTransactionEnvChangeToken(c,h),b);case"COMMIT_TXN":return new f.Result(new e.CommitTransactionEnvChangeToken(c,h),b);case"ROLLBACK_TXN":return new f.Result(new e.RollbackTransactionEnvChangeToken(c,h),b);case"RESET_CONNECTION":return new f.Result(new e.ResetConnectionEnvChangeToken(c,h),b)}throw Error("unreachable")}case"ROUTING_CHANGE":{let c,d;({offset:b,value:c}=(0,f.readUsVarByte)(a,b)),{offset:b,value:d}=(0,f.readUsVarByte)(a,b);let g=c.readUInt8(0);if(0!==g)throw Error("Unknown protocol byte in routing change event");let h=c.readUInt16LE(1),i=c.readUInt16LE(3),j=c.toString("ucs2",5,5+2*i);return new f.Result(new e.RoutingEnvChangeToken({protocol:g,port:h,server:j},d),b)}default:return console.error("Tedious > Unsupported ENVCHANGE type "+g.name),new f.Result(void 0,b+c-1)}}(a,b,h,j):(console.error("Tedious > Unsupported ENVCHANGE type "+i),new f.Result(void 0,b+h-1))}c.default=h,b.exports=h},10793,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.errorParser=function(a,b,c){let g;return{offset:b,value:g}=f(a,b,c),new d.Result(new e.ErrorMessageToken(g),b)},c.infoParser=function(a,b,c){let g;return{offset:b,value:g}=f(a,b,c),new d.Result(new e.InfoMessageToken(g),b)};var d=a.r(44370),e=a.r(92467);function f(a,b,c){let e,f,g,h,i,j,k,l;if({offset:b,value:e}=(0,d.readUInt16LE)(a,b),a.length<e+b)throw new d.NotEnoughDataError(e+b);return{offset:b,value:f}=(0,d.readUInt32LE)(a,b),{offset:b,value:g}=(0,d.readUInt8)(a,b),{offset:b,value:h}=(0,d.readUInt8)(a,b),{offset:b,value:i}=(0,d.readUsVarChar)(a,b),{offset:b,value:j}=(0,d.readBVarChar)(a,b),{offset:b,value:k}=(0,d.readBVarChar)(a,b),{offset:b,value:l}=c.tdsVersion<"7_2"?(0,d.readUInt16LE)(a,b):(0,d.readUInt32LE)(a,b),new d.Result({number:f,state:g,class:h,message:i,serverName:j,procName:k,lineNumber:l},b)}},15280,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(44370),e=a.r(92467);function f(a,b,c){let f;if({offset:b,value:f}=(0,d.readUInt32LE)(a,b),a.length<b+f)throw new d.NotEnoughDataError(b+f);let g=a.slice(b,b+f);b+=f;let{spn:h,stsurl:i}=function(a){let b,c,d=0,e=a.readUInt32LE(d);d+=4;for(let f=0;f<e;f++){let e=a.readUInt8(d);d+=1;let f=a.readUInt32LE(d);d+=4;let g=a.readUInt32LE(d);switch(d+=4,e){case 2:b=a.toString("ucs2",g,g+f);break;case 1:c=a.toString("ucs2",g,g+f)}}return{spn:b,stsurl:c}}(g);return new d.Result(new e.FedAuthInfoToken(h,i),b)}c.default=f,b.exports=f},9136,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(44370),e=a.r(92467);function f(a,b,c){let f,g;for(;;){let c,h;if({value:c,offset:b}=(0,d.readUInt8)(a,b),255===c)return new d.Result(new e.FeatureExtAckToken(f,g),b);if({value:h,offset:b}=(0,d.readUInt32LE)(a,b),a.length<b+h)throw new d.NotEnoughDataError(b+h);let i=a.slice(b,b+h);switch(b+=h,c){case 2:f=i;break;case 10:g=!!i[0]}}}c.default=f,b.exports=f},68721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(92467),e=a.r(7033),f=a.r(44370);let g={0:"SQL_DFLT",1:"SQL_TSQL"};function h(a,b,c){let h,i,j,k,l,m,n,o;if({offset:b,value:h}=(0,f.readUInt16LE)(a,b),a.length<h+b)throw new f.NotEnoughDataError(h+b);({offset:b,value:i}=(0,f.readUInt8)(a,b));let p=g[i];({offset:b,value:j}=(0,f.readUInt32BE)(a,b));let q=e.versionsByValue[j];return{offset:b,value:k}=(0,f.readBVarChar)(a,b),{offset:b,value:l}=(0,f.readUInt8)(a,b),{offset:b,value:m}=(0,f.readUInt8)(a,b),{offset:b,value:n}=(0,f.readUInt8)(a,b),{offset:b,value:o}=(0,f.readUInt8)(a,b),new f.Result(new d.LoginAckToken({interface:p,tdsVersion:q,progName:k,progVersion:{major:l,minor:m,buildNumHi:n,buildNumLow:o}}),b)}c.default=h,b.exports=h},41396,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(92467),e=a.r(44370);function f(a,b,c){let f;if({offset:b,value:f}=(0,e.readUInt16LE)(a,b),a.length<b+f)throw new e.NotEnoughDataError(b+f);let g=[];for(let c=0;c<f;c+=2){let c;({offset:b,value:c}=(0,e.readUInt16LE)(a,b)),g.push(c)}return new e.Result(new d.OrderToken(g),b)}c.default=f,b.exports=f},62681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(44370),e=a.r(92467);function f(a,b,c){let f;return{value:f,offset:b}=(0,d.readInt32LE)(a,b),new d.Result(new e.ReturnStatusToken(f),b)}c.default=f,b.exports=f},85771,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isPLPStream=v,c.readPLPStream=B,c.readValue=u;var d,e=a.r(6715),f=a.r(31156),g=(d=a.r(94584))&&d.__esModule?d:{default:d},h=a.r(52977),i=a.r(44990),j=a.r(44370);let k=3+1/3;function l(a,b){return(0,j.readUInt8)(a,b)}function m(a,b){return(0,j.readInt16LE)(a,b)}function n(a,b){return(0,j.readInt32LE)(a,b)}function o(a,b){let c;return{offset:b,value:c}=(0,j.readBigInt64LE)(a,b),new j.Result(c.toString(),b)}function p(a,b){return(0,j.readFloatLE)(a,b)}function q(a,b){return(0,j.readDoubleLE)(a,b)}function r(a,b){let c;return{offset:b,value:c}=(0,j.readInt32LE)(a,b),new j.Result(c/1e4,b)}function s(a,b){let c,d;return{offset:b,value:c}=(0,j.readInt32LE)(a,b),{offset:b,value:d}=(0,j.readUInt32LE)(a,b),new j.Result((d+0x100000000*c)/1e4,b)}function t(a,b){let c;return{offset:b,value:c}=(0,j.readUInt8)(a,b),new j.Result(!!c,b)}function u(a,b,c,d){switch(c.type.name){case"Null":return new j.Result(null,b);case"TinyInt":return l(a,b);case"SmallInt":return m(a,b);case"Int":return n(a,b);case"BigInt":return o(a,b);case"IntN":{let c;switch({offset:b,value:c}=(0,j.readUInt8)(a,b),c){case 0:return new j.Result(null,b);case 1:return l(a,b);case 2:return m(a,b);case 4:return n(a,b);case 8:return o(a,b);default:throw Error("Unsupported dataLength "+c+" for IntN")}}case"Real":return p(a,b);case"Float":return q(a,b);case"FloatN":{let c;switch({offset:b,value:c}=(0,j.readUInt8)(a,b),c){case 0:return new j.Result(null,b);case 4:return p(a,b);case 8:return q(a,b);default:throw Error("Unsupported dataLength "+c+" for FloatN")}}case"SmallMoney":return r(a,b);case"Money":return s(a,b);case"MoneyN":{let c;switch({offset:b,value:c}=(0,j.readUInt8)(a,b),c){case 0:return new j.Result(null,b);case 4:return r(a,b);case 8:return s(a,b);default:throw Error("Unsupported dataLength "+c+" for MoneyN")}}case"Bit":return t(a,b);case"BitN":{let c;switch({offset:b,value:c}=(0,j.readUInt8)(a,b),c){case 0:return new j.Result(null,b);case 1:return t(a,b);default:throw Error("Unsupported dataLength "+c+" for BitN")}}case"VarChar":case"Char":{let d,e=c.collation.codepage;if({offset:b,value:d}=(0,j.readUInt16LE)(a,b),65535===d)return new j.Result(null,b);return z(a,b,d,e)}case"NVarChar":case"NChar":{let c;if({offset:b,value:c}=(0,j.readUInt16LE)(a,b),65535===c)return new j.Result(null,b);return A(a,b,c)}case"VarBinary":case"Binary":{let c;if({offset:b,value:c}=(0,j.readUInt16LE)(a,b),65535===c)return new j.Result(null,b);return y(a,b,c)}case"Text":{let d,e;if({offset:b,value:d}=(0,j.readUInt8)(a,b),0===d)return new j.Result(null,b);return{offset:b}=y(a,b,d),{offset:b}=y(a,b,8),{offset:b,value:e}=(0,j.readUInt32LE)(a,b),z(a,b,e,c.collation.codepage)}case"NText":{let c,d;if({offset:b,value:c}=(0,j.readUInt8)(a,b),0===c)return new j.Result(null,b);return{offset:b}=y(a,b,c),{offset:b}=y(a,b,8),{offset:b,value:d}=(0,j.readUInt32LE)(a,b),A(a,b,d)}case"Image":{let c,d;if({offset:b,value:c}=(0,j.readUInt8)(a,b),0===c)return new j.Result(null,b);return{offset:b}=y(a,b,c),{offset:b}=y(a,b,8),{offset:b,value:d}=(0,j.readUInt32LE)(a,b),y(a,b,d)}case"SmallDateTime":return C(a,b,d.useUTC);case"DateTime":return D(a,b,d.useUTC);case"DateTimeN":{let c;switch({offset:b,value:c}=(0,j.readUInt8)(a,b),c){case 0:return new j.Result(null,b);case 4:return C(a,b,d.useUTC);case 8:return D(a,b,d.useUTC);default:throw Error("Unsupported dataLength "+c+" for DateTimeN")}}case"Time":{let e;if({offset:b,value:e}=(0,j.readUInt8)(a,b),0===e)return new j.Result(null,b);return E(a,b,e,c.scale,d.useUTC)}case"Date":{let c;if({offset:b,value:c}=(0,j.readUInt8)(a,b),0===c)return new j.Result(null,b);return F(a,b,d.useUTC)}case"DateTime2":{let e;if({offset:b,value:e}=(0,j.readUInt8)(a,b),0===e)return new j.Result(null,b);return G(a,b,e,c.scale,d.useUTC)}case"DateTimeOffset":{let d;if({offset:b,value:d}=(0,j.readUInt8)(a,b),0===d)return new j.Result(null,b);return H(a,b,d,c.scale)}case"NumericN":case"DecimalN":{let d;if({offset:b,value:d}=(0,j.readUInt8)(a,b),0===d)return new j.Result(null,b);return x(a,b,d,c.precision,c.scale)}case"UniqueIdentifier":{let c;switch({offset:b,value:c}=(0,j.readUInt8)(a,b),c){case 0:return new j.Result(null,b);case 16:return w(a,b,d);default:throw Error((0,h.sprintf)("Unsupported guid size %d",c-1))}}case"Variant":{let c;if({offset:b,value:c}=(0,j.readUInt32LE)(a,b),0===c)return new j.Result(null,b);return function(a,b,c,d){let g,h;({value:g,offset:b}=(0,j.readUInt8)(a,b));let i=f.TYPE[g];switch({value:h,offset:b}=(0,j.readUInt8)(a,b),d=d-h-2,i.name){case"UniqueIdentifier":return w(a,b,c);case"Bit":return t(a,b);case"TinyInt":return l(a,b);case"SmallInt":return m(a,b);case"Int":return n(a,b);case"BigInt":return o(a,b);case"SmallDateTime":return C(a,b,c.useUTC);case"DateTime":return D(a,b,c.useUTC);case"Real":return p(a,b);case"Float":return q(a,b);case"SmallMoney":return r(a,b);case"Money":return s(a,b);case"Date":return F(a,b,c.useUTC);case"Time":{let e;return{value:e,offset:b}=(0,j.readUInt8)(a,b),E(a,b,d,e,c.useUTC)}case"DateTime2":{let e;return{value:e,offset:b}=(0,j.readUInt8)(a,b),G(a,b,d,e,c.useUTC)}case"DateTimeOffset":{let c;return{value:c,offset:b}=(0,j.readUInt8)(a,b),H(a,b,d,c)}case"VarBinary":case"Binary":return{offset:b}=(0,j.readUInt16LE)(a,b),y(a,b,d);case"NumericN":case"DecimalN":{let c,e;return{value:c,offset:b}=(0,j.readUInt8)(a,b),{value:e,offset:b}=(0,j.readUInt8)(a,b),x(a,b,d,c,e)}case"VarChar":case"Char":{let c;return{offset:b}=(0,j.readUInt16LE)(a,b),{value:c,offset:b}=(0,e.readCollation)(a,b),z(a,b,d,c.codepage)}case"NVarChar":case"NChar":return{offset:b}=(0,j.readUInt16LE)(a,b),{offset:b}=(0,e.readCollation)(a,b),A(a,b,d);default:throw Error("Invalid type!")}}(a,b,d,c)}default:throw Error("Invalid type!")}}function v(a){switch(a.type.name){case"VarChar":case"NVarChar":case"VarBinary":return 65535===a.dataLength;case"Xml":case"UDT":return!0}}function w(a,b,c){let d;return{value:d,offset:b}=y(a,b,16),new j.Result(c.lowerCaseGuids?(0,i.bufferToLowerCaseGuid)(d):(0,i.bufferToUpperCaseGuid)(d),b)}function x(a,b,c,d,e){let f,g;if({offset:b,value:f}=(0,j.readUInt8)(a,b),f=1===f?1:-1,5===c)({offset:b,value:g}=(0,j.readUInt32LE)(a,b));else if(9===c)({offset:b,value:g}=(0,j.readUNumeric64LE)(a,b));else if(13===c)({offset:b,value:g}=(0,j.readUNumeric96LE)(a,b));else if(17===c)({offset:b,value:g}=(0,j.readUNumeric128LE)(a,b));else throw Error((0,h.sprintf)("Unsupported numeric dataLength %d",c));return new j.Result(g*f/Math.pow(10,e),b)}function y(a,b,c){if(a.length<b+c)throw new j.NotEnoughDataError(b+c);return new j.Result(a.slice(b,b+c),b+c)}function z(a,b,c,d){if(a.length<b+c)throw new j.NotEnoughDataError(b+c);return new j.Result(g.default.decode(a.slice(b,b+c),d??"utf8"),b+c)}function A(a,b,c){if(a.length<b+c)throw new j.NotEnoughDataError(b+c);return new j.Result(a.toString("ucs2",b,b+c),b+c)}async function B(a){for(;a.buffer.length<a.position+8;)await a.waitForChunk();let b=a.buffer.readBigUInt64LE(a.position);if(a.position+=8,0xffffffffffffffffn===b)return null;let c=[],d=0;for(;;){for(;a.buffer.length<a.position+4;)await a.waitForChunk();let b=a.buffer.readUInt32LE(a.position);if(a.position+=4,!b)break;for(;a.buffer.length<a.position+b;)await a.waitForChunk();c.push(a.buffer.slice(a.position,a.position+b)),a.position+=b,d+=b}if(0xfffffffffffffffen!==b&&d!==Number(b))throw Error("Partially Length-prefixed Bytes unmatched lengths : expected "+b+", but got "+d+" bytes");return c}function C(a,b,c){let d,e,f;return{offset:b,value:d}=(0,j.readUInt16LE)(a,b),{offset:b,value:e}=(0,j.readUInt16LE)(a,b),f=c?new Date(Date.UTC(1900,0,1+d,0,e)):new Date(1900,0,1+d,0,e),new j.Result(f,b)}function D(a,b,c){let d,e,f;({offset:b,value:d}=(0,j.readInt32LE)(a,b)),{offset:b,value:e}=(0,j.readInt32LE)(a,b);let g=Math.round(e*k);return f=c?new Date(Date.UTC(1900,0,1+d,0,0,0,g)):new Date(1900,0,1+d,0,0,0,g),new j.Result(f,b)}function E(a,b,c,d,e){let f,g;switch(c){case 3:({value:f,offset:b}=(0,j.readUInt24LE)(a,b));break;case 4:({value:f,offset:b}=(0,j.readUInt32LE)(a,b));break;case 5:({value:f,offset:b}=(0,j.readUInt40LE)(a,b));break;default:throw Error("unreachable")}if(d<7)for(let a=d;a<7;a++)f*=10;return Object.defineProperty(g=e?new Date(Date.UTC(1970,0,1,0,0,0,f/1e4)):new Date(1970,0,1,0,0,0,f/1e4),"nanosecondsDelta",{enumerable:!1,value:f%1e4/1e7}),new j.Result(g,b)}function F(a,b,c){let d;return({offset:b,value:d}=(0,j.readUInt24LE)(a,b),c)?new j.Result(new Date(Date.UTC(2e3,0,d-730118)),b):new j.Result(new Date(2e3,0,d-730118),b)}function G(a,b,c,d,e){let f,g,h;return{offset:b,value:f}=E(a,b,c-3,d,e),{offset:b,value:g}=(0,j.readUInt24LE)(a,b),Object.defineProperty(h=e?new Date(Date.UTC(2e3,0,g-730118,0,0,0,+f)):new Date(2e3,0,g-730118,f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()),"nanosecondsDelta",{enumerable:!1,value:f.nanosecondsDelta}),new j.Result(h,b)}function H(a,b,c,d){let e,f;({offset:b,value:e}=E(a,b,c-5,d,!0)),({offset:b,value:f}=(0,j.readUInt24LE)(a,b)),{offset:b}=(0,j.readUInt16LE)(a,b);let g=new Date(Date.UTC(2e3,0,f-730118,0,0,0,+e));return Object.defineProperty(g,"nanosecondsDelta",{enumerable:!1,value:e.nanosecondsDelta}),new j.Result(g,b)}b.exports.readValue=u,b.exports.isPLPStream=v,b.exports.readPLPStream=B},38925,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(92467),e=a.r(6715),f=a.r(85771),g=a.r(44370),h=i(a.r(94584));function i(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(i=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}async function j(a){let b,c,i,j;for(;;){let d=a.buffer,f=a.position;try{({offset:f,value:c}=(0,g.readUInt16LE)(d,f)),({offset:f,value:b}=(0,g.readBVarChar)(d,f)),({offset:f}=(0,g.readUInt8)(d,f)),({offset:f,value:i}=(0,e.readMetadata)(d,f,a.options)),"@"===b.charAt(0)&&(b=b.slice(1))}catch(b){if(b instanceof g.NotEnoughDataError){await a.waitForChunk();continue}throw b}a.position=f;break}for(;;){let b=a.buffer,c=a.position;if((0,f.isPLPStream)(i)){let b=await (0,f.readPLPStream)(a);null===b?j=b:"NVarChar"===i.type.name||"Xml"===i.type.name?j=Buffer.concat(b).toString("ucs2"):"VarChar"===i.type.name?j=h.decode(Buffer.concat(b),i.collation?.codepage??"utf8"):("VarBinary"===i.type.name||"UDT"===i.type.name)&&(j=Buffer.concat(b))}else{try{({value:j,offset:c}=(0,f.readValue)(b,c,i,a.options))}catch(b){if(b instanceof g.NotEnoughDataError){await a.waitForChunk();continue}throw b}a.position=c}break}return new d.ReturnValueToken({paramOrdinal:c,paramName:b,metadata:i,value:j})}c.default=j,b.exports=j},42065,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(92467),e=h(a.r(94584)),f=a.r(85771),g=a.r(44370);function h(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(h=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}async function i(a){let b=[];for(let c of a.colMetadata)for(;;){if((0,f.isPLPStream)(c)){let d=await (0,f.readPLPStream)(a);null===d?b.push({value:d,metadata:c}):"NVarChar"===c.type.name||"Xml"===c.type.name?b.push({value:Buffer.concat(d).toString("ucs2"),metadata:c}):"VarChar"===c.type.name?b.push({value:e.decode(Buffer.concat(d),c.collation?.codepage??"utf8"),metadata:c}):("VarBinary"===c.type.name||"UDT"===c.type.name)&&b.push({value:Buffer.concat(d),metadata:c})}else{let d;try{d=(0,f.readValue)(a.buffer,a.position,c,a.options)}catch(b){if(b instanceof g.NotEnoughDataError){await a.waitForChunk();continue}throw b}a.position=d.offset,b.push({value:d.value,metadata:c})}break}if(!a.options.useColumnNames)return new d.RowToken(b);{let a=Object.create(null);return b.forEach(b=>{let c=b.metadata.colName;null==a[c]&&(a[c]=b)}),new d.RowToken(a)}}c.default=i,b.exports=i},92126,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(92467),e=h(a.r(94584)),f=a.r(85771),g=a.r(44370);function h(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(h=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}async function i(a){let b=a.colMetadata,c=[],h=[],i=Math.ceil(b.length/8);for(;a.buffer.length-a.position<i;)await a.waitForChunk();let j=a.buffer.slice(a.position,a.position+i);a.position+=i;for(let a=0,b=j.length;a<b;a++){let b=j[a];h.push(!!(1&b)),h.push(!!(2&b)),h.push(!!(4&b)),h.push(!!(8&b)),h.push(!!(16&b)),h.push(!!(32&b)),h.push(!!(64&b)),h.push(!!(128&b))}for(let d=0;d<b.length;d++){let i=b[d];if(h[d]){c.push({value:null,metadata:i});continue}for(;;){if((0,f.isPLPStream)(i)){let b=await (0,f.readPLPStream)(a);null===b?c.push({value:b,metadata:i}):"NVarChar"===i.type.name||"Xml"===i.type.name?c.push({value:Buffer.concat(b).toString("ucs2"),metadata:i}):"VarChar"===i.type.name?c.push({value:e.decode(Buffer.concat(b),i.collation?.codepage??"utf8"),metadata:i}):("VarBinary"===i.type.name||"UDT"===i.type.name)&&c.push({value:Buffer.concat(b),metadata:i})}else{let b;try{b=(0,f.readValue)(a.buffer,a.position,i,a.options)}catch(b){if(b instanceof g.NotEnoughDataError){await a.waitForChunk();continue}throw b}a.position=b.offset,c.push({value:b.value,metadata:i})}break}}if(!a.options.useColumnNames)return new d.NBCRowToken(c);{let a=Object.create(null);return c.forEach(b=>{let c=b.metadata.colName;null==a[c]&&(a[c]=b)}),new d.NBCRowToken(a)}}c.default=i,b.exports=i},8107,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(44370),e=a.r(92467);function f(a,b,c){let f,g;if({offset:b,value:f}=(0,d.readUInt16LE)(a,b),a.length<b+f)throw new d.NotEnoughDataError(b+f);let h=a.slice(b,b+f);return b+=f,new d.Result(new e.SSPIToken(((g={}).magic=h.slice(0,8).toString("utf8"),g.type=h.readInt32LE(8),g.domainLen=h.readInt16LE(12),g.domainMax=h.readInt16LE(14),g.domainOffset=h.readInt32LE(16),g.flags=h.readInt32LE(20),g.nonce=h.slice(24,32),g.zeroes=h.slice(32,40),g.targetLen=h.readInt16LE(40),g.targetMax=h.readInt16LE(42),g.targetOffset=h.readInt32LE(44),g.oddData=h.slice(48,56),g.domain=h.slice(56,56+g.domainLen).toString("ucs2"),g.target=h.slice(56+g.domainLen,56+g.domainLen+g.targetLen),g),h),b)}c.default=f,b.exports=f},92585,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(92467),e=s(a.r(25484)),f=a.r(86438),g=s(a.r(95211)),h=a.r(10793),i=s(a.r(15280)),j=s(a.r(9136)),k=s(a.r(68721)),l=s(a.r(41396)),m=s(a.r(62681)),n=s(a.r(38925)),o=s(a.r(42065)),p=s(a.r(92126)),q=s(a.r(8107)),r=a.r(44370);function s(a){return a&&a.__esModule?a:{default:a}}class t{debug;colMetadata;options;iterator;buffer;position;static async *parseTokens(a,b,c,d=[]){let e=new t(a,b,c);for(e.colMetadata=d;;){try{await e.waitForChunk()}catch(a){if(e.position===e.buffer.length)return;throw a}for(;e.buffer.length>=e.position+1;){let a=e.buffer.readUInt8(e.position);e.position+=1;let b=e.readToken(a);void 0!==b&&(yield b)}}}readToken(a){switch(a){case d.TYPE.DONE:return this.readDoneToken();case d.TYPE.DONEPROC:return this.readDoneProcToken();case d.TYPE.DONEINPROC:return this.readDoneInProcToken();case d.TYPE.ERROR:return this.readErrorToken();case d.TYPE.INFO:return this.readInfoToken();case d.TYPE.ENVCHANGE:return this.readEnvChangeToken();case d.TYPE.LOGINACK:return this.readLoginAckToken();case d.TYPE.RETURNSTATUS:return this.readReturnStatusToken();case d.TYPE.ORDER:return this.readOrderToken();case d.TYPE.FEDAUTHINFO:return this.readFedAuthInfoToken();case d.TYPE.SSPI:return this.readSSPIToken();case d.TYPE.COLMETADATA:return this.readColMetadataToken();case d.TYPE.RETURNVALUE:return this.readReturnValueToken();case d.TYPE.ROW:return this.readRowToken();case d.TYPE.NBCROW:return this.readNbcRowToken();case d.TYPE.FEATUREEXTACK:return this.readFeatureExtAckToken();default:throw Error("Unknown type: "+a)}}readFeatureExtAckToken(){let a;try{a=(0,j.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readFeatureExtAckToken());throw a}return this.position=a.offset,a.value}async readNbcRowToken(){return await (0,p.default)(this)}async readReturnValueToken(){return await (0,n.default)(this)}async readColMetadataToken(){let a=await (0,e.default)(this);return this.colMetadata=a.columns,a}readSSPIToken(){let a;try{a=(0,q.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readSSPIToken());throw a}return this.position=a.offset,a.value}readFedAuthInfoToken(){let a;try{a=(0,i.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readFedAuthInfoToken());throw a}return this.position=a.offset,a.value}readOrderToken(){let a;try{a=(0,l.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readOrderToken());throw a}return this.position=a.offset,a.value}readReturnStatusToken(){let a;try{a=(0,m.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readReturnStatusToken());throw a}return this.position=a.offset,a.value}readLoginAckToken(){let a;try{a=(0,k.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readLoginAckToken());throw a}return this.position=a.offset,a.value}readEnvChangeToken(){let a;try{a=(0,g.default)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readEnvChangeToken());throw a}return this.position=a.offset,a.value}readRowToken(){return(0,o.default)(this)}readInfoToken(){let a;try{a=(0,h.infoParser)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readInfoToken());throw a}return this.position=a.offset,a.value}readErrorToken(){let a;try{a=(0,h.errorParser)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readErrorToken());throw a}return this.position=a.offset,a.value}readDoneInProcToken(){let a;try{a=(0,f.doneInProcParser)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneInProcToken());throw a}return this.position=a.offset,a.value}readDoneProcToken(){let a;try{a=(0,f.doneProcParser)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneProcToken());throw a}return this.position=a.offset,a.value}readDoneToken(){let a;try{a=(0,f.doneParser)(this.buffer,this.position,this.options)}catch(a){if(a instanceof r.NotEnoughDataError)return this.waitForChunk().then(()=>this.readDoneToken());throw a}return this.position=a.offset,a.value}constructor(a,b,c){this.debug=b,this.colMetadata=[],this.options=c,this.iterator=(a[Symbol.asyncIterator]||a[Symbol.iterator]).call(a),this.buffer=Buffer.alloc(0),this.position=0}async waitForChunk(){let a=await this.iterator.next();if(a.done)throw Error("unexpected end of data");this.position===this.buffer.length?this.buffer=a.value:this.buffer=Buffer.concat([this.buffer.slice(this.position),a.value]),this.position=0}}c.default=t,b.exports=t},41901,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Parser=void 0;var d,e=a.r(27699),f=(d=a.r(92585))&&d.__esModule?d:{default:d},g=a.r(88947);class h extends e.EventEmitter{constructor(a,b,c,d){super(),this.debug=b,this.options=d,this.parser=g.Readable.from(f.default.parseTokens(a,this.debug,this.options)),this.parser.on("data",a=>{b.token(a),c[a.handlerName](a)}),this.parser.on("drain",()=>{this.emit("drain")}),this.parser.on("end",()=>{this.emit("end")})}pause(){return this.parser.pause()}resume(){return this.parser.resume()}}c.Parser=h},12961,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.Transaction=c.OPERATION_TYPE=c.ISOLATION_LEVEL=void 0,c.assertValidIsolationLevel=function(a,b){if("number"!=typeof a)throw TypeError(`The "${b}" ${b.includes(".")?"property":"argument"} must be of type number. Received type ${typeof a} (${a})`);if(!Number.isInteger(a))throw RangeError(`The value of "${b}" is out of range. It must be an integer. Received: ${a}`);if(!(a>=0&&a<=5))throw RangeError(`The value of "${b}" is out of range. It must be >= 0 && <= 5. Received: ${a}`)},c.isolationLevelByValue=void 0;var d,e=(d=a.r(35952))&&d.__esModule?d:{default:d},f=a.r(67555);let g=c.OPERATION_TYPE={TM_GET_DTC_ADDRESS:0,TM_PROPAGATE_XACT:1,TM_BEGIN_XACT:5,TM_PROMOTE_XACT:6,TM_COMMIT_XACT:7,TM_ROLLBACK_XACT:8,TM_SAVE_XACT:9},h=c.ISOLATION_LEVEL={NO_CHANGE:0,READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5},i=c.isolationLevelByValue={};for(let a in h)i[h[a]]=a;c.Transaction=class{constructor(a,b=h.NO_CHANGE){this.name=a,this.isolationLevel=b,this.outstandingRequestCount=1}beginPayload(a){let b=new e.default(100,"ucs2");return(0,f.writeToTrackingBuffer)(b,a,this.outstandingRequestCount),b.writeUShort(g.TM_BEGIN_XACT),b.writeUInt8(this.isolationLevel),b.writeUInt8(2*this.name.length),b.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield b.data},toString:()=>"Begin Transaction: name="+this.name+", isolationLevel="+i[this.isolationLevel]}}commitPayload(a){let b=new e.default(100,"ascii");return(0,f.writeToTrackingBuffer)(b,a,this.outstandingRequestCount),b.writeUShort(g.TM_COMMIT_XACT),b.writeUInt8(2*this.name.length),b.writeString(this.name,"ucs2"),b.writeUInt8(0),{*[Symbol.iterator](){yield b.data},toString:()=>"Commit Transaction: name="+this.name}}rollbackPayload(a){let b=new e.default(100,"ascii");return(0,f.writeToTrackingBuffer)(b,a,this.outstandingRequestCount),b.writeUShort(g.TM_ROLLBACK_XACT),b.writeUInt8(2*this.name.length),b.writeString(this.name,"ucs2"),b.writeUInt8(0),{*[Symbol.iterator](){yield b.data},toString:()=>"Rollback Transaction: name="+this.name}}savePayload(a){let b=new e.default(100,"ascii");return(0,f.writeToTrackingBuffer)(b,a,this.outstandingRequestCount),b.writeUShort(g.TM_SAVE_XACT),b.writeUInt8(2*this.name.length),b.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield b.data},toString:()=>"Save Transaction: name="+this.name}}isolationLevelToTSQL(){switch(this.isolationLevel){case h.READ_UNCOMMITTED:return"READ UNCOMMITTED";case h.READ_COMMITTED:return"READ COMMITTED";case h.REPEATABLE_READ:return"REPEATABLE READ";case h.SERIALIZABLE:return"SERIALIZABLE";case h.SNAPSHOT:return"SNAPSHOT"}return""}}},12682,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.connectInParallel=g,c.connectInSequence=h,c.lookupAllAddresses=i;var d=f(a.r(4446)),e=f(a.r(57764));function f(a){return a&&a.__esModule?a:{default:a}}async function g(a,b,c){c.throwIfAborted();let e=await i(a.host,b,c);return await new Promise((b,f)=>{let g=Array(e.length),h=[];function i(a){h.push(a),this.removeListener("error",i),this.removeListener("connect",j),this.destroy(),h.length===e.length&&(c.removeEventListener("abort",k),f(AggregateError(h,"Could not connect (parallel)")))}function j(){c.removeEventListener("abort",k);for(let a=0;a<g.length;a++){let b=g[a];this!==b&&(b.removeListener("error",i),b.removeListener("connect",j),b.destroy())}b(this)}let k=()=>{for(let a=0;a<g.length;a++){let b=g[a];b.removeListener("error",i),b.removeListener("connect",j),b.destroy()}f(c.reason)};for(let b=0,c=e.length;b<c;b++){let c=g[b]=d.default.connect({...a,host:e[b].address,family:e[b].family});c.on("error",i),c.on("connect",j)}c.addEventListener("abort",k,{once:!0})})}async function h(a,b,c){c.throwIfAborted();let e=[];for(let f of(await i(a.host,b,c)))try{return await new Promise((b,e)=>{let g=d.default.connect({...a,host:f.address,family:f.family}),h=()=>{g.removeListener("error",i),g.removeListener("connect",j),g.destroy(),e(c.reason)},i=a=>{c.removeEventListener("abort",h),g.removeListener("error",i),g.removeListener("connect",j),g.destroy(),e(a)},j=()=>{c.removeEventListener("abort",h),g.removeListener("error",i),g.removeListener("connect",j),b(g)};c.addEventListener("abort",h,{once:!0}),g.on("error",i),g.on("connect",j)})}catch(a){c.throwIfAborted(),e.push(a);continue}throw AggregateError(e,"Could not connect (sequence)")}async function i(a,b,c){return(c.throwIfAborted(),d.default.isIPv6(a))?[{address:a,family:6}]:d.default.isIPv4(a)?[{address:a,family:4}]:await new Promise((d,f)=>{let g=()=>{f(c.reason)};c.addEventListener("abort",g);let h=e.default.domainToASCII(a);b(""===h?a:h,{all:!0},(a,b)=>{c.removeEventListener("abort",g),a?f(a):d(b)})})}},98433,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.name=void 0,c.name="Tedious"},96240,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createNTLMRequest=function(a){let b=escape(a.domain.toUpperCase()),c=a.workstation?escape(a.workstation.toUpperCase()):"",o=d+e+f+g+h+i+j+l+k+m+n;""===c&&(o-=i);let p=Buffer.alloc(40),q=[p],r=0;return r+=p.write("NTLMSSP",r,7,"ascii"),r=p.writeUInt8(0,r),r=p.writeUInt32LE(1,r),r=p.writeUInt32LE(o,r),r=p.writeUInt16LE(b.length,r),r=p.writeUInt16LE(b.length,r),r=p.writeUInt32LE(p.length+c.length,r),r=p.writeUInt16LE(c.length,r),r=p.writeUInt16LE(c.length,r),r=p.writeUInt32LE(p.length,r),r=p.writeUInt8(5,r),r=p.writeUInt8(0,r),r=p.writeUInt16LE(2195,r),r=p.writeUInt8(0,r),r=p.writeUInt8(0,r),r=p.writeUInt8(0,r),p.writeUInt8(15,r),q.push(Buffer.from(c,"ascii")),q.push(Buffer.from(b,"ascii")),Buffer.concat(q)};let d=1,e=2,f=4,g=512,h=4096,i=8192,j=32768,k=524288,l=0x2000000,m=0x20000000,n=0x80000000},62147,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BulkLoadPayload=void 0;class d{constructor(a){this.bulkLoad=a,this.iterator=this.bulkLoad.rowToPacketTransform[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterator}toString(a=""){return a+"BulkLoad"}}c.BulkLoadPayload=d},39638,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;let d={Sp_Cursor:1,Sp_CursorOpen:2,Sp_CursorPrepare:3,Sp_CursorExecute:4,Sp_CursorPrepExec:5,Sp_CursorUnprepare:6,Sp_CursorFetch:7,Sp_CursorOption:8,Sp_CursorClose:9,Sp_ExecuteSql:10,Sp_Prepare:11,Sp_Execute:12,Sp_PrepExec:13,Sp_PrepExecRpc:14,Sp_Unprepare:15};c.default=d,b.exports=d},12405,a=>{a.v({author:"Mike D Pilsbury <mike.pilsbury@gmail.com>",contributors:["Alex Robson","Arthur Schreiber","Bret Copeland <bret@atlantisflight.org> (https://github.com/bretcope)","Bryan Ross <bryan@rossipedia.com> (https://github.com/rossipedia)","Ciaran Jessup <ciaranj@gmail.com>","Cort Fritz <cfritz@caa.com>","lastonesky","Patrik Simek <patrik@patriksimek.cz>","Phil Dodderidge <pdodde@poyntz.com>","Zach Aller"],name:"tedious",description:"A TDS driver, for connecting to MS SQLServer databases.",keywords:["sql","database","mssql","sqlserver","sql-server","tds","msnodesql","azure"],homepage:"https://github.com/tediousjs/tedious",bugs:"https://github.com/tediousjs/tedious/issues",license:"MIT",version:"19.2.0",main:"./lib/tedious.js",types:"./lib/tedious.d.ts",repository:{type:"git",url:"https://github.com/tediousjs/tedious.git"},engines:{node:">=18.17"},publishConfig:{tag:"next",provenance:!0},dependencies:{"@azure/core-auth":"^1.7.2","@azure/identity":"^4.2.1","@azure/keyvault-keys":"^4.4.0","@js-joda/core":"^5.6.5","@types/node":">=18",bl:"^6.1.4","iconv-lite":"^0.7.0","js-md4":"^0.3.2","native-duplexpair":"^1.0.0","sprintf-js":"^1.1.3"},devDependencies:{"@babel/cli":"^7.28.3","@babel/core":"^7.28.5","@babel/node":"^7.28.0","@babel/preset-env":"^7.28.5","@babel/preset-typescript":"^7.28.5","@babel/register":"^7.28.3","@stylistic/eslint-plugin":"^5.5.0","@types/async":"^3.2.25","@types/chai":"^4.3.20","@types/depd":"^1.1.37","@types/lru-cache":"^5.1.1","@types/mitm":"^1.3.8","@types/mocha":"^10.0.10","@types/sinon":"^21.0.0","@types/sprintf-js":"^1.1.4","@typescript-eslint/eslint-plugin":"^8.46.3","@typescript-eslint/parser":"^8.46.3",async:"^3.2.6","babel-plugin-istanbul":"^7.0.1",chai:"^4.5.0",codecov:"^3.8.3",eslint:"^9.39.1",mitm:"^1.7.3",mocha:"^11.7.5",nyc:"^17.1.0",rimraf:"^5.0.10","semantic-release":"^22.0.12",sinon:"^21.0.0",typedoc:"^0.28.14",typescript:"^5.9.3"},scripts:{docs:"typedoc",lint:"eslint src test --ext .js,.ts && tsc",test:"mocha --forbid-only test/unit test/unit/token test/unit/tracking-buffer","test-integration":"mocha --forbid-only test/integration/","test-all":"mocha --forbid-only test/unit/ test/unit/token/ test/unit/tracking-buffer test/integration/","build:types":"tsc --project tsconfig.build-types.json",build:"rimraf lib && babel src --out-dir lib --extensions .js,.ts && npm run build:types",prepublish:"npm run build","semantic-release":"semantic-release"},babel:{sourceMaps:"both",ignore:["./src/**/*.d.ts"],presets:[["@babel/preset-env",{targets:{node:18}}],["@babel/preset-typescript",{allowDeclareFields:!0}]],plugins:[["@babel/transform-typescript",{allowDeclareFields:!0}]]},mocha:{require:"test/setup.js",timeout:1e4,extension:["js","ts"]},nyc:{sourceMap:!1,instrument:!1,extension:[".ts"]}})},41387,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UnexpectedTokenError=c.TokenHandler=c.RequestTokenHandler=c.Login7TokenHandler=c.InitialSqlTokenHandler=c.AttentionTokenHandler=void 0;var d,e=(d=a.r(10855))&&d.__esModule?d:{default:d},f=a.r(57602);class g extends Error{constructor(a,b){super("Unexpected token `"+b.name+"` in `"+a.constructor.name+"`")}}c.UnexpectedTokenError=g;class h{onInfoMessage(a){throw new g(this,a)}onErrorMessage(a){throw new g(this,a)}onSSPI(a){throw new g(this,a)}onDatabaseChange(a){throw new g(this,a)}onLanguageChange(a){throw new g(this,a)}onCharsetChange(a){throw new g(this,a)}onSqlCollationChange(a){throw new g(this,a)}onRoutingChange(a){throw new g(this,a)}onPacketSizeChange(a){throw new g(this,a)}onResetConnection(a){throw new g(this,a)}onBeginTransaction(a){throw new g(this,a)}onCommitTransaction(a){throw new g(this,a)}onRollbackTransaction(a){throw new g(this,a)}onFedAuthInfo(a){throw new g(this,a)}onFeatureExtAck(a){throw new g(this,a)}onLoginAck(a){throw new g(this,a)}onColMetadata(a){throw new g(this,a)}onOrder(a){throw new g(this,a)}onRow(a){throw new g(this,a)}onReturnStatus(a){throw new g(this,a)}onReturnValue(a){throw new g(this,a)}onDoneProc(a){throw new g(this,a)}onDoneInProc(a){throw new g(this,a)}onDone(a){throw new g(this,a)}onDatabaseMirroringPartner(a){throw new g(this,a)}}c.TokenHandler=h,c.InitialSqlTokenHandler=class extends h{constructor(a){super(),this.connection=a}onInfoMessage(a){this.connection.emit("infoMessage",a)}onErrorMessage(a){this.connection.emit("errorMessage",a)}onDatabaseChange(a){this.connection.emit("databaseChange",a.newValue)}onLanguageChange(a){this.connection.emit("languageChange",a.newValue)}onCharsetChange(a){this.connection.emit("charsetChange",a.newValue)}onSqlCollationChange(a){this.connection.databaseCollation=a.newValue}onPacketSizeChange(a){this.connection.messageIo.packetSize(a.newValue)}onBeginTransaction(a){this.connection.transactionDescriptors.push(a.newValue),this.connection.inTransaction=!0}onCommitTransaction(a){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(a){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(a){this.connection.emit("error",Error("Received 'columnMetadata' when no sqlRequest is in progress")),this.connection.close()}onOrder(a){this.connection.emit("error",Error("Received 'order' when no sqlRequest is in progress")),this.connection.close()}onRow(a){this.connection.emit("error",Error("Received 'row' when no sqlRequest is in progress")),this.connection.close()}onReturnStatus(a){}onReturnValue(a){}onDoneProc(a){}onDoneInProc(a){}onDone(a){}onResetConnection(a){this.connection.emit("resetConnection")}},c.Login7TokenHandler=class extends h{constructor(a){super(),this.loginAckReceived=!1,this.connection=a}onInfoMessage(a){this.connection.emit("infoMessage",a)}onErrorMessage(a){this.connection.emit("errorMessage",a);let b=new f.ConnectionError(a.message,"ELOGIN");this.connection.transientErrorLookup.isTransientError(a.number)&&this.connection.curTransientRetryCount!==this.connection.config.options.maxRetriesOnTransientErrors&&(b.isTransient=!0),this.connection.loginError=b}onSSPI(a){a.ntlmpacket&&(this.connection.ntlmpacket=a.ntlmpacket,this.connection.ntlmpacketBuffer=a.ntlmpacketBuffer)}onDatabaseChange(a){this.connection.emit("databaseChange",a.newValue)}onDatabaseMirroringPartner(a){this.connection.emit("databaseMirroringPartner",a.newValue)}onLanguageChange(a){this.connection.emit("languageChange",a.newValue)}onCharsetChange(a){this.connection.emit("charsetChange",a.newValue)}onSqlCollationChange(a){this.connection.databaseCollation=a.newValue}onFedAuthInfo(a){this.fedAuthInfoToken=a}onFeatureExtAck(a){let{authentication:b}=this.connection.config;"azure-active-directory-password"===b.type||"azure-active-directory-access-token"===b.type||"azure-active-directory-msi-vm"===b.type||"azure-active-directory-msi-app-service"===b.type||"azure-active-directory-service-principal-secret"===b.type||"azure-active-directory-default"===b.type?void 0===a.fedAuth?this.connection.loginError=new f.ConnectionError("Did not receive Active Directory authentication acknowledgement"):0!==a.fedAuth.length&&(this.connection.loginError=new f.ConnectionError(`Active Directory authentication acknowledgment for ${b.type} authentication method includes extra data`)):void 0===a.fedAuth&&void 0===a.utf8Support?this.connection.loginError=new f.ConnectionError("Received acknowledgement for unknown feature"):a.fedAuth&&(this.connection.loginError=new f.ConnectionError("Did not request Active Directory authentication, but received the acknowledgment"))}onLoginAck(a){if(!a.tdsVersion){this.connection.loginError=new f.ConnectionError("Server responded with unknown TDS version.","ETDS");return}if(!a.interface){this.connection.loginError=new f.ConnectionError("Server responded with unsupported interface.","EINTERFACENOTSUPP");return}this.connection.config.options.tdsVersion=a.tdsVersion,this.loginAckReceived=!0}onRoutingChange(a){let[b,c]=a.newValue.server.split("\\");this.routingData={server:b,port:a.newValue.port,instance:c}}onDoneInProc(a){}onDone(a){}onPacketSizeChange(a){this.connection.messageIo.packetSize(a.newValue)}},c.RequestTokenHandler=class extends h{constructor(a,b){super(),this.connection=a,this.request=b,this.errors=[]}onInfoMessage(a){this.connection.emit("infoMessage",a)}onErrorMessage(a){if(this.connection.emit("errorMessage",a),!this.request.canceled){let b=new f.RequestError(a.message,"EREQUEST");b.number=a.number,b.state=a.state,b.class=a.class,b.serverName=a.serverName,b.procName=a.procName,b.lineNumber=a.lineNumber,this.errors.push(b),this.request.error=b,this.request instanceof e.default&&this.errors.length>1&&(this.request.error=AggregateError(this.errors))}}onDatabaseChange(a){this.connection.emit("databaseChange",a.newValue)}onLanguageChange(a){this.connection.emit("languageChange",a.newValue)}onCharsetChange(a){this.connection.emit("charsetChange",a.newValue)}onSqlCollationChange(a){this.connection.databaseCollation=a.newValue}onPacketSizeChange(a){this.connection.messageIo.packetSize(a.newValue)}onBeginTransaction(a){this.connection.transactionDescriptors.push(a.newValue),this.connection.inTransaction=!0}onCommitTransaction(a){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction(a){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata(a){if(!this.request.canceled)if(this.connection.config.options.useColumnNames){let b=Object.create(null);for(let c=0,d=a.columns.length;c<d;c++){let d=a.columns[c];null==b[d.colName]&&(b[d.colName]=d)}this.request.emit("columnMetadata",b)}else this.request.emit("columnMetadata",a.columns)}onOrder(a){this.request.canceled||this.request.emit("order",a.orderColumns)}onRow(a){this.request.canceled||(this.connection.config.options.rowCollectionOnRequestCompletion&&this.request.rows.push(a.columns),this.connection.config.options.rowCollectionOnDone&&this.request.rst.push(a.columns),this.request.emit("row",a.columns))}onReturnStatus(a){this.request.canceled||(this.connection.procReturnStatusValue=a.value)}onReturnValue(a){this.request.canceled||this.request.emit("returnValue",a.paramName,a.value,a.metadata)}onDoneProc(a){!this.request.canceled&&(a.sqlError&&!this.request.error&&(this.request.error=new f.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("doneProc",a.rowCount,a.more,this.connection.procReturnStatusValue,this.request.rst),this.connection.procReturnStatusValue=void 0,void 0!==a.rowCount&&(this.request.rowCount+=a.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDoneInProc(a){!this.request.canceled&&(this.request.emit("doneInProc",a.rowCount,a.more,this.request.rst),void 0!==a.rowCount&&(this.request.rowCount+=a.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onDone(a){!this.request.canceled&&(a.sqlError&&!this.request.error&&(this.request.error=new f.RequestError("An unknown error has occurred.","UNKNOWN")),this.request.emit("done",a.rowCount,a.more,this.request.rst),void 0!==a.rowCount&&(this.request.rowCount+=a.rowCount),this.connection.config.options.rowCollectionOnDone&&(this.request.rst=[]))}onResetConnection(a){this.connection.emit("resetConnection")}},c.AttentionTokenHandler=class extends h{constructor(a,b){super(),this.connection=a,this.request=b,this.attentionReceived=!1}onDone(a){a.attention&&(this.attentionReceived=!0)}}},95912,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=O(a.r(54799)),e=O(a.r(46786)),f=N(a.r(55004)),g=N(a.r(4446)),h=O(a.r(79594)),i=O(a.r(12249)),j=a.r(88947),k=a.r(40411),l=a.r(19756),m=O(a.r(45489)),n=O(a.r(98215)),o=a.r(27699),p=a.r(263),q=a.r(97122),r=a.r(85349),s=O(a.r(32386)),t=O(a.r(18575)),u=O(a.r(6008)),v=O(a.r(10855)),w=O(a.r(82811)),x=O(a.r(56163)),y=O(a.r(86137)),z=a.r(41901),A=a.r(12961),B=a.r(57602),C=a.r(12682),D=a.r(98433),E=a.r(7033),F=O(a.r(67589)),G=a.r(96240),H=a.r(31156),I=a.r(62147),J=O(a.r(39638)),K=a.r(12405),L=a.r(92509),M=a.r(41387);function N(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(N=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=typeof a&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(let b in a)"default"!==b&&({}).hasOwnProperty.call(a,b)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,b))&&(f.get||f.set)?e(g,b,f):g[b]=a[b]);return g})(a,b)}function O(a){return a&&a.__esModule?a:{default:a}}function P(){let a,b;return{promise:new Promise((c,d)=>{a=c,b=d}),resolve:a,reject:b}}class Q extends o.EventEmitter{constructor(a){let b;if(super(),"object"!=typeof a||null===a)throw TypeError('The "config" argument is required and must be of type Object.');if("string"!=typeof a.server)throw TypeError('The "config.server" property is required and must be of type string.');if(this.fedAuthRequired=!1,void 0!==a.authentication){if("object"!=typeof a.authentication||null===a.authentication)throw TypeError('The "config.authentication" property must be of type Object.');const c=a.authentication.type,d=void 0===a.authentication.options?{}:a.authentication.options;if("string"!=typeof c)throw TypeError('The "config.authentication.type" property must be of type string.');if("default"!==c&&"ntlm"!==c&&"token-credential"!==c&&"azure-active-directory-password"!==c&&"azure-active-directory-access-token"!==c&&"azure-active-directory-msi-vm"!==c&&"azure-active-directory-msi-app-service"!==c&&"azure-active-directory-service-principal-secret"!==c&&"azure-active-directory-default"!==c)throw TypeError('The "type" property must one of "default", "ntlm", "token-credential", "azure-active-directory-password", "azure-active-directory-access-token", "azure-active-directory-default", "azure-active-directory-msi-vm" or "azure-active-directory-msi-app-service" or "azure-active-directory-service-principal-secret".');if("object"!=typeof d||null===d)throw TypeError('The "config.authentication.options" property must be of type object.');if("ntlm"===c){if("string"!=typeof d.domain)throw TypeError('The "config.authentication.options.domain" property must be of type string.');if(void 0!==d.userName&&"string"!=typeof d.userName)throw TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==d.password&&"string"!=typeof d.password)throw TypeError('The "config.authentication.options.password" property must be of type string.');b={type:"ntlm",options:{userName:d.userName,password:d.password,domain:d.domain&&d.domain.toUpperCase()}}}else if("token-credential"===c){if(!(0,l.isTokenCredential)(d.credential))throw TypeError('The "config.authentication.options.credential" property must be an instance of the token credential class.');b={type:"token-credential",options:{credential:d.credential}}}else if("azure-active-directory-password"===c){if("string"!=typeof d.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');if(void 0!==d.userName&&"string"!=typeof d.userName)throw TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==d.password&&"string"!=typeof d.password)throw TypeError('The "config.authentication.options.password" property must be of type string.');if(void 0!==d.tenantId&&"string"!=typeof d.tenantId)throw TypeError('The "config.authentication.options.tenantId" property must be of type string.');b={type:"azure-active-directory-password",options:{userName:d.userName,password:d.password,tenantId:d.tenantId,clientId:d.clientId}}}else if("azure-active-directory-access-token"===c){if("string"!=typeof d.token)throw TypeError('The "config.authentication.options.token" property must be of type string.');b={type:"azure-active-directory-access-token",options:{token:d.token}}}else if("azure-active-directory-msi-vm"===c){if(void 0!==d.clientId&&"string"!=typeof d.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');b={type:"azure-active-directory-msi-vm",options:{clientId:d.clientId}}}else if("azure-active-directory-default"===c){if(void 0!==d.clientId&&"string"!=typeof d.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');b={type:"azure-active-directory-default",options:{clientId:d.clientId}}}else if("azure-active-directory-msi-app-service"===c){if(void 0!==d.clientId&&"string"!=typeof d.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');b={type:"azure-active-directory-msi-app-service",options:{clientId:d.clientId}}}else if("azure-active-directory-service-principal-secret"===c){if("string"!=typeof d.clientId)throw TypeError('The "config.authentication.options.clientId" property must be of type string.');if("string"!=typeof d.clientSecret)throw TypeError('The "config.authentication.options.clientSecret" property must be of type string.');if("string"!=typeof d.tenantId)throw TypeError('The "config.authentication.options.tenantId" property must be of type string.');b={type:"azure-active-directory-service-principal-secret",options:{clientId:d.clientId,clientSecret:d.clientSecret,tenantId:d.tenantId}}}else{if(void 0!==d.userName&&"string"!=typeof d.userName)throw TypeError('The "config.authentication.options.userName" property must be of type string.');if(void 0!==d.password&&"string"!=typeof d.password)throw TypeError('The "config.authentication.options.password" property must be of type string.');b={type:"default",options:{userName:d.userName,password:d.password}}}}else b={type:"default",options:{userName:void 0,password:void 0}};if(this.config={server:a.server,authentication:b,options:{abortTransactionOnError:!1,appName:void 0,camelCaseColumns:!1,cancelTimeout:5e3,columnEncryptionKeyCacheTTL:72e5,columnEncryptionSetting:!1,columnNameReplacer:void 0,connectionRetryInterval:500,connectTimeout:15e3,connector:void 0,connectionIsolationLevel:A.ISOLATION_LEVEL.READ_COMMITTED,cryptoCredentialsDetails:{},database:void 0,datefirst:7,dateFormat:"mdy",debug:{data:!1,packet:!1,payload:!1,token:!1},enableAnsiNull:!0,enableAnsiNullDefault:!0,enableAnsiPadding:!0,enableAnsiWarnings:!0,enableArithAbort:!0,enableConcatNullYieldsNull:!0,enableCursorCloseOnCommit:null,enableImplicitTransactions:!1,enableNumericRoundabort:!1,enableQuotedIdentifier:!0,encrypt:!0,fallbackToDefaultDb:!1,encryptionKeyStoreProviders:void 0,instanceName:void 0,isolationLevel:A.ISOLATION_LEVEL.READ_COMMITTED,language:"us_english",localAddress:void 0,maxRetriesOnTransientErrors:3,multiSubnetFailover:!1,packetSize:4096,port:1433,readOnlyIntent:!1,requestTimeout:15e3,rowCollectionOnDone:!1,rowCollectionOnRequestCompletion:!1,serverName:void 0,serverSupportsColumnEncryption:!1,tdsVersion:"7_4",textsize:0x7fffffff,trustedServerNameAE:void 0,trustServerCertificate:!1,useColumnNames:!1,useUTC:!0,workstationId:void 0,lowerCaseGuids:!1}},a.options){if(a.options.port&&a.options.instanceName)throw Error("Port and instanceName are mutually exclusive, but "+a.options.port+" and "+a.options.instanceName+" provided");if(void 0!==a.options.abortTransactionOnError){if("boolean"!=typeof a.options.abortTransactionOnError&&null!==a.options.abortTransactionOnError)throw TypeError('The "config.options.abortTransactionOnError" property must be of type string or null.');this.config.options.abortTransactionOnError=a.options.abortTransactionOnError}if(void 0!==a.options.appName){if("string"!=typeof a.options.appName)throw TypeError('The "config.options.appName" property must be of type string.');this.config.options.appName=a.options.appName}if(void 0!==a.options.camelCaseColumns){if("boolean"!=typeof a.options.camelCaseColumns)throw TypeError('The "config.options.camelCaseColumns" property must be of type boolean.');this.config.options.camelCaseColumns=a.options.camelCaseColumns}if(void 0!==a.options.cancelTimeout){if("number"!=typeof a.options.cancelTimeout)throw TypeError('The "config.options.cancelTimeout" property must be of type number.');this.config.options.cancelTimeout=a.options.cancelTimeout}if(a.options.columnNameReplacer){if("function"!=typeof a.options.columnNameReplacer)throw TypeError('The "config.options.cancelTimeout" property must be of type function.');this.config.options.columnNameReplacer=a.options.columnNameReplacer}if(void 0!==a.options.connectionIsolationLevel&&((0,A.assertValidIsolationLevel)(a.options.connectionIsolationLevel,"config.options.connectionIsolationLevel"),this.config.options.connectionIsolationLevel=a.options.connectionIsolationLevel),void 0!==a.options.connectTimeout){if("number"!=typeof a.options.connectTimeout)throw TypeError('The "config.options.connectTimeout" property must be of type number.');this.config.options.connectTimeout=a.options.connectTimeout}if(void 0!==a.options.connector){if("function"!=typeof a.options.connector)throw TypeError('The "config.options.connector" property must be a function.');this.config.options.connector=a.options.connector}if(void 0!==a.options.cryptoCredentialsDetails){if("object"!=typeof a.options.cryptoCredentialsDetails||null===a.options.cryptoCredentialsDetails)throw TypeError('The "config.options.cryptoCredentialsDetails" property must be of type Object.');this.config.options.cryptoCredentialsDetails=a.options.cryptoCredentialsDetails}if(void 0!==a.options.database){if("string"!=typeof a.options.database)throw TypeError('The "config.options.database" property must be of type string.');this.config.options.database=a.options.database}if(void 0!==a.options.datefirst){if("number"!=typeof a.options.datefirst&&null!==a.options.datefirst)throw TypeError('The "config.options.datefirst" property must be of type number.');if(null!==a.options.datefirst&&(a.options.datefirst<1||a.options.datefirst>7))throw RangeError('The "config.options.datefirst" property must be >= 1 and <= 7');this.config.options.datefirst=a.options.datefirst}if(void 0!==a.options.dateFormat){if("string"!=typeof a.options.dateFormat&&null!==a.options.dateFormat)throw TypeError('The "config.options.dateFormat" property must be of type string or null.');this.config.options.dateFormat=a.options.dateFormat}if(a.options.debug){if(void 0!==a.options.debug.data){if("boolean"!=typeof a.options.debug.data)throw TypeError('The "config.options.debug.data" property must be of type boolean.');this.config.options.debug.data=a.options.debug.data}if(void 0!==a.options.debug.packet){if("boolean"!=typeof a.options.debug.packet)throw TypeError('The "config.options.debug.packet" property must be of type boolean.');this.config.options.debug.packet=a.options.debug.packet}if(void 0!==a.options.debug.payload){if("boolean"!=typeof a.options.debug.payload)throw TypeError('The "config.options.debug.payload" property must be of type boolean.');this.config.options.debug.payload=a.options.debug.payload}if(void 0!==a.options.debug.token){if("boolean"!=typeof a.options.debug.token)throw TypeError('The "config.options.debug.token" property must be of type boolean.');this.config.options.debug.token=a.options.debug.token}}if(void 0!==a.options.enableAnsiNull){if("boolean"!=typeof a.options.enableAnsiNull&&null!==a.options.enableAnsiNull)throw TypeError('The "config.options.enableAnsiNull" property must be of type boolean or null.');this.config.options.enableAnsiNull=a.options.enableAnsiNull}if(void 0!==a.options.enableAnsiNullDefault){if("boolean"!=typeof a.options.enableAnsiNullDefault&&null!==a.options.enableAnsiNullDefault)throw TypeError('The "config.options.enableAnsiNullDefault" property must be of type boolean or null.');this.config.options.enableAnsiNullDefault=a.options.enableAnsiNullDefault}if(void 0!==a.options.enableAnsiPadding){if("boolean"!=typeof a.options.enableAnsiPadding&&null!==a.options.enableAnsiPadding)throw TypeError('The "config.options.enableAnsiPadding" property must be of type boolean or null.');this.config.options.enableAnsiPadding=a.options.enableAnsiPadding}if(void 0!==a.options.enableAnsiWarnings){if("boolean"!=typeof a.options.enableAnsiWarnings&&null!==a.options.enableAnsiWarnings)throw TypeError('The "config.options.enableAnsiWarnings" property must be of type boolean or null.');this.config.options.enableAnsiWarnings=a.options.enableAnsiWarnings}if(void 0!==a.options.enableArithAbort){if("boolean"!=typeof a.options.enableArithAbort&&null!==a.options.enableArithAbort)throw TypeError('The "config.options.enableArithAbort" property must be of type boolean or null.');this.config.options.enableArithAbort=a.options.enableArithAbort}if(void 0!==a.options.enableConcatNullYieldsNull){if("boolean"!=typeof a.options.enableConcatNullYieldsNull&&null!==a.options.enableConcatNullYieldsNull)throw TypeError('The "config.options.enableConcatNullYieldsNull" property must be of type boolean or null.');this.config.options.enableConcatNullYieldsNull=a.options.enableConcatNullYieldsNull}if(void 0!==a.options.enableCursorCloseOnCommit){if("boolean"!=typeof a.options.enableCursorCloseOnCommit&&null!==a.options.enableCursorCloseOnCommit)throw TypeError('The "config.options.enableCursorCloseOnCommit" property must be of type boolean or null.');this.config.options.enableCursorCloseOnCommit=a.options.enableCursorCloseOnCommit}if(void 0!==a.options.enableImplicitTransactions){if("boolean"!=typeof a.options.enableImplicitTransactions&&null!==a.options.enableImplicitTransactions)throw TypeError('The "config.options.enableImplicitTransactions" property must be of type boolean or null.');this.config.options.enableImplicitTransactions=a.options.enableImplicitTransactions}if(void 0!==a.options.enableNumericRoundabort){if("boolean"!=typeof a.options.enableNumericRoundabort&&null!==a.options.enableNumericRoundabort)throw TypeError('The "config.options.enableNumericRoundabort" property must be of type boolean or null.');this.config.options.enableNumericRoundabort=a.options.enableNumericRoundabort}if(void 0!==a.options.enableQuotedIdentifier){if("boolean"!=typeof a.options.enableQuotedIdentifier&&null!==a.options.enableQuotedIdentifier)throw TypeError('The "config.options.enableQuotedIdentifier" property must be of type boolean or null.');this.config.options.enableQuotedIdentifier=a.options.enableQuotedIdentifier}if(void 0!==a.options.encrypt){if("boolean"!=typeof a.options.encrypt&&"strict"!==a.options.encrypt)throw TypeError('The "encrypt" property must be set to "strict", or of type boolean.');this.config.options.encrypt=a.options.encrypt}if(void 0!==a.options.fallbackToDefaultDb){if("boolean"!=typeof a.options.fallbackToDefaultDb)throw TypeError('The "config.options.fallbackToDefaultDb" property must be of type boolean.');this.config.options.fallbackToDefaultDb=a.options.fallbackToDefaultDb}if(void 0!==a.options.instanceName){if("string"!=typeof a.options.instanceName)throw TypeError('The "config.options.instanceName" property must be of type string.');this.config.options.instanceName=a.options.instanceName,this.config.options.port=void 0}if(void 0!==a.options.isolationLevel&&((0,A.assertValidIsolationLevel)(a.options.isolationLevel,"config.options.isolationLevel"),this.config.options.isolationLevel=a.options.isolationLevel),void 0!==a.options.language){if("string"!=typeof a.options.language&&null!==a.options.language)throw TypeError('The "config.options.language" property must be of type string or null.');this.config.options.language=a.options.language}if(void 0!==a.options.localAddress){if("string"!=typeof a.options.localAddress)throw TypeError('The "config.options.localAddress" property must be of type string.');this.config.options.localAddress=a.options.localAddress}if(void 0!==a.options.multiSubnetFailover){if("boolean"!=typeof a.options.multiSubnetFailover)throw TypeError('The "config.options.multiSubnetFailover" property must be of type boolean.');this.config.options.multiSubnetFailover=a.options.multiSubnetFailover}if(void 0!==a.options.packetSize){if("number"!=typeof a.options.packetSize)throw TypeError('The "config.options.packetSize" property must be of type number.');this.config.options.packetSize=a.options.packetSize}if(void 0!==a.options.port){if("number"!=typeof a.options.port)throw TypeError('The "config.options.port" property must be of type number.');if(a.options.port<=0||a.options.port>=65536)throw RangeError('The "config.options.port" property must be > 0 and < 65536');this.config.options.port=a.options.port,this.config.options.instanceName=void 0}if(void 0!==a.options.readOnlyIntent){if("boolean"!=typeof a.options.readOnlyIntent)throw TypeError('The "config.options.readOnlyIntent" property must be of type boolean.');this.config.options.readOnlyIntent=a.options.readOnlyIntent}if(void 0!==a.options.requestTimeout){if("number"!=typeof a.options.requestTimeout)throw TypeError('The "config.options.requestTimeout" property must be of type number.');this.config.options.requestTimeout=a.options.requestTimeout}if(void 0!==a.options.maxRetriesOnTransientErrors){if("number"!=typeof a.options.maxRetriesOnTransientErrors)throw TypeError('The "config.options.maxRetriesOnTransientErrors" property must be of type number.');if(a.options.maxRetriesOnTransientErrors<0)throw TypeError('The "config.options.maxRetriesOnTransientErrors" property must be equal or greater than 0.');this.config.options.maxRetriesOnTransientErrors=a.options.maxRetriesOnTransientErrors}if(void 0!==a.options.connectionRetryInterval){if("number"!=typeof a.options.connectionRetryInterval)throw TypeError('The "config.options.connectionRetryInterval" property must be of type number.');if(a.options.connectionRetryInterval<=0)throw TypeError('The "config.options.connectionRetryInterval" property must be greater than 0.');this.config.options.connectionRetryInterval=a.options.connectionRetryInterval}if(void 0!==a.options.rowCollectionOnDone){if("boolean"!=typeof a.options.rowCollectionOnDone)throw TypeError('The "config.options.rowCollectionOnDone" property must be of type boolean.');this.config.options.rowCollectionOnDone=a.options.rowCollectionOnDone}if(void 0!==a.options.rowCollectionOnRequestCompletion){if("boolean"!=typeof a.options.rowCollectionOnRequestCompletion)throw TypeError('The "config.options.rowCollectionOnRequestCompletion" property must be of type boolean.');this.config.options.rowCollectionOnRequestCompletion=a.options.rowCollectionOnRequestCompletion}if(void 0!==a.options.tdsVersion){if("string"!=typeof a.options.tdsVersion)throw TypeError('The "config.options.tdsVersion" property must be of type string.');this.config.options.tdsVersion=a.options.tdsVersion}if(void 0!==a.options.textsize){if("number"!=typeof a.options.textsize&&null!==a.options.textsize)throw TypeError('The "config.options.textsize" property must be of type number or null.');if(a.options.textsize>0x7fffffff)throw TypeError('The "config.options.textsize" can\'t be greater than 2147483647.');if(a.options.textsize<-1)throw TypeError('The "config.options.textsize" can\'t be smaller than -1.');this.config.options.textsize=0|a.options.textsize}if(void 0!==a.options.trustServerCertificate){if("boolean"!=typeof a.options.trustServerCertificate)throw TypeError('The "config.options.trustServerCertificate" property must be of type boolean.');this.config.options.trustServerCertificate=a.options.trustServerCertificate}if(void 0!==a.options.serverName){if("string"!=typeof a.options.serverName)throw TypeError('The "config.options.serverName" property must be of type string.');this.config.options.serverName=a.options.serverName}if(void 0!==a.options.useColumnNames){if("boolean"!=typeof a.options.useColumnNames)throw TypeError('The "config.options.useColumnNames" property must be of type boolean.');this.config.options.useColumnNames=a.options.useColumnNames}if(void 0!==a.options.useUTC){if("boolean"!=typeof a.options.useUTC)throw TypeError('The "config.options.useUTC" property must be of type boolean.');this.config.options.useUTC=a.options.useUTC}if(void 0!==a.options.workstationId){if("string"!=typeof a.options.workstationId)throw TypeError('The "config.options.workstationId" property must be of type string.');this.config.options.workstationId=a.options.workstationId}if(void 0!==a.options.lowerCaseGuids){if("boolean"!=typeof a.options.lowerCaseGuids)throw TypeError('The "config.options.lowerCaseGuids" property must be of type boolean.');this.config.options.lowerCaseGuids=a.options.lowerCaseGuids}}this.secureContextOptions=this.config.options.cryptoCredentialsDetails,void 0===this.secureContextOptions.secureOptions&&(this.secureContextOptions=Object.create(this.secureContextOptions,{secureOptions:{value:i.default.SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS}})),this.debug=this.createDebug(),this.inTransaction=!1,this.transactionDescriptors=[Buffer.from([0,0,0,0,0,0,0,0])],this.transactionDepth=0,this.isSqlBatch=!1,this.closed=!1,this.messageBuffer=Buffer.alloc(0),this.curTransientRetryCount=0,this.transientErrorLookup=new q.TransientErrorLookup,this.state=this.STATE.INITIALIZED,this._cancelAfterRequestSent=()=>{this.messageIo.sendMessage(r.TYPE.ATTENTION),this.createCancelTimer()},this._onSocketClose=()=>{this.socketClose()},this._onSocketEnd=()=>{this.socketEnd()},this._onSocketError=a=>{this.dispatchEvent("socketError",a),process.nextTick(()=>{this.emit("error",this.wrapSocketError(a))})}}connect(a){if(this.state!==this.STATE.INITIALIZED)throw new B.ConnectionError("`.connect` can not be called on a Connection in `"+this.state.name+"` state.");if(a){let b=b=>{this.removeListener("error",c),a(b)},c=c=>{this.removeListener("connect",b),a(c)};this.once("connect",b),this.once("error",c)}this.transitionTo(this.STATE.CONNECTING),this.initialiseConnection().then(()=>{process.nextTick(()=>{this.emit("connect")})},a=>{this.transitionTo(this.STATE.FINAL),this.closed=!0,process.nextTick(()=>{this.emit("connect",a)}),process.nextTick(()=>{this.emit("end")})})}on(a,b){return super.on(a,b)}emit(a,...b){return super.emit(a,...b)}close(){this.transitionTo(this.STATE.FINAL),this.cleanupConnection()}async initialiseConnection(){let a=new AbortController,b=setTimeout(()=>{let b=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,c=this.routingData?this.routingData.server:this.config.server,d=this.routingData?`:${this.routingData.port}`:b,e=this.routingData?` (redirected from ${this.config.server}${b})`:"",f=`Failed to connect to ${c}${d}${e} in ${this.config.options.connectTimeout}ms`;this.debug.log(f),a.abort(new B.ConnectionError(f,"ETIMEOUT"))},this.config.options.connectTimeout);try{let b,d=a.signal,e=this.config.options.port;if(!e)try{e=await (0,p.instanceLookup)({server:this.config.server,instanceName:this.config.options.instanceName,timeout:this.config.options.connectTimeout,signal:d})}catch(a){throw d.throwIfAborted(),new B.ConnectionError(a.message,"EINSTLOOKUP",{cause:a})}try{b=await this.connectOnPort(e,this.config.options.multiSubnetFailover,d,this.config.options.connector)}catch(a){throw d.throwIfAborted(),this.wrapSocketError(a)}try{let a=new AbortController,e=b=>{a.abort(this.wrapSocketError(b))},f=()=>{this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed")},g=()=>{this.debug.log("socket ended");let b=Error("socket hang up");b.code="ECONNRESET",a.abort(this.wrapSocketError(b))};b.once("error",e),b.once("close",f),b.once("end",g);try{d=AbortSignal.any([d,a.signal]),b.setKeepAlive(!0,3e4),this.messageIo=new y.default(b,this.config.options.packetSize,this.debug),this.messageIo.on("secure",a=>{this.emit("secure",a)}),this.socket=b,this.closed=!1,this.debug.log("connected to "+this.config.server+":"+this.config.options.port),this.sendPreLogin(),this.transitionTo(this.STATE.SENT_PRELOGIN);let e=await this.readPreloginResponse(d);await this.performTlsNegotiation(e,d),this.sendLogin7Packet();try{let{authentication:a}=this.config;switch(a.type){case"token-credential":case"azure-active-directory-password":case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":case"azure-active-directory-default":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_FEDAUTH),this.routingData=await this.performSentLogin7WithFedAuth(d);break;case"ntlm":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM),this.routingData=await this.performSentLogin7WithNTLMLogin(d);break;default:this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN),this.routingData=await this.performSentLogin7WithStandardLogin(d)}}catch(a){var c;if((c=a)instanceof AggregateError&&(c=c.errors[0]),c instanceof B.ConnectionError&&c.isTransient)return this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY),await this.performTransientFailureRetry();throw a}if(this.routingData)return this.transitionTo(this.STATE.REROUTING),await this.performReRouting();this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL),await this.performLoggedInSendingInitialSql(d)}finally{b.removeListener("error",e),b.removeListener("close",f),b.removeListener("end",g)}}catch(a){throw b.destroy(),a}b.on("error",this._onSocketError),b.on("close",this._onSocketClose),b.on("end",this._onSocketEnd),this.transitionTo(this.STATE.LOGGED_IN)}finally{clearTimeout(b)}}cleanupConnection(){if(!this.closed){this.clearRequestTimer(),this.closeConnection(),process.nextTick(()=>{this.emit("end")});let a=this.request;if(a){let b=new B.RequestError("Connection closed before request completed.","ECLOSE");a.callback(b),this.request=void 0}this.closed=!0}}createDebug(){let a=new n.default(this.config.options.debug);return a.on("debug",a=>{this.emit("debug",a)}),a}createTokenStreamParser(a,b){return new z.Parser(a,this.debug,b,this.config.options)}async wrapWithTls(a,b){b.throwIfAborted();let c=f.createSecureContext(this.secureContextOptions),d=g.isIP(this.config.server)?"":this.config.server,e={host:this.config.server,socket:a,ALPNProtocols:["tds/8.0"],secureContext:c,servername:this.config.options.serverName?this.config.options.serverName:d},{promise:h,resolve:i,reject:j}=P(),k=f.connect(e);try{let a=()=>{j(b.reason)};b.addEventListener("abort",a,{once:!0});try{let a=()=>{i(k)};k.once("error",j),k.once("secureConnect",a);try{return await h}finally{k.removeListener("error",j),k.removeListener("connect",a)}}finally{b.removeEventListener("abort",a)}}catch(a){throw k.destroy(),a}}async connectOnPort(a,b,c,d){let e={host:this.routingData?this.routingData.server:this.config.server,port:this.routingData?this.routingData.port:a,localAddress:this.config.options.localAddress},f=d||(b?C.connectInParallel:C.connectInSequence),g=await f(e,h.default.lookup,c);if("strict"===this.config.options.encrypt)try{g=await this.wrapWithTls(g,c)}catch(a){throw g.end(),a}return g}closeConnection(){this.socket&&this.socket.destroy()}createCancelTimer(){this.clearCancelTimer();let a=this.config.options.cancelTimeout;a>0&&(this.cancelTimer=setTimeout(()=>{this.cancelTimeout()},a))}createRequestTimer(){this.clearRequestTimer();let a=this.request,b=void 0!==a.timeout?a.timeout:this.config.options.requestTimeout;b&&(this.requestTimer=setTimeout(()=>{this.requestTimeout()},b))}cancelTimeout(){let a=`Failed to cancel request in ${this.config.options.cancelTimeout}ms`;this.debug.log(a),this.dispatchEvent("socketError",new B.ConnectionError(a,"ETIMEOUT"))}requestTimeout(){this.requestTimer=void 0;let a=this.request;a.cancel();let b=void 0!==a.timeout?a.timeout:this.config.options.requestTimeout;a.error=new B.RequestError("Timeout: Request failed to complete in "+b+"ms","ETIMEOUT")}clearCancelTimer(){this.cancelTimer&&(clearTimeout(this.cancelTimer),this.cancelTimer=void 0)}clearRequestTimer(){this.requestTimer&&(clearTimeout(this.requestTimer),this.requestTimer=void 0)}transitionTo(a){this.state===a?this.debug.log("State is already "+a.name):(this.state&&this.state.exit&&this.state.exit.call(this,a),this.debug.log("State change: "+(this.state?this.state.name:"undefined")+" -> "+a.name),this.state=a,this.state.enter&&this.state.enter.apply(this))}getEventHandler(a){let b=this.state.events[a];if(!b)throw Error(`No event '${a}' in state '${this.state.name}'`);return b}dispatchEvent(a,...b){let c=this.state.events[a];c?c.apply(this,b):(this.emit("error",Error(`No event '${a}' in state '${this.state.name}'`)),this.close())}wrapSocketError(a){if(this.state===this.STATE.CONNECTING||this.state===this.STATE.SENT_TLSSSLNEGOTIATION){let b=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,c=this.routingData?this.routingData.server:this.config.server,d=this.routingData?`:${this.routingData.port}`:b,e=this.routingData?` (redirected from ${this.config.server}${b})`:"",f=`Failed to connect to ${c}${d}${e} - ${a.message}`;return new B.ConnectionError(f,"ESOCKET",{cause:a})}{let b=`Connection lost - ${a.message}`;return new B.ConnectionError(b,"ESOCKET",{cause:a})}}socketEnd(){if(this.debug.log("socket ended"),this.state!==this.STATE.FINAL){let a=Error("socket hang up");a.code="ECONNRESET",this.dispatchEvent("socketError",a),process.nextTick(()=>{this.emit("error",this.wrapSocketError(a))})}}socketClose(){this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed"),this.transitionTo(this.STATE.FINAL),this.cleanupConnection()}sendPreLogin(){let[,a,b,c]=/^(\d+)\.(\d+)\.(\d+)/.exec(K.version)??["0.0.0","0","0","0"],d=new s.default({encrypt:"boolean"==typeof this.config.options.encrypt&&this.config.options.encrypt,version:{major:Number(a),minor:Number(b),build:Number(c),subbuild:0}});this.messageIo.sendMessage(r.TYPE.PRELOGIN,d.data),this.debug.payload(function(){return d.toString("  ")})}sendLogin7Packet(){let a=new t.default({tdsVersion:E.versions[this.config.options.tdsVersion],packetSize:this.config.options.packetSize,clientProgVer:0,clientPid:process.pid,connectionId:0,clientTimeZone:new Date().getTimezoneOffset(),clientLcid:1033}),{authentication:b}=this.config;switch(b.type){case"azure-active-directory-password":a.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"default"};break;case"azure-active-directory-access-token":a.fedAuth={type:"SECURITYTOKEN",echo:this.fedAuthRequired,fedAuthToken:b.options.token};break;case"token-credential":case"azure-active-directory-msi-vm":case"azure-active-directory-default":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":a.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"integrated"};break;case"ntlm":a.sspi=(0,G.createNTLMRequest)({domain:b.options.domain});break;default:a.userName=b.options.userName,a.password=b.options.password}a.hostname=this.config.options.workstationId||e.default.hostname(),a.serverName=this.routingData?`${this.routingData.server}${this.routingData.instance?"\\"+this.routingData.instance:""}`:this.config.server,a.appName=this.config.options.appName||"Tedious",a.libraryName=D.name,a.language=this.config.options.language,a.database=this.config.options.database,a.clientId=Buffer.from([1,2,3,4,5,6]),a.readOnlyIntent=this.config.options.readOnlyIntent,a.initDbFatal=!this.config.options.fallbackToDefaultDb,this.routingData=void 0,this.messageIo.sendMessage(r.TYPE.LOGIN7,a.toBuffer()),this.debug.payload(function(){return a.toString("  ")})}sendFedAuthTokenMessage(a){let b=Buffer.byteLength(a,"ucs2"),c=Buffer.alloc(8+b),d=0;d=c.writeUInt32LE(b+4,d),d=c.writeUInt32LE(b,d),c.write(a,d,"ucs2"),this.messageIo.sendMessage(r.TYPE.FEDAUTH_TOKEN,c)}sendInitialSql(){let a=new x.default(this.getInitialSql(),this.currentTransactionDescriptor(),this.config.options),b=new F.default({type:r.TYPE.SQL_BATCH});this.messageIo.outgoingMessageStream.write(b),j.Readable.from(a).pipe(b)}getInitialSql(){let a=[];return!0===this.config.options.enableAnsiNull?a.push("set ansi_nulls on"):!1===this.config.options.enableAnsiNull&&a.push("set ansi_nulls off"),!0===this.config.options.enableAnsiNullDefault?a.push("set ansi_null_dflt_on on"):!1===this.config.options.enableAnsiNullDefault&&a.push("set ansi_null_dflt_on off"),!0===this.config.options.enableAnsiPadding?a.push("set ansi_padding on"):!1===this.config.options.enableAnsiPadding&&a.push("set ansi_padding off"),!0===this.config.options.enableAnsiWarnings?a.push("set ansi_warnings on"):!1===this.config.options.enableAnsiWarnings&&a.push("set ansi_warnings off"),!0===this.config.options.enableArithAbort?a.push("set arithabort on"):!1===this.config.options.enableArithAbort&&a.push("set arithabort off"),!0===this.config.options.enableConcatNullYieldsNull?a.push("set concat_null_yields_null on"):!1===this.config.options.enableConcatNullYieldsNull&&a.push("set concat_null_yields_null off"),!0===this.config.options.enableCursorCloseOnCommit?a.push("set cursor_close_on_commit on"):!1===this.config.options.enableCursorCloseOnCommit&&a.push("set cursor_close_on_commit off"),null!==this.config.options.datefirst&&a.push(`set datefirst ${this.config.options.datefirst}`),null!==this.config.options.dateFormat&&a.push(`set dateformat ${this.config.options.dateFormat}`),!0===this.config.options.enableImplicitTransactions?a.push("set implicit_transactions on"):!1===this.config.options.enableImplicitTransactions&&a.push("set implicit_transactions off"),null!==this.config.options.language&&a.push(`set language ${this.config.options.language}`),!0===this.config.options.enableNumericRoundabort?a.push("set numeric_roundabort on"):!1===this.config.options.enableNumericRoundabort&&a.push("set numeric_roundabort off"),!0===this.config.options.enableQuotedIdentifier?a.push("set quoted_identifier on"):!1===this.config.options.enableQuotedIdentifier&&a.push("set quoted_identifier off"),null!==this.config.options.textsize&&a.push(`set textsize ${this.config.options.textsize}`),null!==this.config.options.connectionIsolationLevel&&a.push(`set transaction isolation level ${this.getIsolationLevelText(this.config.options.connectionIsolationLevel)}`),!0===this.config.options.abortTransactionOnError?a.push("set xact_abort on"):!1===this.config.options.abortTransactionOnError&&a.push("set xact_abort off"),a.join("\n")}execSqlBatch(a){this.makeRequest(a,r.TYPE.SQL_BATCH,new x.default(a.sqlTextOrProcedure,this.currentTransactionDescriptor(),this.config.options))}execSql(a){try{a.validateParameters(this.databaseCollation)}catch(b){a.error=b,process.nextTick(()=>{this.debug.log(b.message),a.callback(b)});return}let b=[];b.push({type:H.TYPES.NVarChar,name:"statement",value:a.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),a.parameters.length&&(b.push({type:H.TYPES.NVarChar,name:"params",value:a.makeParamsParameter(a.parameters),output:!1,length:void 0,precision:void 0,scale:void 0}),b.push(...a.parameters)),this.makeRequest(a,r.TYPE.RPC_REQUEST,new w.default(J.default.Sp_ExecuteSql,b,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}newBulkLoad(a,b,c){let d;if(void 0===c?(c=b,d={}):d=b,"object"!=typeof d)throw TypeError('"options" argument must be an object');return new m.default(a,this.databaseCollation,this.config.options,d,c)}execBulkLoad(a,b){if(a.executionStarted=!0,b){if(a.streamingMode)throw Error("Connection.execBulkLoad can't be called with a BulkLoad that was put in streaming mode.");if(a.firstRowWritten)throw Error("Connection.execBulkLoad can't be called with a BulkLoad that already has rows written to it.");let c=j.Readable.from(b);c.on("error",b=>{a.rowToPacketTransform.destroy(b)}),a.rowToPacketTransform.on("error",a=>{c.destroy(a)}),c.pipe(a.rowToPacketTransform)}else a.streamingMode||a.rowToPacketTransform.end();let c=()=>{e.cancel()},d=new I.BulkLoadPayload(a),e=new v.default(a.getBulkInsertSql(),b=>{if(a.removeListener("cancel",c),b){"UNKNOWN"===b.code&&(b.message+=" This is likely because the schema of the BulkLoad does not match the schema of the table you are attempting to insert into."),a.error=b,a.callback(b);return}this.makeRequest(a,r.TYPE.BULK_LOAD,d)});a.once("cancel",c),this.execSqlBatch(e)}prepare(a){let b=[];b.push({type:H.TYPES.Int,name:"handle",value:void 0,output:!0,length:void 0,precision:void 0,scale:void 0}),b.push({type:H.TYPES.NVarChar,name:"params",value:a.parameters.length?a.makeParamsParameter(a.parameters):null,output:!1,length:void 0,precision:void 0,scale:void 0}),b.push({type:H.TYPES.NVarChar,name:"stmt",value:a.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),a.preparing=!0,a.on("returnValue",(b,c)=>{"handle"===b?a.handle=c:a.error=new B.RequestError(`Tedious > Unexpected output parameter ${b} from sp_prepare`)}),this.makeRequest(a,r.TYPE.RPC_REQUEST,new w.default(J.default.Sp_Prepare,b,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}unprepare(a){let b=[];b.push({type:H.TYPES.Int,name:"handle",value:a.handle,output:!1,length:void 0,precision:void 0,scale:void 0}),this.makeRequest(a,r.TYPE.RPC_REQUEST,new w.default(J.default.Sp_Unprepare,b,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}execute(a,b){let c=[];c.push({type:H.TYPES.Int,name:"",value:a.handle,output:!1,length:void 0,precision:void 0,scale:void 0});try{for(let d=0,e=a.parameters.length;d<e;d++){let e=a.parameters[d];c.push({...e,value:e.type.validate(b?b[e.name]:null,this.databaseCollation)})}}catch(b){a.error=b,process.nextTick(()=>{this.debug.log(b.message),a.callback(b)});return}this.makeRequest(a,r.TYPE.RPC_REQUEST,new w.default(J.default.Sp_Execute,c,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}callProcedure(a){try{a.validateParameters(this.databaseCollation)}catch(b){a.error=b,process.nextTick(()=>{this.debug.log(b.message),a.callback(b)});return}this.makeRequest(a,r.TYPE.RPC_REQUEST,new w.default(a.sqlTextOrProcedure,a.parameters,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}beginTransaction(a,b="",c=this.config.options.isolationLevel){(0,A.assertValidIsolationLevel)(c,"isolationLevel");let d=new A.Transaction(b,c);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new v.default("SET TRANSACTION ISOLATION LEVEL "+d.isolationLevelToTSQL()+";BEGIN TRAN "+d.name,b=>{this.transactionDepth++,1===this.transactionDepth&&(this.inTransaction=!0),a(b)}));let e=new v.default(void 0,b=>a(b,this.currentTransactionDescriptor()));return this.makeRequest(e,r.TYPE.TRANSACTION_MANAGER,d.beginPayload(this.currentTransactionDescriptor()))}commitTransaction(a,b=""){let c=new A.Transaction(b);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new v.default("COMMIT TRAN "+c.name,b=>{this.transactionDepth--,0===this.transactionDepth&&(this.inTransaction=!1),a(b)}));let d=new v.default(void 0,a);return this.makeRequest(d,r.TYPE.TRANSACTION_MANAGER,c.commitPayload(this.currentTransactionDescriptor()))}rollbackTransaction(a,b=""){let c=new A.Transaction(b);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new v.default("ROLLBACK TRAN "+c.name,b=>{this.transactionDepth--,0===this.transactionDepth&&(this.inTransaction=!1),a(b)}));let d=new v.default(void 0,a);return this.makeRequest(d,r.TYPE.TRANSACTION_MANAGER,c.rollbackPayload(this.currentTransactionDescriptor()))}saveTransaction(a,b){let c=new A.Transaction(b);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new v.default("SAVE TRAN "+c.name,b=>{this.transactionDepth++,a(b)}));let d=new v.default(void 0,a);return this.makeRequest(d,r.TYPE.TRANSACTION_MANAGER,c.savePayload(this.currentTransactionDescriptor()))}transaction(a,b){if("function"!=typeof a)throw TypeError("`cb` must be a function");let c=this.inTransaction,e="_tedious_"+d.default.randomBytes(10).toString("hex"),f=(a,b,...d)=>{a?this.inTransaction&&this.state===this.STATE.LOGGED_IN?this.rollbackTransaction(c=>{b(c||a,...d)},e):b(a,...d):c?(this.config.options.tdsVersion<"7_2"&&this.transactionDepth--,b(null,...d)):this.commitTransaction(a=>{b(a,...d)},e)};return c?this.saveTransaction(c=>c?a(c):b?this.execSqlBatch(new v.default("SET transaction isolation level "+this.getIsolationLevelText(b),b=>a(b,f))):a(null,f),e):this.beginTransaction(b=>b?a(b):a(null,f),e,b)}makeRequest(a,b,c){if(this.state!==this.STATE.LOGGED_IN){let b="Requests can only be made in the "+this.STATE.LOGGED_IN.name+" state, not the "+this.state.name+" state";this.debug.log(b),a.callback(new B.RequestError(b,"EINVALIDSTATE"))}else if(a.canceled)process.nextTick(()=>{a.callback(new B.RequestError("Canceled.","ECANCEL"))});else{b===r.TYPE.SQL_BATCH?this.isSqlBatch=!0:this.isSqlBatch=!1,this.request=a,a.connection=this,a.rowCount=0,a.rows=[],a.rst=[];let d=()=>{f.unpipe(e),f.destroy(new B.RequestError("Canceled.","ECANCEL")),e.ignore=!0,e.end(),a instanceof v.default&&a.paused&&a.resume()};a.once("cancel",d),this.createRequestTimer();let e=new F.default({type:b,resetConnection:this.resetConnectionOnNextRequest});this.messageIo.outgoingMessageStream.write(e),this.transitionTo(this.STATE.SENT_CLIENT_REQUEST),e.once("finish",()=>{a.removeListener("cancel",d),a.once("cancel",this._cancelAfterRequestSent),this.resetConnectionOnNextRequest=!1,this.debug.payload(function(){return c.toString("  ")})});let f=j.Readable.from(c);f.once("error",b=>{f.unpipe(e),a.error??=b,e.ignore=!0,e.end()}),f.pipe(e)}}cancel(){return!!this.request&&!this.request.canceled&&(this.request.cancel(),!0)}reset(a){let b=new v.default(this.getInitialSql(),b=>{this.config.options.tdsVersion<"7_2"&&(this.inTransaction=!1),a(b)});this.resetConnectionOnNextRequest=!0,this.execSqlBatch(b)}currentTransactionDescriptor(){return this.transactionDescriptors[this.transactionDescriptors.length-1]}getIsolationLevelText(a){switch(a){case A.ISOLATION_LEVEL.READ_UNCOMMITTED:return"read uncommitted";case A.ISOLATION_LEVEL.REPEATABLE_READ:return"repeatable read";case A.ISOLATION_LEVEL.SERIALIZABLE:return"serializable";case A.ISOLATION_LEVEL.SNAPSHOT:return"snapshot";default:return"read committed"}}async performTlsNegotiation(a,b){b.throwIfAborted();let{promise:c,reject:d}=P(),e=()=>{d(b.reason)};b.addEventListener("abort",e,{once:!0});try{if(1===a.fedAuthRequired&&(this.fedAuthRequired=!0),"strict"!==this.config.options.encrypt&&("ON"===a.encryptionString||"REQ"===a.encryptionString)){if(!this.config.options.encrypt)throw new B.ConnectionError("Server requires encryption, set 'encrypt' config option to true.","EENCRYPT");this.transitionTo(this.STATE.SENT_TLSSSLNEGOTIATION),await Promise.race([this.messageIo.startTls(this.secureContextOptions,this.config.options.serverName?this.config.options.serverName:this.routingData?.server??this.config.server,this.config.options.trustServerCertificate).catch(a=>{throw this.wrapSocketError(a)}),c])}}finally{b.removeEventListener("abort",e)}}async readPreloginResponse(a){a.throwIfAborted();let b=Buffer.alloc(0),{promise:c,reject:d}=P(),e=()=>{d(a.reason)};a.addEventListener("abort",e,{once:!0});try{let a=(await Promise.race([this.messageIo.readMessage().catch(a=>{throw this.wrapSocketError(a)}),c]))[Symbol.asyncIterator]();try{for(;;){let{done:d,value:e}=await Promise.race([a.next(),c]);if(d)break;b=Buffer.concat([b,e])}}finally{a.return&&await a.return()}}finally{a.removeEventListener("abort",e)}let f=new s.default(b);return this.debug.payload(function(){return f.toString("  ")}),f}async performReRouting(){this.socket.removeListener("error",this._onSocketError),this.socket.removeListener("close",this._onSocketClose),this.socket.removeListener("end",this._onSocketEnd),this.socket.destroy(),this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed"),this.emit("rerouting"),this.debug.log("Rerouting to "+this.routingData.server+":"+this.routingData.port),this.transitionTo(this.STATE.CONNECTING),await this.initialiseConnection()}async performTransientFailureRetry(){this.curTransientRetryCount++,this.socket.removeListener("error",this._onSocketError),this.socket.removeListener("close",this._onSocketClose),this.socket.removeListener("end",this._onSocketEnd),this.socket.destroy(),this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed");let a=this.routingData?this.routingData.server:this.config.server,b=this.routingData?this.routingData.port:this.config.options.port;this.debug.log("Retry after transient failure connecting to "+a+":"+b);let{promise:c,resolve:d}=P();setTimeout(d,this.config.options.connectionRetryInterval),await c,this.emit("retry"),this.transitionTo(this.STATE.CONNECTING),await this.initialiseConnection()}async performSentLogin7WithStandardLogin(a){a.throwIfAborted();let{promise:b,reject:c}=P(),d=()=>{c(a.reason)};a.addEventListener("abort",d,{once:!0});try{let a=await Promise.race([this.messageIo.readMessage().catch(a=>{throw this.wrapSocketError(a)}),b]),c=new M.Login7TokenHandler(this),d=this.createTokenStreamParser(a,c);if(await (0,o.once)(d,"end"),c.loginAckReceived)return c.routingData;if(this.loginError)throw this.loginError;throw new B.ConnectionError("Login failed.","ELOGIN")}finally{this.loginError=void 0,a.removeEventListener("abort",d)}}async performSentLogin7WithNTLMLogin(a){a.throwIfAborted();let{promise:b,reject:c}=P(),d=()=>{c(a.reason)};a.addEventListener("abort",d,{once:!0});try{for(;;){let a=await Promise.race([this.messageIo.readMessage().catch(a=>{throw this.wrapSocketError(a)}),b]),c=new M.Login7TokenHandler(this),d=this.createTokenStreamParser(a,c);if(await Promise.race([(0,o.once)(d,"end"),b]),c.loginAckReceived)return c.routingData;if(this.ntlmpacket){let a=this.config.authentication,b=new u.default({domain:a.options.domain,userName:a.options.userName,password:a.options.password,ntlmpacket:this.ntlmpacket});this.messageIo.sendMessage(r.TYPE.NTLMAUTH_PKT,b.data),this.debug.payload(function(){return b.toString("  ")}),this.ntlmpacket=void 0}else if(this.loginError)throw this.loginError;else throw new B.ConnectionError("Login failed.","ELOGIN")}}finally{this.loginError=void 0,a.removeEventListener("abort",d)}}async performSentLogin7WithFedAuth(a){a.throwIfAborted();let{promise:b,reject:c}=P(),d=()=>{c(a.reason)};a.addEventListener("abort",d,{once:!0});try{let c=await Promise.race([this.messageIo.readMessage().catch(a=>{throw this.wrapSocketError(a)}),b]),d=new M.Login7TokenHandler(this),e=this.createTokenStreamParser(c,d);if(await Promise.race([(0,o.once)(e,"end"),b]),d.loginAckReceived)return d.routingData;let f=d.fedAuthInfoToken;if(f&&f.stsurl&&f.spn){let c,d,e=this.config.authentication,g=new L.URL("/.default",f.spn).toString();switch(e.type){case"token-credential":c=e.options.credential;break;case"azure-active-directory-password":c=new k.UsernamePasswordCredential(e.options.tenantId??"common",e.options.clientId,e.options.userName,e.options.password);break;case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":let h=e.options.clientId?[e.options.clientId,{}]:[{}];c=new k.ManagedIdentityCredential(...h);break;case"azure-active-directory-default":let i=e.options.clientId?{managedIdentityClientId:e.options.clientId}:{};c=new k.DefaultAzureCredential(i);break;case"azure-active-directory-service-principal-secret":c=new k.ClientSecretCredential(e.options.tenantId,e.options.clientId,e.options.clientSecret)}try{d=await Promise.race([c.getToken(g),b])}catch(b){throw a.throwIfAborted(),AggregateError([new B.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH"),b])}if(null===d)throw AggregateError([new B.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH")]);return this.sendFedAuthTokenMessage(d.token),this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN),await this.performSentLogin7WithStandardLogin(a)}if(this.loginError)throw this.loginError;throw new B.ConnectionError("Login failed.","ELOGIN")}finally{this.loginError=void 0,a.removeEventListener("abort",d)}}async performLoggedInSendingInitialSql(a){a.throwIfAborted();let{promise:b,reject:c}=P(),d=()=>{c(a.reason)};a.addEventListener("abort",d,{once:!0});try{this.sendInitialSql();let a=await Promise.race([this.messageIo.readMessage().catch(a=>{throw this.wrapSocketError(a)}),b]),c=this.createTokenStreamParser(a,new M.InitialSqlTokenHandler(this));await Promise.race([(0,o.once)(c,"end"),b])}finally{a.removeEventListener("abort",d)}}}c.default=Q,b.exports=Q,Q.prototype.STATE={INITIALIZED:{name:"Initialized",events:{}},CONNECTING:{name:"Connecting",events:{}},SENT_PRELOGIN:{name:"SentPrelogin",events:{}},REROUTING:{name:"ReRouting",events:{}},TRANSIENT_FAILURE_RETRY:{name:"TRANSIENT_FAILURE_RETRY",events:{}},SENT_TLSSSLNEGOTIATION:{name:"SentTLSSSLNegotiation",events:{}},SENT_LOGIN7_WITH_STANDARD_LOGIN:{name:"SentLogin7WithStandardLogin",events:{}},SENT_LOGIN7_WITH_NTLM:{name:"SentLogin7WithNTLMLogin",events:{}},SENT_LOGIN7_WITH_FEDAUTH:{name:"SentLogin7WithFedauth",events:{}},LOGGED_IN_SENDING_INITIAL_SQL:{name:"LoggedInSendingInitialSql",events:{}},LOGGED_IN:{name:"LoggedIn",events:{socketError:function(){this.transitionTo(this.STATE.FINAL),this.cleanupConnection()}}},SENT_CLIENT_REQUEST:{name:"SentClientRequest",enter:function(){(async()=>{let a;try{a=await this.messageIo.readMessage()}catch(a){this.dispatchEvent("socketError",a),process.nextTick(()=>{this.emit("error",this.wrapSocketError(a))});return}this.clearRequestTimer();let b=this.createTokenStreamParser(a,new M.RequestTokenHandler(this,this.request));if(this.request?.canceled&&this.cancelTimer)return this.transitionTo(this.STATE.SENT_ATTENTION);let c=()=>{b.resume()},d=()=>{b.pause(),this.request?.once("resume",c)};this.request?.on("pause",d),this.request instanceof v.default&&this.request.paused&&d();let e=()=>{b.removeListener("end",f),this.request instanceof v.default&&this.request.paused&&this.request.resume(),this.request?.removeListener("pause",d),this.request?.removeListener("resume",c),this.transitionTo(this.STATE.SENT_ATTENTION)},f=()=>{this.request?.removeListener("cancel",this._cancelAfterRequestSent),this.request?.removeListener("cancel",e),this.request?.removeListener("pause",d),this.request?.removeListener("resume",c),this.transitionTo(this.STATE.LOGGED_IN);let a=this.request;this.request=void 0,this.config.options.tdsVersion<"7_2"&&a.error&&this.isSqlBatch&&(this.inTransaction=!1),a.callback(a.error,a.rowCount,a.rows)};b.once("end",f),this.request?.once("cancel",e)})()},exit:function(a){this.clearRequestTimer()},events:{socketError:function(a){let b=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),this.cleanupConnection(),b.callback(a)}}},SENT_ATTENTION:{name:"SentAttention",enter:function(){(async()=>{let a;try{a=await this.messageIo.readMessage()}catch(a){this.dispatchEvent("socketError",a),process.nextTick(()=>{this.emit("error",this.wrapSocketError(a))});return}let b=new M.AttentionTokenHandler(this,this.request),c=this.createTokenStreamParser(a,b);if(await (0,o.once)(c,"end"),b.attentionReceived){this.clearCancelTimer();let a=this.request;this.request=void 0,this.transitionTo(this.STATE.LOGGED_IN),a.error&&a.error instanceof B.RequestError&&"ETIMEOUT"===a.error.code?a.callback(a.error):a.callback(new B.RequestError("Canceled.","ECANCEL"))}})().catch(a=>{process.nextTick(()=>{throw a})})},events:{socketError:function(a){let b=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),this.cleanupConnection(),b.callback(a)}}},FINAL:{name:"Final",events:{}}}},10684,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BulkLoad",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(c,"Connection",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(c,"ConnectionError",{enumerable:!0,get:function(){return h.ConnectionError}}),Object.defineProperty(c,"ISOLATION_LEVEL",{enumerable:!0,get:function(){return j.ISOLATION_LEVEL}}),Object.defineProperty(c,"Request",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(c,"RequestError",{enumerable:!0,get:function(){return h.RequestError}}),Object.defineProperty(c,"TDS_VERSION",{enumerable:!0,get:function(){return k.versions}}),Object.defineProperty(c,"TYPES",{enumerable:!0,get:function(){return i.TYPES}}),c.connect=function(a,b){let c=new e.default(a);return c.connect(b),c},c.library=void 0;var d=l(a.r(45489)),e=l(a.r(95912)),f=l(a.r(10855)),g=a.r(98433),h=a.r(57602),i=a.r(31156),j=a.r(12961),k=a.r(7033);function l(a){return a&&a.__esModule?a:{default:a}}c.library={name:g.name}},52852,(a,b,c)=>{"use strict";let d=a.r(10684),e=a.r(61430)("mssql:tedi"),f=a.r(50494),{IDS:g}=a.r(85319),h=a.r(82755),i=a.r(95664);b.exports=class extends f{_config(){let a={server:this.config.server,options:Object.assign({encrypt:"boolean"!=typeof this.config.encrypt||this.config.encrypt,trustServerCertificate:"boolean"==typeof this.config.trustServerCertificate&&this.config.trustServerCertificate},this.config.options),authentication:Object.assign({type:void 0!==this.config.domain?"ntlm":void 0!==this.config.authentication_type?this.config.authentication_type:"default",options:Object.entries({userName:this.config.user,password:this.config.password,domain:this.config.domain,clientId:this.config.clientId,clientSecret:this.config.clientSecret,tenantId:this.config.tenantId,token:this.config.token,msiEndpoint:this.config.msiEndpoint,msiSecret:this.config.msiSecret}).reduce((a,[b,c])=>void 0!==c?{...a,[b]:c}:a,{})},this.config.authentication)};return a.options.database=a.options.database||this.config.database,a.options.port=a.options.port||this.config.port,a.options.connectTimeout=a.options.connectTimeout??this.config.connectionTimeout??this.config.timeout??15e3,a.options.requestTimeout=a.options.requestTimeout??this.config.requestTimeout??this.config.timeout??15e3,a.options.tdsVersion=a.options.tdsVersion||"7_4",a.options.rowCollectionOnDone=a.options.rowCollectionOnDone||!1,a.options.rowCollectionOnRequestCompletion=a.options.rowCollectionOnRequestCompletion||!1,a.options.useColumnNames=a.options.useColumnNames||!1,a.options.appName=a.options.appName||"node-mssql",a.options.instanceName&&delete a.options.port,isNaN(a.options.requestTimeout)&&(a.options.requestTimeout=15e3),(a.options.requestTimeout===1/0||a.options.requestTimeout<0)&&(a.options.requestTimeout=0),!a.options.debug&&this.config.debug&&(a.options.debug={packet:!0,token:!0,data:!0,payload:!0}),a}_poolCreate(){return new h.Promise((a,b)=>{let c,f=c=>{b(c),a=b=()=>{}};try{c=new d.Connection(this._config())}catch(a){f(a);return}c.connect(d=>{if(d)return f(d=new i(d));e("connection(%d): established",g.get(c)),this.collation=c.databaseCollation,a(c),a=b=()=>{}}),g.add(c,"Connection"),e("pool(%d): connection #%d created",g.get(this),g.get(c)),e("connection(%d): establishing",g.get(c)),c.on("end",()=>{f(new i("The connection ended without ever completing the connection"))}),c.on("error",a=>{"ESOCKET"===a.code?c.hasError=!0:this.emit("error",a),f(a)}),this.config.debug&&c.on("debug",this.emit.bind(this,"debug",c)),"function"==typeof this.config.beforeConnect&&this.config.beforeConnect(c)})}_poolValidate(a){return!!a&&!a.closed&&!a.hasError&&(!this.config.validateConnection||new h.Promise(b=>{let c=new d.Request("SELECT 1;",a=>{b(!a)});a.execSql(c)}))}_poolDestroy(a){return new h.Promise((b,c)=>{a?(e("connection(%d): destroying",g.get(a)),a.closed?(e("connection(%d): already closed",g.get(a)),b()):(a.once("end",()=>{e("connection(%d): destroyed",g.get(a)),b()}),a.close())):b()})}}},22951,(a,b,c)=>{"use strict";let d=a.r(61430)("mssql:tedi"),e=a.r(49476),{IDS:f}=a.r(85319),g=a.r(87716);b.exports=class extends e{constructor(a){super(a),this._abort=()=>{if(!this._rollbackRequested){let a=this._acquiredConnection;setImmediate(this.parent.release.bind(this.parent),a),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this._acquiredConnection=null,this._acquiredConfig=null,this._aborted=!0,this.emit("rollback",!0)}}}_begin(a,b){super._begin(a,a=>{if(a)return b(a);d("transaction(%d): begin",f.get(this)),this.parent.acquire(this,(a,c,e)=>{if(a)return b(a);this._acquiredConnection=c,this._acquiredConnection.on("rollbackTransaction",this._abort),this._acquiredConfig=e,c.beginTransaction(a=>{a&&(a=new g(a)),d("transaction(%d): begun",f.get(this)),b(a)},this.name,this.isolationLevel)})})}_commit(a){super._commit(b=>{if(b)return a(b);d("transaction(%d): commit",f.get(this)),this._acquiredConnection.commitTransaction(b=>{b&&(b=new g(b)),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,b||d("transaction(%d): commited",f.get(this)),a(b)})})}_rollback(a){super._rollback(b=>{if(b)return a(b);d("transaction(%d): rollback",f.get(this)),this._acquiredConnection.rollbackTransaction(b=>{b&&(b=new g(b)),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,b||d("transaction(%d): rolled back",f.get(this)),a(b)})})}}},44652,(a,b,c)=>{"use strict";class d{constructor(){this.x=0,this.y=0,this.z=null,this.m=null}}let e=(a,b)=>{var c,e;let f,g,h,i=a.readInt32LE(0);if(-1===i)return null;let j={srid:i,version:a.readUInt8(4)},k=a.readUInt8(5);a.position=6;let l={Z:(1&k)>0,M:(2&k)>0,V:(4&k)>0,P:(8&k)>0,L:(16&k)>0};if(2===j.version&&(l.H=(8&k)>0),l.P?f=1:l.L?f=2:(f=a.readUInt32LE(a.position),a.position+=4),j.points=((a,b,c)=>{let e=[];if(b<1)return e;if(c)for(let c=1;c<=b;c++){let b=new d;e.push(b),b.x=a.readDoubleLE(a.position),b.y=a.readDoubleLE(a.position+8),a.position+=16}else for(let c=1;c<=b;c++){let b=new d;e.push(b),b.lat=a.readDoubleLE(a.position),b.lng=a.readDoubleLE(a.position+8),b.x=b.lat,b.y=b.lng,a.position+=16}return e})(a,f,b),l.Z&&((c=j.points)<1||c.forEach(b=>{b.z=a.readDoubleLE(a.position),a.position+=8})),l.M&&((e=j.points)<1||e.forEach(b=>{b.m=a.readDoubleLE(a.position),a.position+=8})),l.P||l.L?g=1:(g=a.readUInt32LE(a.position),a.position+=4),j.figures=((a,b,c)=>{let d=[];if(b<1)return d;if(c.P)d.push({attribute:1,pointOffset:0});else if(c.L)d.push({attribute:1,pointOffset:0});else for(let c=1;c<=b;c++)d.push({attribute:a.readUInt8(a.position),pointOffset:a.readInt32LE(a.position+1)}),a.position+=5;return d})(a,g,l),l.P||l.L?h=1:(h=a.readUInt32LE(a.position),a.position+=4),j.shapes=((a,b,c)=>{let d=[];if(b<1)return d;if(c.P)d.push({parentOffset:-1,figureOffset:0,type:1});else if(c.L)d.push({parentOffset:-1,figureOffset:0,type:2});else for(let c=1;c<=b;c++)d.push({parentOffset:a.readInt32LE(a.position),figureOffset:a.readInt32LE(a.position+4),type:a.readUInt8(a.position+8)}),a.position+=9;return d})(a,h,l),2===j.version&&a.position<a.length){let b=a.readUInt32LE(a.position);a.position+=4,j.segments=((a,b)=>{let c=[];if(b<1)return c;for(let d=1;d<=b;d++)c.push({type:a.readUInt8(a.position)}),a.position++;return c})(a,b)}else j.segments=[];return j};b.exports.PARSERS={geography:a=>e(a,!1),geometry:a=>e(a,!0)}},865,(a,b,c)=>{"use strict";let d=a.r(10684),e=a.r(61430)("mssql:tedi"),f=a.r(26966),g=a.r(81555),{IDS:h,objectHasProperty:i}=a.r(85319),{TYPES:j,DECLARATIONS:k,declare:l,cast:m}=a.r(61949),n=a.r(31984),{PARSERS:o}=a.r(44652),{valueHandler:p}=a.r(82755),q="JSON_F52E2B61-18A1-11d1-B105-00805F49916B",r="XML_F52E2B61-18A1-11d1-B105-00805F49916B",s=function(a){switch(a){case j.VarChar:return d.TYPES.VarChar;case j.NVarChar:return d.TYPES.NVarChar;case j.Text:return d.TYPES.Text;case j.Int:return d.TYPES.Int;case j.BigInt:return d.TYPES.BigInt;case j.TinyInt:return d.TYPES.TinyInt;case j.SmallInt:return d.TYPES.SmallInt;case j.Bit:return d.TYPES.Bit;case j.Float:return d.TYPES.Float;case j.Decimal:return d.TYPES.Decimal;case j.Numeric:return d.TYPES.Numeric;case j.Real:return d.TYPES.Real;case j.Money:return d.TYPES.Money;case j.SmallMoney:return d.TYPES.SmallMoney;case j.Time:return d.TYPES.Time;case j.Date:return d.TYPES.Date;case j.DateTime:return d.TYPES.DateTime;case j.DateTime2:return d.TYPES.DateTime2;case j.DateTimeOffset:return d.TYPES.DateTimeOffset;case j.SmallDateTime:return d.TYPES.SmallDateTime;case j.UniqueIdentifier:return d.TYPES.UniqueIdentifier;case j.Xml:return d.TYPES.NVarChar;case j.Char:return d.TYPES.Char;case j.NChar:return d.TYPES.NChar;case j.NText:return d.TYPES.NVarChar;case j.Image:return d.TYPES.Image;case j.Binary:return d.TYPES.Binary;case j.VarBinary:return d.TYPES.VarBinary;case j.UDT:case j.Geography:case j.Geometry:return d.TYPES.UDT;case j.TVP:return d.TYPES.TVP;case j.Variant:return d.TYPES.Variant;default:return a}},t=function(a,b){if("object"==typeof a)switch(a){case d.TYPES.Char:return j.Char;case d.TYPES.NChar:return j.NChar;case d.TYPES.VarChar:return j.VarChar;case d.TYPES.NVarChar:return j.NVarChar;case d.TYPES.Text:return j.Text;case d.TYPES.NText:return j.NText;case d.TYPES.Int:return j.Int;case d.TYPES.BigInt:return j.BigInt;case d.TYPES.TinyInt:return j.TinyInt;case d.TYPES.SmallInt:return j.SmallInt;case d.TYPES.Bit:return j.Bit;case d.TYPES.Float:return j.Float;case d.TYPES.Real:return j.Real;case d.TYPES.Money:return j.Money;case d.TYPES.SmallMoney:return j.SmallMoney;case d.TYPES.Numeric:return j.Numeric;case d.TYPES.Decimal:return j.Decimal;case d.TYPES.DateTime:return j.DateTime;case d.TYPES.Time:return j.Time;case d.TYPES.Date:return j.Date;case d.TYPES.DateTime2:return j.DateTime2;case d.TYPES.DateTimeOffset:return j.DateTimeOffset;case d.TYPES.SmallDateTime:return j.SmallDateTime;case d.TYPES.UniqueIdentifier:return j.UniqueIdentifier;case d.TYPES.Image:return j.Image;case d.TYPES.Binary:return j.Binary;case d.TYPES.VarBinary:return j.VarBinary;case d.TYPES.Xml:return j.Xml;case d.TYPES.UDT:return j.UDT;case d.TYPES.TVP:return j.TVP;case d.TYPES.Variant:return j.Variant;default:switch(a.id){case 104:return j.Bit;case 108:return j.Numeric;case 106:return j.Decimal;case 38:if(8===b)return j.BigInt;if(4===b)return j.Int;if(2===b)return j.SmallInt;return j.TinyInt;case 109:if(8===b)return j.Float;return j.Real;case 110:if(8===b)return j.Money;return j.SmallMoney;case 111:if(8===b)return j.DateTime;return j.SmallDateTime}}},u=function(a,b){let c={};b&&(c=[]);for(let d=0,e=a.length;d<e;d++){let e=a[d],f={index:d,name:e.colName,length:e.dataLength,type:t(e.type,e.dataLength),scale:e.scale,precision:e.precision,nullable:!!(1&e.flags),caseSensitive:!!(2&e.flags),identity:!!(16&e.flags),readOnly:!(12&e.flags)};e.udtInfo&&(f.udt={name:e.udtInfo.typeName,database:e.udtInfo.dbname,schema:e.udtInfo.owningSchema,assembly:e.udtInfo.assemblyName},k[e.udtInfo.typeName]&&(f.type=k[e.udtInfo.typeName])),b?c.push(f):c[e.colName]=f}return c},v=function(a,b){let c=t(b.type);return p.has(c)?p.get(c)(a):b.type!==d.TYPES.UDT||null==a?a:o[b.udtInfo.typeName]?o[b.udtInfo.typeName](a):a},w=function(a){if(!(a instanceof n))return a;{let b={name:a.name,schema:a.schema,columns:[],rows:a.rows};for(let c of a.columns)b.columns.push({name:c.name,type:s(c.type),length:c.length,scale:c.scale,precision:c.precision});return b}};b.exports=class extends f{_batch(a,b){this._isBatch=!0,this._query(a,b)}_bulk(a,b,c){super._bulk(a,b,f=>{if(f)return c(f);try{a._makeBulk()}catch(a){return c(new g(a,"EREQUEST"))}if(!a.name)return c(new g("Table name must be specified for bulk insert.","ENAME"));if("@"===a.name.charAt(0))return c(new g("You can't use table variables for bulk insert.","ENAME"));let i=[],j={},k=!1,l=(a,b,d)=>{let e=Error(d.message);if(e.info=d,e=new g(e,"EREQUEST"),this.stream)this.emit("error",e);else if(a&&!k){if(b){for(let a in j)b.removeListener(a,j[a]);this.parent.release(b)}k=!0,c(e)}i.push(e)},m=a=>{this.emit("info",{message:a.message,number:a.number,state:a.state,class:a.class,lineNumber:a.lineNumber,serverName:a.serverName,procName:a.procName})};this.parent.acquire(this,(f,n)=>{let o=(a,...b)=>{try{this.parent.release(n)}catch(a){}c(a,...b)};if(f)return o(f);if(e("connection(%d): borrowed to request #%d",h.get(n),h.get(this)),this.canceled)return e("request(%d): canceled",h.get(this)),o(new g("Canceled.","ECANCEL"));this._cancel=()=>{e("request(%d): cancel",h.get(this)),n.cancel()},n.on("infoMessage",j.infoMessage=m),n.on("errorMessage",j.errorMessage=l.bind(null,!1,n)),n.on("error",j.error=l.bind(null,!0,n));let p=(a,b)=>{let c;if(a&&(!i.length||i.length&&a.message!==i[i.length-1].message)&&(a=new g(a,"EREQUEST"),this.stream&&this.emit("error",a),i.push(a)),delete this._cancel,i.length&&!this.stream&&((c=i.pop()).precedingErrors=i),!k){for(let a in j)n.removeListener(a,j[a]);k=!0,this.stream?o(null,b):o(c,b)}},q=n.newBulkLoad(a.path,b,p);for(let b of a.columns)q.addColumn(b.name,s(b.type),{nullable:b.nullable,length:b.length,scale:b.scale,precision:b.precision});if(a.create){let b=a.temporary?`tempdb..[${a.name}]`:a.path,c=new d.Request(`if object_id('${b.replace(/'/g,"''")}') is null ${a.declare()}`,b=>{if(b)return p(b);n.execBulkLoad(q,a.rows)});this._setCurrentRequest(c),n.execSqlBatch(c)}else n.execBulkLoad(q,a.rows)})})}_query(a,b){super._query(a,c=>{if(c)return b(c);let f=[],j=[],k=[],o={},p={},t=[],x={},y=[],z=null,A=!1,B=!1,C=null,D=!1,E=(a,c,d)=>{let e=Error(d.message);if(e.info=d,e=new g(e,"EREQUEST"),this.stream)this.emit("error",e);else if(a&&!D){if(c){for(let a in o)c.removeListener(a,o[a]);this.parent.release(c)}D=!0,b(e)}k.push(e)},F=a=>{this.emit("info",{message:a.message,number:a.number,state:a.state,class:a.class,lineNumber:a.lineNumber,serverName:a.serverName,procName:a.procName})};this.parent.acquire(this,(c,G,H)=>{let I;if(c)return b(c);if(e("connection(%d): borrowed to request #%d",h.get(G),h.get(this)),this.canceled)return e("request(%d): canceled",h.get(this)),this.parent.release(G),b(new g("Canceled.","ECANCEL"));this._cancel=()=>{e("request(%d): cancel",h.get(this)),G.cancel()},G.on("infoMessage",o.infoMessage=F),G.on("errorMessage",o.errorMessage=E.bind(null,!1,G)),G.on("error",o.error=E.bind(null,!0,G)),e("request(%d): query",h.get(this),a);let J=new d.Request(a,a=>{let c;if((a?.errors?a.errors:[a]).forEach((a,b,{length:c})=>{a&&(!k.length||k.length&&k.length>=c&&a.message!==k[k.length-c+b].message)&&(a=new g(a,"EREQUEST"),this.stream&&this.emit("error",a),k.push(a))}),A)for(let a in this.stream||(z=f.pop()[0]),z){let b=z[a];"___return___"!==a&&(p[a]=b)}if(delete this._cancel,k.length&&!this.stream&&((c=k.pop()).precedingErrors=k),!D){for(let a in o)G.removeListener(a,o[a]);this.parent.release(G),D=!0,c?e("request(%d): failed",h.get(this),c):e("request(%d): completed",h.get(this)),this.stream?b(null,null,p,t,j):b(c,f,p,t,j)}});this._setCurrentRequest(J),J.on("columnMetadata",a=>{x=u(a,this.arrayRowMode),B=!1,1===a.length&&(a[0].colName===q||a[0].colName===r)&&(B=!0,C=[]),this.stream&&(this._isBatch&&x.___return___||this.emit("recordset",x)),this.arrayRowMode&&j.push(x)});let K=(a,b)=>{if(null!=a&&(t.push(a),this.stream&&this.emit("rowsaffected",a)),0!==Object.keys(x).length){if(B){let a=C.join("");if(x[q]&&!0===H.parseJSON)try{I=""===a?null:JSON.parse(a)}catch(b){I=null;let a=new g(Error(`Failed to parse incoming JSON. ${b.message}`),"EJSON");this.stream&&this.emit("error",a),k.push(a)}else(I={})[Object.keys(x)[0]]=a;C=null,this.stream?this.emit("row",I):y.push(I)}this.stream||(Object.defineProperty(y,"columns",{enumerable:!1,configurable:!0,value:x}),Object.defineProperty(y,"toTable",{enumerable:!1,configurable:!0,value(a){return n.fromRecordset(this,a)}}),f.push(y)),y=[],x={}}};if(J.on("doneInProc",K),J.on("done",K),J.on("returnValue",(a,b,c)=>{p[a]=b}),J.on("row",a=>{if(y||(y=[]),B)return C.push(a[0].value);for(let b of(I=this.arrayRowMode?[]:{},a))if(b.value=v(b.value,b.metadata),this.arrayRowMode)I.push(b.value);else{let a=I[b.metadata.colName];void 0!==a?a instanceof Array?a.push(b.value):I[b.metadata.colName]=[a,b.value]:I[b.metadata.colName]=b.value}this.stream?this._isBatch&&I.___return___?z=I:this.emit("row",I):y.push(I)}),this._isBatch){if(Object.keys(this.parameters).length){for(let a in this.parameters){if(!i(this.parameters,a))continue;let c=this.parameters[a];try{c.value=s(c.type).validate(c.value,this.parent.collation)}catch(d){d.message=`Validation failed for parameter '${a}'. ${d.message}`;let c=new g(d,"EPARAM");return this.parent.release(G),b(c)}}let a=[];for(let b in this.parameters){if(!i(this.parameters,b))continue;let c=this.parameters[b];a.push(`@${b} ${l(c.type,c)}`)}let c=[];for(let a in this.parameters){if(!i(this.parameters,a))continue;let b=this.parameters[a];c.push(`@${a} = ${m(b.value,b.type,b)}`)}let d=[];for(let a in this.parameters)i(this.parameters,a)&&2===this.parameters[a].io&&d.push(`@${a} as [${a}]`);A=d.length>0,J.sqlTextOrProcedure=`declare ${a.join(", ")};select ${c.join(", ")};${J.sqlTextOrProcedure};${A?`select 1 as [___return___], ${d.join(", ")}`:""}`}}else for(let a in this.parameters){if(!i(this.parameters,a))continue;let b=this.parameters[a];1===b.io?J.addParameter(b.name,s(b.type),w(b.value),{length:b.length,scale:b.scale,precision:b.precision}):J.addOutputParameter(b.name,s(b.type),w(b.value),{length:b.length,scale:b.scale,precision:b.precision})}try{G[this._isBatch?"execSqlBatch":"execSql"](J)}catch(a){E(!0,G,a)}})})}_execute(a,b){super._execute(a,c=>{if(c)return b(c);let f=[],j=[],k=[],l={},m={},o=[],p={},t=[],x=0,y=!1,z=null,A=!1,B=(a,c,d)=>{let e=Error(d.message);if(e.info=d,e=new g(e,"EREQUEST"),this.stream)this.emit("error",e);else if(a&&!A){if(c){for(let a in l)c.removeListener(a,l[a]);this.parent.release(c)}A=!0,b(e)}k.push(e)},C=a=>{this.emit("info",{message:a.message,number:a.number,state:a.state,class:a.class,lineNumber:a.lineNumber,serverName:a.serverName,procName:a.procName})};this.parent.acquire(this,(c,D,E)=>{let F;if(c)return b(c);if(e("connection(%d): borrowed to request #%d",h.get(D),h.get(this)),this.canceled)return e("request(%d): canceled",h.get(this)),this.parent.release(D),b(new g("Canceled.","ECANCEL"));if(this._cancel=()=>{e("request(%d): cancel",h.get(this)),D.cancel()},D.on("infoMessage",l.infoMessage=C),D.on("errorMessage",l.errorMessage=B.bind(null,!1,D)),D.on("error",l.error=B.bind(null,!0,D)),e.enabled){let b=Object.keys(this.parameters).map(a=>this.parameters[a]),c={};b.forEach(a=>{let b;c[a.name+" [sql."+a.type.name+"]"]="string"==typeof(b=a.value)&&b.length>50?b.substring(0,47)+"...":b}),e("request(%d): execute %s %O",h.get(this),a,c)}let G=new d.Request(a,a=>{let c;if(a&&(!k.length||k.length&&a.message!==k[k.length-1].message)&&(a=new g(a,"EREQUEST"),this.stream&&this.emit("error",a),k.push(a)),delete this._cancel,k.length&&!this.stream&&((c=k.pop()).precedingErrors=k),!A){for(let a in l)D.removeListener(a,l[a]);this.parent.release(D),A=!0,c?e("request(%d): failed",h.get(this),c):e("request(%d): complete",h.get(this)),this.stream?b(null,null,m,x,o,j):b(c,f,m,x,o,j)}});for(let a in this._setCurrentRequest(G),G.on("columnMetadata",a=>{p=u(a,this.arrayRowMode),y=!1,1===a.length&&(a[0].colName===q||a[0].colName===r)&&(y=!0,z=[]),this.stream&&this.emit("recordset",p),this.arrayRowMode&&j.push(p)}),G.on("row",a=>{if(t||(t=[]),y)return z.push(a[0].value);for(let b of(F=this.arrayRowMode?[]:{},a))if(b.value=v(b.value,b.metadata),this.arrayRowMode)F.push(b.value);else{let a=F[b.metadata.colName];null!=a?a instanceof Array?a.push(b.value):F[b.metadata.colName]=[a,b.value]:F[b.metadata.colName]=b.value}this.stream?this.emit("row",F):t.push(F)}),G.on("doneInProc",(a,b)=>{if(null!=a&&(o.push(a),this.stream&&this.emit("rowsaffected",a)),0!==Object.keys(p).length){if(y){if(p[q]&&!0===E.parseJSON)try{F=0===z.length?null:JSON.parse(z.join(""))}catch(b){F=null;let a=new g(Error(`Failed to parse incoming JSON. ${b.message}`),"EJSON");this.stream&&this.emit("error",a),k.push(a)}else(F={})[Object.keys(p)[0]]=z.join("");z=null,this.stream?this.emit("row",F):t.push(F)}this.stream||(Object.defineProperty(t,"columns",{enumerable:!1,configurable:!0,value:p}),Object.defineProperty(t,"toTable",{enumerable:!1,configurable:!0,value(a){return n.fromRecordset(this,a)}}),f.push(t)),t=[],p={}}}),G.on("doneProc",(a,b,c)=>{x=c}),G.on("returnValue",(a,b,c)=>{m[a]=b}),this.parameters){if(!i(this.parameters,a))continue;let b=this.parameters[a];1===b.io?G.addParameter(b.name,s(b.type),w(b.value),{length:b.length,scale:b.scale,precision:b.precision}):G.addOutputParameter(b.name,s(b.type),w(b.value),{length:b.length,scale:b.scale,precision:b.precision})}D.callProcedure(G)})})}_pause(){super._pause(),this._currentRequest&&this._currentRequest.pause()}_resume(){super._resume(),this._currentRequest&&this._currentRequest.resume()}}},98207,(a,b,c)=>{"use strict";let d=a.r(46574),e=a.r(52852),f=a.r(22951),g=a.r(865);b.exports=Object.assign({ConnectionPool:e,Transaction:f,Request:g,PreparedStatement:d.PreparedStatement},d.exports),Object.defineProperty(b.exports,"Promise",{enumerable:!0,get:()=>d.Promise,set:a=>{d.Promise=a}}),Object.defineProperty(b.exports,"valueHandler",{enumerable:!0,value:d.valueHandler,writable:!1,configurable:!1}),d.driver.name="tedious",d.driver.ConnectionPool=e,d.driver.Transaction=f,d.driver.Request=g},98275,(a,b,c)=>{"use strict";b.exports=a.r(98207)},45404,a=>{"use strict";let b;var c=a.i(98275);let d={user:process.env.DB_USER,password:process.env.DB_PASSWORD,server:process.env.DB_SERVER,port:Number(process.env.DB_PORT)||1433,options:{encrypt:!1,trustServerCertificate:!0},pool:{max:10,min:0,idleTimeoutMillis:3e4},connectionTimeout:3e4,requestTimeout:3e4};async function e(){if(b)return b;try{return b=await c.default.connect({...d,database:process.env.DB_DATABASE})}catch(a){throw console.error(" Main DB Connection Failed:",a),b=null,a}}a.s(["getConnection",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3f51fcd0._.js.map